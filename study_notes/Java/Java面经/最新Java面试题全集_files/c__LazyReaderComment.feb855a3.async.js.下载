/*! For license information please see c__LazyReaderComment.feb855a3.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[90,24,85,89,115],{2449:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(2457),o=function(){return Promise.all([r.e(0),r.e(1),r.e(122)]).then(r.bind(null,3376)).then((function(t){return t.default}))};function i(){var t=Object(n.a)({loader:o,name:"TemplateSelector"}),e=t.loadSelector,r=t.showSelector;return{loadTemplateSelector:e,showTemplateSelector:function(t){return r(t,{width:t.isDesktop?1100:1140,maskClosable:!0,centered:!0})},contextHolder:t.contextHolder}}},2457:function(t,e,r){"use strict";r.d(e,"a",(function(){return m}));var n=r(0),o=r(433),i=r(252),a=function(t){var e=t.loader,r=n.useRef(null);return function(){return r.current?Promise.resolve(r.current):e().then((function(t){return r.current=t,r.current})).catch((function(t){return console.error(t.stack)}))}},c={modal:"styles-module_modal_8nT+9"};function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(){l=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function f(t,e,r,o){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var d={};function y(){}function h(){}function m(){}var v={};s(v,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(L([])));g&&g!==e&&r.call(g,i)&&(v=g);var w=m.prototype=y.prototype=Object.create(v);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,i,a,c){var l=p(t[n],t,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==u(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:h,configurable:!0}),h.displayName=s(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},E(_.prototype),s(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(w),s(w,c,"Generator"),s(w,i,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function m(t){var e=t.loader,r=t.name,u=y(o.a.useModal(),2),s=u[0],p=u[1],h=a({loader:e}),m=function(){var t,e=(t=l().mark((function t(e,o){var a,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:if(a=t.sent){t.next=6;break}return console.error("SelectorComponent for ".concat(r," load failed")),t.abrupt("return");case 6:return u=new Promise((function(t){var r=s.info({}),u=function(){var t,n;r.destroy(),null==e||null===(t=e.onClose)||void 0===t||t.call(e),null==o||null===(n=o.afterClose)||void 0===n||n.call(o)},l=f(f({},e),{},{onSelect:function(e){t(e),u()},onClose:function(){t(void 0),u()}});r.update(f(f({className:c.modal,icon:null,centered:!0,cancelText:""},o),{},{content:n.createElement(i.a,null,n.createElement(a,l))}))})),t.next=9,u;case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){d(i,n,o,a,c,"next",t)}function c(t){d(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}();return{loadSelector:function(){return h()},showSelector:m,contextHolder:p}}},2460:function(t,e,r){"use strict";var n=r(0),o=r.n(n),i=r(555),a=r(8),c=r.n(a),u=r(2713),l=r(1764);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===s(i)?i:String(i)),n)}var o,i}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=y(t);if(e){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(a,t);var e,r,n,i=d(a);function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"render",value:function(){var t=this.props,e=t.me,r=t.children,n=t.place,i=t.registerWithScene;return!window.appData.isYuque||e&&e.id?r:"comment"===n?o.a.createElement("div",{className:"comment-action"},__("{registerLogin} 语雀进行评论",{registerLogin:o.a.createElement("a",{onClick:function(){l.a.login()},"data-aspm-click":"d65962"},__("注册 / 登录"))})):o.a.createElement("div",{className:"login-action"},o.a.createElement(u.default.Login,{registerWithScene:i}))}}])&&f(e.prototype,r),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(n.Component);h.propTypes={me:c.a.object,place:c.a.string,children:c.a.node,registerWithScene:c.a.bool};e.a=Object(i.d)((function(t){return{me:t.me}}))(h)},2686:function(t,e,r){"use strict";var n=r(84),o=r.n(n),i={_bookGrayscaleConfig:null,getDefaultDocumentFormat:function(t,e,r){return e=e||"",r=r||{},o.a.DOC_DEFAULT_FORMAT[t]||o.a.FORMAT.LAKE}};e.a=i},2699:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return u}));var n=r(1735),o=r.n(n),i=(r(30),r(174));function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search;return e&&o.a.parse(e)[t]||""}var c=window.self!==window.top;function u(){var t=a("mode"),e=i.a.get("topicsPageMode");return"clean"===t?(i.a.set("topicsPageMode","clean"),"clean"):"normal"===t?(i.a.remove("topicsPageMode"),"normal"):e&&"clean"===e&&c?"clean":"normal"}},2713:function(t,e,r){"use strict";r.r(e);r(640);var n=r(327),o=(r(197),r(36)),i=(r(64),r(21)),a=r(0),c=r.n(a),u=r(8),l=r.n(u),s=r(13),f=r.n(s),p=r(2728),d=r(42),y="index-module_belongs_A3uam",h="index-module_meta_Jn6WP",m="index-module_truncation_g-6vp";function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function w(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==v(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===v(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var E={};E.Login=function(t){var e=t.goto,r=t.registerWithScene,n=e?"/login?goto=".concat(encodeURIComponent(e)):"/login";return r&&(n="/"===window.location.pathname||"/about"===window.location.pathname?"/login?register_with_scene=true&defaultType=org":"/login?register_with_scene=true"),Object(a.useEffect)((function(){Object(p.b)()}),[]),c.a.createElement(i.a,{href:n,size:t.size,type:"primary","data-aspm-click":"d65962"},__("登录 / 注册"))},E.Login.propTypes={size:l.a.oneOf(["small","large"]),goto:l.a.string},E.Job=function(t){var e=t.user,r=t.truncation;if(e)return c.a.createElement("span",{className:f()(h,w({},m,r))},c.a.createElement(d.b,{name:"user-job",width:16,height:16}),c.a.createElement("span",null,e.job_title||__("未填写")))},E.Job.propTypes={user:l.a.object.isRequired,truncation:l.a.bool},E.Location=function(t){var e=t.user,r=t.truncation,n=t.size,o=void 0===n?16:n;return e=e||{},c.a.createElement("span",{className:f()(h,w({},m,r))},c.a.createElement(d.b,{name:"user-location",width:o,height:o}),c.a.createElement("span",null,e.location||__("未填写")))},E.Location.propTypes={size:l.a.object.number,user:l.a.object.isRequired,truncation:l.a.bool},E.Department=function(t){var e,r=t.user,n=t.truncation;if(r)return c.a.createElement("div",null,null!==(e=r.departments)&&void 0!==e&&e.length?r.departments.map((function(t){return c.a.createElement("span",{className:f()(h,w({},m,n))},c.a.createElement(d.b,{name:"department",width:16,height:16}),c.a.createElement("span",null,t))})):c.a.createElement("span",{className:f()(h,w({},m,n))},c.a.createElement(d.b,{name:"department",width:16,height:16}),c.a.createElement("span",null,r.department||__("未填写"))))},E.Department.propTypes={user:l.a.object.isRequired,truncation:l.a.bool},E.Link=function(t){var e=t.user,r=t.className;return c.a.createElement("a",{href:"/".concat(e.login),title:e.name,className:r},e.name)},E.Link.propTypes={user:l.a.object.isRequired,className:l.a.string},E.Name=function(t){var e=t.user,r=t.className;return c.a.createElement("span",{title:e.name,className:r},e.name)},E.Name.propTypes={user:l.a.object.isRequired,className:l.a.string};var _=function(t){var e=t.belongs,r=t.onChange,i=b(Object(a.useState)(__("管理员")),2),u=i[0],l=i[1];return c.a.createElement(n.a,{trigger:["click"],overlay:c.a.createElement(o.a,{className:"dashboard-dropdown-menu",selectedKeys:[]},e.map((function(t,e){return c.a.createElement(o.a.Item,{key:t.type},c.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),function(t){r(t.type),l(t.text)}(t)}},t.text))})))},c.a.createElement("span",null,u,c.a.createElement("span",{className:f()("larkicon","larkicon-arrow-down",y)})))};_.propTypes={belongs:l.a.array.isRequired,onChange:l.a.func.isRequired},E.BelongMenu=_;e.default=E},2728:function(t,e,r){"use strict";r.d(e,"b",(function(){return l})),r.d(e,"a",(function(){return c}));var n=r(174),o="new_session",i="register",a="register/source";function c(){var t=new URLSearchParams(window.location.search).get("source");if(t)return t;var e=n.a.get(a);if(e)return e;var r,o=(window.Tracert||{})._refSpm,i=(r=o)&&r.split(".")[1];return i||null}function u(){var t=(window.Tracert||{}).spmBPos;t&&t!==o&&t!==i&&n.a.set(a,t)}function l(){"complete"===document.readyState?setTimeout(u,2e3):window.addEventListener("load",(function(){setTimeout(u,2e3)}))}},2803:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(191),o={doc:n.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_DOC_CREATION,board:n.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_BOARD_CREATION,table:n.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_TABLE_CREATION,sheet:n.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_SHEET_CREATION,repoHomePage:n.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_REPO_HOME_PAGE,teamHomePage:n.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_TEAM_HOME_PAGE,personalHomePage:n.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_PERSONAL_HOME_PAGE}},3455:function(t,e,r){"use strict";r.r(e),r.d(e,"isWebAppMiniApp",(function(){return L})),r.d(e,"isYuque",(function(){return T})),r.d(e,"isDesktopApp",(function(){return k})),r.d(e,"isYuqueMobileApp",(function(){return C})),r.d(e,"isDev",(function(){return A})),r.d(e,"isEN",(function(){return R})),r.d(e,"isWin",(function(){return N})),r.d(e,"myNotesConsts",(function(){return I})),r.d(e,"editorConsts",(function(){return D})),r.d(e,"getFilterBarConfig",(function(){return M})),r.d(e,"downloadFileHandler",(function(){return F})),r.d(e,"getLocale",(function(){return U})),r.d(e,"getNoteDetailLink",(function(){return G})),r.d(e,"getPreviewImage",(function(){return B})),r.d(e,"parseCardData",(function(){return q})),r.d(e,"getDefaultShortCutText",(function(){return V})),r.d(e,"combineNotes",(function(){return z})),r.d(e,"orderTag",(function(){return H})),r.d(e,"openDocLink",(function(){return W})),r.d(e,"getLocaleMonthName",(function(){return K})),r.d(e,"showImgBrowser",(function(){return $})),r.d(e,"hotKeys",(function(){return J})),r.d(e,"NOTE_TAG_WITH_HOTKEY_CLASS",(function(){return Q}));var n,o=r(30),i=r.n(o),a=r(343),c=r.n(a),u=r(1810),l=r(233),s=r.n(l),f=r(532);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===p(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var m=window,v=m.appData,b=m.navigator,g=m.location,w=v||{},E=w.env,_=w.me,O=void 0===_?{}:_,S=w.locale,j="note/pinned/show/".concat(O.id),x="note/order/".concat(O.id),P=["January","February","March","April","May","June","July","August","September","October","November","December"],L=window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp,T=v.isYuque,k=v.isDesktopApp,C=v.isYuqueMobileApp,A="local"===E,R="en-us"===S,N="win32"===b.platform.toLowerCase(),I={NOTE_ORDER_KEY:x,NOTE_PINNED_SHOW_KEY:j,NOTE_QUERY_STATUS_INTERVAL:6e4,NOTE_WS_RECONNECT_DEFUALT_INTERVAL:12e4,NOTE_ITEM_CONTENT_MIN_HEIGHT:214,NOTE_ALLOW_PAGEPATH_LIST:["/dashboard/notes","/desktop/notes"],NOTE_LIST_VIEW_MODES:{lite:"lite",full:"full"},COLLAPSE_BTN_CLASS:"note-item-collapse",SUBMIT_BTN_CLASS:"note-item-submit",NOTE_LIST_ITEM_CLASS:"note-list-item",NOTE_LIST_READ_TAG_ADD_CLASS:"note-list-item-read-tag-add"},D={NOTE_EDITOR_AUTO_SAVE_INTERVAL:3e4},M=function(){var t,e;return T?(h(t={},f.FILTER_TYPES.image,__("图片")),h(t,f.FILTER_TYPES.bookmark,__("书签")),h(t,f.FILTER_TYPES.attachment,__("附件")),h(t,f.FILTER_TYPES.wechatRobot,__("来自微信")),h(t,f.FILTER_TYPES.share,__("分享中")),t):(h(e={},f.FILTER_TYPES.image,__("图片")),h(e,f.FILTER_TYPES.bookmark,__("书签")),h(e,f.FILTER_TYPES.attachment,__("附件")),h(e,f.FILTER_TYPES.dingTalkRobot,__("来自钉钉")),h(e,f.FILTER_TYPES.share,__("分享中")),e)},F=function(t,e){var r=new URL(t);r.searchParams.append("yuque-desktop-download",""),e&&r.searchParams.append("filename",encodeURIComponent(e)),fetch(r.toString())},U=function(){return(new URLSearchParams(g.search).get("language")||"").startsWith("en")?"en":"zh-cn"},G=function(t){var e=t.slug,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).hostUrl,n=void 0===r?"".concat(g.protocol,"//").concat(g.host):r;return"".concat(n,"/r/note/").concat(e)},B=function(t,e){var r=e.size||80;try{var n=new URL(t);return n.search="",n.hash="",e.noResize?n.toString():(n.searchParams.append("x-oss-process","image/resize,m_fill,h_".concat(r,",w_").concat(r)),n.toString())}catch(e){return t}},Y=(h(n={},f.FILTER_TYPES.image,'card[name="image"]'),h(n,f.FILTER_TYPES.bookmark,'card[name="bookmarklink"]'),h(n,f.FILTER_TYPES.attachment,'card[name="file"],card[name="localdoc"]'),n),q=function(t,e){return[f.FILTER_TYPES.all,f.FILTER_TYPES.share,f.FILTER_TYPES.dingTalkRobot,f.FILTER_TYPES.wechatRobot].includes(e)?t:t.map((function(t){var r=t.content.source,n=Y[e];if(r){var o=(new DOMParser).parseFromString(r,"text/html").body.querySelectorAll(n),i=[];o.forEach((function(t){var e=t.getAttribute("value");if(e){var r=JSON.parse(decodeURIComponent(e).slice(5));i.push(y(y({},r),{},{uuid:s()(10)}))}})),t.cards=i.filter((function(t){return e===f.FILTER_TYPES.image||e===f.FILTER_TYPES.attachment?t.src:e===f.FILTER_TYPES.bookmark&&(t.detail||(t.detail={_serializer:"web.editor_link_detail"}),t.detail)}))}return t})).filter((function(t){return t.cards&&t.cards.length}))},V=function(){return __("按 {shortcut} 发送",{shortcut:N?"Ctrl + Enter":"⌘ Enter"})},z=function(t){var e="";return t.forEach((function(t){e+=(t||"").replace(/<!doctype\s+lake>/g,"").replace(/<meta[^>]{0,1024}?\/>/g,"")})),["<!doctype lake>",'<meta name="typography" content="classic" />',e].join("")},H=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t)return[];var r=[],n=[];return t.forEach((function(t){e&&e.some((function(e){return(null==e?void 0:e.id)===t.id}))?n.push(y(y({},t),{},{selected:!0})):r.push(t)})),[].concat(r,n)},W=function(t,e){if(!k)return window.open(t);var r=new URL(g.href);r.searchParams.get("open_doc_in_desktop")||r.searchParams.get("open_in_desktop")?window.parent.postMessage({name:"openDocInDesktop",args:[t,e]},"*"):window.openExternalLink(t,!0)},K=function(t){if(i()(t).format("YYYY-MM")===i()().format("YYYY-MM"))return __("本月");var e=i()(t).format("YYYY"),r=i()(t).format("M");if(R){var n=P[parseInt(r,10)];if(n)return"".concat(n," year")}return"".concat(e," ").concat(__("年")," ").concat(r," ").concat(__("月"))},$=function(t,e){var r=t.filter((function(t){return t.src})).map((function(t){return new Promise((function(e){if(t.width||t.height)e(t);else{var r=document.querySelector("#note-image-item-".concat(t.uuid));if(r){var n=r.getAttribute("origin-width"),o=r.getAttribute("origin-height");if(n||o)e(y(y({},t),{},{width:n,height:o}));else{var i=B(t.src,{noResize:!0}),a=new Image;a.src=i,a.onload=function(){var n=a.width,o=a.height;r.setAttribute("origin-width",String(n)),r.setAttribute("origin-height",String(o)),e(y(y({},t),{},{width:n,height:o}))}}}}}))}));Promise.all(r).then((function(t){var r=t.map((function(t){return{src:t.src,msrc:t.src,w:t.width,h:t.height}}));u.a.previewImages(r,e)}))},J={openTag:{key:c.a.mac?"⌘+option+k":"ctrl+alt+k",title:c.a.mac?"⌥ ⌘ K":"Alt Ctrl K"}},Q="note-tag-with-hotkey"},3458:function(t,e,r){"use strict";var n=r(0),o=r.n(n),i=r(107),a=r.n(i),c=r(233),u=r.n(c),l=r(84),s=r.n(l),f=r(2853),p=r.n(f),d=r(3484),y=r(616),h=r(111),m=r(3481),v=r.n(m),b=r(3482),g=r.n(b),w=r(1788),E=r.n(w),_=r(3483),O=r(431),S=r(165),j=r(174),x=r(38);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==P(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===P(i)?i:String(i)),n)}var o,i}var T,k=a()("editor:cache"),C=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.key=e}var e,r,n;return e=t,(r=[{key:"retrieve",value:function(){var t={format:null,value:null};k("[retrieve]key: ",this.key);var e=j.a.get(this.key);if(!e)return null;k("[retrieve]find text: ",e);var r=p.a.guessFormat(e);return t.format=r,t.value=e,k("[retrieve]doc: ",t),t}},{key:"put",value:function(t,e){k("[put]content cached: ","".concat(this.key," -> ").concat(t)),j.a.set(this.key,t)}},{key:"clear",value:function(){j.a.remove(this.key)}}])&&L(e.prototype,r),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function R(t){return function(t){if(Array.isArray(t))return N(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function I(){I=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function y(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var b=y.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==A(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function D(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function M(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){D(i,n,o,a,c,"next",t)}function c(t){D(i,n,o,a,c,"throw",t)}a(void 0)}))}}function F(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,G(n.key),n)}}function U(t,e,r){return(e=G(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function G(t){var e=function(t,e){if("object"!==A(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===A(e)?e:String(e)}var B=a()("biz:lakex_mini_editor_base"),Y=(null===(T=window.appData)||void 0===T?void 0:T.me)||{},q=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),U(this,"getDefaultSuggestions",(function(){return e.options.getDefaultSuggestions?e.options.getDefaultSuggestions():[]})),U(this,"setEngine",(function(t){e._engine=t})),U(this,"getEngine",(function(){return e._engine})),U(this,"setValue",(function(t){var r=t;t?t.startsWith("<")?(r={type:"lake",value:t},e._engine.setDocument(r)):"string"==typeof t&&(r={type:"json",value:JSON.parse(t)},e._engine.setDocument(r)):e._engine.setDocument()})),U(this,"getValue",(function(){return e._engine?e._engine.getPureContent():e.getDefaultValue()})),U(this,"isEmpty",(function(){return!e._engine||e._engine.isEmpty()})),U(this,"getSafetyValue",M(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.contentReady();case 2:return t.abrupt("return",e.getValue());case 3:case"end":return t.stop()}}),t)})))),U(this,"getHtml",(function(){return e._engine?e._engine.getPureHtml():null})),U(this,"focus",(function(t){if(!e._engine)return null;e._engine.focus(t)})),U(this,"contentReady",M(I().mark((function t(){var r,n;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._engine){t.next=2;break}return t.abrupt("return",null);case 2:return r=0,n=function t(n,o){e._engine.canGetDocument()?n():r>10?o():(r++,setTimeout((function(){t(n,o)}),1e3))},t.abrupt("return",new Promise(n));case 5:case"end":return t.stop()}}),t)})))),U(this,"saveAll",(function(){if(!e.options.disableCache){var t={format:s.a.FORMAT.LAKE,value:e.getValue(),html:e.getHtml()};e.saveToCache(t)}})),this.options=r,this.from=r.from||"reply",this.targetType=r.targetType,this.belong=r.belong,this.belongType=r.belongType,this.group=r.group,this.target=r.target,this.attachType=r.attachType,this.isEditMode=!!r.target,this.type=this.getType(),this.ctoken=Object(O.a)(window);var n=this.getCacheKey();this.cacheKeys={title:"".concat(n,"/title"),content:"".concat(n,"/content")},this.editorCache=new C(this.cacheKeys.content),this.uuid=this.getUuid(),this._engine=null,this.initialDocument=null,this.init()}var e,r,n;return e=t,r=[{key:"init",value:function(){this.initialDocument=this.getInitialDocument(),B("init use: ",this.initialDocument)}},{key:"buildOptions",value:function(t){var e={supportTranslate:g()(),supportImgOCR:E()(),hideEmbedButton:v()(),hideVipIcon:Object(_.a)(),board:{boardWebProxyParams:{webProxy:x.a,userId:null==Y?void 0:Y.id,spm:h,appData:window.appData}},image:{uploadFileURL:this.getImageUploadUrl(),accept:Object(y.getImageAcceptArr)()},file:{uploadFileURL:this.getFileUploadUrl(),accept:Object(y.getFileAcceptArr)(),localdocAccept:Object(y.getLocalDocAcceptArr)(),embedButtonStatus:Object(y.getIsDiabledPreviewAndEmbed)()},transfer:{transferFilesURL:this.getTransferUrl()},localdoc:{uploadFileURL:this.getFileUploadUrl(),accept:Object(y.getLocalDocAcceptArr)()},mention:{mentionURL:S.a.patchGroupIdToUrl(this.getMentionActionUrl()),defaultList:this.getDefaultSuggestions()},lockedtext:{action:this.getCryptoUrl()},placeholder:(null==t?void 0:t.placeholder)||this.getPlaceholder(),link:{autoCompleteLink:null==t?void 0:t.autoCompleteLink},video:{uploadAction:this.getMediaUploadUrl("video"),queryAction:"/api/video",accept:Object(y.getVideoAcceptArr)()},audio:{uploadFileURL:this.getMediaUploadUrl("audio"),queryURL:"/api/video",accept:Object(y.getAudioAcceptArr)()},vote:{allowVote:!0,queryDetailUrl:"api/votes",queryCheckUrl:"api/votes/mine",voteUrl:"api/votes"},yuque:{disableEmbedView:this.getDisableYuqueCardEmbedView()},materialLibrary:{component:o.a.createElement(d.a,{storage:j.a,webProxy:x.a})},fullscreen:{enable:this.getEnableFullEditor()}},r=[],n=this.getBlockedCards();return n&&n.length>1&&(r=Array.from(new Set([].concat(R(r),R(n))))),e.disabledPlugins=r,e}},{key:"getProps",value:function(){return{format:this.getFormat(),defaultValue:this.getDefaultValue(),autoFocus:this.getAutoFocus(),isMiniSize:this.isMiniSize()}}},{key:"getType",value:function(){return this.options.type||"unknown"}},{key:"getAutoFocus",value:function(){var t=this.options.autoFocus;return null!=t?t:!!this.options.useMiniGuide}},{key:"isMiniSize",value:function(){return!1}},{key:"getEnableFullEditor",value:function(){return!0}},{key:"getBlockedCards",value:function(){return["video","checkIn","vote","audio","premium"]}},{key:"getUuid",value:function(){var t=this.cacheKeys.uuid,e=j.a.get(t);return e||(e=u()(32)+u()(32),j.a.set(t,e)),e}},{key:"getDefaultFormat",value:function(){return s.a.FORMAT.LAKE}},{key:"getFormat",value:function(){var t=this.options.format;return t||this.initialDocument.format}},{key:"getPlaceholder",value:function(){return this.options.placeholder}},{key:"getInitialDocument",value:function(){if(this.initialDocument)return this.initialDocument;var t=this.loadFromCache();if(B("cached document:",t),this.isEditMode){var e=this.getContentObject();return B("adapted content: ",e),t&&(B("merge with cached content",t),e.format=t.format||e.format,e.title=t.title||e.title,e.value=t.value||e.value),e}if(t)return t.format=t.format||this.getDefaultFormat(),t;var r=this.loadFromUrl();return r||{format:this.getDefaultFormat(),title:null,value:null}}},{key:"getContentObject",value:function(t){return{format:(t=t||this.target||{}).format||this.getDefaultFormat(),title:t.title||t.name||"",value:t.value||t.body_asl||t.content}}},{key:"getDefaultValue",value:function(){var t=this.options.defaultValue;return t||this.initialDocument.value}},{key:"getFullUrl",value:function(t){return this.isEditMode&&!this.options.useBelongAttach?"".concat(t,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(t,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):null}},{key:"getTransferUrl",value:function(){var t="/api/upload/copy?type=attachment",e=this.getFullUrl(t);return e||(e="".concat(t,"&attachable_uuid=").concat(this.uuid,"&from=").concat(this.from)),e}},{key:"getFileUploadUrl",value:function(){var t="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.getFullUrl(t)}},{key:"getMediaUploadUrl",value:function(t){var e="/api/video?ctoken=".concat(this.ctoken,"&format=").concat(t);return this.getFullUrl(e)}},{key:"getImageUploadUrl",value:function(){var t=this.getFileUploadUrl();return t?t.replace("&type=attachment","&type=image"):null}},{key:"getMentionActionUrl",value:function(){var t="";return this.isEditMode&&!this.options.useBelongAttach?t="/api/users/complete?target_type=".concat(this.attachType,"&target_id=").concat(this.target.id):this.belong&&(t="/api/users/complete?target_type=".concat(this.attachType,"&target_id=").concat(this.belong.id)),t}},{key:"getCryptoUrl",value:function(){return"/api/services/crypto"}},{key:"getDisableYuqueCardEmbedView",value:function(){return this.options.disableYuqueCardEmbedView}},{key:"saveToCache",value:function(t){B("save to cache:",t),t.format&&(t.title&&j.a.set(this.cacheKeys.title,t.title),this.needCacheContent(t)?this.editorCache.put(t.value,t.format):B("value is empty or the same as origin, ignore cache"))}},{key:"needCacheContent",value:function(t){if(!t.value)return!1;if(p.a.isBlank(t))return this.editorCache.clear(),!1;if(!this.target)return!0;var e=this.getContentObject();return!p.a.isContentSame(t.format,e.value,t.value)}},{key:"reset",value:function(){B("reset editor"),this.clearCache(),this._engine&&this._engine.setDocument()}},{key:"isContentChanged",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!t){var e=this.loadFromCache();e&&(t=e.value)}if(!this.target)return!0;var r="<cursor />";return this.target.body_asl.trim().replace(r,"")!==t.trim().replace(r,"")}},{key:"clearCache",value:function(){var t=this;B("clear cache"),Object.keys(this.cacheKeys).forEach((function(e){j.a.remove(t.cacheKeys[e])}))}},{key:"getCacheKey",value:function(){return this.isEditMode&&this.target&&this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/").concat(this.target.id,"/edit"):this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/new"):"autosave/".concat(this.type)}},{key:"loadFromUrl",value:function(){}},{key:"loadFromCache",value:function(){var t=!1,e={format:null,title:null,value:null},r=this.editorCache.retrieve();if(r&&(t=!0,e.format=r.format,e.value=r.value),this.cacheKeys.title){var n=j.a.get(this.cacheKeys.title);n&&(t=!0,e.title=n)}return t?e:null}}],n=[{key:"getEmptyDocument",value:function(){return{format:s.a.FORMAT.LAKE,value:null}}}],r&&F(e.prototype,r),n&&F(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.a=q},3459:function(t,e,r){"use strict";var n=r(3504),o={};e.a=window.isDesktopOfflineApp?o:n.a},3462:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var a=r(3455).myNotesConsts,c=r(46),u=r(168),l=i((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)})),s=a.COLLAPSE_BTN_CLASS,f=a.SUBMIT_BTN_CLASS,p=10;function d(t){var e=document.querySelectorAll(".".concat(t));if(e&&e.length){var r=document.body.getBoundingClientRect().height;e.forEach((function(e){var n=e.getBoundingClientRect().top,o=e.closest(".note-list-item").querySelector(".right-tool-".concat(t));o&&(o.style.display=n-r>p?"flex":"none")}))}}l.scrollToTop=c((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.querySelector("#mynote-container .note-list-scroll"),r={top:0,left:0};t.silent||(r.behavior="smooth"),e.scrollTo(r)}),100),l.scrollToElem=c((function(t){var e=t.id,r=document.querySelector("#note-".concat(e));if(r){var n=r.offsetTop;document.querySelector("#mynote-container .note-list-scroll").scrollTo({top:n,left:0,behavior:"smooth"})}}),100),l.fixListContainerHeight=function(){var t=document.querySelector(".material-library-view"),e=document.querySelector(".note-list-container .note-list");if(t&&e){var r=t.getBoundingClientRect().height-82,n=document.querySelector(".note-tag-container");n&&(r-=n.getBoundingClientRect().height),e.style.height="".concat(r,"px")}},l.fixNoteViewer=c((function(t){var e=t.id,r=document.querySelector("#note-".concat(e)),n=document.querySelector("#mynote-container .note-list-scroll");if(r&&n&&r.offsetTop>=0&&r.offsetTop+10<n.scrollTop){var o=r.offsetTop;n.scrollTo({top:o,left:0,behavior:"smooth"})}}),100),l.checkSubmitBtnShow=function(){return d(f)},l.checkCollapseBtnShow=function(){return d(s)};var y=u((function(){l.checkSubmitBtnShow(),l.checkCollapseBtnShow()}),500);l.handleListScroll=function(){var t=document.querySelector("#mynote-container .note-list-scroll");t&&(t.removeEventListener("scroll",y),t.addEventListener("scroll",y))},t.exports=l},3463:function(t,e,r){"use strict";var n,o=SyntaxError,i=Function,a=TypeError,c=function(t){try{return i('"use strict"; return ('+t+").constructor;")()}catch(t){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(t){u=null}var l=function(){throw new a},s=u?function(){try{return l}catch(t){try{return u(arguments,"callee").get}catch(t){return l}}}():l,f=r(3522)(),p=Object.getPrototypeOf||function(t){return t.__proto__},d={},y="undefined"==typeof Uint8Array?n:p(Uint8Array),h={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":f?p([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?p(p([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&f?p((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&f?p((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?p(""[Symbol.iterator]()):n,"%Symbol%":f?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":s,"%TypedArray%":y,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};try{null.error}catch(t){var m=p(p(t));h["%Error.prototype%"]=m}var v=function t(e){var r;if("%AsyncFunction%"===e)r=c("async function () {}");else if("%GeneratorFunction%"===e)r=c("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=c("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&(r=p(o.prototype))}return h[e]=r,r},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},g=r(3464),w=r(3525),E=g.call(Function.call,Array.prototype.concat),_=g.call(Function.apply,Array.prototype.splice),O=g.call(Function.call,String.prototype.replace),S=g.call(Function.call,String.prototype.slice),j=g.call(Function.call,RegExp.prototype.exec),x=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P=/\\(\\)?/g,L=function(t,e){var r,n=t;if(w(b,n)&&(n="%"+(r=b[n])[0]+"%"),w(h,n)){var i=h[n];if(i===d&&(i=v(n)),void 0===i&&!e)throw new a("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new o("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new a('"allowMissing" argument must be a boolean');if(null===j(/^%?[^%]*%?$/,t))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(t){var e=S(t,0,1),r=S(t,-1);if("%"===e&&"%"!==r)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new o("invalid intrinsic syntax, expected opening `%`");var n=[];return O(t,x,(function(t,e,r,o){n[n.length]=r?O(o,P,"$1"):e||t})),n}(t),n=r.length>0?r[0]:"",i=L("%"+n+"%",e),c=i.name,l=i.value,s=!1,f=i.alias;f&&(n=f[0],_(r,E([0,1],f)));for(var p=1,d=!0;p<r.length;p+=1){var y=r[p],m=S(y,0,1),v=S(y,-1);if(('"'===m||"'"===m||"`"===m||'"'===v||"'"===v||"`"===v)&&m!==v)throw new o("property names with quotes must have matching quotes");if("constructor"!==y&&d||(s=!0),w(h,c="%"+(n+="."+y)+"%"))l=h[c];else if(null!=l){if(!(y in l)){if(!e)throw new a("base intrinsic for "+t+" exists, but the property is not available.");return}if(u&&p+1>=r.length){var b=u(l,y);l=(d=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:l[y]}else d=w(l,y),l=l[y];d&&!s&&(h[c]=l)}}return l}},3464:function(t,e,r){"use strict";var n=r(3524);t.exports=Function.prototype.bind||n},3465:function(t,e,r){"use strict";var n=String.prototype.replace,o=/%20/g,i="RFC1738",a="RFC3986";t.exports={default:a,formatters:{RFC1738:function(t){return n.call(t,o,"+")},RFC3986:function(t){return String(t)}},RFC1738:i,RFC3986:a}},3470:function(t,e,r){"use strict";t.exports={getSafeBlankLinkProps:function(t){return t?{target:"_blank",rel:"noopener noreferrer nofollow"}:{}},sanitizeUrl:function(t){return"string"!=typeof t||this._isURLProtocolValid(t)?t:""},_isURLProtocolValid:function(t){var e=t.toLowerCase();return!!["http:","https:","data:","dingtalk:"].some((function(t){return e.startsWith(t)}))||(!(!e.startsWith("./")&&!e.startsWith("/"))||-1===e.indexOf(":"))}}},3471:function(t,e,r){"use strict";var n=r(34);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,a=void 0,a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},a.apply(this,arguments)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(f,t);var e,r,o,s=u(f);function f(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),s.apply(this,arguments)}return e=f,(r=[{key:"buildOptions",value:function(t){var e=a(l(f.prototype),"buildOptions",this).call(this,t);return e.disabledPlugins.push("mobile"),n.ua.mobile&&e.disabledPlugins.push("placeholder","slash"),e}},{key:"getBlockedCards",value:function(){return["video","audio","premium","checkIn"]}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),f}(r(3458).a);e.a=s},3472:function(t,e,r){"use strict";r(113);var n=r(35),o=r(0),i=r.n(o),a=r(13),c=r.n(a),u=r(168),l=r.n(u),s=r(968),f=r(426),p={list:"TagList-module_list_g-vtQ",item:"TagList-module_item_bUgF8",active:"TagList-module_active_EPfJt",delete:"TagList-module_delete_NtLM0",wrapper:"TagList-module_wrapper_wAu1a",hideMore:"TagList-module_hideMore_2Kx5n",expand:"TagList-module_expand_J-EtW",addTag:"TagList-module_addTag_P9XTi",rightSide:"TagList-module_rightSide_65+zS",canSelect:"TagList-module_canSelect_XVnT1",name:"TagList-module_name_-HZCJ",highLight:"TagList-module_highLight_Fx+g3",count:"TagList-module_count_JG6aO",expandBtn:"TagList-module_expandBtn_kA52P",expanded:"TagList-module_expanded_tVFvP",icon:"TagList-module_icon_zLTbc"};function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function y(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==d(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===d(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var v=20;e.a=function(t){var e,r=t.data,a=t.onDelete,u=t.renderFirstItem,d=t.showCount,m=t.hideMore,b=t.storageKey,g=t.localStorage,w=t.currentTagId,E=t.onSelect,_=t.renderRightSide,O=t.query,S=r||[];O&&(S=S.filter((function(t){return null==t?void 0:t.name.includes(O)})));var j=!1;b&&g&&g.get(b)&&(j=!0);var x=h(Object(o.useState)(j),2),P=x[0],L=x[1],T=h(Object(o.useState)(!1),2),k=T[0],C=T[1],A=Object(o.useRef)(null),R=function(){if(m&&A&&A.current){var t=A.current.children;if(!t||t.length<=2)C(!1);else{var e=t[1],r=t[t.length-1],n=e.getBoundingClientRect().top!==r.getBoundingClientRect().top;C(n)}}};return Object(o.useEffect)((function(){R()}),[r,O]),Object(o.useEffect)((function(){g&&b&&(P?g.set(b,"true"):g.remove(b))}),[P]),Object(o.useEffect)((function(){var t=l()(R,200);return m&&window.addEventListener("resize",t,!1),function(){window.removeEventListener("resize",t,!1)}}),[]),i.a.createElement("div",{"data-testid":"note-tag-list-wrapper",className:c()(p.wrapper,(e={},y(e,p.expand,P),y(e,p.hideMore,m),e),"note-tag-list")},i.a.createElement("div",{className:p.list,ref:A},u&&i.a.createElement("div",{className:p.addTag},u()),_||k?i.a.createElement("div",{className:p.rightSide},k&&i.a.createElement("div",{className:c()(p.expandBtn,"tag-list-expand",y({},p.expanded,P)),onClick:function(t){t.stopPropagation(),L(!P)}},i.a.createElement(s.default,{className:p.icon})),!O&&_&&_()):null,S.map((function(t){var e,r=null==t?void 0:t.name;if(!r)return null;var o=r.length>v,u=o?"".concat(r.slice(0,20),"..."):r,l=w===t.id;return i.a.createElement(n.a,{title:o?r:null},i.a.createElement("div",{"data-testid":"note-tag-list-item",className:c()(p.item,(e={},y(e,p.active,l),y(e,p.canSelect,!!E),e)),key:null==t?void 0:t.name,onClick:function(){E&&E(t.id)}},function(t){if(!O)return i.a.createElement("span",{className:p.name},t);var e=t.indexOf(O);return e<0?i.a.createElement("span",{className:p.name},t):i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:p.name},t.slice(0,e)),i.a.createElement("span",{className:c()(p.name,p.highLight)},O),i.a.createElement("span",{className:p.name},t.slice(e+O.length)))}(u),function(t){return d&&void 0!==t.count?i.a.createElement("span",{className:p.count},"(",t.count,")"):null}(t),a&&i.a.createElement("span",{"data-testid":"note-tag-list-delete",className:p.delete,onClick:function(){return a(t)}},i.a.createElement(f.default,null))))}))))}},3478:function(t,e,r){"use strict";var n=r(3465),o=Object.prototype.hasOwnProperty,i=Array.isArray,a=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),c=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(r[n]=t[n]);return r};t.exports={arrayToObject:c,assign:function(t,e){return Object.keys(e).reduce((function(t,r){return t[r]=e[r],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var o=e[n],a=o.obj[o.prop],c=Object.keys(a),u=0;u<c.length;++u){var l=c[u],s=a[l];"object"==typeof s&&null!==s&&-1===r.indexOf(s)&&(e.push({obj:a,prop:l}),r.push(s))}return function(t){for(;t.length>1;){var e=t.pop(),r=e.obj[e.prop];if(i(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);e.obj[e.prop]=n}}}(e),t},decode:function(t,e,r){var n=t.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(t){return n}},encode:function(t,e,r,o,i){if(0===t.length)return t;var c=t;if("symbol"==typeof t?c=Symbol.prototype.toString.call(t):"string"!=typeof t&&(c=String(t)),"iso-8859-1"===r)return escape(c).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var u="",l=0;l<c.length;++l){var s=c.charCodeAt(l);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||i===n.RFC1738&&(40===s||41===s)?u+=c.charAt(l):s<128?u+=a[s]:s<2048?u+=a[192|s>>6]+a[128|63&s]:s<55296||s>=57344?u+=a[224|s>>12]+a[128|s>>6&63]+a[128|63&s]:(l+=1,s=65536+((1023&s)<<10|1023&c.charCodeAt(l)),u+=a[240|s>>18]+a[128|s>>12&63]+a[128|s>>6&63]+a[128|63&s])}return u},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(i(t)){for(var r=[],n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)},merge:function t(e,r,n){if(!r)return e;if("object"!=typeof r){if(i(e))e.push(r);else{if(!e||"object"!=typeof e)return[e,r];(n&&(n.plainObjects||n.allowPrototypes)||!o.call(Object.prototype,r))&&(e[r]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(r);var a=e;return i(e)&&!i(r)&&(a=c(e,n)),i(e)&&i(r)?(r.forEach((function(r,i){if(o.call(e,i)){var a=e[i];a&&"object"==typeof a&&r&&"object"==typeof r?e[i]=t(a,r,n):e.push(r)}else e[i]=r})),e):Object.keys(r).reduce((function(e,i){var a=r[i];return o.call(e,i)?e[i]=t(e[i],a,n):e[i]=a,e}),a)}}},3481:function(t,e){t.exports=function(){var t=window.appData||{},e=t.isYuque,r=t.organization,n=t.group,o=void 0===n?{}:n,i=r&&r.id;return!!e&&(!("Group"!==(null==o?void 0:o.type)||i)||!(!r||r.isPremium))}},3482:function(t,e,r){var n=r(180).isPaidCheckAll;t.exports=function(){return!(window.appData||{}).isYuque||!!n()}},3483:function(t,e,r){"use strict";var n=r(180).isPaidCheckAll;e.a=function(){if(!(window.appData||{}).isYuque)return!0;var t=window.appData,e=t.organization,r=t.group,o=void 0===r?{}:r;return!(!e||!n())||!e&&"Group"===(null==o?void 0:o.type)}},3484:function(t,e,r){"use strict";r.d(e,"a",(function(){return st}));r(645);var n=r(214),o=r(0),i=r.n(o),a=r(8),c=r.n(a),u=(r(61),r(23)),l=(r(227),r(112)),s=r(13),f=r.n(s),p=r(355),d=r.n(p),y=r(457),h=r(3515),m=r(3472),v=r(3516),b=r(937),g="sidebar-toolbar-module_wrapper_oE4lW",w="sidebar-toolbar-module_insertBtn_RY-1c",E=f()(g,"note-list-toolbar"),_=function(t){var e=t.item,r=t.onInsertToLakeEditor;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:E,"data-testid":"note-list-toolbar"},i.a.createElement("span",{className:w,onClick:function(){return r(e)}},i.a.createElement(b.default,{width:14,height:14}),__("插入文档"))))};_.defaultProps={onInsertToLakeEditor:function(){}},_.propTypes={item:c.a.object,onInsertToLakeEditor:c.a.func};var O=_,S=r(3462),j=r(3459),x=r(3455),P=r(3512),L=r(3513);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(Object(r),!0).forEach((function(e){A(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function A(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==T(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===T(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var I=function(){var t=R(Object(o.useState)(!1),2),e=t[0],r=t[1],n=R(Object(o.useState)(!0),2),i=n[0],a=n[1],c=Object(L.a)({}),l=c.state,s=l.listData,f=l.listLoading,p=l.hasMore,d=l.noteTags,y=l.noteFilterParams,h=l.pinnedListData,m=c.getListData,v=c.getNotes,b=c.getNoteTags,g=c.onChangeFilterParams,w=c.onReset,E=c.onRemoveNote,_=c.onRemoveNotes,O=Object(P.a)({listData:s,getNotes:v,isDesktopApp:x.isDesktopApp}).setLoadRef,S=Object(o.useCallback)((function(){y.search&&w()}),[y]),T=Object(o.useCallback)((function(t){t!==y.currentTagId?g({currentTagId:t}):g({currentTagId:null})}),[y]);return{state:{listData:s,pinnedListData:h,listLoading:f,orderBy:y.orderBy,hasMore:p,searchValue:y.search,searchActive:e,filterTab:y.filterTab,noteTags:d,currentTagId:y.currentTagId,noteStatus:y.status,toDocList:[],showPinned:i},getNotes:v,onLoadNote:function(t){var e=t.id,r=R(m(e),2),n=r[0],o=r[1],i=n.slice(),a=i.findIndex((function(t){return t.id===e}));return i[a].loading=!0,o(i),j.a.NoteCtlImpl.show({id:e,merge_dynamic_data:0}).then((function(t){var e=n.slice();e[a]=C(C({},t),{},{expanded_at:new Date}),o(e)})).catch((function(){var t=n.slice();i[a].loading=!1,o(t),u.a.error(__("获取内容失败，请再试一次"))}))},onCollapseNote:function(t){var e=t.id,r=R(m(e),2),n=r[0],o=r[1],i=n.slice(),a=i.findIndex((function(t){return t.id===e}));delete i[a].expanded_at,delete i[a].changed_at,delete i[a].loading,o(i)},onRemoveNote:E,onRemoveNotes:_,onSearchNote:function(t){g({search:t})},onSearchReset:S,setSearchActive:r,getNoteTags:b,onSelectTag:T,onChangeFilterParams:g,onReset:w,setLoadRef:O,setShowPinned:a}},D="index-module_wrapper_kkqhF",M="index-module_tagContainer_TFFU4",F="index-module_show_oAR0z",U="index-module_tagContainerExpand_7mxch",G="index-module_tagTipBar_g7usD",B="index-module_icon_nCjEV",Y="index-module_notesList_xu6a8",q="index-module_liteWrapper_fYo2B";function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function z(){return z=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},z.apply(this,arguments)}function H(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==V(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===V(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function W(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var $=function(t){var e,r=I(t),n=t.storage,a=W(Object(o.useState)(!1),2),c=a[0],u=a[1],s=r.state,p=s.listLoading,b=s.noteTags,g=s.currentTagId,w=r.onSelectTag,E=r.setSearchActive,_=r.onSearchReset,j=r.onSearchNote;Object(o.useEffect)((function(){Object(S.fixListContainerHeight)()}),[c]);var P=!d()(b);return i.a.createElement("div",{"data-testid":"mynote-list-container",id:"mynote-container",className:D},i.a.createElement(v.a,{searchValue:r.state.searchValue,searchActive:r.state.searchActive,setSearchActive:E,onSearchReset:_,onSearchNote:j,activeMode:!0,isDesktopApp:x.isDesktopApp,isLiteMode:!0}),i.a.createElement("div",{className:f()(M,(e={},H(e,U,c),H(e,F,P),e),"note-tag-container")},i.a.createElement("div",{onClick:function(){return u(!c)},className:G},i.a.createElement("span",null,c?__("收起所有标签"):__("展开所有标签")),i.a.createElement(y.default,{className:B,width:16})),i.a.createElement("div",{className:q},i.a.createElement(m.a,{hideMore:!1,showCount:!0,currentTagId:g,onSelect:w,localStorage:n,storageKey:"NOTE_LIST_TAG_MANAGER",data:b}))),i.a.createElement(l.a,{spinning:p},i.a.createElement("div",{className:f()(Y,"note-list-container")},i.a.createElement(h.a,z({},r,{isMobile:!0,isLiteMode:!0,renderToolBar:function(e){return i.a.createElement(O,{item:e,showFeather:!r.state.searchValue,onInsertToLakeEditor:t.onInsertToLakeEditor})}})))))};$.fetchData=function(t){return j.a.NoteCtlImpl.show({id:t.id})},$.defaultProps={onInsertToLakeEditor:function(){}},$.propTypes={webProxy:a.PropTypes.object,storage:a.PropTypes.object,onInsertToLakeEditor:a.PropTypes.func};var J=$;function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function Z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nt(n.key),n)}}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=rt(t);if(e){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return et(t)}(this,r)}}function et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rt(t){return rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rt(t)}function nt(t){var e=function(t,e){if("object"!==Q(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Q(e)?e:String(e)}var ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}(a,t);var e,r,n,o=tt(a);function a(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return t=o.call.apply(o,[this].concat(c)),e=et(t),n=function(e){J.fetchData(e).then((function(e){t.props.onInsertDocument("text/lake",e.content.source)})).catch((function(){u.a.error(__("小记插入失败"))}))},(r=nt(r="onInsertToLakeEditor"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=a,(r=[{key:"render",value:function(){var t=this.props.storage;return i.a.createElement("div",{className:"material-library-note"},i.a.createElement(J,{storage:t,onInsertToLakeEditor:this.onInsertToLakeEditor}))}}])&&Z(e.prototype,r),n&&Z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function it(){return it=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},it.apply(this,arguments)}ot.propTypes={storage:c.a.object,onInsertDocument:c.a.func};var at=n.a.TabPane,ct="storage/sidebar-tab-key",ut={note:"note"},lt=function(t){var e=t.storage;return{tabKey:e.get(ct)||ut.note,onTabChange:function(t){e.set(ct,t)}}};function st(t){var e=lt(t),r=t.storage;return i.a.createElement("div",{className:"material-library-view"},i.a.createElement(n.a,{defaultActiveKey:e.tabKey,onChange:e.onTabChange},i.a.createElement(at,{tab:__("插入小记"),key:ut.note},i.a.createElement(ot,it({},t.note,{storage:r})))))}st.propTypes={storage:c.a.object,webProxy:c.a.object,note:c.a.object}},3485:function(t,e,r){"use strict";var n=r(25),o=r.n(n);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){a=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function f(t,e,r,o){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var d={};function y(){}function h(){}function m(){}var v={};s(v,c,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(L([])));g&&g!==e&&r.call(g,c)&&(v=g);var w=m.prototype=y.prototype=Object.create(v);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,a,c,u){var l=p(t[n],t,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==i(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(f).then((function(t){s.value=t,c(s)}),(function(t){return o("throw",t,c,u)}))}u(l.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:h,configurable:!0}),h.displayName=s(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},E(_.prototype),s(_.prototype,u,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(w),s(w,l,"Generator"),s(w,c,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function c(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}var p=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.doc=e,this.engine=r,this.emitter=new o.a}var e,r,n,i,f;return e=t,r=[{key:"resetDoc",value:function(t){this.doc=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t)}},{key:"init",value:function(t){t.content,t.onFocus}},{key:"initCollabDoc",value:function(t){}},{key:"setContent",value:function(t){}},{key:"appendContent",value:function(t){}},{key:"getValue",value:function(){return null}},{key:"getPureContent",value:function(){return null}},{key:"getSummaryContent",value:function(){return null}},{key:"getEditorContent",value:function(t){return{content:"",html:null,premium:null,premiumHtml:null}}},{key:"getThumbnail",value:function(){return""}},{key:"getDocMeta",value:function(t){return null}},{key:"updateDocEditorMeta",value:function(t){var e=this;["meta_draft","meta"].forEach((function(r){var n="editor_".concat(r);t[r]&&(e.doc[n]=t[r])}))}},{key:"getPremium",value:function(){return null}},{key:"getWordCount",value:function(t){return t&&t(-1),0}},{key:"getSummary",value:function(t){t({summary:null,cover:null})}},{key:"isEmpty",value:function(){return!1}},{key:"isFocus",value:function(){return!1}},{key:"hasUserChanged",value:function(){return!0}},{key:"resetUserChanged",value:function(){}},{key:"disable",value:function(){}},{key:"enable",value:function(){}},{key:"readonly",value:function(t){}},{key:"focus",value:function(t){}},{key:"focusToEnd",value:function(t){}},{key:"focusBlankDoc",value:function(){}},{key:"onBeforeSave",value:(i=a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!0);case 1:case"end":return t.stop()}}),t)})),f=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=i.apply(t,e);function a(t){c(o,r,n,a,u,"next",t)}function u(t){c(o,r,n,a,u,"throw",t)}a(void 0)}))},function(){return f.apply(this,arguments)})},{key:"isContentReady",value:function(){return!0}},{key:"reset",value:function(t){}},{key:"getOriginEngine",value:function(){return this.engine}},{key:"getCollabMembers",value:function(t){return[]}},{key:"setCollabMembers",value:function(){}},{key:"addCollabMember",value:function(){}},{key:"removeCollabMember",value:function(){}},{key:"setCurrentMember",value:function(){}},{key:"onCommandError",value:function(t){}},{key:"onCommandEnd",value:function(t){}},{key:"getReportValue",value:function(){return null}}],r&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.a=p},3486:function(t,e,r){"use strict";var n=r(151),o=r.n(n),i=r(71);function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var u={adaptAbilities:function(t){var e=t.me,r=t.comment,n=t.target_type,o=t.target,i={edit:!1,delete:!1};return e&&e.id===r.user_id?(i.edit=!0,i.delete=!0):"Doc"===n&&(i.delete=o.abilities&&o.abilities.destroy_comment),i},getPostActions:function(t,e){var r=[];return r.push({cmd:"copy_link",title:__("复制链接")}),r.push({cmd:"reply",title:__("评论")}),t.edit&&r.push({cmd:"edit",title:__("编辑")}),t.delete&&r.push({cmd:"delete",title:__("删除"),confirm:!0}),e&&r.push({cmd:"content_report",title:__("举报")}),r},includesHashAnchoredComment:function(t,e){if(!e||!e.startsWith("#comment-"))return!1;var r=parseInt(e.substring("#comment-".length),10);return!!t.find((function(t){return t.id===r}))},getParticipants:function(t,e,r){var n=r.groupMembers,c=r.targetType,u=[];return"Topic"===c?u.push(t.user):"Doc"!==c&&"Resource"!==c||(t.contributors=t.contributors||[],u=a(t.contributors)),e&&e.length>0&&e.forEach((function(t){var e=u.find((function(e){return e&&t.user&&e.id===t.user.id}));t.user&&!e&&u.push(t.user)})),n&&n.length>0&&n.forEach((function(t){u.push(t.user)})),u=o()(u,"login"),window.appData.isYuque&&(u=u&&u.filter((function(t){return t.status!==i.STATUS.terminated}))),u},getAnchorId:function(t,e){return"".concat("Topic"===e?"reply-":"comment-").concat(t)},TARGET_TYPES:["Doc","DocVersion","Resource","Topic","Artboard","Note"]};e.a=u},3487:function(t,e,r){"use strict";var n,o,i,a,c=r(0),u=r.n(c),l=r(3519),s=r.n(l),f=r(3491),p=r.n(f),d=r(3481),y=r.n(d),h=r(3482),m=r.n(h),v=r(1788),b=r.n(v),g=r(3483),w=r(3454),E=r(616),_=r(3484),O=r(582),S=r(243),j=r(108),x=r(269),P=r(111),L=r(2853),T=r.n(L),k=r(3473),C=r(3485);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function R(){R=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function y(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var b=y.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==A(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function N(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function I(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?I(Object(r),!0).forEach((function(e){Y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,q(n.key),n)}}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=B(t);if(e){var o=B(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return G(t)}(this,r)}}function G(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B(t){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},B(t)}function Y(t,e,r){return(e=q(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function q(t){var e=function(t,e){if("object"!==A(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===A(e)?e:String(e)}var V=(null===(n=window.appData)||void 0===n?void 0:n.me)||{},z=(null===(o=window.appData)||void 0===o?void 0:o.userSettings)||{},H=null===(i=window.appData)||void 0===i||null===(a=i.organization)||void 0===a?void 0:a.id;function W(t,e){return void 0===t?e:t}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(i,t);var e,r,n,o=U(i);function i(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Y(G(n=o.call(this,t,e)),"setContent",(function(t){for(var e,r,o,i,a=t,c=arguments.length,u=new Array(c>1?c-1:0),l=1;l<c;l++)u[l-1]=arguments[l];if(t){if(t.startsWith("<")){var s;a={type:"lake",value:t},(s=n.engine).setDocument.apply(s,[a].concat(u))}else if("string"==typeof t){var f;a={type:"json",value:JSON.parse(t)},(f=n.engine).setDocument.apply(f,[a].concat(u))}}else n.engine.setDocument("lake",(o={showParagraphSpacing:!(null!==(e=n.engine.option.uiSwitch)&&void 0!==e&&e.default)&&"0"!==(z.docsSetting||"").split(",")[0],defaultFontSize:null!==(r=n.engine.option.uiSwitch)&&void 0!==r&&r.default?null:(z.docsSetting||"").split(",")[1]||null},i=['<!doctype lake><meta name="doc-version" content="1" /><meta name="typography" content="classic" />'],"false"!==(null==z?void 0:z.recordDocSetting)?(o.showParagraphSpacing&&i.push('<meta name="paragraphSpacing" content="relax" />'),o.defaultFontSize&&i.push('<meta name="defaultFontsize" content="'.concat(o.defaultFontSize,'" />'))):i.push('<meta name="paragraphSpacing" content="relax" />'),"".concat(i.join(""),"<p><br></p>")))})),Y(G(n),"appendContent",(function(t){})),Y(G(n),"getValue",(function(){return n.engine.getContent()})),Y(G(n),"getPureContent",(function(){return n.getValue()})),Y(G(n),"getSummaryContent",(function(){return n.engine.getSummaryContent()})),Y(G(n),"hasUserChanged",(function(){})),Y(G(n),"resetUserChange",(function(){})),Y(G(n),"insertContent",(function(t){})),Y(G(n),"getEditorContent",(function(t){t=t||{};var e,r,o,i,a=G(n).engine,c=t.fullHTML;return a.queryCommandValue("cardIsExist","premium")?(e=a.getPublicPureContent(),r=c?a.getFullPublicPureHtml():a.getPublicPureHtml(),o=a.getPureContent(),i=c?a.getFullPureHtml():a.getPureHtml()):(e=a.getPureContent(),r=c?a.getFullPureHtml():a.getPureHtml()),{content:e,html:r,premium:o,premiumHtml:i}})),Y(G(n),"getDocMeta",(function(t){var e=(t=t||{}).themeMetas||[],r=G(n).doc,o=Object(S.getDocMeta)(n.engine.getPureContent());if(!o)return null;var i={},a=r.editor_meta_draft||r.editor_meta;return a&&(i=JSON.parse(a)),["viewport","typography","paragraphSpacing","defaultFontsize"].forEach((function(t){i[t]||e.includes(t)||delete o[t]})),o})),Y(G(n),"getPremium",(function(){return n.engine.queryCommandValue("getPremium")})),Y(G(n),"getWordCount",(function(t){var e=n.engine.wordCount();if(!t)return e;t(e)})),Y(G(n),"getSummary",(function(t){var e=n.engine.getPureHtml();t({summary:p.a.extractSummary(e),cover:p.a.extractFirstImage(e)})})),Y(G(n),"isEmpty",(function(){return n.engine.isEmpty()})),Y(G(n),"onBeforeSave",(function(){var t=0;return new Promise((function e(r,o){n.engine.canGetDocument()?r():t>10?o():(t++,setTimeout((function(){e(r,o)}),1e3))}))})),Y(G(n),"reset",(function(t){n.setContent(t)})),Y(G(n),"readonly",(function(t){})),Y(G(n),"focus",(function(t){})),Y(G(n),"focusToEnd",(function(){n.engine.focus(!1)})),Y(G(n),"isFocus",(function(){return n.engine.isFocus()})),n.emitter=r,n.lakex=!0,n.reportedStacks={},n}return e=i,r=[{key:"init",value:function(t){for(var e=this,r=t.content,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];this.setContent.apply(this,[r].concat(o)),setTimeout((function(){try{k.a.letEditorFocusToReadPosition(e.doc.id)}catch(t){console.log("focus to read pos fail",t)}}),200)}},{key:"initCollabDoc",value:function(t){this.emitter&&this.emitter.emit("docReady",t,this.currentMember)}},{key:"focusBlankDoc",value:function(t){T.a.isBlank({format:this.doc.format,value:t})&&this.doc.title===x.a.getDefaultTitle(this.doc.type)||this.engine.focus()}},{key:"setCurrentMember",value:function(t){this.currentMember=t}},{key:"removeCollabMember",value:function(t){this.emitter.emit("memberLeave",t)}},{key:"isContentReady",value:function(){return this.engine.canGetDocument()}},{key:"onCommandError",value:function(t){var e=this;this.engine.on("commandExecuteError",(function(r){var n,o=null==r||null===(n=r.error)||void 0===n?void 0:n.stack;e.reportedStacks[o]||(e.reportedStacks[o]=!0,t(r))}))}},{key:"onMonitorLog",value:function(t){this.engine.on("monitorLog",(function(e){var r=e.code,n=e.data,o=e.error;t(r,n,o)}))}},{key:"onCommandEnd",value:function(t){this.engine.on("commandEnd",(function(e){var r=e.commandName,n=e.useTime;t(w.EDITOR_NAME.LAKEX,r,n)})),this.engine.on("cardCommandEnd",(function(e){var r=e.cardEditor,n=e.commandName,o=e.useTime;t(r,n,o)}))}},{key:"getReportValue",value:function(){return this.engine.getDocumentData()}}],n=[{key:"buildOptions",value:function(t){var e=i._buildBaseOptions(t);return i._repairDesktopOptions(e,t),i._repairMobileOptions(e,t),i._repairAppOptions(e,t),e}},{key:"getDataTableOptions",value:function(){return{image:{uploadConfig:x.a.imageUploadUrl,accept:Object(E.getImageAccept)()},file:{uploadConfig:x.a.fileUploadUrl,accept:Object(E.getFileAccept)()}}}},{key:"_buildBaseOptions",value:function(t){var e,r,n,o,a,c,l,f,p,d,h,v,w,S,j,x,L,T,k,C,A,R,N,I,M=t.apiHost,F=void 0===M?"":M,U=t.target_id,G=t.target_type,B=void 0===G?"Doc":G,Y=t.attachable_type,q=t.attachable_id,z="".concat(F,"/api"),K={attachable_type:Y||B,attachable_id:q||U},$={target_id:U,target_type:B},J={layout:t.layout,typography:t.typography,supportTranslate:m()(),supportImgOCR:b()(),hideEmbedButton:y()(),hideVipIcon:Object(g.a)(),image:{uploadFileURL:(null===(e=t.image)||void 0===e?void 0:e.uploadFileURL)||"".concat(z,"/upload/attach?").concat(s.a.stringify(D(D({},K),{},{type:"image"}))),onBeforeRenderImage:null===(r=t.image)||void 0===r?void 0:r.onBeforeRenderImage,accept:Object(E.getImageAcceptArr)()},file:D(D({uploadFileURL:(null===(n=t.file)||void 0===n?void 0:n.uploadFileURL)||"".concat(z,"/upload/attach?").concat(s.a.stringify(D(D({},K),{},{type:"attachment"}))),quickUploadUrl:"".concat(z,"/upload/upload_by_digset?").concat(s.a.stringify(D(D({},K),{},{type:"attachment"}))),endpointAfterUpload:(null===(o=t.file)||void 0===o?void 0:o.endpointAfterUpload)||"".concat(z,"/attachment/after_upload?").concat(s.a.stringify(D({},K)))},K),{},{useMultipart:W(null===(a=t.file)||void 0===a?void 0:a.useMultipart,!0),accept:Object(E.getFileAcceptArr)(),localdocAccept:Object(E.getLocalDocAcceptArr)(),embedButtonStatus:Object(E.getIsDiabledPreviewAndEmbed)()}),localdoc:{uploadFileURL:(null===(c=t.localdoc)||void 0===c?void 0:c.uploadFileURL)||"".concat(z,"/upload/attach?").concat(s.a.stringify(D(D({},K),{},{type:"attachment"}))),accept:Object(E.getLocalDocAcceptArr)()},audio:{uploadFileURL:(null===(l=t.audio)||void 0===l?void 0:l.uploadFileURL)||"".concat(z,"/video?").concat(s.a.stringify(D(D({},K),{},{type:"audio"}))),queryURL:"".concat(z,"/video?").concat(s.a.stringify(D(D({},K),{},{type:"audio"}))),allowAudioPlayer:W(null===(f=t.audio)||void 0===f?void 0:f.allowAudioPlayer,!0),addsOnParams:D(D({},K),{},{format:"audio"}),accept:Object(E.getAudioAcceptArr)()},video:D(D({uploadAction:(null===(p=t.video)||void 0===p?void 0:p.uploadAction)||"".concat(z,"/video?").concat(s.a.stringify(D(D({},K),{},{type:"video"}))),queryAction:"".concat(z,"/video?").concat(s.a.stringify(D(D({},K),{},{type:"video"}))),endpointAfterUpload:(null===(d=t.video)||void 0===d?void 0:d.endpointAfterUpload)||"".concat(z,"/video/after_upload?").concat(s.a.stringify(D({},K)))},K),{},{useMultipart:W(null===(h=t.video)||void 0===h?void 0:h.useMultipart,!0),accept:Object(E.getVideoAcceptArr)()}),mention:{mentionURL:(null===(v=t.mention)||void 0===v?void 0:v.mentionURL)||"".concat(z,"/users/complete?").concat(s.a.stringify(D(D({},$),{},{group_id:null===(w=t.group)||void 0===w?void 0:w.id}))),defaultList:null===(S=t.mention)||void 0===S?void 0:S.defaultList,multiTypes:null===(j=t.mention)||void 0===j?void 0:j.multiTypes,onMentionSearch:null===(x=t.mention)||void 0===x?void 0:x.onMentionSearch},lockedtext:{action:(null===(L=t.lockedtext)||void 0===L?void 0:L.action)||"".concat(z,"/services/crypto")},materialLibrary:{component:(null===(T=t.materialLibrary)||void 0===T?void 0:T.component)||u.a.createElement(_.a,{storage:null===(k=t.materialLibrary)||void 0===k?void 0:k.storage,webProxy:null===(C=t.materialLibrary)||void 0===C?void 0:C.webProxy})},vote:{isOwner:"OWNER"===t.role,queryDetailUrl:(null===(A=t.vote)||void 0===A?void 0:A.queryDetailUrl)||"".concat(z,"/votes"),queryCheckUrl:(null===(R=t.vote)||void 0===R?void 0:R.queryCheckUrl)||"".concat(z,"/votes/mine"),voteUrl:(null===(N=t.vote)||void 0===N?void 0:N.voteUrl)||"".concat(z,"/votes"),allowVote:W(null===(I=t.vote)||void 0===I?void 0:I.allowVote,!0)},transfer:{transferFilesURL:"".concat(z,"/upload/copy?").concat(s.a.stringify(D(D({},K),{},{type:"attachment"})))},markdownPasteParse:{convertURL:"".concat(z,"/docs/convert")},yuque:{linkDetailAction:"".concat(z,"/editor/link_detail"),recentAction:"".concat(z,"/editor/recent"),searchAction:"".concat(z,"/editor/search")},header:t.header||[],disabledPlugins:t.disabledPlugins||[],placeholder:t.placeholder,tileRendering:!!t.tileRendering,isDesktop:t.isDesktop,list:t.list,dynamicData:D({docId:U,docType:B,webProxy:{datasheetRecord:O.a.datasheetRecord}},t.dynamicData),bookmark:{detailAction:"".concat(z,"/editor/link_detail")},dataTable:D(D({},t.dataTable),i.getDataTableOptions()),selectAll:{global:t.globalSelectAll}};return t.board={boardWebProxyParams:{webProxy:O.a,userId:null==V?void 0:V.id,spm:P,appData:window.appData}},t.collab?(J.disabledPlugins.push("history"),J.collaboration={collab:t.collab}):J.disabledPlugins.push("collaboration"),t.premium&&(J.premium=t.premium),t.isPremiumBook||J.disabledPlugins.push("premium"),(H||t.isEnterprise)&&J.disabledPlugins.push("materialLibrary"),t.toc&&(J.toc=t.toc),t.board&&(J.board=t.board),J}},{key:"_repairMobileOptions",value:function(t,e){e.isMobile&&(t.video.useMultipart=!1,t.file.useMultipart=!1)}},{key:"_repairAppOptions",value:function(t,e){if(e.isApp){var r,n,o=(null===(r=window.nebulaMobileApp)||void 0===r||null===(n=r.envInfo)||void 0===n?void 0:n.origin)||window.location.origin;t.file.origin=o,t.file.downloadFileHandler=function(){var t,e=(t=R().mark((function t(e,r){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.downloadFile({url:e,fileName:r});case 2:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){N(i,n,o,a,c,"next",t)}function c(t){N(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}(),t.file.previewFileHandler=function(t){j.a.pushWebWindow({url:"".concat(o).concat(t)})}}}},{key:"_repairDesktopOptions",value:function(t,e){var r,n,o,i;e.isDesktop&&(t.video.downloadVideoHandler=null===(r=e.video)||void 0===r?void 0:r.downloadVideoHandler,t.video.useMultipart=!1,t.file.useMultipart=!1,t.file.downloadFileHandler=null===(n=e.file)||void 0===n?void 0:n.downloadFileHandler,t.file.previewFileHandler=null===(o=e.file)||void 0===o?void 0:o.previewFileHandler,t.file.origin=(null===(i=e.localdoc)||void 0===i?void 0:i.origin)||e.apiHost,(t.yuque||e.yuque)&&(t.yuque=D(D({},e.yuque||{}),t.yuque||{})),(t.link||e.link)&&(t.link=D(D({},e.link||{}),t.link||{})),e.envAdapter&&(t.envAdapter=e.envAdapter))}}],r&&M(e.prototype,r),n&&M(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(C.a);e.a=K},3491:function(t,e,r){t.exports=r(2853)},3501:function(t,e,r){"use strict";var n=r(0),o=r.n(n),i=r(8),a=r.n(i),c=r(156),u=r(3487),l=r(3508),s=r(84),f=r.n(s);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function d(){d=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function y(){}function h(){}function m(){}var v={};u(v,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(L([])));g&&g!==e&&r.call(g,i)&&(v=g);var w=m.prototype=y.prototype=Object.create(v);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==p(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:h,configurable:!0}),h.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function y(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){y(i,n,o,a,c,"next",t)}function c(t){y(i,n,o,a,c,"throw",t)}a(void 0)}))}}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===p(i)?i:String(i)),n)}var o,i}function b(t,e,r){return e&&v(t.prototype,e),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=_(t);if(e){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}var O=function(t){g(i,t);var e,r,n=E(i);function i(t){var e;return m(this,i),(e=n.call(this,t)).viewerRef=o.a.createRef(),e}return b(i,[{key:"componentDidMount",value:function(){this.renderView()}},{key:"renderView",value:(r=h(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.createDocViewer();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),c.a.logViewerError(t.t0);case 8:case"end":return t.stop()}}),t,this,[[0,5]])}))),function(){return r.apply(this,arguments)})},{key:"createDocViewer",value:(e=h(d().mark((function t(){var e,r,n,o,i=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.time("LakexNoteViewer"),t.next=3,l.a.getLakexEditor();case 3:e=t.sent,r=e.createDocViewer,n=e.ViewerEnvAdapter,(o=r(this.viewerRef.current,this.buildOptions(n))).on("ready",(function(){console.timeEnd("LakexNoteViewer"),i.props.onReady&&i.props.onReady(i.viewerRef.current)})),o.on("dynamicDataChange",(function(t){i.props.onDynamicDataChange&&i.props.onDynamicDataChange(t)})),o.setDocument({type:"lake",value:this.props.content},{dynamicData:this.props.dynamicData});case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"buildOptions",value:function(t){var e=this,r=this.props,n=r.docId,o=u.a.buildOptions({isDesktop:window.appData.isDesktopApp,target_id:n,target_type:"Note",layout:f.a.VIEWPORT.adapt,typography:f.a.TYPOGRAPHY.traditional,file:{downloadFileHandler:r.downloadFileHandler,previewFileHandler:function(t){window.appData.isDesktopApp&&window.openExternalLink?window.openExternalLink(t,!0):window.open(t)}},list:{enableDynamic:r.enableDynamicTaskList}});return window.appData.isDesktopApp&&(o.envAdapter=new(function(t){g(r,t);var e=E(r);function r(){return m(this,r),e.apply(this,arguments)}return b(r,[{key:"openLink",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";window.openExternalLink(t,!0)}},{key:"openMentionLink",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";window.openExternalLink(t,!0)}}]),r}(t||function(){return b((function t(){m(this,t)}))}()))),o.scrollNode=function(){var t;return null===(t=e.viewerRef)||void 0===t?void 0:t.current},o}},{key:"render",value:function(){return o.a.createElement("div",{className:"yuque-doc-content","data-df":"lake",style:{position:"relative"}},o.a.createElement("div",{ref:this.viewerRef}))}}]),i}(n.PureComponent);O.defaultProps={enableDynamicTaskList:!1},O.propTypes={id:a.a.oneOfType([a.a.string,a.a.number]),content:a.a.string,onReady:a.a.func,onDynamicDataChange:a.a.func,downloadFileHandler:a.a.func,dynamicData:a.a.array,enableDynamicTaskList:a.a.bool},e.a=O},3504:function(t,e,r){"use strict";var n={};r.r(n),r.d(n,"initList",(function(){return h})),r.d(n,"syncList",(function(){return v})),r.d(n,"createMirror",(function(){return g}));var o={};r.r(o),r.d(o,"lock",(function(){return j})),r.d(o,"unlock",(function(){return P})),r.d(o,"versionList",(function(){return T})),r.d(o,"versionDetail",(function(){return C})),r.d(o,"saveVersion",(function(){return R}));var i={};r.r(i),r.d(i,"show",(function(){return U})),r.d(i,"index",(function(){return B})),r.d(i,"update",(function(){return q})),r.d(i,"status",(function(){return z})),r.d(i,"mirror",(function(){return W})),r.d(i,"create",(function(){return $}));var a={};r.r(a),r.d(a,"batchArchive",(function(){return et})),r.d(a,"batchDelete",(function(){return nt})),r.d(a,"batchPin",(function(){return it})),r.d(a,"batchUnPin",(function(){return ct})),r.d(a,"updatePublic",(function(){return lt})),r.d(a,"shareToGarden",(function(){return ft}));var c={};r.r(c),r.d(c,"index",(function(){return vt})),r.d(c,"create",(function(){return gt})),r.d(c,"del",(function(){return Et})),r.d(c,"count",(function(){return Ot}));var u={};r.r(u),r.d(u,"initList",(function(){return Tt})),r.d(u,"syncList",(function(){return Ct}));var l={};r.r(l),r.d(l,"index",(function(){return Mt})),r.d(l,"create",(function(){return Ut})),r.d(l,"del",(function(){return Bt})),r.d(l,"update",(function(){return qt})),r.d(l,"pin",(function(){return zt}));var s=r(11);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(){p=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function y(){}function h(){}function m(){}var v={};u(v,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(L([])));g&&g!==e&&r.call(g,i)&&(v=g);var w=m.prototype=y.prototype=Object.create(v);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==f(p)&&r.call(p,"__await")?e.resolve(p.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(p).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:h,configurable:!0}),h.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function d(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function y(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){d(i,n,o,a,c,"next",t)}function c(t){d(i,n,o,a,c,"throw",t)}a(void 0)}))}}function h(t){return m.apply(this,arguments)}function m(){return m=y(p().mark((function t(e){var r,n=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteAppController/initList",t.abrupt("return",s.c("/api/modules/note/notes/NoteAppController/initList",e,r));case 3:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function v(t){return b.apply(this,arguments)}function b(){return b=y(p().mark((function t(e){var r,n=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteAppController/syncList",t.abrupt("return",s.c("/api/modules/note/notes/NoteAppController/syncList",e,r));case 3:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function g(t){return w.apply(this,arguments)}function w(){return w=y(p().mark((function t(e){var r,n=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteAppController/createMirror",t.abrupt("return",s.c("/api/modules/note/notes/NoteAppController/createMirror",e,r));case 3:case"end":return t.stop()}}),t)}))),w.apply(this,arguments)}function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function _(){_=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function y(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(L([])));v&&v!==e&&r.call(v,i)&&(h=v);var b=y.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==E(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function O(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function S(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){O(i,n,o,a,c,"next",t)}function c(t){O(i,n,o,a,c,"throw",t)}a(void 0)}))}}function j(t){return x.apply(this,arguments)}function x(){return x=S(_().mark((function t(e){var r,n=arguments;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteContentController/lock",t.abrupt("return",s.f("/api/modules/note/notes/NoteContentController/lock",e,r));case 3:case"end":return t.stop()}}),t)}))),x.apply(this,arguments)}function P(t){return L.apply(this,arguments)}function L(){return L=S(_().mark((function t(e){var r,n=arguments;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteContentController/unlock",t.abrupt("return",s.b("/api/modules/note/notes/NoteContentController/unlock",e,r));case 3:case"end":return t.stop()}}),t)}))),L.apply(this,arguments)}function T(t){return k.apply(this,arguments)}function k(){return k=S(_().mark((function t(e){var r,n=arguments;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteContentController/versionList",t.abrupt("return",s.c("/api/modules/note/notes/NoteContentController/versionList",e,r));case 3:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}function C(t){return A.apply(this,arguments)}function A(){return A=S(_().mark((function t(e){var r,n=arguments;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteContentController/versionDetail",t.abrupt("return",s.c("/api/modules/note/notes/NoteContentController/versionDetail",e,r));case 3:case"end":return t.stop()}}),t)}))),A.apply(this,arguments)}function R(t){return N.apply(this,arguments)}function N(){return N=S(_().mark((function t(e){var r,n=arguments;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteContentController/saveVersion",t.abrupt("return",s.e("/api/modules/note/notes/NoteContentController/saveVersion",e,r));case 3:case"end":return t.stop()}}),t)}))),N.apply(this,arguments)}function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function D(){D=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function y(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var b=y.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==I(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function M(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function F(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){M(i,n,o,a,c,"next",t)}function c(t){M(i,n,o,a,c,"throw",t)}a(void 0)}))}}function U(t){return G.apply(this,arguments)}function G(){return G=F(D().mark((function t(e){var r,n=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/show",t.abrupt("return",s.c("/api/modules/note/notes/NoteController/show",e,r));case 3:case"end":return t.stop()}}),t)}))),G.apply(this,arguments)}function B(t){return Y.apply(this,arguments)}function Y(){return Y=F(D().mark((function t(e){var r,n=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/index",t.abrupt("return",s.c("/api/modules/note/notes/NoteController/index",e,r));case 3:case"end":return t.stop()}}),t)}))),Y.apply(this,arguments)}function q(t){return V.apply(this,arguments)}function V(){return V=F(D().mark((function t(e){var r,n=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/update",t.abrupt("return",s.f("/api/modules/note/notes/NoteController/update",e,r));case 3:case"end":return t.stop()}}),t)}))),V.apply(this,arguments)}function z(t){return H.apply(this,arguments)}function H(){return H=F(D().mark((function t(e){var r,n=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/status",t.abrupt("return",s.c("/api/modules/note/notes/NoteController/status",e,r));case 3:case"end":return t.stop()}}),t)}))),H.apply(this,arguments)}function W(t){return K.apply(this,arguments)}function K(){return K=F(D().mark((function t(e){var r,n=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/mirror",t.abrupt("return",s.c("/api/modules/note/notes/NoteController/mirror",e,r));case 3:case"end":return t.stop()}}),t)}))),K.apply(this,arguments)}function $(t){return J.apply(this,arguments)}function J(){return J=F(D().mark((function t(e){var r,n=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/create",t.abrupt("return",s.e("/api/modules/note/notes/NoteController/create",e,r));case 3:case"end":return t.stop()}}),t)}))),J.apply(this,arguments)}function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function Z(){Z=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function y(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var b=y.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Q(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function X(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function tt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){X(i,n,o,a,c,"next",t)}function c(t){X(i,n,o,a,c,"throw",t)}a(void 0)}))}}function et(t){return rt.apply(this,arguments)}function rt(){return rt=tt(Z().mark((function t(e){var r,n=arguments;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/batchArchive",t.abrupt("return",s.f("/api/modules/note/notes/NoteOperateController/batchArchive",e,r));case 3:case"end":return t.stop()}}),t)}))),rt.apply(this,arguments)}function nt(t){return ot.apply(this,arguments)}function ot(){return ot=tt(Z().mark((function t(e){var r,n=arguments;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/batchDelete",t.abrupt("return",s.b("/api/modules/note/notes/NoteOperateController/batchDelete",e,r));case 3:case"end":return t.stop()}}),t)}))),ot.apply(this,arguments)}function it(t){return at.apply(this,arguments)}function at(){return at=tt(Z().mark((function t(e){var r,n=arguments;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/batchPin",t.abrupt("return",s.f("/api/modules/note/notes/NoteOperateController/batchPin",e,r));case 3:case"end":return t.stop()}}),t)}))),at.apply(this,arguments)}function ct(t){return ut.apply(this,arguments)}function ut(){return ut=tt(Z().mark((function t(e){var r,n=arguments;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/batchUnPin",t.abrupt("return",s.f("/api/modules/note/notes/NoteOperateController/batchUnPin",e,r));case 3:case"end":return t.stop()}}),t)}))),ut.apply(this,arguments)}function lt(t){return st.apply(this,arguments)}function st(){return st=tt(Z().mark((function t(e){var r,n=arguments;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/updatePublic",t.abrupt("return",s.f("/api/modules/note/notes/NoteOperateController/updatePublic",e,r));case 3:case"end":return t.stop()}}),t)}))),st.apply(this,arguments)}function ft(t){return pt.apply(this,arguments)}function pt(){return pt=tt(Z().mark((function t(e){var r,n=arguments;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/shareToGarden",t.abrupt("return",s.e("/api/modules/note/notes/NoteOperateController/shareToGarden",e,r));case 3:case"end":return t.stop()}}),t)}))),pt.apply(this,arguments)}function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function yt(){yt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function y(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var b=y.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==dt(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function ht(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function mt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ht(i,n,o,a,c,"next",t)}function c(t){ht(i,n,o,a,c,"throw",t)}a(void 0)}))}}function vt(t){return bt.apply(this,arguments)}function bt(){return bt=mt(yt().mark((function t(e){var r,n=arguments;return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteTagController/index",t.abrupt("return",s.c("/api/modules/note/notes/NoteTagController/index",e,r));case 3:case"end":return t.stop()}}),t)}))),bt.apply(this,arguments)}function gt(t){return wt.apply(this,arguments)}function wt(){return wt=mt(yt().mark((function t(e){var r,n=arguments;return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteTagController/create",t.abrupt("return",s.e("/api/modules/note/notes/NoteTagController/create",e,r));case 3:case"end":return t.stop()}}),t)}))),wt.apply(this,arguments)}function Et(t){return _t.apply(this,arguments)}function _t(){return _t=mt(yt().mark((function t(e){var r,n=arguments;return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteTagController/del",t.abrupt("return",s.b("/api/modules/note/notes/NoteTagController/del",e,r));case 3:case"end":return t.stop()}}),t)}))),_t.apply(this,arguments)}function Ot(t){return St.apply(this,arguments)}function St(){return St=mt(yt().mark((function t(e){var r,n=arguments;return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteTagController/count",t.abrupt("return",s.c("/api/modules/note/notes/NoteTagController/count",e,r));case 3:case"end":return t.stop()}}),t)}))),St.apply(this,arguments)}function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function xt(){xt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function y(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var b=y.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==jt(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Pt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Lt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Pt(i,n,o,a,c,"next",t)}function c(t){Pt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Tt(t){return kt.apply(this,arguments)}function kt(){return kt=Lt(xt().mark((function t(e){var r,n=arguments;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagAppController/initList",t.abrupt("return",s.c("/api/modules/note/tags/TagAppController/initList",e,r));case 3:case"end":return t.stop()}}),t)}))),kt.apply(this,arguments)}function Ct(t){return At.apply(this,arguments)}function At(){return At=Lt(xt().mark((function t(e){var r,n=arguments;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagAppController/syncList",t.abrupt("return",s.c("/api/modules/note/tags/TagAppController/syncList",e,r));case 3:case"end":return t.stop()}}),t)}))),At.apply(this,arguments)}function Rt(t){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(t)}function Nt(){Nt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function y(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var b=y.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Rt(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function It(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Dt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){It(i,n,o,a,c,"next",t)}function c(t){It(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Mt(t){return Ft.apply(this,arguments)}function Ft(){return Ft=Dt(Nt().mark((function t(e){var r,n=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagController/index",t.abrupt("return",s.c("/api/modules/note/tags/TagController/index",e,r));case 3:case"end":return t.stop()}}),t)}))),Ft.apply(this,arguments)}function Ut(t){return Gt.apply(this,arguments)}function Gt(){return Gt=Dt(Nt().mark((function t(e){var r,n=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagController/create",t.abrupt("return",s.e("/api/modules/note/tags/TagController/create",e,r));case 3:case"end":return t.stop()}}),t)}))),Gt.apply(this,arguments)}function Bt(t){return Yt.apply(this,arguments)}function Yt(){return Yt=Dt(Nt().mark((function t(e){var r,n=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagController/del",t.abrupt("return",s.b("/api/modules/note/tags/TagController/del",e,r));case 3:case"end":return t.stop()}}),t)}))),Yt.apply(this,arguments)}function qt(t){return Vt.apply(this,arguments)}function Vt(){return Vt=Dt(Nt().mark((function t(e){var r,n=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagController/update",t.abrupt("return",s.f("/api/modules/note/tags/TagController/update",e,r));case 3:case"end":return t.stop()}}),t)}))),Vt.apply(this,arguments)}function zt(t){return Ht.apply(this,arguments)}function Ht(){return Ht=Dt(Nt().mark((function t(e){var r,n=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagController/pin",t.abrupt("return",s.f("/api/modules/note/tags/TagController/pin",e,r));case 3:case"end":return t.stop()}}),t)}))),Ht.apply(this,arguments)}var Wt={NoteAppCtlImpl:n,NoteContentCtlImpl:o,NoteCtlImpl:i,NoteOperateCtlImpl:a,NoteTagCtlImpl:c,TagAppCtlImpl:u,TagCtlImpl:l};e.a=Wt},3508:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}var a=function(){function t(){var e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,n=null,(r=i(r="_lakexDocViewer"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n}var e,n,a;return e=t,(n=[{key:"_loadLakexEditor",value:function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(10),r.e(57)]).then(r.bind(null,344))}},{key:"_isPreloadPath",value:function(){var t,e,r=null===(t=window)||void 0===t||null===(e=t.location)||void 0===e?void 0:e.pathname;return!(!r||!["/dashboard","/r/templates","/dashboard/explore"].some((function(t){return r.startsWith(t)})))}},{key:"getLakexEditor",value:function(){var t=this;return this._lakexDocViewer?this._lakexDocViewer:this._loadLakexEditor().then((function(e){return t._lakexDocViewer=e,t._lakexDocViewer}))}},{key:"smartLoadLakexEditor",value:function(t){var e=window.appData,r=e.book,n=e.doc;("Doc"===(null==n?void 0:n.type)||Array.isArray(null==r?void 0:r.toc)&&r.toc.some((function(t){return"DOC"===t.type}))&&n||t||this._isPreloadPath())&&(console.time("smartLoadLakexEditor"),this._loadLakexEditor().then((function(){console.timeEnd("smartLoadLakexEditor")})))}}])&&o(e.prototype,n),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.a=new a},3511:function(t,e,r){"use strict";var n,o,i,a;r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return o})),r.d(e,"c",(function(){return a})),function(t){t.content_updated_at="content_updated_at",t.first_published_at="first_published_at"}(n||(n={})),function(t){t.all="all",t.archive="archive",t.image="image",t.bookmark="bookmark",t.attachment="attachment",t.archived="archived",t.share="share",t.dingTalkRobot="dingTalkRobot",t.wechatRobot="wechatRobot"}(o||(o={})),function(t){t.YUQUE_DESKTOP_APP="yuque-desktop",t.WECHAT_H5="wechat-h5",t.WECHAT_ROBOT="wechat-robot",t.DINGTALK_H5="dingtalk-h5",t.DINGTALK_ROBOT="dingtalk-robot",t.ALIPAY_WEBAPP="alipay-webapp",t.TEMPLATE_NOTE="template",t.MOBILE_APP="mobile-app"}(i||(i={})),function(t){t[t.unarchived=0]="unarchived",t[t.archived=9]="archived"}(a||(a={}))},3512:function(t,e,r){"use strict";r(61);var n=r(23),o=r(0);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){a=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function f(t,e,r,o){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var d={};function y(){}function h(){}function m(){}var v={};s(v,c,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(L([])));g&&g!==e&&r.call(g,c)&&(v=g);var w=m.prototype=y.prototype=Object.create(v);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,a,c,u){var l=p(t[n],t,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==i(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(f).then((function(t){s.value=t,c(s)}),(function(t){return o("throw",t,c,u)}))}u(l.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:h,configurable:!0}),h.displayName=s(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},E(_.prototype),s(_.prototype,u,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(w),s(w,l,"Generator"),s(w,c,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function c(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t){var e,r=t.getNotes,i=t.listData,l=t.isDesktopApp,s=u(Object(o.useState)(null),2),f=s[0],p=s[1];function d(){var t;return t=a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e[0].isIntersecting&&r({noLoading:!0});case 1:case"end":return t.stop()}}),t)})),d=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){c(i,n,o,a,u,"next",t)}function u(t){c(i,n,o,a,u,"throw",t)}a(void 0)}))},d.apply(this,arguments)}return l&&n.a.config({top:80,duration:1.5}),Object(o.useEffect)((function(){var t=document.querySelector("#siteTipGuide");return t&&(t.style.display="none"),l&&n.a.config({top:80,duration:1.5}),function(){var t=document.querySelector("#siteTipGuide");t&&(t.style.display="block")}}),[]),window.IntersectionObserver&&(e=new IntersectionObserver((function(t){return d.apply(this,arguments)}),{threshold:.1})),Object(o.useEffect)((function(){if(f&&e)return e.observe(f),function(){e.unobserve(f)}}),[f,i]),{setLoadRef:p}}},3513:function(t,e,r){"use strict";r(61);var n=r(23),o=r(0),i=r(532),a=r(3455),c=r(3459),u=r(174),l=r(3511);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(){f=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function y(){}function h(){}function m(){}var v={};u(v,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(L([])));g&&g!==e&&r.call(g,i)&&(v=g);var w=m.prototype=y.prototype=Object.create(v);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,i,a,c){var u=p(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==s(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:h,configurable:!0}),h.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function p(t){return function(t){if(Array.isArray(t))return w(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function y(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){d(i,n,o,a,c,"next",t)}function c(t){d(i,n,o,a,c,"throw",t)}a(void 0)}))}}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(t,e):void 0}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var E=a.myNotesConsts.NOTE_ORDER_KEY,_={status:i.STATUS.unarchived,filterTab:l.a.all,orderBy:l.b.content_updated_at,currentTagId:null,search:""};e.a=function(t){var e=t.currentUuid,r=t.refreshBatchProcess,a=b(Object(o.useState)([]),2),s=a[0],d=a[1],h=b(Object(o.useState)([]),2),v=h[0],g=h[1],w=b(Object(o.useState)(!1),2),O=w[0],S=w[1],j=b(Object(o.useState)(!0),2),x=j[0],P=j[1],L=b(Object(o.useState)([]),2),T=L[0],k=L[1],C=b(Object(o.useState)(m(m({},_),{},{orderBy:u.a.get(E)||l.b.content_updated_at})),2),A=C[0],R=C[1],N=Object(o.useCallback)((function(t){g([]),d([]),R(m(m({},A),t))}),[A]),I=Object(o.useCallback)((function(t){return v.find((function(e){return e.id===t}))?[v,g]:[s,d]}),[s,v]),D=Object(o.useCallback)(y(f().mark((function t(){var e,r,n,o,a,u,y=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=y.length>0&&void 0!==y[0]?y[0]:{}).noLoading||S(!0),r={offset:s.length,q:A.search,filter_type:A.filterTab,status:A.status,merge_dynamic_data:0,order:A.orderBy,with_pinned_notes:!0},A.currentTagId&&(r.tag=A.currentTagId),i.NEED_PINNED_TYPE.includes(A.filterTab)||delete r.with_pinned_notes,e.fromQuery&&(r.offset=0),r.q&&(r.order=l.b.first_published_at),i.DEFAULT_TYPE.includes(r.filter_type)||(r.include_body=!0,r.order=l.b.first_published_at),t.prev=8,t.next=11,c.a.NoteCtlImpl.index(r,{useOriginResp:!0});case 11:n=t.sent,o=n.has_more,a=n.notes,u=n.pin_notes,P(o),0===r.offset?i.NEED_PINNED_TYPE.includes(A.filterTab)?(g(u),d(a)):d(a):d([].concat(p(s),p(a)));case 17:return t.prev=17,S(!1),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[8,,17,20]])}))),[A,s]),M=Object(o.useCallback)(y(f().mark((function t(){var e,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.NoteTagCtlImpl.count({status:A.status,filter_type:A.filterTab});case 2:e=t.sent,(r=e.data)&&(k(r),A.currentTagId&&!r.some((function(t){return t.id===A.currentTagId}))&&N({currentTagId:null}));case 5:case"end":return t.stop()}}),t)}))),[A]);var F=Object(o.useCallback)((function(t){return c.a.NoteOperateCtlImpl.batchDelete({ids:t,latest_update_user_uuid:e}).then((function(){null==r||r();var e=s.slice().filter((function(e){return!t.includes(e.id)}));d(e);var o=v.slice().filter((function(e){return!t.includes(e.id)}));g(o),!e.length&&x&&D(),M(),n.a.success(__("小记已移至回收站"))})).catch((function(){n.a.error(__("删除失败"))}))}),[I,e]),U=function(){var t=y(f().mark((function t(e){var r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.NoteOperateCtlImpl.batchPin({ids:[e.id]});case 2:e.pinned_at=new Date,r=s.filter((function(t){return t.id!==e.id})),v.unshift(e),d(r),g(v),n.a.success(__("小记置顶成功"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),G=function(){var t=y(f().mark((function t(e){var r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.NoteOperateCtlImpl.batchUnPin({ids:[e.id]});case 2:e.pinned_at=null,r=v.filter((function(t){return t.id!==e.id})),s.unshift(e),d(s),g(r),n.a.success(__("取消置顶成功"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){D(),M()}),[A]),{state:{listData:s,listLoading:O,hasMore:x,noteTags:T,noteFilterParams:A,pinnedListData:v},setListData:d,getNotes:D,getNoteTags:M,onChangeFilterParams:N,onReset:function(){g([]),R(_)},onRemoveNote:function(t){var e=t.id;F([e])},setPinnedListData:g,getListData:I,pinnedNote:U,deletePinnedNote:G,onRemoveNotes:F}}},3515:function(t,e,r){"use strict";r(64);var n=r(21),o=r(355),i=r.n(o),a=r(2756),c=r.n(a),u=(r(445),r(166)),l=(r(114),r(65)),s=r(0),f=r.n(s),p=r(30),d=r.n(p),y=r(13),h=r.n(y),m=r(8),v=r.n(m),b=r(261),g=r.n(b),w=r(1421),E=r(944),_=r(939),O=r(42),S=r(170),j=r(3517),x=r(174),P=r(3470),L=r.n(P),T=r(532),k=r(3518),C=r(3455),A=r(3462),R=r(266),N=r(3501),I=r(3472),D={toolBarBtn:"index-module_toolBarBtn_kG8Cd",wrapper:"index-module_wrapper_8ethE",noteItem:"index-module_noteItem_dVp5J",note:"index-module_note_geZ56",viewBlank:"index-module_viewBlank_ecM7l",tagPinned:"index-module_tagPinned_--NI2",descMoreIcon:"index-module_descMoreIcon_wlBa3",tab:"index-module_tab_zkK5m",arrowUp:"index-module_arrowUp_lRGKc",arrowDown:"index-module_arrowDown_3-EN3",tabNote:"index-module_tabNote_8V7gj",hidden:"index-module_hidden_M8z9j",tagPinnedContainer:"index-module_tagPinnedContainer_hB8jT",selected:"index-module_selected_aA0w-",rightToolBar:"index-module_rightToolBar_e1gvN",noteItemExpand:"index-module_noteItemExpand_PjrCj",leftToolBar:"index-module_leftToolBar_JMyy5",content:"index-module_content_Yf3Cm",loading:"index-module_loading_uVMCS",mask:"index-module_mask_-nOYf",reading:"index-module_reading_dfUvx",isTemplate:"index-module_isTemplate_7o8Q-",viewMore:"index-module_viewMore_gsQbm",searchMode:"index-module_searchMode_jG3fm",meta:"index-module_meta_B+ClL",radio:"index-module_radio_2HGaM",contentExpanded:"index-module_contentExpanded_lWgEI",editing:"index-module_editing_nW8gJ",hasTag:"index-module_hasTag_wtzsZ",viewMoreShow:"index-module_viewMoreShow_pN6H7",images:"index-module_images_fAoGp",date:"index-module_date_095hy",imagesContent:"index-module_imagesContent_t0q35",item:"index-module_item_2FEiU",bookmark:"index-module_bookmark_-+dy+",title:"index-module_title_6RJyp",desc:"index-module_desc_WTwbK",belong:"index-module_belong_Csy5b",text:"index-module_text_bro5m",left:"index-module_left_s-MXM",right:"index-module_right_RJVuX",attachment:"index-module_attachment_H4LKm",file:"index-module_file_e9W5F",name:"index-module_name_fKT1c",size:"index-module_size_xQNXJ",empty:"index-module_empty_cBT2k",loadMoreBtn:"index-module_loadMoreBtn_t6j9W",theEndTips:"index-module_theEndTips_tq+NY",blank:"index-module_blank_2HJdh",desktop:"index-module_desktop_oahLD",toolbarStyle:"index-module_toolbarStyle_cNHWw",batchProcess:"index-module_batchProcess_BqhA4",checkBox:"index-module_checkBox_mz+g+",rightToolBarCollapse:"index-module_rightToolBarCollapse_cPTfb",rightToolBarSave:"index-module_rightToolBarSave_vhDcz",tagContainer:"index-module_tagContainer_nVqVt"};function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function F(){return F=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},F.apply(this,arguments)}function U(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==M(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===M(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function G(){G=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function y(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var b=y.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==M(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function B(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=z(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Y(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function q(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Y(i,n,o,a,c,"next",t)}function c(t){Y(i,n,o,a,c,"throw",t)}a(void 0)}))}}function V(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||z(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){if(t){if("string"==typeof t)return H(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(t,e):void 0}}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var W=C.myNotesConsts.COLLAPSE_BTN_CLASS,K=function(t){var e,r,n=t.note,o=t.noteTags,i=t.enableDynamicTaskList,a=t.onLoadNote,c=t.onCollapseNote,u=t.renderEditor,p=t.onChangeNote,d=t.onUpdateContentUpdatedAt,y=n.id,m=n.content,v=m.updated_at,b=m.abstract,g=m.source,w=m.doc_dynamic_data,E=n.tags,_=void 0===E?[]:E,S=V(Object(s.useState)(!g),2),j=S[0],x=S[1],P=V(Object(s.useState)(!!g),2),L=P[0],k=P[1],M=V(Object(s.useState)(!g),2),Y=M[0],z=M[1],H=V(Object(s.useState)(!!g),2),K=H[0],$=H[1],J=Object(s.useRef)(null),Q=Object(s.useRef)(null),Z=Object(s.useRef)(null),X=n.editing,tt=n.loading,et=n.expanded_at,rt=n.changed_at,nt=n.save_from,ot=null===v;if(!C.isDev&&ot)return null;var it="item-".concat(n.id,"-").concat(v),at={};C.isDesktopApp&&(at.downloadFileHandler=C.downloadFileHandler);var ct=_&&_.map((function(t){var e=o&&o.find((function(e){return e.id===t.id}));return e||null})).filter((function(t){return!!t})),ut=function(){var t=q(G().mark((function t(e){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var r=setInterval((function(){var n=e.querySelectorAll('ne-card[data-card-name="image"] img');if(0===n.length)return clearInterval(r),t();var o,i=[],a=B(n);try{for(a.s();!(o=a.n()).done;){var c=o.value;c.complete||i.push(c)}}catch(t){a.e(t)}finally{a.f()}0===i.length&&(clearInterval(r),setTimeout((function(){t()}),100))}),10);setTimeout((function(){clearInterval(r),t()}),800)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),lt=function(){var t=q(G().mark((function t(e){var r;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=13;break}if($(!0),k(!1),Q){t.next=5;break}return t.abrupt("return");case 5:return r=Q.current,t.next=8,ut(r);case 8:x(!1),z(!1),k(!0),t.next=16;break;case 13:z(!0),x(!1),setTimeout(q(G().mark((function t(){var e,r;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=J.current){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,ut(e);case 5:x(!0),$(!0),k(!1),null==(r=document.getElementById("doclet-viewmore-".concat(y)))||r.scrollIntoView(!1);case 10:case"end":return t.stop()}}),t)}))),30);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),st=!X&&ct&&!!ct.length,ft=nt&&[T.SAVE_FROM_TYPE.TEMPLATE_NOTE,T.SAVE_FROM_TYPE.TEMPLATE_TODO].includes(nt);if(n.editing)return f.a.createElement("div",{className:h()(D.content,U({},D.contentExpanded,et),D.editing)},u(n));function pt(){null==p||p(n),null==d||d(n.id)}return f.a.createElement(l.a,{className:h()(D.content,"note-item-normal",(e={},U(e,D.contentExpanded,!!ft||et),U(e,D.reading,!X),U(e,D.hasTag,st),U(e,D.isTemplate,ft),e))},f.a.createElement("div",null,Y&&f.a.createElement("div",{style:{display:j?"relative":"absolute",zIndex:j?3:-1,left:0,top:0,overflow:L?"hidden":"none"},ref:J},f.a.createElement(N.a,F({docId:y,key:"".concat(it,"-description-").concat(n.updated_at),content:b,onDynamicDataChange:pt,enableDynamicTaskList:i,dynamicData:w},at))),K&&f.a.createElement("div",{style:{position:L?"relative":"absolute",zIndex:L?3:-1,left:0,top:0,overflow:L?"hidden":"none"},ref:Q},f.a.createElement(N.a,F({docId:y,key:"".concat(it,"-doclet-").concat(y,"-").concat(v),content:g,onDynamicDataChange:pt,enableDynamicTaskList:i,dynamicData:w},at)))),st&&f.a.createElement(I.a,{data:ct}),f.a.createElement("div",{className:h()(D.viewBlank,"view-blank"),onClick:function(t){var e=t.currentTarget;e&&"pointer"===e.style.cursor&&e.nextSibling&&e.nextSibling.click()}}),f.a.createElement("div",{ref:Z,key:"doclet-viewmore-".concat(y),id:"doclet-viewmore-".concat(y),className:h()(D.viewMore,(r={},U(r,D.viewMoreShow,et),U(r,D.expanded,et),r),"view-more"),onClick:function(){var t=q(G().mark((function t(e){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.stopPropagation(),!et){t.next=14;break}if(!rt){t.next=10;break}return t.next=5,a(n);case 5:return c(n),t.next=8,lt(!1);case 8:t.next=12;break;case 10:c(n),lt(!1);case 12:t.next=19;break;case 14:return t.next=16,a(n);case 16:return t.next=18,lt(!0);case 18:setTimeout((function(){Object(A.checkCollapseBtnShow)()}),100);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},(null==b?void 0:b.includes(T.VIEW_MORE_TAG))&&(et?f.a.createElement("span",{className:h()(W,D.descMoreIcon)},f.a.createElement(O.b,{name:"arrow-up",size:14,className:D.descMoreIcon}),__("收起")):f.a.createElement("span",{className:h()(W,D.descMoreIcon)},f.a.createElement(O.b,{name:"arrow-down",size:14,className:D.descMoreIcon}),__("展开")))),X&&f.a.createElement("div",{className:D.mask}),tt&&f.a.createElement("div",{className:D.loading},f.a.createElement(R.default,null)))},$=function(t){var e=t.data,r=t.date;return f.a.createElement("div",{className:h()(D.noteItem,D.images)},f.a.createElement("div",{className:D.date},Object(C.getLocaleMonthName)(r)),f.a.createElement("div",{className:D.imagesContent},e.map((function(t,r){return f.a.createElement("div",{onClick:function(){return Object(C.showImgBrowser)(e,r)},className:D.item,id:"note-image-item-".concat(t.uuid)},f.a.createElement("img",{src:Object(C.getPreviewImage)(L.a.sanitizeUrl(t.src),{size:160})}))}))))};function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function Q(t){return function(t){if(Array.isArray(t))return rt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||et(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function X(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(r),!0).forEach((function(e){tt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function tt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==J(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===J(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function et(t,e){if(t){if("string"==typeof t)return rt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rt(t,e):void 0}}function rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var nt=C.myNotesConsts.NOTE_PINNED_SHOW_KEY,ot=C.myNotesConsts.COLLAPSE_BTN_CLASS,it=C.myNotesConsts.SUBMIT_BTN_CLASS,at=C.myNotesConsts.NOTE_LIST_ITEM_CLASS,ct=C.myNotesConsts.NOTE_LIST_READ_TAG_ADD_CLASS,ut=function(t){var e,r=t.state,o=r.hasMore,a=r.listData,p=r.pinnedListData,y=r.listLoading,m=r.searchValue,v=r.orderBy,b=r.filterTab,P=r.currentTagId,R=r.noteTags,N=r.toDocList,I=r.batchProcess,M=r.noteStatus,F=r.showPinned,U=t.isLiteMode,G=t.getNotes,B=t.onSelectNote,Y=t.onLoadNote,q=t.onCollapseNote,V=t.onChangeNote,z=t.setLoadRef,H=t.renderToolBar,W=t.setToDocList,J=t.setBatchProcess,Z=t.isAlipayWebApp,rt=t.onUpdateContentUpdatedAt,ut=t.setShowPinned,lt=b===T.FILTER_TYPES.all,st=Object(S.b)().isDarkMode;function ft(){if(!P||m)return null;var t=R.find((function(t){var e;return(null===(e=t.tag_meta)||void 0===e?void 0:e.id)===P}));if(!t||!t.count)return null;var e=a&&a.length;p&&p.length>0&&(e+=p.length);var r=t.count-e;return!r||r<0?null:__("{num} 篇小记不包含{text}",{num:r,text:Object(C.getFilterBarConfig)()[b]})}Object(s.useEffect)((function(){if(lt){var t=document.querySelector("#mynote-container .note-list");if(t){var e=t.querySelectorAll(".yuque-doc-content");setTimeout((function(){var t,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=et(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;m?(n.searchPad||(n.searchPad=new j.a({target:n,style:{highlight:{fill:"rgba(255, 230, 0, 0.5)"},select:{fill:"rgba(255, 140, 0, 0.5)"}}})),n.searchPad.find(m.trim())):n.searchPad&&n.searchPad.clear()}}catch(t){r.e(t)}finally{r.f()}}),100),Object(A.handleListScroll)()}}}),[a]);var pt=function(e){var r,n=X(X({},t),{},{state:X(X({},t.state),{},{note:e}),mode:"list"});return null===(r=t.renderEditor)||void 0===r?void 0:r.call(t,n)},dt=function(t){var e=N.some((function(e){return e.id===t.id}));return f.a.createElement("div",{className:D.checkBox,onClick:function(){J(!0)}},f.a.createElement(u.a,{onChange:function(e){!0===e.target.checked?W([].concat(Q(N),[t])):1===N.length?(W(Q(N).filter((function(e){return e.id!==t.id}))),J(!1)):W(Q(N).filter((function(e){return e.id!==t.id})))},checked:e}))};function yt(t){return U?null:f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:h()(D.leftToolBar,tt({},D.batchProcess,I))},!t.editing&&dt(t)),f.a.createElement("div",{className:h()(D.rightToolBar,tt({},D.batchProcess,I))},!t.editing&&!U&&H(t),t.editing&&f.a.createElement("div",{onClick:function(t){var e,r,n=null==t||null===(e=t.target)||void 0===e||null===(r=e.closest(".".concat(at)))||void 0===r?void 0:r.querySelector(".".concat(it));n&&n.click()},className:h()(D.rightToolBarSave,"right-tool-".concat(it))},f.a.createElement(E.default,{width:18})),t.expanded_at&&!t.editing&&f.a.createElement("div",{className:h()(D.rightToolBarCollapse,"right-tool-".concat(ot)),onClick:function(){Object(A.scrollToElem)(t),q(t)}},f.a.createElement(_.default,{width:18}))))}var ht=function(e){var r=e.editing,n="item-".concat(e.id,"-").concat(e.content_updated_at),o={note:e,filterTab:b,noteTags:R,isAlipayWebApp:Z,orderBy:v,onSelectNote:B,renderToolBar:H,renderSideToolBar:yt,enableDynamicTaskList:t.enableDynamicTaskList,onLoadNote:Y,onCollapseNote:q,renderEditor:pt,onChangeNote:V,onUpdateContentUpdatedAt:rt};return f.a.createElement("div",{id:"note-".concat(e.id),key:n,className:h()(D.note,tt({},D.selected,r),at),onDoubleClick:function(t){var r;null!=t&&null!==(r=t.target)&&void 0!==r&&r.closest(".share-note-button")||B(e)}},f.a.createElement("div",{className:h()(D.noteItem,tt({},D.noteItemExpand,r),"note-item")},e.pinned_at&&f.a.createElement("div",{className:D.tagPinnedContainer},f.a.createElement(O.b,{name:"icon-top",size:14,className:D.tagPinned})),!e.editing&&f.a.createElement("div",{className:D.meta},f.a.createElement(k.a,{item:e,orderBy:v,isLiteViewMode:!1}),U&&H(e)),f.a.createElement(K,o),f.a.createElement("div",{className:h()(D.tagContainer,ct)})),yt(e))};return i()(null==p?void 0:p.concat(a))?f.a.createElement("div",{"data-testid":"note-list-empty",className:h()(D.wrapper,D.empty,tt({},D.desktop,C.isDesktopApp),"note-list-empty")},function(){if(y)return null;if(m)return f.a.createElement("div",{className:D.blank},__("未能找到相关{type}",{type:__("小记")}));var t=ft(),e=__("灵光乍现，小记一下");return M===T.STATUS.archived&&(e=__("不再使用的小记可归档于此")),f.a.createElement(f.a.Fragment,null,f.a.createElement("img",{src:st?"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*HSmhT7fKgwMAAAAAAAAAAAAAARQnAQ":"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*HshzTKOlvckAAAAAAAAAAAAAARQnAQ"}),f.a.createElement("p",null,t||e))}()):f.a.createElement("div",{className:h()(D.wrapper,(e={},tt(e,D.desktop,C.isDesktopApp),tt(e,D.win,C.isWin),tt(e,D.searchMode,m),e),"note-list"),"data-testid":"note-list"},T.NEED_PINNED_TYPE.includes(b)&&p.length>0&&!U&&f.a.createElement(n.a,{type:"link",className:D.tab,onClick:function(){ut(!F),x.a.set(nt,Number(!F))}},__("置顶"),f.a.createElement(O.b,{name:"arrow-down",size:16,className:h()(D.arrowUp,tt({},D.arrowDown,!F))})),f.a.createElement("div",{className:h()(tt({},D.hidden,!F))},function(t){if(T.NEED_PINNED_TYPE.includes(b))return t.map(ht)}(Object(C.parseCardData)(p,b))),T.NEED_PINNED_TYPE.includes(b)&&F&&p.length>0&&a.length>0&&f.a.createElement("span",{className:h()(D.tab,D.tabNote)},__("小记")),function(e){if(T.NEED_PINNED_TYPE.includes(b))return e.sort((function(t,e){return new Date(e[v]).getTime()-new Date(t[v]).getTime()})).map(ht);var r,n=e.reduce((function(t,e){if(!e.cards)return t;var r=e.cards.map((function(t){return X(X({},t),{},{published_at:e.published_at,content:{updated_at:e.content.updated_at}})}));return t.concat(r||[])}),[]);if(b===T.FILTER_TYPES.image){var o=c()(n,(function(t){return d()(t.published_at).startOf("month").format()}));return Object.keys(o).sort((function(t,e){return new Date(e).getTime()-new Date(t).getTime()})).map((function(t){var e={data:o[t],date:t};return f.a.createElement($,e)}))}return b===T.FILTER_TYPES.bookmark?(r=n,f.a.createElement(f.a.Fragment,null,r.map((function(t){return f.a.createElement("div",{className:h()(D.noteItem,D.bookmark)},f.a.createElement(l.a,{className:D.item},f.a.createElement(k.a,{item:t}),f.a.createElement("a",{href:L.a.sanitizeUrl(t.detail.url),target:"_blank"},f.a.createElement("div",{className:D.left},f.a.createElement("div",{className:D.title},t.detail.title||__("无标题")),f.a.createElement("div",{className:D.desc},t.detail.desc||""),f.a.createElement("div",{className:D.belong},t.detail.icon&&f.a.createElement("img",{src:L.a.sanitizeUrl(t.detail.icon)}),f.a.createElement("span",{className:D.text},t.detail.belong||t.detail.url||""))),t.detail.image&&f.a.createElement("div",{className:D.right},f.a.createElement("img",{src:L.a.sanitizeUrl(t.detail.image)})))))})))):b===T.FILTER_TYPES.attachment?function(t,e){return f.a.createElement(f.a.Fragment,null,t.map((function(t){var r;return f.a.createElement("div",{className:h()(D.noteItem,D.attachment)},f.a.createElement(l.a,{className:D.item},f.a.createElement(k.a,{item:t}),f.a.createElement("div",{className:D.file},f.a.createElement("div",{className:D.left},null===(r=e.renderResourceIcon)||void 0===r?void 0:r.call(e,t),f.a.createElement("span",{className:D.name},t.name),t.size&&f.a.createElement("span",{className:D.size},"(",g()(t.size),")")),f.a.createElement("div",{className:D.right},f.a.createElement("a",{href:L.a.sanitizeUrl(t.src),download:t.name},f.a.createElement(w.default,null))))))})))}(n,t):null}(Object(C.parseCardData)(a,b)),function(){if(o)return f.a.createElement("div",{className:D.loadMoreBtn,onClick:G,ref:function(t){return z(t)}},__("点击加载更多"));var t=ft();return t?f.a.createElement("div",{className:D.theEndTips},t):a&&a.length>9?f.a.createElement("div",{className:D.theEndTips},__("我是有底线的")):void 0}())};ut.propTypes={isAlipayWebApp:v.a.bool,setLoadRef:v.a.func,setShowRepoModal:v.a.func,state:v.a.object,getNotes:v.a.func,onLoadNote:v.a.func,onCollapseNote:v.a.func,onArchiveNotes:v.a.func,onRemoveNote:v.a.func,onPublicNote:v.a.func,onSelectNote:v.a.func,onChangeNote:v.a.func,onFinishLoadNote:v.a.func,onChangeShareStatus:v.a.func,onInsertToLakeEditor:v.a.func,renderToolBar:v.a.func,renderEditor:v.a.func,renderResourceIcon:v.a.func,enableDynamicTaskList:v.a.bool,setToDocList:v.a.func,setBatchProcess:v.a.func,onUpdateContentUpdatedAt:v.a.func};e.a=ut},3516:function(t,e,r){"use strict";r(94);var n=r(27),o=r(0),i=r.n(o),a=r(8),c=r.n(a),u=r(13),l=r.n(u),s=r(1438),f={wrapper:"search-module_wrapper_S445p",searchBar:"search-module_searchBar_x3Krl",active:"search-module_active_eYHT+",isLiteMode:"search-module_isLiteMode_C4hZN",searchMini:"search-module_searchMini_V+K7h",searchMiniShow:"search-module_searchMiniShow_xFcgm"};function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function d(t,e,r){return e=function(t){var e=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===p(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var m=function(t){var e,r,a,c=t.activeMode,u=t.isDesktopApp,p=t.searchValue,h=t.searchActive,m=t.setSearchActive,v=t.isLiteMode,b=t.onSearchNote,g=t.onSearchReset,w=y(Object(o.useState)(null),2),E=w[0],_=w[1],O=Object(o.useRef)(null);Object(o.useEffect)((function(){p||(_(null),m(!1))}),[p]);var S={ref:O,value:E,prefix:i.a.createElement(s.default,null),placeholder:__("搜索"),autoComplete:"nope",allowClear:!0,onSearch:b,onBlur:function(t){t.target.value||(m(!1),g())},onChange:function(t){var e=t.target.value;_(e)},onClear:function(){_(null)}};return"dark"!==(null===(e=window.appData.themeManager)||void 0===e?void 0:e.current)&&(S.style={borderColor:"#e8e8e8"}),i.a.createElement("div",{"data-testid":"note-search",className:l()(f.wrapper,"note-search")},i.a.createElement("div",{className:l()(f.searchBar,(r={},d(r,f.active,c||h),d(r,f.isLiteMode,v),r))},i.a.createElement(n.a.Search,S)),!c&&i.a.createElement("div",{className:l()(f.searchMini,(a={},d(a,f.searchMiniShow,!h),d(a,f.desktop,u),a)),onClick:function(){m(!0),O&&O.current&&O.current.focus()}},i.a.createElement(s.default,{width:16,height:16,style:{color:"#262626"}})))};m.defaultProps={activeMode:!1,isDesktopApp:!1},m.propTypes={searchValue:c.a.string,searchActive:c.a.bool,isDesktopApp:c.a.bool,onSearchNote:c.a.func,onSearchReset:c.a.func,setSearchActive:c.a.func,activeMode:c.a.bool};e.a=m},3517:function(t,e,r){"use strict";var n=r(25),o=r.n(n),i=r(243),a={}.toString,c=function(t,e){return a.call(t)==="[object "+e+"]"};function u(t){return null==t}function l(t,e,r){try{return window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle[e]}catch(t){return u(r)?null:r}}function s(t,e){var r=[];if(t){if(e&&!e(t))return r;for(var n=t.childNodes,o=0;o<n.length;o++){var i=n[o],a=i.nodeType;3===a?r.push(i):1!==a&&9!==a&&11!==a||(r=r.concat(s(i,e)))}}return r}function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e,r){return(e=m(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function m(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===f(e)?e:String(e)}function v(t,e){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},v(t,e)}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=g(t);if(e){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}(a,t);var e,r,n,o=b(a);function a(t){var e;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e=o.call(this,t),!t.target)throw new Error("please set a dom element as target!");return e.options=d({target:null,style:{highlight:{fill:"rgba(255, 230, 0, 0.5)"},select:{fill:"rgba(255, 140, 0, 0.5)"}},filter:null},t),e.ranges=[],e._initTarget(),e._createCanvas(),e}return e=a,(r=[{key:"_initTarget",value:function(){var t=this.options.target;"static"===l(t,"position")&&(t.style.position="relative")}},{key:"_createCanvas",value:function(){var t=this.options.target,e=document.createElement("div");e.style.position="absolute",e.style.top=0,e.style.left=0,e.style["pointer-events"]="none",e.style["z-index"]=99,t.appendChild(e);var r=new i.TinyCanvas({container:e});this.container=e,this.canvas=r}},{key:"_resizeCanvas",value:function(){var t=this.options.target,e=this.canvas,r=function(t,e){var r=l(t,"width",e);return"auto"===r&&(r=t.offsetWidth),parseFloat(r)}(t),n=function(t,e){var r=l(t,"height",e);return"auto"===r&&(r=t.offsetHeight),parseFloat(r)}(t);e.resize(r,n)}},{key:"_getRelativeRect",value:function(t){var e=this.container,r=t.getBoundingClientRect(),n=e.getBoundingClientRect();return{x:r.left-n.left,y:r.top-n.top,width:r.right-r.left,height:r.bottom-r.top}}},{key:"_cacheRange",value:function(t){return{startOffset:t.startOffset,endOffset:t.endOffset,startContainer:t.startContainer,endContainer:t.endContainer,commonAncestorContainer:t.commonAncestorContainer}}},{key:"_isRangeWrap",value:function(t){var e=this._cacheRange(t);t.setEnd(e.startContainer,e.startOffset+1);var r=t.getBoundingClientRect();t.setEnd(e.startContainer,e.endOffset-1),t.setStart(e.endContainer,e.endOffset);var n=t.getBoundingClientRect();return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),r.bottom!==n.bottom}},{key:"_drawOneByOne",value:function(t,e){for(var r=this._cacheRange(t),n=this.canvas,o=r.startOffset;o<r.endOffset;){t.setStart(r.commonAncestorContainer,o),t.setEnd(r.commonAncestorContainer,o+1);var i=this._getRelativeRect(t);n.clearRect(i),n.draw("Rect",d(d({},i),e)),o++}t.setStart(r.startContainer,r.startOffset),t.setEnd(r.endContainer,r.endOffset)}},{key:"_drawRangeBackground",value:function(t,e){var r=this.canvas;if(this._isRangeWrap(t))return this._drawOneByOne(t,e);var n=this._getRelativeRect(t);r.clearRect(n),r.draw("Rect",d(d({},n),e))}},{key:"_highlightRanges",value:function(t){var e=this;t.forEach((function(t){e._highlightRange(t)}))}},{key:"_clearRange",value:function(t){var e=this.canvas,r=this._getRelativeRect(t);e.clearRect(r)}},{key:"_highlightRange",value:function(t){var e=this.options.style.highlight;this._drawRangeBackground(t,e)}},{key:"_selectRange",value:function(t){var e=this.options.style.select;this._drawRangeBackground(t,e)}},{key:"_clearCanvas",value:function(){this.canvas.clear()}},{key:"_move",value:function(t){var e=this.selectedRange,r=this.ranges;if(e){var n=r.indexOf(e),o=r[n+t];o||(o=t>0?r[t-1]:r[r.length+t]),this._highlightRange(e),this.select(o),this.scrollIntoView()}}},{key:"_replace",value:function(t,e){var r=t.commonAncestorContainer.parentNode,n=document.createTextNode(e);"A"===r.tagName&&r.getAttribute("href")===r.innerText&&r.setAttribute("href",e),t.deleteContents(),t.insertNode(n)}},{key:"replace",value:function(t){if(!u(t)){var e=this.selectedRange;if(this.ranges.length>0){var r={range:e};this.emit("before:replace",r),this._replace(e,t),this._clearRange(e),this.emit("after:replace",r)}}}},{key:"replaceAll",value:function(t){var e=this;if(!u(t)){var r=this.ranges,n={ranges:r};this.emit("before:replaceAll",n),r.forEach((function(r){e._replace(r,t)})),this.emit("after:replaceAll",n),r.forEach((function(t){e._saveCardValue(t)})),this.clear()}}},{key:"show",value:function(){this.container.style.display=""}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"find",value:function(t,e){var r=[];if(this.clear(),t&&c(t,"String")&&t.length>0){e=function(t){return c(t,"Function")}(e)?e:function(){return!0},this._resizeCanvas();var n=s(this.options.target,(function(t){return"none"!==t.style.display&&e(t)}));n.length>0&&(r=function(t,e){var r=[];return t.forEach((function(t){var n=t.nodeValue,o=e.length,i=function(t,e){for(var r=[],n=e.length,o=t.indexOf(e);o>-1;)r.push(o),o=t.indexOf(e,o+n);return r}((n||"").toLowerCase(),(e||"").toLowerCase());i.forEach((function(e){var n=document.createRange();n.setStart(t,e),n.setEnd(t,e+o),r.push(n)}))})),r}(n,t),this._highlightRanges(r),this.ranges=r,this.keyword=t)}return this.ranges=r,r}},{key:"reFind",value:function(){var t=this.selectedRangeIndex,e=this.find(this.keyword);if(e.length>0&&!u(t)){var r=e[t]?e[t]:e[0];this.select(r)}return e}},{key:"scrollIntoView",value:function(){if(this.selectedRange){var t=this.selectedRange.commonAncestorContainer.parentElement;(e=t.getBoundingClientRect()).top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)||(t.scrollIntoView({block:"center"}),document.documentElement.scrollTop=0,document.body.scrollTop=0)}var e}},{key:"select",value:function(t){if(!u(t)){var e=this.ranges,r=t;c(t,"Number")&&(r=e[t]);var n={range:r};this.emit("before:select",n),this._selectRange(r),this.selectedRange=r,this.selectedRangeIndex=e.indexOf(r),this.emit("after:select",n)}}},{key:"next",value:function(){this._move(1)}},{key:"prev",value:function(){this._move(-1)}},{key:"clear",value:function(){this._clearCanvas(),this.selectedRange=void 0,this.ranges=[],this.keyword=void 0}},{key:"count",value:function(){var t=this.ranges;if(0===t.length)return 0;var e=this.selectedRange;return[t.indexOf(e)+1,t.length]}},{key:"destroy",value:function(){var t=this.container;this.options=null,t.parentElement.removeChild(t)}}])&&h(e.prototype,r),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.a);e.a=w},3518:function(t,e,r){"use strict";var n=r(0),o=r.n(n),i=r(30),a=r.n(i),c=r(452),u=r(3455),l=r(2447),s=r(38),f="note-status-module_dev_g73YZ",p="note-status-module_publicInfo_8wLHo",d="note-status-module_text_ZLRRs";function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function h(){h=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function m(){}var v={};u(v,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(L([])));g&&g!==e&&r.call(g,i)&&(v=g);var w=m.prototype=p.prototype=Object.create(v);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==y(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:d,configurable:!0}),d.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function m(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}e.a=function(t){var e=t.item,r=t.orderBy,n=t.isLiteViewMode,i=e.id,y=e.editing,v=e.public,b=e.published_at,g=e.content.updated_at,w=r===c.ORDER_BY.content_updated_at,E=w?g:b,_=n&&new Date(g).getFullYear()!==(new Date).getFullYear();function O(){return S.apply(this,arguments)}function S(){var t;return t=h().mark((function t(){var e;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.shares.findOne({target_type:"Note",target_id:i});case 2:e=t.sent,window.open("".concat(window.location.origin,"/r/notes/share/").concat(e.token));case 4:case"end":return t.stop()}}),t)})),S=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){m(i,n,o,a,c,"next",t)}function c(t){m(i,n,o,a,c,"throw",t)}a(void 0)}))},S.apply(this,arguments)}return o.a.createElement(o.a.Fragment,null,y?o.a.createElement("span",null,__("编辑中"),"..."):o.a.createElement("span",{className:d},w?__("更新于"):__("创建于")," ",l.default.format(E,{onlyDate:_,disableYear:!1}),!!v&&!n&&o.a.createElement("span",{className:p,onClick:O},__("分享中"))),function(t){if(!u.isDev)return null;var e=null===g;return o.a.createElement("span",{className:f},t.id," ",e?"mirror":""," ",a()(t.content_updated_at).format("YYYY-MM-DD HH:mm:ss"))}(e))}},3519:function(t,e,r){"use strict";var n=r(3520),o=r(3530),i=r(3465);t.exports={formats:i,parse:o,stringify:n}},3520:function(t,e,r){"use strict";var n=r(3521),o=r(3478),i=r(3465),a=Object.prototype.hasOwnProperty,c={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},u=Array.isArray,l=Array.prototype.push,s=function(t,e){l.apply(t,u(e)?e:[e])},f=Date.prototype.toISOString,p=i.default,d={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,format:p,formatter:i.formatters[p],indices:!1,serializeDate:function(t){return f.call(t)},skipNulls:!1,strictNullHandling:!1},y={},h=function t(e,r,i,a,c,l,f,p,h,m,v,b,g,w,E,_){for(var O,S=e,j=_,x=0,P=!1;void 0!==(j=j.get(y))&&!P;){var L=j.get(e);if(x+=1,void 0!==L){if(L===x)throw new RangeError("Cyclic object value");P=!0}void 0===j.get(y)&&(x=0)}if("function"==typeof p?S=p(r,S):S instanceof Date?S=v(S):"comma"===i&&u(S)&&(S=o.maybeMap(S,(function(t){return t instanceof Date?v(t):t}))),null===S){if(c)return f&&!w?f(r,d.encoder,E,"key",b):r;S=""}if("string"==typeof(O=S)||"number"==typeof O||"boolean"==typeof O||"symbol"==typeof O||"bigint"==typeof O||o.isBuffer(S))return f?[g(w?r:f(r,d.encoder,E,"key",b))+"="+g(f(S,d.encoder,E,"value",b))]:[g(r)+"="+g(String(S))];var T,k=[];if(void 0===S)return k;if("comma"===i&&u(S))w&&f&&(S=o.maybeMap(S,f)),T=[{value:S.length>0?S.join(",")||null:void 0}];else if(u(p))T=p;else{var C=Object.keys(S);T=h?C.sort(h):C}for(var A=a&&u(S)&&1===S.length?r+"[]":r,R=0;R<T.length;++R){var N=T[R],I="object"==typeof N&&void 0!==N.value?N.value:S[N];if(!l||null!==I){var D=u(S)?"function"==typeof i?i(A,N):A:A+(m?"."+N:"["+N+"]");_.set(e,x);var M=n();M.set(y,_),s(k,t(I,D,i,a,c,l,"comma"===i&&w&&u(S)?null:f,p,h,m,v,b,g,w,E,M))}}return k};t.exports=function(t,e){var r,o=t,l=function(t){if(!t)return d;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||d.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if(void 0!==t.format){if(!a.call(i.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var n=i.formatters[r],o=d.filter;return("function"==typeof t.filter||u(t.filter))&&(o=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:d.addQueryPrefix,allowDots:void 0===t.allowDots?d.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:d.charsetSentinel,delimiter:void 0===t.delimiter?d.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:d.encode,encoder:"function"==typeof t.encoder?t.encoder:d.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:d.encodeValuesOnly,filter:o,format:r,formatter:n,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:d.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:d.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:d.strictNullHandling}}(e);"function"==typeof l.filter?o=(0,l.filter)("",o):u(l.filter)&&(r=l.filter);var f,p=[];if("object"!=typeof o||null===o)return"";f=e&&e.arrayFormat in c?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var y=c[f];if(e&&"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var m="comma"===y&&e&&e.commaRoundTrip;r||(r=Object.keys(o)),l.sort&&r.sort(l.sort);for(var v=n(),b=0;b<r.length;++b){var g=r[b];l.skipNulls&&null===o[g]||s(p,h(o[g],g,y,m,l.strictNullHandling,l.skipNulls,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.format,l.formatter,l.encodeValuesOnly,l.charset,v))}var w=p.join(l.delimiter),E=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?E+="utf8=%26%2310003%3B&":E+="utf8=%E2%9C%93&"),w.length>0?E+w:""}},3521:function(t,e,r){"use strict";var n=r(3463),o=r(3526),i=r(3528),a=n("%TypeError%"),c=n("%WeakMap%",!0),u=n("%Map%",!0),l=o("WeakMap.prototype.get",!0),s=o("WeakMap.prototype.set",!0),f=o("WeakMap.prototype.has",!0),p=o("Map.prototype.get",!0),d=o("Map.prototype.set",!0),y=o("Map.prototype.has",!0),h=function(t,e){for(var r,n=t;null!==(r=n.next);n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r};t.exports=function(){var t,e,r,n={assert:function(t){if(!n.has(t))throw new a("Side channel does not contain "+i(t))},get:function(n){if(c&&n&&("object"==typeof n||"function"==typeof n)){if(t)return l(t,n)}else if(u){if(e)return p(e,n)}else if(r)return function(t,e){var r=h(t,e);return r&&r.value}(r,n)},has:function(n){if(c&&n&&("object"==typeof n||"function"==typeof n)){if(t)return f(t,n)}else if(u){if(e)return y(e,n)}else if(r)return function(t,e){return!!h(t,e)}(r,n);return!1},set:function(n,o){c&&n&&("object"==typeof n||"function"==typeof n)?(t||(t=new c),s(t,n,o)):u?(e||(e=new u),d(e,n,o)):(r||(r={key:{},next:null}),function(t,e,r){var n=h(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}}(r,n,o))}};return n}},3522:function(t,e,r){"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(3523);t.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&o())))}},3523:function(t,e,r){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},3524:function(t,e,r){"use strict";var n=Array.prototype.slice,o=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==o.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var r,i=n.call(arguments,1),a=Math.max(0,e.length-i.length),c=[],u=0;u<a;u++)c.push("$"+u);if(r=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof r){var o=e.apply(this,i.concat(n.call(arguments)));return Object(o)===o?o:this}return e.apply(t,i.concat(n.call(arguments)))})),e.prototype){var l=function(){};l.prototype=e.prototype,r.prototype=new l,l.prototype=null}return r}},3525:function(t,e,r){"use strict";var n=r(3464);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},3526:function(t,e,r){"use strict";var n=r(3463),o=r(3527),i=o(n("String.prototype.indexOf"));t.exports=function(t,e){var r=n(t,!!e);return"function"==typeof r&&i(t,".prototype.")>-1?o(r):r}},3527:function(t,e,r){"use strict";var n=r(3464),o=r(3463),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),c=o("%Reflect.apply%",!0)||n.call(a,i),u=o("%Object.getOwnPropertyDescriptor%",!0),l=o("%Object.defineProperty%",!0),s=o("%Math.max%");if(l)try{l({},"a",{value:1})}catch(t){l=null}t.exports=function(t){var e=c(n,a,arguments);u&&l&&(u(e,"length").configurable&&l(e,"length",{value:1+s(0,t.length-(arguments.length-1))}));return e};var f=function(){return c(n,i,arguments)};l?l(t.exports,"apply",{value:f}):t.exports.apply=f},3528:function(t,e,r){var n="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=n&&o&&"function"==typeof o.get?o.get:null,a=n&&Map.prototype.forEach,c="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&c?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=c&&u&&"function"==typeof u.get?u.get:null,s=c&&Set.prototype.forEach,f="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,p="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,d="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,y=Boolean.prototype.valueOf,h=Object.prototype.toString,m=Function.prototype.toString,v=String.prototype.match,b=String.prototype.slice,g=String.prototype.replace,w=String.prototype.toUpperCase,E=String.prototype.toLowerCase,_=RegExp.prototype.test,O=Array.prototype.concat,S=Array.prototype.join,j=Array.prototype.slice,x=Math.floor,P="function"==typeof BigInt?BigInt.prototype.valueOf:null,L=Object.getOwnPropertySymbols,T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,k="function"==typeof Symbol&&"object"==typeof Symbol.iterator,C="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===k||"symbol")?Symbol.toStringTag:null,A=Object.prototype.propertyIsEnumerable,R=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function N(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||_.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var n=t<0?-x(-t):x(t);if(n!==t){var o=String(n),i=b.call(e,o.length+1);return g.call(o,r,"$&_")+"."+g.call(g.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return g.call(e,r,"$&_")}var I=r(3529),D=I.custom,M=Y(D)?D:null;function F(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function U(t){return g.call(String(t),/"/g,"&quot;")}function G(t){return!("[object Array]"!==z(t)||C&&"object"==typeof t&&C in t)}function B(t){return!("[object RegExp]"!==z(t)||C&&"object"==typeof t&&C in t)}function Y(t){if(k)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!T)return!1;try{return T.call(t),!0}catch(t){}return!1}t.exports=function t(e,r,n,o){var c=r||{};if(V(c,"quoteStyle")&&"single"!==c.quoteStyle&&"double"!==c.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(V(c,"maxStringLength")&&("number"==typeof c.maxStringLength?c.maxStringLength<0&&c.maxStringLength!==1/0:null!==c.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=!V(c,"customInspect")||c.customInspect;if("boolean"!=typeof u&&"symbol"!==u)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(V(c,"indent")&&null!==c.indent&&"\t"!==c.indent&&!(parseInt(c.indent,10)===c.indent&&c.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(V(c,"numericSeparator")&&"boolean"!=typeof c.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var h=c.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return W(e,c);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var w=String(e);return h?N(e,w):w}if("bigint"==typeof e){var _=String(e)+"n";return h?N(e,_):_}var x=void 0===c.depth?5:c.depth;if(void 0===n&&(n=0),n>=x&&x>0&&"object"==typeof e)return G(e)?"[Array]":"[Object]";var L=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=S.call(Array(t.indent+1)," ")}return{base:r,prev:S.call(Array(e+1),r)}}(c,n);if(void 0===o)o=[];else if(H(o,e)>=0)return"[Circular]";function D(e,r,i){if(r&&(o=j.call(o)).push(r),i){var a={depth:c.depth};return V(c,"quoteStyle")&&(a.quoteStyle=c.quoteStyle),t(e,a,n+1,o)}return t(e,c,n+1,o)}if("function"==typeof e&&!B(e)){var q=function(t){if(t.name)return t.name;var e=v.call(m.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),K=X(e,D);return"[Function"+(q?": "+q:" (anonymous)")+"]"+(K.length>0?" { "+S.call(K,", ")+" }":"")}if(Y(e)){var tt=k?g.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):T.call(e);return"object"!=typeof e||k?tt:$(tt)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var et="<"+E.call(String(e.nodeName)),rt=e.attributes||[],nt=0;nt<rt.length;nt++)et+=" "+rt[nt].name+"="+F(U(rt[nt].value),"double",c);return et+=">",e.childNodes&&e.childNodes.length&&(et+="..."),et+="</"+E.call(String(e.nodeName))+">"}if(G(e)){if(0===e.length)return"[]";var ot=X(e,D);return L&&!function(t){for(var e=0;e<t.length;e++)if(H(t[e],"\n")>=0)return!1;return!0}(ot)?"["+Z(ot,L)+"]":"[ "+S.call(ot,", ")+" ]"}if(function(t){return!("[object Error]"!==z(t)||C&&"object"==typeof t&&C in t)}(e)){var it=X(e,D);return"cause"in Error.prototype||!("cause"in e)||A.call(e,"cause")?0===it.length?"["+String(e)+"]":"{ ["+String(e)+"] "+S.call(it,", ")+" }":"{ ["+String(e)+"] "+S.call(O.call("[cause]: "+D(e.cause),it),", ")+" }"}if("object"==typeof e&&u){if(M&&"function"==typeof e[M]&&I)return I(e,{depth:x-n});if("symbol"!==u&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!i||!t||"object"!=typeof t)return!1;try{i.call(t);try{l.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var at=[];return a&&a.call(e,(function(t,r){at.push(D(r,e,!0)+" => "+D(t,e))})),Q("Map",i.call(e),at,L)}if(function(t){if(!l||!t||"object"!=typeof t)return!1;try{l.call(t);try{i.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var ct=[];return s&&s.call(e,(function(t){ct.push(D(t,e))})),Q("Set",l.call(e),ct,L)}if(function(t){if(!f||!t||"object"!=typeof t)return!1;try{f.call(t,f);try{p.call(t,p)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return J("WeakMap");if(function(t){if(!p||!t||"object"!=typeof t)return!1;try{p.call(t,p);try{f.call(t,f)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return J("WeakSet");if(function(t){if(!d||!t||"object"!=typeof t)return!1;try{return d.call(t),!0}catch(t){}return!1}(e))return J("WeakRef");if(function(t){return!("[object Number]"!==z(t)||C&&"object"==typeof t&&C in t)}(e))return $(D(Number(e)));if(function(t){if(!t||"object"!=typeof t||!P)return!1;try{return P.call(t),!0}catch(t){}return!1}(e))return $(D(P.call(e)));if(function(t){return!("[object Boolean]"!==z(t)||C&&"object"==typeof t&&C in t)}(e))return $(y.call(e));if(function(t){return!("[object String]"!==z(t)||C&&"object"==typeof t&&C in t)}(e))return $(D(String(e)));if(!function(t){return!("[object Date]"!==z(t)||C&&"object"==typeof t&&C in t)}(e)&&!B(e)){var ut=X(e,D),lt=R?R(e)===Object.prototype:e instanceof Object||e.constructor===Object,st=e instanceof Object?"":"null prototype",ft=!lt&&C&&Object(e)===e&&C in e?b.call(z(e),8,-1):st?"Object":"",pt=(lt||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(ft||st?"["+S.call(O.call([],ft||[],st||[]),": ")+"] ":"");return 0===ut.length?pt+"{}":L?pt+"{"+Z(ut,L)+"}":pt+"{ "+S.call(ut,", ")+" }"}return String(e)};var q=Object.prototype.hasOwnProperty||function(t){return t in this};function V(t,e){return q.call(t,e)}function z(t){return h.call(t)}function H(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function W(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return W(b.call(t,0,e.maxStringLength),e)+n}return F(g.call(g.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,K),"single",e)}function K(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+w.call(e.toString(16))}function $(t){return"Object("+t+")"}function J(t){return t+" { ? }"}function Q(t,e,r,n){return t+" ("+e+") {"+(n?Z(r,n):S.call(r,", "))+"}"}function Z(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+S.call(t,","+r)+"\n"+e.prev}function X(t,e){var r=G(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=V(t,o)?e(t[o],t):""}var i,a="function"==typeof L?L(t):[];if(k){i={};for(var c=0;c<a.length;c++)i["$"+a[c]]=a[c]}for(var u in t)V(t,u)&&(r&&String(Number(u))===u&&u<t.length||k&&i["$"+u]instanceof Symbol||(_.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if("function"==typeof L)for(var l=0;l<a.length;l++)A.call(t,a[l])&&n.push("["+e(a[l])+"]: "+e(t[a[l]],t));return n}},3529:function(t,e){},3530:function(t,e,r){"use strict";var n=r(3478),o=Object.prototype.hasOwnProperty,i=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},c=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},u=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},l=function(t,e,r,n){if(t){var i=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/g,c=r.depth>0&&/(\[[^[\]]*])/.exec(i),l=c?i.slice(0,c.index):i,s=[];if(l){if(!r.plainObjects&&o.call(Object.prototype,l)&&!r.allowPrototypes)return;s.push(l)}for(var f=0;r.depth>0&&null!==(c=a.exec(i))&&f<r.depth;){if(f+=1,!r.plainObjects&&o.call(Object.prototype,c[1].slice(1,-1))&&!r.allowPrototypes)return;s.push(c[1])}return c&&s.push("["+i.slice(c.index)+"]"),function(t,e,r,n){for(var o=n?e:u(e,r),i=t.length-1;i>=0;--i){var a,c=t[i];if("[]"===c&&r.parseArrays)a=[].concat(o);else{a=r.plainObjects?Object.create(null):{};var l="["===c.charAt(0)&&"]"===c.charAt(c.length-1)?c.slice(1,-1):c,s=parseInt(l,10);r.parseArrays||""!==l?!isNaN(s)&&c!==l&&String(s)===l&&s>=0&&r.parseArrays&&s<=r.arrayLimit?(a=[])[s]=o:"__proto__"!==l&&(a[l]=o):a={0:o}}o=a}return o}(s,e,r,n)}};t.exports=function(t,e){var r=function(t){if(!t)return a;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?a.charset:t.charset;return{allowDots:void 0===t.allowDots?a.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:a.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:a.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:a.comma,decoder:"function"==typeof t.decoder?t.decoder:a.decoder,delimiter:"string"==typeof t.delimiter||n.isRegExp(t.delimiter)?t.delimiter:a.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:a.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:a.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:a.strictNullHandling}}(e);if(""===t||null==t)return r.plainObjects?Object.create(null):{};for(var s="string"==typeof t?function(t,e){var r,l={},s=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,f=e.parameterLimit===1/0?void 0:e.parameterLimit,p=s.split(e.delimiter,f),d=-1,y=e.charset;if(e.charsetSentinel)for(r=0;r<p.length;++r)0===p[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===p[r]?y="utf-8":"utf8=%26%2310003%3B"===p[r]&&(y="iso-8859-1"),d=r,r=p.length);for(r=0;r<p.length;++r)if(r!==d){var h,m,v=p[r],b=v.indexOf("]="),g=-1===b?v.indexOf("="):b+1;-1===g?(h=e.decoder(v,a.decoder,y,"key"),m=e.strictNullHandling?null:""):(h=e.decoder(v.slice(0,g),a.decoder,y,"key"),m=n.maybeMap(u(v.slice(g+1),e),(function(t){return e.decoder(t,a.decoder,y,"value")}))),m&&e.interpretNumericEntities&&"iso-8859-1"===y&&(m=c(m)),v.indexOf("[]=")>-1&&(m=i(m)?[m]:m),o.call(l,h)?l[h]=n.combine(l[h],m):l[h]=m}return l}(t,r):t,f=r.plainObjects?Object.create(null):{},p=Object.keys(s),d=0;d<p.length;++d){var y=p[d],h=l(y,s[y],r,"string"==typeof t);f=n.merge(f,h,r)}return!0===r.allowSparse?f:n.compact(f)}},3535:function(t,e,r){"use strict";var n=r(38),o={epv:function(t){var e=t.type,r=t.id;n.a.logs.activity({type:e,action:"epv",id:r})}};e.a=o},3537:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(0),o=r.n(n),i=r(1787),a=r(180);function c(t){var e=window.appData||{},r=e.isYuque,n=e.organization,c=e.group,u=void 0===c?{}:c,l=e.me,s=void 0===l?{}:l,f=null==n?void 0:n.id;if(!r||Object(a.isPaid)())throw new Error("should not be show this");var p=!(i.a.isAlipayApp()||i.a.isAndroid()||i.a.isIOS()||i.a.isDingtalk()||i.a.getMobileAppVersion());if(f){var d,y=null==n||null===(d=n.abilities)||void 0===d?void 0:d.destroy;if(y&&p){var h="/r/organizations/dashboard/cashier?action=renew";return void t(o.a.createElement("span",{},[__("升级为付费版空间后可嵌入文件"),o.a.createElement("a",{style:{marginLeft:5},rel:"noreferrer",href:h,target:"_blank",onClick:function(t){window.openExternalLink&&(window.openExternalLink(h,!0),t.preventDefault())}},[__("立即升级")])]))}return t(y?__("升级为付费版空间后可嵌入文件"):__("联系管理员升级为付费版空间后可嵌入文件"))}if(window.appData.group&&u.id!==s.id)return t(__("联系知识库所有者开通会员后可嵌入文件"));if(p){var m="pay_source=file_embed";window.openExternalLink&&(m+="&pay_referer=desktop_app");var v="/settings/member?".concat(m,"#renew");return t(o.a.createElement("span",{},[__("开通会员后可嵌入文件"),o.a.createElement("a",{style:{marginLeft:5},rel:"noreferrer",href:v,target:"_blank",onClick:function(t){window.openExternalLink&&(window.openExternalLink(v,!0),t.preventDefault())}},[__("开通会员")])]))}return t(__("开通会员后可嵌入文件"))}},3540:function(t,e,r){"use strict";r.d(e,"c",(function(){return d})),r.d(e,"a",(function(){return w})),r.d(e,"l",(function(){return L})),r.d(e,"j",(function(){return $})),r.d(e,"h",(function(){return rt})),r.d(e,"i",(function(){return lt})),r.d(e,"k",(function(){return mt})),r.d(e,"f",(function(){return _t})),r.d(e,"d",(function(){return Lt})),r.d(e,"e",(function(){return Nt})),r.d(e,"g",(function(){return Bt})),r.d(e,"b",(function(){return Kt}));var n=r(84),o=r.n(n),i=r(2686),a=r(3458);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===c(i)?i:String(i)),n)}var o,i}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(c,t);var e,r,n,a=s(c);function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return e=c,n=[{key:"getEmptyDocument",value:function(){return{format:o.a.FORMAT.LAKE,value:null}}}],(r=[{key:"getType",value:function(){var t=this.options.targetType;return t?"".concat(t,"_comment").toLowerCase():"comment"}},{key:"getCacheKey",value:function(){var t=this.options.replyId;return this.isEditMode&&this.target&&this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/").concat(this.target.id,"/edit"):this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/").concat(t,"/new"):"autosave/".concat(this.type)}},{key:"isMiniSize",value:function(){return this.options.useMiniGuide||this.options.isMiniSize||window.h5}},{key:"getDefaultFormat",value:function(){return i.a.getDefaultDocumentFormat(o.a.TYPE.TOPIC)}},{key:"getEnableFullEditor",value:function(){return"Artboard"!==this.targetType}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(a.a),d=p;function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==y(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===y(i)?i:String(i)),n)}var o,i}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(i,t);var e,r,n,o=v(i);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.attachType="Resource",t.useBelongAttach=!0,t.from="reply",o.call(this,t)}return e=i,(r=[{key:"getType",value:function(){return"area_comment"}},{key:"getAutoFocus",value:function(){return!0}},{key:"isMiniSize",value:function(){return!0}}])&&h(e.prototype,r),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(d),w=g;function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==E(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===E(i)?i:String(i)),n)}var o,i}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},O.apply(this,arguments)}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=x(t);if(e){var o=x(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(i,t);var e,r,n,o=j(i);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.attachType="Doc",t.useBelongAttach=!0,t.from="reply",o.call(this,t)}return e=i,(r=[{key:"buildOptions",value:function(t){var e,r=O(x(i.prototype),"buildOptions",this).call(this,t);return r.image.showMiniToolbarWhen="never",null===(e=r.disabledPlugins)||void 0===e||e.push("slash"),r}},{key:"getType",value:function(){return"word_comment"}},{key:"getAutoFocus",value:function(){return!1}},{key:"isMiniSize",value:function(){return!0}},{key:"getEnableFullEditor",value:function(){return!1}}])&&_(e.prototype,r),n&&_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(d),L=P,T=r(2699),k=r(174),C=r(3471);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==A(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===A(i)?i:String(i)),n)}var o,i}function N(t,e){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},N(t,e)}function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=D(t);if(e){var o=D(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}C.a;var M=r(30),F=r.n(M);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function B(t,e,r){return(e=q(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,q(n.key),n)}}function q(t){var e=function(t,e){if("object"!==U(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===U(e)?e:String(e)}function V(t,e){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},V(t,e)}function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=H(t);if(e){var o=H(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},H(t)}var W={daily:{title:"#prefix# #day# 日报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>建议 TL 每天组织日会，将一天的重点事项安排于此</p><p>每位同学下班前，在此提交日报</p><p><br /></p><p>日报不要记流水账，尽量在 200 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的日报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>'},weekly:{title:"#prefix# #day# 周报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>将一周的工作总结回复于此</p><p><br /></p><p>不要记流水账，尽量在 800 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的周报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>'},vote:{title:"一起来投票吧",content:'<!doctype lake><meta name="doc-version" content="1" /><card type="block" name="vote" value="data:%7B%22margin%22%3Atrue%2C%22id%22%3A%22jTHWG%22%2C%22type%22%3A%22single%22%7D"></card><p><br /><cursor /></p>'},default:{title:"",content:"<!doctype lake><p></p>"}},K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e)}(i,t);var e,r,n,o=z(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,n=[{key:"getTemplate",value:function(t,e){var r=W[t];if(!r)return{title:null,content:null};var n=F()(new Date).format("YYYY-MM-DD"),o=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?G(Object(r),!0).forEach((function(e){B(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},r);return o.title=o.title.replace("#prefix#",e),o.title=o.title.replace("#day#",n),o}}],(r=[{key:"getType",value:function(){return"thread"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"getFileUploadUrl",value:function(){var t="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.isEditMode?"".concat(t,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(t,"&attachable_type=").concat(this.belongType||"Book","&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):this.group?"".concat(t,"&attachable_type=User&attachable_id=").concat(this.group.id,"&from=").concat(this.from):null}},{key:"getFileCopyUrl",value:function(){var t="/api/upload/copy?type=attachment";return this.isEditMode?"".concat(t,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):"".concat(t,"&attachable_uuid=").concat(this.uuid,"&from=").concat(this.from)}}])&&Y(e.prototype,r),n&&Y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(C.a),$=K;function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==J(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===J(i)?i:String(i)),n)}var o,i}function Z(t,e){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Z(t,e)}function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=tt(t);if(e){var o=tt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===J(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function tt(t){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tt(t)}var et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z(t,e)}(i,t);var e,r,n,o=X(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"getType",value:function(){return"thread_board"}},{key:"getAutoFocus",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"getFileUploadUrl",value:function(){var t="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.isEditMode&&!this.options.useBelongAttach?"".concat(t,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(t,"&attachable_type=").concat(this.belongType,"&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):null}}])&&Q(e.prototype,r),n&&Q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.a),rt=et;function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==nt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===nt(i)?i:String(i)),n)}var o,i}function it(t,e){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},it(t,e)}function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ct(t);if(e){var o=ct(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ct(t){return ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ct(t)}var ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(i,t);var e,r,n,o=at(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"getType",value:function(){return"thread_comment"}}])&&ot(e.prototype,r),n&&ot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(d),lt=ut;function st(t){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},st(t)}function ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==st(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==st(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===st(i)?i:String(i)),n)}var o,i}function pt(){return pt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ht(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},pt.apply(this,arguments)}function dt(t,e){return dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dt(t,e)}function yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ht(t);if(e){var o=ht(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===st(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ht(t){return ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ht(t)}var mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dt(t,e)}(i,t);var e,r,n,o=yt(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.attachType="User",t.useBelongAttach=!0,o.call(this,t)}return e=i,(r=[{key:"buildOptions",value:function(t){var e=pt(ht(i.prototype),"buildOptions",this).call(this,t);return e.typography={mustTypography:"classic",typography:"classic",paragraphSpacing:"default"},e}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}])&&ft(e.prototype,r),n&&ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.a);function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==vt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===vt(i)?i:String(i)),n)}var o,i}function gt(t,e){return gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gt(t,e)}function wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Et(t);if(e){var o=Et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Et(t){return Et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Et(t)}var _t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gt(t,e)}(i,t);var e,r,n,o=wt(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.from="group_custom",t.attachType="User",t.useBelongAttach=!0,o.call(this,t)}return e=i,(r=[{key:"getType",value:function(){return"group_custom"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}])&&bt(e.prototype,r),n&&bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.a);function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function St(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Ot(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Ot(i)?i:String(i)),n)}var o,i}function jt(t,e){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jt(t,e)}function xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Pt(t);if(e){var o=Pt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Pt(t){return Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pt(t)}var Lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jt(t,e)}(i,t);var e,r,n,o=xt(i);function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var e=t.feedback;return t.attachType="User",t.useBelongAttach=!0,t.from="feedback",t.placeholder={tip:e&&e.abilities.manage?"你将要代表语雀回复用户，请使用官方口吻，慎重填写":"",emptyParagraphTip:""},o.call(this,t)}return e=i,(r=[{key:"getType",value:function(){return"feedback_comment"}},{key:"getCacheKey",value:function(){var t=this.getType();if(this.target)return"autosave/".concat(t,"/").concat(this.target.id,"/edit");var e=this.options.feedback;return e?"autosave/".concat(t,"/").concat(e.id,"/new"):"autosave/".concat(t)}},{key:"getContentObject",value:function(){var t=this.target.content||{source:"",format:"lake"};return{format:t.format,value:t.source||""}}},{key:"isMiniSize",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"getAutoFocus",value:function(){return!0}}])&&St(e.prototype,r),n&&St(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(C.a);function Tt(t){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tt(t)}function kt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Tt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Tt(i)?i:String(i)),n)}var o,i}function Ct(t,e){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ct(t,e)}function At(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Rt(t);if(e){var o=Rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Rt(t){return Rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rt(t)}var Nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ct(t,e)}(i,t);var e,r,n,o=At(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.attachType="User",t.useBelongAttach=!0,t.placeholder={tip:"",emptyParagraphTip:""},t.from="feedback",o.call(this,t)}return e=i,(r=[{key:"getType",value:function(){return"feedback_remark"}},{key:"getContentObject",value:function(){return{format:"lake",value:this.target.remark||""}}},{key:"getCacheKey",value:function(){return this.target?"autosave/".concat(this.type,"/").concat(this.target.id):"autosave/".concat(this.type)}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"getAutoFocus",value:function(){return!0}},{key:"isMiniSize",value:function(){return!0}}])&&kt(e.prototype,r),n&&kt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(C.a);function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Dt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==It(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==It(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===It(i)?i:String(i)),n)}var o,i}function Mt(){return Mt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Mt.apply(this,arguments)}function Ft(t,e){return Ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ft(t,e)}function Ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Gt(t);if(e){var o=Gt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===It(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Gt(t){return Gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gt(t)}var Bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ft(t,e)}(i,t);var e,r,n,o=Ut(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.target&&(t.attachType="Doclet"),o.call(this,t)}return e=i,(r=[{key:"getCards",value:function(){return this.options.target?Mt(Gt(i.prototype),"getCards",this).call(this):["label"]}},{key:"getFullCards",value:function(){return this.options.target?Mt(Gt(i.prototype),"getFullCards",this).call(this):["label"]}},{key:"getAutoFocus",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"isMiniSize",value:function(){return!1}}])&&Dt(e.prototype,r),n&&Dt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.a);function Yt(t){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(t)}function qt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Yt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Yt(i)?i:String(i)),n)}var o,i}function Vt(){return Vt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Vt.apply(this,arguments)}function zt(t,e){return zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zt(t,e)}function Ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Wt(t);if(e){var o=Wt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Yt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Wt(t){return Wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wt(t)}var Kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zt(t,e)}(i,t);var e,r,n,o=Ht(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.attachType="Doclet",o.call(this,t)}return e=i,(r=[{key:"buildOptions",value:function(t){var e=Vt(Wt(i.prototype),"buildOptions",this).call(this,t);return e.typography={typography:"classic",paragraphSpacing:"relax"},e}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}])&&qt(e.prototype,r),n&&qt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.a)},3542:function(t,e,r){"use strict";r.r(e);r(61);var n=r(23),o=r(0),i=r.n(o),a=r(8),c=r.n(a),u=r(3535),l=r(1809),s=r(3537),f=r(3631),p=r(1767),d=r(334),y=r(111),h=r(2712),m=(r(227),r(112)),v=r(107),b=r.n(v),g=r(3488),w=r.n(g),E=r(84),_=r.n(E),O=r(344),S=r(38);function j(t){return[_.a.FORMAT.MARKDOWN,_.a.FORMAT.ASL].includes(t)}var x={init:"EditorBase-module_init_eZbjJ",editor:"EditorBase-module_editor_zrggr"};function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function L(){L=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function y(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var b=y.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==P(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function T(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function k(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var A=b()("editor:lakex_mini");function R(t){var e=t.editor,r=t.onChange,n=t.onSubmit,a=t.onLoad,c=e.getProps(),u=c.format,l=c.autoFocus,s=c.isMiniSize,f=c.defaultValue,p=k(Object(o.useState)(j(u)),2),d=p[0],y=p[1],h=k(Object(o.useState)(f),2),v=h[0],b=h[1],g=k(Object(o.useState)(!1),2),E=g[0],P=g[1],C=Object(o.useMemo)((function(){return i.a.createRef()}),[d]),R=i.a.createRef();Object(o.useEffect)((function(){if(j(u)){if(A("convert: ".concat(u," -> lake")),!f)return y(!1),void b("");S.a.docs.convertContent({from:u,to:_.a.FORMAT.LAKE,content:f}).then((function(t){A("convert done:",t),y(!1),b(t.content),P(!0)})).catch((function(t){A("convert fail:",t.message),y(!1)}))}}),[]),Object(o.useEffect)((function(){var t="⌘+enter, ctrl+enter";return w()(t,(function(t){R.current&&R.current.isFocus&&n&&n(t)})),function(){w.a.unbind(t)}}),[]);var N=function(){var n,o=(n=L().mark((function n(){var o,i,c;return L().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(C.current){n.next=2;break}return n.abrupt("return");case 2:if(C.current){n.next=4;break}return n.abrupt("return");case 4:o=s?O.createMicroEditor:O.createMinorEditor,i=e.buildOptions(t),c=o(C.current,i),window.__miniEngine=c,R.current=c,e.setEngine(c),e.setValue(v),c.on("fullscreenStatusChange",(function(t){var e=new CustomEvent("neEditorFullscreenStatusChange",{detail:{isFullscreen:t,engine:c,editorNode:c.editorNode}});window.dispatchEvent(e)})),c.on("change",(function(){r&&r(),e.saveAll()})),a&&a(c),l&&c.focus(!1);case 15:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){T(i,r,o,a,c,"next",t)}function c(t){T(i,r,o,a,c,"throw",t)}a(void 0)}))});return function(){return o.apply(this,arguments)}}();Object(o.useEffect)((function(){N()}),[d,E]);return d?i.a.createElement("div",{id:"larkx-mini-editor",className:x.init},i.a.createElement(m.a,null)):u===_.a.FORMAT.LAKE||E?i.a.createElement("div",{id:"lark-mini-editor",className:x.editor,ref:C}):i.a.createElement("div",{id:"lark-mini-editor",className:x.init},i.a.createElement("h4",null,__("内容格式异常，暂无法编辑")),i.a.createElement("pre",null,t.defaultValue))}R.propTypes={editor:c.a.object,onChange:c.a.func,onLoad:c.a.func,onSubmit:c.a.func};var N=R,I={lakeCreateGuide:"index-module_lakeCreateGuide_VutDm"};function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function M(){M=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function y(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var b=y.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==D(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function F(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function U(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){F(i,n,o,a,c,"next",t)}function c(t){F(i,n,o,a,c,"throw",t)}a(void 0)}))}}function G(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return B(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Y=!1;function q(t){var e=Object(o.useRef)(),r=G(Object(o.useState)(!1),2),a=r[0],c=r[1],m=Object(o.useRef)(!1),v=function(){var t=e.current.isEmpty();m.current!==t&&(c(t),m.current=t)},b=Object(o.useCallback)(function(){var t=U(M().mark((function t(e){var r;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.k)(e.id);case 2:if((r=t.sent).format!==d.FORMAT.LAKETABLE&&!/<card.*name=\"dataTable\"/.test(r.doclet.body_asl)){t.next=5;break}return t.abrupt("return",{content:""});case 5:return Object(y.spmClick)(h.a.TEMPLATE_USAGE,{id:r.id,type:r.type,format:r.format,name:r.name,platform:"pc"}),t.abrupt("return",{content:r.format===d.TYPE_FORMAT_MAP.Doc?r.doclet.body_asl:r.doclet.body});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[]),g=Object(o.useCallback)(function(){var r=U(M().mark((function r(n){var o;return M().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b(n);case 2:if(null!=(o=r.sent)&&o.content){r.next=5;break}return r.abrupt("return");case 5:e.current.setDocument("lake",o.content),c(!1),m.current=!1,t.onChange();case 9:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}(),[b,t.onChange]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(N,{autoFocus:!0,editor:t.editor,autoCompleteLinks:t.autoCompleteLinks,onChange:function(){t.onChange(),v(),Y||(Y=!0,u.a.epv({type:"LakexMiniEditor"}))},onLoad:function(r){e.current=r,t.onLoad(r),v(),r.on("unSupportFileUpload",(function(t){var e;n.a.warning(Object(l.a)(null==t||null===(e=t.extName)||void 0===e?void 0:e.toLowerCase()))})),r.on("clickEmbedButton",(function(){Object(s.a)(n.a.warning.bind(n.a))}))},onSubmit:t.onSubmit,isMiniSize:t.isMiniSize,placeholder:t.placeholder}),t.needCreateGuide&&a?i.a.createElement("div",{className:I.lakeCreateGuide},i.a.createElement(f.default,{doc:t.tplDoc,showRecent:!1,needMore:!1,isFullWidth:!0,visible:!0,includePersonal:!1,onUseTemplate:g})):null)}q.defaultProps={onLoad:function(){},onChange:function(){}},q.propTypes={editor:c.a.object.isRequired,tplDoc:c.a.object,onChange:c.a.func,onSubmit:c.a.func,onLoad:c.a.func,autoCompleteLinks:c.a.bool,isMiniSize:c.a.bool,placeholder:c.a.object,needCreateGuide:c.a.bool};e.default=q},3618:function(t,e,r){"use strict";var n,o=[{id:1,title:__("加油")},{id:2,title:__("开心")},{id:3,title:__("很忙")},{id:4,title:__("想哭")},{id:5,title:__("生气")}],i=(n={},o.forEach((function(t){n[t.id]=t})),n),a=[{id:"thumbs_up",title:__("支持"),icon:"https://gw.alipayobjects.com/zos/basement_prod/40dd7f62-e6ad-48c6-b2c1-aeed729ff753.svg"},{id:"thumbs_down",title:__("反对"),icon:"https://gw.alipayobjects.com/zos/basement_prod/49753f89-a52b-47f8-8dff-ca2b7d5ab29e.svg"},{id:"applause",title:__("喝彩"),icon:"https://gw.alipayobjects.com/zos/basement_prod/39b96288-777c-4ad9-8065-fe27ee2366d5.svg"},{id:"momo",title:__("摸摸"),icon:"https://gw.alipayobjects.com/zos/basement_prod/486defba-93e3-4151-8b23-6fb09dfb7f97.svg"},{id:"+1",title:__("+1"),icon:"https://gw.alipayobjects.com/zos/bmw-prod/cd3682d7-3cc9-44a1-87d3-1feb83baee73.svg"},{id:"OK",title:"OK",icon:"https://gw.alipayobjects.com/zos/bmw-prod/70ec25dc-2ad6-42f3-b802-76ba015becde.svg"}],c=function(){var t={};return a.forEach((function(e){t[e.id]=e})),t}(),u={REACTIONS:a,getMoodTitleById:function(t){return(i[t]||{}).title||""},getPostUrl:function(t){var e=window.location.hash||"",r=window.location.href;return r=r.substring(0,r.length-e.length),"".concat(r,"#comment-").concat(t)},classifyReactions:function(t){var e=Object.keys(c),r={};return e.forEach((function(t){r[t]={count:0,user_ids:[]}})),t.forEach((function(t){t.action_option.split(",").forEach((function(e){r[e]&&(r[e].count++,r[e].user_ids.push(t.user_id))}))})),r},getReactionById:function(t){return c[t]}};e.a=u},3623:function(t,e,r){var n=r(2607)("toLowerCase");t.exports=n},3630:function(t,e,r){"use strict";r.r(e);r(207);var n=r(91),o=(r(95),r(49)),i=(r(113),r(35)),a=r(0),c=r.n(a),u=r(8),l=r.n(u),s=r(674),f=r.n(s),p=r(13),d=r.n(p),y=r(100),h=r(109),m=r(71),v=r(42),b={wrap:"index-module_wrap_4GDfH",close:"index-module_close_27uFj",icon:"index-module_icon_RfM4L",closeIcon:"index-module_closeIcon_6sSTs"};function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var E=function(t){var e=t.icon,r=t.content,n=t.style,o=t.showClose,i=g(Object(a.useState)(!0),2),u=i[0],l=i[1];return u?c.a.createElement("div",{className:b.wrap,style:n},e&&c.a.createElement("div",{className:b.icon},e),c.a.createElement("div",{className:b.content},r),o&&c.a.createElement("div",{className:b.close,onClick:function(){l(!1)}},c.a.createElement("span",{className:d()("lake-icon","lake-icon-close",b.closeIcon)}))):null};E.propTypes={icon:l.a.node,content:l.a.node.isRequired,style:l.a.object,showClose:l.a.bool};var _=E,O=r(213),S={closeBtn:"ReaderAudit-module_closeBtn_hHU+3",detail:"ReaderAudit-module_detail_mWCgN",toggleDetail:"ReaderAudit-module_toggleDetail_pq7CA",moreLink:"ReaderAudit-module_moreLink_oxcCo",tagModeWrapper:"ReaderAudit-module_tagModeWrapper_xupeI",tagText:"ReaderAudit-module_tagText_Womh9",pending:"ReaderAudit-module_pending_m3C28",illegal:"ReaderAudit-module_illegal_B8aJ7",banned:"ReaderAudit-module_banned_sHuxy",isIntranet:"ReaderAudit-module_isIntranet_WPBjb",tagClose:"ReaderAudit-module_tagClose_YIxR7"};function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){L(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function L(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==j(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===j(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function C(t){var e,r=T(Object(a.useState)(!1),2),u=r[0],l=r[1],s=T(Object(a.useState)(!0),2),p=s[0],b=s[1],g=null===(e=window.appData.settings)||void 0===e?void 0:e.forbid_insecure_content,w=t.doc,E=t.type,O=t.tagMode,j=w.audits,x=w.read_status,k=w.id,C=w.content_updated_at,A=w.abilities,R=void 0===A?{}:A,N=window.appData,I=N.book,D=N.group,M=N.me,F=t.isYuque||window.appData.isYuque;var U="audit_ignored_".concat(E,"_").concat(k);function G(t){null==t||t.preventDefault(),localStorage.setItem(U,Date.now()),b(!1)}function B(t){var e=t.filter((function(t){return null!==t}));return f()(e)}if(Object(a.useEffect)((function(){if(x===y.READ_STATUS.insecure)if(M.isAdmin||R.update){if(!g){var t=localStorage.getItem(U);if(t&&C){var e=new Date(C).getTime();b(e>t)}}}else b(!1)}),[]),x<=y.READ_STATUS.ok&&(null==I?void 0:I.status)!==h.STATUS.banned&&(null==D?void 0:D.status)!==m.STATUS.blocked)return null;if(x<=y.READ_STATUS.ok&&((null==I?void 0:I.status)===h.STATUS.banned||(null==D?void 0:D.status)===m.STATUS.blocked))return null!=M&&M.isAdmin&&console.error("ATTENTION: 该文档所在的知识库或者作者被屏蔽, groupBlocked: ".concat((null==D?void 0:D.status)===m.STATUS.blocked,", bookBlocked: ").concat((null==I?void 0:I.status)===h.STATUS.banned)),null;if(null!=D&&D.isPermanentPunished)return null!=M&&M.isAdmin&&x>y.READ_STATUS.ok&&console.error("ATTENTION: 该用户已经被永久屏蔽，此文档也是屏蔽状态"),null;if("Comment"===E&&x<=y.READ_STATUS.ok)return null;if(!p)return null;var Y=[];j&&(j.forbidden||j.reason)&&(Y=j.forbidden||[j.reason]);var q,V={};if(V[y.READ_STATUS.pending]=__("当前内容正在审核中，其他人暂时无法查看，请稍候。"),V[y.READ_STATUS.suspect]=__("因内容疑似有违规内容，其他人无法查看，正在审核中，请稍后。"),V[y.READ_STATUS.illegal]=__("当前内容有违规内容，其他人无法查看，请修正后再发布。"),V[y.READ_STATUS.illegal_polity]=__("当前内容有违规内容，其他人无法查看，请修正后再发布。"),V[y.READ_STATUS.illegal_ak]=__("当前文档中包含疑似明文敏感信息（包括不限于OSS秘钥、AK信息、数据库账密等），可能会造成数据泄露，请脱敏或删除明文敏感信息后重新发布。"),V[y.READ_STATUS.illegal_privacy]=__("当前文档中包含疑似明文敏感信息（包括不限于身份证号、住址、手机号等），可能会造成数据泄露，请脱敏或删除明文敏感信息后重新发布。"),V[y.READ_STATUS.banned]=__("内容因含敏感信息已被系统屏蔽处理，其他人无法查看。"),F)q=V[x]||V[y.READ_STATUS.suspect];else{var z=!O&&Y.length>0?c.a.createElement("a",{onClick:function(t){t.preventDefault(),l(!u)},className:S.toggleDetail},u?"收起详情":"展开详情"):null,H=c.a.createElement("a",{href:"https://yuque.antfin.com/lark/bqllwz/cg2xev",target:"_blank",className:S.moreLink},__("了解更多"));q=g||x!==y.READ_STATUS.insecure?c.a.createElement(c.a.Fragment,null,__("当前文档中包含疑似明文敏感信息（包括不限于OSS秘钥、AK信息、数据库账密等），已被系统自动设置为私密，请脱敏或删除明文敏感信息后重新发布。"),H,z," "):c.a.createElement(c.a.Fragment,null,__("当前文档中包含疑似明文敏感信息（包括不限于OSS秘钥、AK信息、数据库账密等），可能会造成数据泄露，请脱敏或删除明文敏感信息后重新发布。"),H,z)}var W=F?{}:{padding:24,paddingRight:32,marginTop:8,position:"relative"};if(O){if(F){var K,$,J,Q,Z=(L(K={},y.READ_STATUS.pending,__("审核中")),L(K,y.READ_STATUS.illegal,__("该内容涉嫌违规#tag")),L(K,y.READ_STATUS.banned,__("该内容已屏蔽#tag")),K);switch(x){case y.READ_STATUS.pending:case y.READ_STATUS.suspect:Q=y.READ_STATUS.pending;break;case y.READ_STATUS.illegal:case y.READ_STATUS.illegal_polity:case y.READ_STATUS.illegal_ak:case y.READ_STATUS.illegal_privacy:Q=y.READ_STATUS.illegal;break;case y.READ_STATUS.banned:Q=y.READ_STATUS.banned;break;default:Q=null}return(J=Z[Q])?c.a.createElement(i.a,{title:c.a.createElement("span",{className:S.tagText},q),placement:"bottom"},c.a.createElement("div",{className:d()(S.tagModeWrapper,($={},L($,S.pending,Q===y.READ_STATUS.pending),L($,S.illegal,Q===y.READ_STATUS.illegal),L($,S.banned,Q===y.READ_STATUS.banned),$))},c.a.createElement("span",{className:S.tagText},J))):null}return c.a.createElement("div",{className:d()(S.tagModeWrapper,S.isIntranet),onClick:function(){o.a.confirm({title:__("疑似含敏感信息，请脱敏或删除敏感信息后重新发布#tag"),content:c.a.createElement(c.a.Fragment,null,q,Y.length>0&&c.a.createElement("ul",{className:S.detail},B(Y).map((function(t){return c.a.createElement("li",{key:t},t)})))),okText:__("知道了"),cancelText:__("忽略"),onCancel:function(){G()}})}},c.a.createElement("span",{className:S.tagText},__("疑似含敏感信息，请脱敏或删除敏感信息后重新发布#tag")),c.a.createElement("div",{className:S.tagClose,onClick:function(t){t.stopPropagation(),G()}},c.a.createElement(v.b,{name:"close",width:10,height:10})))}return c.a.createElement(_,{style:P({marginBottom:"Doc"===E?24:0,marginTop:4},W),icon:c.a.createElement(v.b,{name:"doc-has-content-risk",height:17,width:15}),content:c.a.createElement(c.a.Fragment,null,!F&&c.a.createElement(n.a,{title:__("确认忽略该提醒？"),onConfirm:G,okText:__("忽略"),cancelText:__("取消"),placement:"bottom"},c.a.createElement("span",{className:S.closeBtn},c.a.createElement(v.b,{name:"close",width:14}))),c.a.createElement("span",{"data-testid":"audit-tip"},q),u&&c.a.createElement("ul",{className:S.detail},B(Y).map((function(t){return c.a.createElement("li",{key:t},t)}))))})}C.defaultProps={isYuque:window.appData.isYuque},C.propTypes={doc:l.a.object.isRequired,type:l.a.string,isYuque:l.a.bool,tagMode:l.a.bool};e.default=Object(O.b)(C)},3631:function(t,e,r){"use strict";r.r(e),r.d(e,"DocCreationGuide",(function(){return k})),r.d(e,"default",(function(){return C}));var n=r(3623),o=r.n(n),i=r(0),a=r(302),c=r(582),u=r(191),l=r(1767),s=r(3620),f=r(3632),p=r(2803),d=r(539);function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function h(){h=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function m(){}var v={};u(v,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(L([])));g&&g!==e&&r.call(g,i)&&(v=g);var w=m.prototype=p.prototype=Object.create(v);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==y(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:d,configurable:!0}),d.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function m(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var v=new(r.n(d).a)(5);function b(t,e){return g.apply(this,arguments)}function g(){var t;return t=h().mark((function t(e,r){var n,o,i,a=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>2&&void 0!==a[2]?a[2]:5e3,!(o=v.get(e))){t.next=4;break}return t.abrupt("return",Promise.resolve(o));case 4:return t.next=6,r();case 6:return i=t.sent,v.set(e,i,{maxAge:n}),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})),g=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){m(i,n,o,a,c,"next",t)}function c(t){m(i,n,o,a,c,"throw",t)}a(void 0)}))},g.apply(this,arguments)}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}var E=["group","book","onUseTemplate","height","doc","isFullWidth","showRecent","needMore"],_=["visible","className","style"];function O(){return O=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},O.apply(this,arguments)}function S(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function j(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?j(Object(r),!0).forEach((function(e){P(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function P(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==w(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===w(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return T(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var k=function(t){var e=t.group,r=t.book,n=t.onUseTemplate,d=t.height,y=(t.doc,t.isFullWidth),h=void 0===y||y,m=t.showRecent,v=void 0===m||m,g=t.needMore,w=void 0===g||g,_=S(t,E),j=function(t){var e=t.book,r=t.group,n=t.doc,a=t.showRecent,s=void 0===a||a,f=t.includePersonal,d=void 0===f||f,y=L(i.useState([]),2),h=y[0],m=y[1],v=L(i.useState({data:[],meta:{}}),2),g=v[0],w=v[1],E=(null==n?void 0:n.type)||"Doc";return i.useEffect((function(){var t;if(s){var r=function(){return c.a.editor.recentlyUpdatedDocs({book_id:e.id,type:E})};null!=e&&e.id&&null!=e&&null!==(t=e.abilities)&&void 0!==t&&t.create_doc?b("getRecentDocs-".concat(e.id,"-").concat(E),r,5e3).then((function(t){m(t)})):r().then((function(t){return m(t)}))}}),[e,s]),i.useEffect((function(){var t=p.a[o()(E)];b("getAllTemplates-".concat((null==e?void 0:e.id)||"","-").concat((null==r?void 0:r.id)||"","-").concat((null==e?void 0:e.organization_id)||"","-").concat(E||"","-").concat(t||""),(function(){return Object(l.i)(x(x({},Object(l.l)(e,r,d)),{},{official_channel:t,limit:5,format:u.TYPE_FORMAT_MAP[E]}))}),5e3).then((function(t){w(t)}))}),[e,E]),{recentDocs:h,templateConfig:g}}(t),P=j.recentDocs,T=j.templateConfig,k=L(i.useState(0),2),C=k[0],A=k[1],R=h?{}:{maxWidth:"890px",marginLeft:"auto",marginRight:"auto",paddingLeft:"70px",paddingRight:"70px"};return i.createElement("div",O({},_,{style:R}),i.createElement(a.a,{onResize:function(t){t.height&&A(t.height)}},i.createElement(s.c,{templateConfig:T,book:r,group:e,needMore:w,onUseTemplate:n})),v&&i.createElement(f.b,{height:d-C,recentDocs:P,book:r,group:e,onUseTemplate:n}))};function C(t){var e=t.visible,r=t.className,n=t.style,o=S(t,_);return e?i.createElement(k,O({},o,{className:r,style:n})):null}},3659:function(t,e,r){},3673:function(t,e,r){t.exports=r(3677)},3677:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0),i=c(o),a=c(r(8));function c(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.scrollListener=r.scrollListener.bind(r),r.eventListenerOptions=r.eventListenerOptions.bind(r),r.mousewheelListener=r.mousewheelListener.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var t=this.getParentElement(this.scrollComponent);t.scrollTop=t.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var t=!1,e={get passive(){t=!0}};try{document.addEventListener("test",null,e),document.removeEventListener("test",null,e)}catch(t){}return t}},{key:"eventListenerOptions",value:function(){this.props.useCapture;return this.isPassiveSupported()?{useCapture:this.props.useCapture,passive:!0}:{passive:!1}}},{key:"setDefaultLoader",value:function(t){this.defaultLoader=t}},{key:"detachMousewheelListener",value:function(){var t=window;!1===this.props.useWindow&&(t=this.scrollComponent.parentNode),t.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var t=window;!1===this.props.useWindow&&(t=this.getParentElement(this.scrollComponent)),t.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(t){var e=this.props.getScrollParent&&this.props.getScrollParent();return null!=e?e:t&&t.parentNode}},{key:"filterProps",value:function(t){return t}},{key:"attachScrollListener",value:function(){var t=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&t){var e=window;!1===this.props.useWindow&&(e=t),e.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),e.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(t){1!==t.deltaY||this.isPassiveSupported()||t.preventDefault()}},{key:"scrollListener",value:function(){var t=this.scrollComponent,e=window,r=this.getParentElement(t),n=void 0;if(this.props.useWindow){var o=document.documentElement||document.body.parentNode||document.body,i=void 0!==e.pageYOffset?e.pageYOffset:o.scrollTop;n=this.props.isReverse?i:this.calculateOffset(t,i)}else n=this.props.isReverse?r.scrollTop:t.scrollHeight-r.scrollTop-r.clientHeight;n<Number(this.props.threshold)&&t&&null!==t.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=r.scrollHeight,this.beforeScrollTop=r.scrollTop,"function"==typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(t,e){return t?this.calculateTopPosition(t)+(t.offsetHeight-e-window.innerHeight):0}},{key:"calculateTopPosition",value:function(t){return t?t.offsetTop+this.calculateTopPosition(t.offsetParent):0}},{key:"render",value:function(){var t=this,e=this.filterProps(this.props),r=e.children,n=e.element,o=e.hasMore,a=(e.initialLoad,e.isReverse),c=e.loader,u=(e.loadMore,e.pageStart,e.ref),l=(e.threshold,e.useCapture,e.useWindow,e.getScrollParent,function(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}(e,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));l.ref=function(e){t.scrollComponent=e,u&&u(e)};var s=[r];return o&&(c?a?s.unshift(c):s.push(c):this.defaultLoader&&(a?s.unshift(this.defaultLoader):s.push(this.defaultLoader))),i.default.createElement(n,l,s)}}]),e}(o.Component);u.propTypes={children:a.default.node.isRequired,element:a.default.node,hasMore:a.default.bool,initialLoad:a.default.bool,isReverse:a.default.bool,loader:a.default.node,loadMore:a.default.func.isRequired,pageStart:a.default.number,ref:a.default.func,getScrollParent:a.default.func,threshold:a.default.number,useCapture:a.default.bool,useWindow:a.default.bool},u.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},e.default=u,t.exports=e.default},3683:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(0),o=r.n(n),i=r(8),a=r.n(i);function c(t){var e=t.disableLink,r=t.url,n=t.children,i=t.className,a=t.target,c=t.rel,u=t.dataAspmClick,l=t.title;return o.a.createElement("a",{href:e?"#":r,className:i,target:a,rel:c,title:l,"data-aspm-click":u},n)}c.propTypes={disableLink:a.a.bool,url:a.a.string,children:a.a.arrayOf(a.a.element),className:a.a.string,rel:a.a.string,target:a.a.string,dataAspmClick:a.a.string,title:a.a.string}},3689:function(t,e,r){},3704:function(t,e,r){"use strict";r.r(e);r(61);var n=r(23),o=(r(64),r(21)),i=(r(258),r(69)),a=(r(94),r(27)),c=r(0),u=r.n(c),l=r(8),s=r.n(l),f=r(555),p=r(1735),d=r.n(p),y=r(203),h="ReportForm-module_container_CFFvb",m="ReportForm-module_title_NFreI",v="ReportForm-module_subtitle_iS17z",b="ReportForm-module_reportType_F9Aq+",g="ReportForm-module_reportTypeItem_fcNpj",w="ReportForm-module_btns_P3Kpd",E="ReportForm-module_reportReason_Ll05f",_="ReportForm-module_backBtn_Epa1y";function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function S(){S=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function y(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(L([])));v&&v!==e&&r.call(v,i)&&(h=v);var b=y.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==O(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function j(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function x(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,N(n.key),n)}}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=A(t);if(e){var o=A(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return C(t)}(this,r)}}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}function R(t,e,r){return(e=N(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N(t){var e=function(t,e){if("object"!==O(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===O(e)?e:String(e)}var I=[{name:__("含有广告等引导性内容"),type:"normal",code:y.REPORT_TYPE.ad},{name:__("含有辱骂等不友善内容"),type:"normal",code:y.REPORT_TYPE.abuse},{name:__("含有色情、淫秽内容"),type:"normal",code:y.REPORT_TYPE.vulgar},{name:__("含有反社会、血腥暴力等内容"),type:"normal",code:y.REPORT_TYPE.political},{name:__("“清朗”系列专项举报"),type:"normal",code:y.REPORT_TYPE.clearnet},{name:__("传播不实信息（政治类、财经类、疫情类等）"),type:"normal",code:y.REPORT_TYPE.infact},{name:__("国家企业敏感信息泄露"),type:"normal",code:y.REPORT_TYPE.sensitive},{name:__("其他违法犯罪（如毒品、枪支、违规借贷等）"),type:"normal",code:y.REPORT_TYPE.illegal},{name:__("侵犯知识产权"),type:"tort"}],D=[{name:__("个人侵权"),type:"tort",code:y.REPORT_TYPE.personal_tort},{name:__("企业侵权"),type:"tort",code:y.REPORT_TYPE.enterprise_tort}],M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(l,t);var e,r,n,c=k(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return R(C(t=c.call.apply(c,[this].concat(r))),"handleSubmit",(function(e){e.preventDefault();var r=t.props,n=r.onOk;(0,r.form.validateFields)((function(t,e){t||n(e)}))})),t}return e=l,(r=[{key:"render",value:function(){var t=this.props.form.getFieldDecorator;return u.a.createElement(i.a,null,u.a.createElement("div",{className:v},__("具体说明")),u.a.createElement(i.a.Item,{required:!1},t("reason",{validateFirst:!0,rules:[{required:!0,max:500,message:__("请输入举报原因（字数不多于500）")}]})(u.a.createElement(a.a.TextArea,{className:E,rows:5,maxLength:500,placeholder:__("举报原因（字数不多于 500）")}))),u.a.createElement("div",{className:w},u.a.createElement(o.a,{block:!0,onClick:this.props.onCancel},__("返回")),u.a.createElement(o.a,{block:!0,type:"primary",htmlType:"submit",onClick:this.handleSubmit},__("提交"))))}}])&&L(e.prototype,r),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}(u.a.PureComponent);R(M,"propTypes",{onOk:s.a.func.isRequired,onCancel:s.a.func.isRequired,form:s.a.object.isRequired});var F=i.a.create()(M),U=function(t){var e=t.onCancel,r=t.onOk;return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:v},window.h5?__("侵权类举报请到 PC 端完成"):__("请选择类型")),!window.h5&&u.a.createElement("ul",{className:b},D.map((function(t,e){return u.a.createElement("li",{key:t.code||e,className:g,onClick:function(){return function(t){r(t)}(t)}},t.name)}))),u.a.createElement(o.a,{block:!0,className:_,onClick:function(){e()}},__("返回")))};U.propTypes={onOk:s.a.func.isRequired,onCancel:s.a.func.isRequired};var G=function(t){var e=x(Object(c.useState)(),2),r=e[0],o=e[1];function i(t,e){e.preventDefault(),o(t)}var a=function(e){return function(){var r,o=(r=S().mark((function r(o){var i,a;return S().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=window.appData.sharePage&&window.appData.share.token,"tort"!==e.type){r.next=6;break}return t.onClose(),a=d.a.stringify({report_type:o.code,target_id:t.targetId,target_type:t.targetType,token:i}),window.open("/r/content_reports?".concat(a)),r.abrupt("return");case 6:return r.next=8,t.dispatch({type:"proxy.web/contentReport.create",payload:{data:{report_type:e.code,target_id:t.targetId,target_type:t.targetType,token:i,meta:{reason:o.reason,referer_url:window.location.href}}}});case 8:t.onClose(),n.a.success(__("已收到你的举报，感谢反馈"));case 10:case"end":return r.stop()}}),r)})),function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){j(i,n,o,a,c,"next",t)}function c(t){j(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return o.apply(this,arguments)}}()};function l(){o(null)}return r?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:m},r.name),"tort"===r.type?u.a.createElement(U,{onOk:a(r),onCancel:l}):u.a.createElement(F,{onOk:a(r),onCancel:l})):u.a.createElement("div",{className:h},u.a.createElement("div",{className:m},__("举报")),u.a.createElement("div",{className:v},__("请选举报原因")),u.a.createElement("ul",{className:b},I.map((function(t,e){return u.a.createElement("li",{key:t.code||e,onClick:i.bind(null,t)},u.a.createElement("div",{className:g},t.name))}))))};G.propTypes={targetId:s.a.number.isRequired,targetType:s.a.oneOf(["Doc"]).isRequired,onClose:s.a.func.isRequired};e.default=Object(f.d)()(G)},3706:function(t,e,r){"use strict";r(95);var n=r(49),o=r(0),i=r.n(o),a=r(8),c=r.n(a),u=r(167),l=r.n(u),s=r(555),f=r(3704);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}var d=["children"];function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===p(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(){v=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function d(){}function y(){}function h(){}var m={};u(m,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(L([])));g&&g!==e&&r.call(g,i)&&(m=g);var w=h.prototype=d.prototype=Object.create(m);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==p(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=h,n(w,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:y,configurable:!0}),y.displayName=u(h,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function b(){return b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},b.apply(this,arguments)}function g(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function w(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function E(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var O=function(t){var e=E(Object(o.useState)(!1),2),r=e[0],a=e[1];function c(){a(!1)}function u(){var e;return e=v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dispatch({type:"proxy.web/contentReport.check",payload:{data:{target_id:t.targetId,target_type:t.targetType,token:window.appData.sharePage&&window.appData.share.token}}});case 2:a(!0);case 3:case"end":return e.stop()}}),e)})),u=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){w(i,n,o,a,c,"next",t)}function c(t){w(i,n,o,a,c,"throw",t)}a(void 0)}))},u.apply(this,arguments)}var l=t.children,s=g(t,d);return i.a.createElement(i.a.Fragment,null,l({onShowPanel:function(){return u.apply(this,arguments)}}),i.a.createElement(n.a,{destroyOnClose:!0,title:null,footer:null,visible:r,onCancel:c},i.a.createElement(f.default,b({},s,{onClose:c}))))};O.propTypes=h(h({},l()(f.default.propTypes,["targetId","targetType"])),{},{token:c.a.string,children:c.a.func.isRequired}),e.a=Object(s.d)()(O)},3710:function(t,e,r){"use strict";r(64);var n=r(21),o=(r(113),r(35)),i=r(0),a=r.n(i),c=r(8),u=r.n(c),l=r(13),s=r.n(l),f=r(107),p=r.n(f),d=r(84),y=r.n(d),h=r(3724),m=r(3486),v=r(342),b=r(3540),g=r(3542);r(3689);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function E(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P(n.key),n)}}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=j(t);if(e){var o=j(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return S(t)}(this,r)}}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}function x(t,e,r){return(e=P(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P(t){var e=function(t,e){if("object"!==w(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===w(e)?e:String(e)}var L=p()("comment:editor.ui"),T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(u,t);var e,r,i,c=O(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),x(S(e=c.call(this,t)),"focusEditor",(function(){e.editor.focus(!0)})),x(S(e),"onLoad",(function(){e.onChange()})),x(S(e),"onChange",(function(){e.setState({hasValue:!e.editor.isEmpty()})})),x(S(e),"handleSubmit",(function(){e.editor.contentReady().then((function(){if(!e.editor.isEmpty()){var t={format:y.a.FORMAT.LAKE,value:e.editor.getValue(),html:e.editor.getHtml()};L("submit: ",t),e.props.onSubmit(t,(function(){e.reset()}))}}))})),x(S(e),"handleReplyTopicStatusSwitch",(function(){e.state.hasValue?e.editor.contentReady().then((function(){var t={format:y.a.FORMAT.LAKE,value:e.editor.getValue(),html:e.editor.getHtml()};e.props.onSubmit(t,(function(){e.reset(),e.props.toggleTopicStatus()}))})):e.props.toggleTopicStatus()})),x(S(e),"renderEditor",(function(){return a.a.createElement(g.default,{key:"".concat(e.state.editorInstanceId),editor:e.editor,onLoad:e.onLoad,onChange:e.onChange,onSubmit:e.handleSubmit})})),x(S(e),"renderReplyTo",(function(){var t=e.props,r=t.type,n=t.replyId,i=t.showReply;if(!n||!i)return null;var c,u=(e.props.comments||[]).find((function(t){return t.id===n}));if(!u)return L("comment ".concat(n," not exists")),null;c=u.user?u.user.name:__("用户已注销");var l="Topic"===r?"reply-":"comment-";return a.a.createElement("div",{className:"reply-tip"},__("回复")," ",a.a.createElement("a",{href:"#".concat(l).concat(u.id)},"@",c),a.a.createElement(o.a,{title:__("取消回复")},a.a.createElement("span",{className:"remove-reply",onClick:e.props.cancelReplyTo},a.a.createElement("span",{className:"larkicon larkicon-close"}))))})),x(S(e),"renderTopicAction",(function(){var t=e.props,r=t.type,o=t.target;return"Topic"===r&&o.abilities.update?a.a.createElement(n.a,{className:"btn-status",onClick:e.handleReplyTopicStatusSwitch},o.closed_at?a.a.createElement("span",null,e.state.hasValue?__("回复并重新开启"):__("重新开启")):a.a.createElement("span",null,e.state.hasValue?__("回复并关闭"):__("关闭主题"))):null})),e.editor=new b.c({disableYuqueCardEmbedView:t.disableYuqueCardEmbedView,belong:t.target,targetType:t.type,attachType:t.type,getDefaultSuggestions:t.getDefaultSuggestions,useMiniGuide:t.useMiniGuide,isMiniSize:t.isMiniSize,placeholder:t.placeholder||" ",replyId:t.replyId||""}),e.initialDocument=e.editor.getInitialDocument(),L("init use: ",e.initialDocument),e.state={hasValue:!1,editorInstanceId:"reply_main_".concat(t.replyId||"")},e}return e=u,(r=[{key:"componentDidUpdate",value:function(t){var e=this.props.replyId;e&&t.replyId!==e&&this.focusEditor(),t.replyId!==e&&this.editor._engine.engine.iRenderer.updatePlaceholder(this.props.placeholder)}},{key:"reset",value:function(){var t="reply_main_".concat(this.props.replyId||"","_").concat((new Date).getTime());this.editor.reset(),this.initialDocument=b.c.getEmptyDocument(),this.editor.initialDocument=this.initialDocument,this.setState({hasValue:!1,editorInstanceId:t}),L("reset editor, new instance: ".concat(t,", document: "),this.initialDocument)}},{key:"render",value:function(){var t=this.props,e=t.me,r=t.submitting,o=t.showAvatar,i=t.useMiniGuide,c=t.isMiniSize,u=t.group,l=t.reverseReplyButton,f=this.editor.isEditMode,p=s()({"comments-form-wrapper":!0,"edit-mode":f,"no-avatar":!o,"mini-size":c}),d=Object(h.b)(this.props.target,{me:e,group:u}),y=c?24:32;return a.a.createElement("div",{className:"comments-form-editor"},o&&a.a.createElement("div",{className:"avatar"},a.a.createElement(v.a,{src:e.avatar_url,size:y,name:e.name})),a.a.createElement("div",{className:p},a.a.createElement("div",{className:"editor-wrapper"},a.a.createElement("div",{className:"editor"},this.renderReplyTo(),this.renderEditor())),l?a.a.createElement("div",{className:"action clearfix",style:{display:"flex",justifyContent:"flex-end",alignItems:"center"}},(i||this.props.cancelable)&&a.a.createElement(n.a,{style:{marginRight:6},onClick:this.props.onCancelCreate},__("取消")),r?a.a.createElement(n.a,{disabled:"disabled"},a.a.createElement("span",null,__("提交中..."))):a.a.createElement(n.a,{disabled:this.state.hasValue&&!d?"":"disabled",onClick:this.handleSubmit},f?__("确定"):__("评论")),this.renderTopicAction(),d&&a.a.createElement(h.a,null)):a.a.createElement("div",{className:"action clearfix"},r?a.a.createElement(n.a,{disabled:"disabled",style:{marginRight:12}},a.a.createElement("span",null,__("提交中..."))):a.a.createElement(n.a,{type:"primary",disabled:this.state.hasValue&&!d?"":"disabled",onClick:this.handleSubmit,style:{marginRight:12}},f?__("确定"):__("回复")),(i||this.props.cancelable)&&a.a.createElement("a",{className:"btn-cancel",onClick:this.props.onCancelCreate},__("取消")),this.renderTopicAction(),d&&a.a.createElement(h.a,null))))}}])&&E(e.prototype,r),i&&E(e,i),Object.defineProperty(e,"prototype",{writable:!1}),u}(i.Component);T.defaultProps={showAvatar:!0,useMiniGuide:!1,cancelable:!1,showReply:!0,reverseReplyButton:!1},T.propTypes={me:u.a.object.isRequired,type:u.a.oneOf(m.a.TARGET_TYPES),group:u.a.object,target:u.a.object.isRequired,targetType:u.a.object,replyId:u.a.number,comments:u.a.array,cancelReplyTo:u.a.func,onSubmit:u.a.func,toggleTopicStatus:u.a.func,getDefaultSuggestions:u.a.func,submitting:u.a.bool,showAvatar:u.a.bool,useMiniGuide:u.a.bool,onCancelCreate:u.a.func,isMiniSize:u.a.bool,cancelable:u.a.bool,disableYuqueCardEmbedView:u.a.bool,placeholder:u.a.string,showReply:u.a.bool,reverseReplyButton:u.a.bool},e.a=T},3724:function(t,e,r){"use strict";r.d(e,"b",(function(){return l})),r.d(e,"a",(function(){return u}));var n=r(0),o=r.n(n),i=r(8),a=r(165),c={bookTips:"index-module_bookTips_cZ25F",groupTips:"index-module_groupTips_znta0",commentTips:"index-module_commentTips_eS4uK"};function u(t){var e=t.targetType,r=o.a.createElement("a",{href:"https://www.yuque.com/yuque/cdgcvd/zsw0w0",className:"wording-comment-link",target:"_blank",style:{marginLeft:"8px"}},__("了解更多"));switch(e){case"Book":return o.a.createElement("span",{className:c.bookTips,"data-testid":"forbid-tip"},__("注册 7 天后可设置为互联网可见 {learnMoreLink}",{learnMoreLink:r}));case"Group":return o.a.createElement("div",{className:c.groupTips,"data-testid":"forbid-tip"},__("注册 7 天后，即可创建知识小组 {learnMoreLink}",{learnMoreLink:r}));default:return o.a.createElement("span",{className:c.commentTips,"data-testid":"forbid-tip"},__("注册 7 天后即可参与{action} {learnMoreLink}",{action:"Topic"===e?__("讨论"):__("评论"),learnMoreLink:r}))}}function l(t,e){var r,n=window.appData,o=n.settings,i=void 0===o?{}:o,c=n.organization,u=n.isPublicCloud,l=e||{},s=l.me,f=void 0===s?window.appData.me||{}:s,p=l.group,d=void 0===p?window.appData.group:p,y=c&&c.id;d&&a.a.isGroupOrPublication(d)&&(r=d.abilities&&d.abilities.read_private);var h=t&&t.abilities&&t.abilities.update;return!!(u&&!y&&i.enable_new_user_public_ability_forbid&&f.isNewbie&&!r&&!h)}u.propTypes={targetType:i.PropTypes.string}},3727:function(t,e,r){"use strict";r(113);var n=r(35),o=(r(267),r(127)),i=r(0),a=r.n(i),c=r(8),u=r.n(c),l=r(1856),s=r.n(l),f=r(13),p=r.n(f),d=r(42),y="CornerBubble-module_cornerBubble_2kGnu",h="CornerBubble-module_cornerCount_O3YTX",m="CornerBubble-module_cornerCountLarge_3x8Br",v="CornerBubble-module_cornerCountHover_x2J7h",b="CornerBubble-module_cornerIcon_N8Ibc",g="CornerBubble-module_badge_SQuZN";function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function E(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==w(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===w(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _=function(t){var e,r,i,c=t.count,u=t.style,l=t.onClick,f=t.iconName,w=t.iconSize,_=t.countPopoverContent,O=t.countPopoverClassName,S=t.renderBadge,j=t.tooltipText;return a.a.createElement(n.a,{title:j},a.a.createElement("div",{className:y,onClick:l,style:u},s()(c)&&c>0&&(r=!!_,i=a.a.createElement("div",{className:p()((e={},E(e,h,!0),E(e,v,r),E(e,m,c>99),e))},c>99?"99+":c),r?a.a.createElement(o.a,{placement:"topRight",trigger:"hover",overlayClassName:O,content:_},i):i),S&&a.a.createElement("div",{className:g},S()),a.a.createElement(d.b,{className:b,name:f,width:w||20})))};_.propTypes={iconName:u.a.string.isRequired,iconSize:u.a.number,count:u.a.number,style:u.a.object,onClick:u.a.func,countPopoverContent:u.a.element,countPopoverClassName:u.a.string,renderBadge:u.a.func,tooltipText:u.a.string};e.a=_},3748:function(t,e,r){"use strict";r(267);var n=r(127),o=r(0),i=r.n(o),a=r(8),c=r.n(a),u=r(13),l=r.n(u);r(3659);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t){var e=t.reaction,r=t.users,a=t.myReaction,c=s(Object(o.useState)(!1),2),u=c[0],f=c[1];return i.a.createElement(n.a,{className:"post-reaction-detail",overlayClassName:"post-reaction-detail-popover",getPopupContainer:function(t){return t.parentNode},mouseEnterDelay:.618,trigger:["hover"],placement:"bottomLeft",onVisibleChange:function(r){f(r),!1===r?t.reset(e.id):t.loadUsers(e.id)},visible:u,content:i.a.createElement("ul",{className:"post-reaction-users"},r.map((function(t){return i.a.createElement("li",{key:t.id},i.a.createElement("a",{href:"/".concat(t.login),target:"_blank"},t.name))})))},i.a.createElement("div",{onClick:t.onReactionClick,className:l()({"post-reaction-detail-type":!0,"post-reaction-detail-active":a&&a.reaction_types&&a.reaction_types.includes(e.id)})},i.a.createElement("img",{className:"post-interaction-icon",src:e.icon,height:20}),i.a.createElement("span",{className:"post-interaction-num"},t.total)))}p.defaultProps={onReactionClick:function(){}},p.propTypes={myReaction:c.a.object,users:c.a.array.isRequired,total:c.a.number.isRequired,reaction:c.a.object.isRequired,loadUsers:c.a.func.isRequired,reset:c.a.func.isRequired,onReactionClick:c.a.func},e.a=p},3749:function(t,e,r){"use strict";r(267);var n=r(127),o=r(0),i=r.n(o),a=r(8),c=r.n(a),u=r(3618),l=r(42);r(3659);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p=u.a.REACTIONS;function d(t){var e=t.active,r=t.totalReaction,a=t.reactionIcon,c=s(Object(o.useState)(!1),2),u=c[0],f=c[1];return i.a.createElement("div",{className:"post-reaction"},i.a.createElement(n.a,{getPopupContainer:function(t){return t.parentNode},trigger:window.h5?["click"]:["hover"],placement:t.placement,autoAdjustOverflow:!1,visible:u,arrowPointAtCenter:!0,onVisibleChange:function(t){f(t)},content:i.a.createElement("div",null,i.a.createElement("ul",{className:"post-reaction-items"},p.map((function(r){return i.a.createElement("li",{className:e.includes(r.id)?"post-reaction-active":"",key:r.id},i.a.createElement("img",{src:r.icon,onClick:function(){var n;n=r,e.includes(n.id)?t.onCancelReaction(n.id):t.onReaction(n.id),t.onReactionUpdate(n),f(!1)}}))}))))},i.a.createElement("div",null,i.a.createElement("span",{className:"post-reaction-entry"},a||i.a.createElement(l.b,{name:"comment-reaction",width:20,height:20})),r>0&&i.a.createElement("span",{className:"post-interaction-action-total"},r))))}d.defaultProps={onReactionUpdate:function(){}},d.propTypes={active:c.a.array,onReaction:c.a.func.isRequired,onCancelReaction:c.a.func.isRequired,onReactionUpdate:c.a.func,totalReaction:c.a.number,reactionIcon:c.a.element,placement:c.a.string},e.a=d},3750:function(t,e,r){"use strict";var n=r(0),o=r(107),i=r.n(o),a=r(126);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var y=new i.a("thread:post.port");e.a=function(t){var e=t.me,r=t.comment,o=t.onReactionUpdate,i=f(Object(n.useState)(r.reactions||[]),2),c=i[0],p=i[1],d=f(Object(n.useState)({}),2),h=d[0],m=d[1],v=f(Object(n.useState)(!1),2),b=v[0],g=v[1],w="Comment";Object(n.useEffect)((function(){p(r.reactions||[])}),[r]);var E=function(){var t=null;return e&&e.id&&(t=c.find((function(t){return t.user_id===e.id})))&&(t.reaction_types=t.action_option.split(",")),t},_=function(t){return a.webProxy.actions.create({target_id:r.id,target_type:w,action_type:"reaction",action_option:t}).then((function(r){y("success",r);var n=c.filter((function(t){return t.user_id!==e.id}));n.push({user_id:e.id,action_type:"reaction",action_option:t}),p(n),o&&o(n,{actionType:"create",userId:e.id,actionOption:t})}))};return{state:{reactions:c,reactionUserMap:h},reaction:function(t){y("reaction",t);var e=t,r=E();if(r){var n=s(r.reaction_types);if(n.includes(t))return Promise.resolve({});n.push(t),e=n.join(",")}return _(e)},cancelReaction:function(t){y("cancel reaction:",t);var n=E();if(!n)return Promise.resolve({});var i=n.reaction_types.filter((function(e){return e!==t}));if(i.length>0){var u=i.join(",");return y("update action_option",i.join(",")),_(u)}return a.webProxy.actions.destroy({target_id:r.id,target_type:w,action_type:"reaction"}).then((function(){var r=c.filter((function(t){return t.user_id!==e.id}));p(r),o&&o(r,{actionType:"delete",userId:e.id,reactionType:t})}))},loadReactionUser:function(t){y("load users for reaction",t),b||(g(!0),a.webProxy.actions.users({target_id:r.id,target_type:w,action_type:"reaction",action_option:"".concat(t),limit:30}).then((function(e){var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},h);r[t]=e,g(!1),m(r)})))},resetReactionUser:function(t){m({})},getMyReaction:E}}},3780:function(t,e,r){"use strict";r.d(e,"b",(function(){return p})),r.d(e,"a",(function(){return l}));var n=r(25);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,a=void 0,a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}var l={SCROLL:"SCROLL"},s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,t);var e,r,n,o=c(u);function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),o.apply(this,arguments)}return e=u,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(r.n(n).a),f=new s;function p(){return f}},3788:function(t,e,r){"use strict";r(64);var n=r(21),o=r(0),i=r.n(o),a=r(8),c=r.n(a),u=r(13),l=r.n(u),s=r(107),f=r.n(s),p=r(84),d=r.n(p),y=r(3540),h=r(3542);r(3689);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,O(n.key),n)}}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=E(t);if(e){var o=E(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return w(t)}(this,r)}}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},E(t)}function _(t,e,r){return(e=O(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function O(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===m(e)?e:String(e)}var S=f()("comment:update.editor.ui"),j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}(c,t);var e,r,o,a=g(c);function c(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),_(w(e=a.call(this,t)),"onLoad",(function(){e.onChange()})),_(w(e),"onChange",(function(){e.setState({hasValue:!e.editor.isEmpty()})})),_(w(e),"handleCancel",(function(){e.reset(),e.props.onCancel()})),_(w(e),"handleSubmit",(function(){var t=e.props,r=t.comment,n=t.commentMoodChanged;e.editor.contentReady().then((function(){var t={format:d.a.FORMAT.LAKE,value:e.editor.getValue(),html:e.editor.getHtml()};S("on save: ".concat(r.id,", document: "),t),n||e.editor.isContentChanged()?e.props.onSave(r.id,t,(function(){e.handleCancel()})):e.handleCancel()}))})),_(w(e),"renderEditor",(function(){return i.a.createElement(h.default,{editor:e.editor,onLoad:e.onLoad,onChange:e.onChange,onSubmit:e.handleSubmit,key:"".concat(e.state.editorInstanceId)})}));var r=t.comment;return e.editor=new y.c({target:r,belong:t.target,attachType:t.type,useBelongAttach:!0,from:"reply",useMiniGuide:t.useMiniGuide,getDefaultSuggestions:t.getDefaultSuggestions,autoFocus:!0}),e.initialDocument=e.editor.getInitialDocument(),S("init use: ",e.initialDocument),e.state={hasValue:!0,editorInstanceId:"reply_update_".concat(r.id)},e}return e=c,(r=[{key:"reset",value:function(){this.editor.reset()}},{key:"render",value:function(){var t=l()({"comments-form-wrapper":!0,"edit-mode":!0});return i.a.createElement("div",{className:"comments-form-editor"},i.a.createElement("div",{className:t},i.a.createElement("div",{className:"editor-wrapper"},i.a.createElement("div",{className:"editor"},this.renderEditor())),i.a.createElement("div",{className:"action clearfix"},this.state.submitting?i.a.createElement(n.a,{disabled:"disabled",style:{marginRight:12}},i.a.createElement("span",null,__("提交中..."))):i.a.createElement(n.a,{type:"primary",disabled:this.state.hasValue?"":"disabled",onClick:this.handleSubmit,style:{marginRight:12}},i.a.createElement("span",null,__("提交"))),i.a.createElement("a",{className:"btn-cancel",onClick:this.handleCancel},i.a.createElement("span",null,__("取消"))))))}}])&&v(e.prototype,r),o&&v(e,o),Object.defineProperty(e,"prototype",{writable:!1}),c}(o.Component);j.propTypes={type:c.a.oneOf(["Topic","Doc","Resource"]),target:c.a.object.isRequired,comment:c.a.object.isRequired,onSave:c.a.func,onCancel:c.a.func,getDefaultSuggestions:c.a.func,commentMoodChanged:c.a.bool,useMiniGuide:c.a.bool},e.a=j},3792:function(t,e,r){"use strict";r(227);var n=r(112),o=r(547),i=r.n(o),a=r(0),c=r.n(a),u=r(8),l=r.n(u),s=r(107),f=r.n(s),p=r(13),d=r.n(p),y=r(555),h=r(3673),m=r.n(h),v=r(38),b=r(3486),g=(r(64),r(21)),w=r(453),E=r.n(w),_=r(42),O=r(174),S=r(3710),j=r(2460),x={miniGuide:"Editor-module_miniGuide_71Yr9",areaBtn:"Editor-module_areaBtn_aMxhW",active:"Editor-module_active_Nin9i",icon:"Editor-module_icon_tywji",miniGuideLeft:"Editor-module_miniGuideLeft_6qlDi",replyIcon:"Editor-module_replyIcon_YVDPO",text:"Editor-module_text_ayCNj",miniWrapper:"Editor-module_miniWrapper_bgh3f",editorInput:"Editor-module_editorInput_pjxNG"};function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function L(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==P(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===P(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T(){T=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function y(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var b=y.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==P(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function k(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function C(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var R=f()("comment:editor"),N=function(t){var e,r,n=t.targetType,o=t.target,i=t.useMiniGuide,u=t.dispatch,l=t.onCancelCreate,s=t.showReply,f="autosave/".concat(n,"_comments/").concat(o.id,"/replyId"),p=c.a.createRef(),d=Object(a.useState)(function(){if(!s)return null;var t=O.a.get(f);return R("cached reply id: ","".concat(f," -> ").concat(t)),t?Number(t):null}()),y=C(d,2),h=y[0],m=y[1],b=C(Object(a.useState)(!!i),2),g=b[0],w=b[1],_=function(){l&&"function"==typeof l?l():w(!g)},S=function(){m(null),O.a.remove(f),t.onCloseReply()},j=C(Object(a.useState)(!1),2),x=j[0],P=j[1];return{state:{submitting:x,replyId:h,showMiniGuide:g},editorRef:p,handleReplyTo:function(t){m(t),i&&g&&_(),O.a.set(f,t)},cancelReply:S,toggleEditor:_,toggleAreaCommenting:function(t){t.stopPropagation(),u&&u({type:"litecomment/toggleAreaCommenting"})},createReply:(e=T().mark((function e(r,a){var c,u,l,s,f,p,d,y;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),c=t.litecomment,l=(u=void 0===c?{}:c).page,s=u.rect,f=t.comments,p={commentable_type:n,commentable_id:o.id,parent_id:h,body_asl:r.value,body:r.html,format:r.format,page:l,rect:s},(l||s)&&(p.type=E.a.TYPE.AREA_COMMENT),h&&((null==(d=f.find((function(t){return t.id===h})))?void 0:d.type)===E.a.TYPE.WORDING_COMMENT&&(p.type=E.a.TYPE.WORDING_COMMENT,p.selection=d.selection),d&&(p.root_id=d.parent_id?d.root_id:d.id,p.to_user_id=d.user_id)),"lake"!==p.format&&(p.body=r.html),e.prev=6,e.next=9,v.a.comments.create(p);case 9:y=e.sent,P(!1),R("reply success: ",y),a&&a(),t.onCreate&&t.onCreate(y),S(),i&&w(!0),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),P(!1);case 21:case"end":return e.stop()}}),e,null,[[6,18]])})),r=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){k(i,n,o,a,c,"next",t)}function c(t){k(i,n,o,a,c,"throw",t)}a(void 0)}))},function(t,e){return r.apply(this,arguments)})}},I=c.a.forwardRef((function(t,e){var r=N(t),n=r.state,o=n.replyId,i=n.showMiniGuide,u=n.submitting,l=c.a.createRef();Object(a.useImperativeHandle)(e,(function(){return{handleReplyTo:function(t){r.handleReplyTo(t),l&&l.current&&l.current.focusEditor()},cancelReply:r.cancelReply,focusEditor:function(){l&&l.current&&l.current.focusEditor()}}}));var s=t.className,f=t.group,p=t.targetType,y=t.target,h=t.comments,m=t.canComment,v=t.useMiniGuide,b=t.isMiniSize,w=t.areaCommenting,E=t.withAreaSelection,O=t.disableYuqueCardEmbedView,P=t.cancelable,T=t.me,k=t.showReply,C=t.placeholder,A=t.commentTipText;if(!m)return null;var R=d()(x.areaBtn,L({},x.active,w));return c.a.createElement("div",{className:d()(s,x.wrapper,L({},x.miniWrapper,b))},c.a.createElement(j.a,{me:T,place:"comment"},i?c.a.createElement("div",{className:x.miniGuide,onClick:r.toggleEditor,"data-testid":"comment-mini-guide"},c.a.createElement("div",{className:x.miniGuideLeft},c.a.createElement(_.b,{name:"comment-reply",className:x.replyIcon}),c.a.createElement("span",{className:x.text},A||__("点击添加评论"))),E&&c.a.createElement(g.a,{onClick:r.toggleAreaCommenting,className:R,"data-testid":"area-selection-button"},c.a.createElement(_.b,{name:"area-comment",size:14,className:x.icon}),__("框选评论"))):c.a.createElement("div",{className:x.editorInput,"data-testid":"comment-editor"},c.a.createElement(S.a,{me:T,group:f,type:p,submitting:u,target:y,replyId:o,cancelReplyTo:r.cancelReply,comments:h,onSubmit:r.createReply,getDefaultSuggestions:t.getDefaultSuggestions,showAvatar:!v,useMiniGuide:v,onCancelCreate:r.toggleEditor,toggleTopicStatus:t.toggleTopicStatus,isMiniSize:b,ref:l,cancelable:P,disableYuqueCardEmbedView:O,showReply:k,placeholder:C}))))}));I.defaultProps={me:window.appData.me,onCloseReply:function(){}},I.propTypes={className:l.a.string,group:l.a.object.isRequired,target:l.a.object.isRequired,targetType:l.a.oneOf(b.a.TARGET_TYPES),comments:l.a.array,useMiniGuide:l.a.bool,canComment:l.a.bool,onCreate:l.a.func,cancelable:l.a.bool,onCancelCreate:l.a.func,getDefaultSuggestions:l.a.func,toggleTopicStatus:l.a.func,type:l.a.oneOf(["default","timeline"]),isMiniSize:l.a.bool,editorAffixed:l.a.bool,litecomment:l.a.object,withAreaSelection:l.a.bool,dispatch:l.a.func,areaCommenting:l.a.bool,disableYuqueCardEmbedView:l.a.bool,me:l.a.object,showReply:l.a.bool,placeholder:l.a.string,onCloseReply:l.a.func,commentTipText:l.a.string},I.displayName="LiteCommentEditor";var D=I,M=r(71),F=r(269),U=r(3707),G=r(3779),B=r(292),Y=r(300),q=r(342),V=r(2018),z=r(3797),H=r(3683),W=r(3780),K={container:"wordCommentSelection-module_container_LBNIq",prefixIcon:"wordCommentSelection-module_prefixIcon_nL7Bk",quotation:"wordCommentSelection-module_quotation_qfH3Q",quotationTip:"wordCommentSelection-module_quotationTip_S-QRh",quotationContent:"wordCommentSelection-module_quotationContent_atDX4",quotationContentMini:"wordCommentSelection-module_quotationContentMini_5dM90"};function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function J(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?J(Object(r),!0).forEach((function(e){Z(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Z(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==$(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===$(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X(t){var e,r=t.comment,n=t.getViewEngine,o=t.isMiniSize,i=Object(a.useCallback)((function(){var t,e=Object(W.b)(),o=null==r||null===(t=r.selection)||void 0===t?void 0:t.paragraph_id,i=n();i&&o&&i.execCommand("tryUnfold",o),e.emit(W.a.SCROLL,Q(Q({},r.selection),{},{comment_id:r.id}))}),[r,n,W.b]);return r.selection_type===E.a.SELECTION_TYPE.Review?null:c.a.createElement("div",{className:K.container},c.a.createElement("span",{className:K.prefixIcon}),c.a.createElement("div",{className:K.quotation,onClick:i},c.a.createElement("span",{className:d()((e={},Z(e,K.quotationContent,!o),Z(e,K.quotationContentMini,o),e))},c.a.createElement("span",{className:K.quotationTip},__("引用原文：")),r.selection.text)))}X.defaultProps={isMiniSize:!1},X.propTypes={comment:l.a.object.isRequired,getViewEngine:l.a.func.isRequired,isMiniSize:l.a.bool};var tt=X,et=r(3617),rt=r(3788),nt=r(1816),ot=r(3630),it=["children"],at=["children"];function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function ut(){return ut=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ut.apply(this,arguments)}function lt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||pt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function ft(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=pt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function pt(t,e){if(t){if("string"==typeof t)return dt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dt(t,e):void 0}}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ht(n.key),n)}}function ht(t){var e=function(t,e){if("object"!==ct(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ct(e)?e:String(e)}function mt(){return window.WeakMap?new WeakMap:new(function(){function t(){var e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,n={},(r=ht(r="_map"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n}var e,r,n;return e=t,(r=[{key:"has",value:function(t){return!!this._map[t]}},{key:"delete",value:function(t){this._map[t]=void 0,delete this._map[t]}},{key:"get",value:function(t){return this._map[t]}}])&&yt(e.prototype,r),n&&yt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}())}var vt=mt(),bt=mt(),gt=window.IntersectionObserver?new IntersectionObserver((function(t){var e,r=ft(t);try{for(r.s();!(e=r.n()).done;){var n,o=e.value;if(vt.has(o.target))null===(n=vt.get(o.target))||void 0===n||n(o.intersectionRatio,o.intersectionRect.height)}}catch(t){r.e(t)}finally{r.f()}}),{rootMargin:"100%",threshold:[0,.1,1]}):null,wt=window.ResizeObserver?new window.ResizeObserver((function(t){var e,r=ft(t);try{for(r.s();!(e=r.n()).done;){var n,o=e.value;if(bt.has(o.target))null===(n=bt.get(o.target))||void 0===n||n(o.contentRect)}}catch(t){r.e(t)}finally{r.f()}})):null;function Et(t){var e=t.children,r=st(t,it);return c.a.createElement("div",r,e)}Et.propTypes={children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]).isRequired};var _t=window.DELAY_COMMENTS_DEFAULT_HEIGHT||400;function Ot(){var t=lt(Object(a.useState)(null),2),e=t[0],r=t[1],n=Object(a.useCallback)((function(t){t!==e&&r(t)}),[e]);return{current:e,setRef:n}}function St(t){var e=t.children,r=st(t,at),n=Ot(),o=Ot(),i=lt(Object(a.useState)(!0),2),u=i[0],l=i[1],s=lt(Object(a.useState)(0),2),f=s[0],p=s[1],d=lt(Object(a.useState)(_t),2),y=d[0],h=d[1];return Object(a.useEffect)((function(){if(n.current){var t=n.current;return vt.set(t,(function(t){t>0&&u&&l(!1),p(t)})),gt.observe(t),function(){vt.delete(t),gt.unobserve(t)}}}),[n,u,p]),Object(a.useEffect)((function(){if(o.current){var t=o.current;return bt.set(t,(function(t){0!==t.height&&h(t.height)})),wt.observe(t),function(){bt.delete(t),wt.unobserve(t)}}}),[o,h]),c.a.createElement("div",ut({ref:n.setRef},r,{style:{minHeight:y}}),u?null:c.a.createElement("div",{style:{display:f>0?"block":"none"},ref:o.setRef},e))}St.propTypes={children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]).isRequired};var jt=function(t){var e;return!gt||null!==(e=window.appData.settings)&&void 0!==e&&e.disable_comment_delay?c.a.createElement(Et,t):c.a.createElement(St,t)};jt.propTypes={children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]).isRequired};var xt=jt;function Pt(t){var e=t.comment,r=t.group,n=t.target,o=t.commentableType,i=t.onClick,a=t.mode,u=t.onCancelEdit,l=t.onSave,s=t.getDefaultSuggestions,f=t.useMiniGuide,p=t.disableYuqueCardEmbedView,d={read_status:-1===e.status?99:0,id:e.id};if("edit"===a)return c.a.createElement("div",{style:{marginBottom:16}},c.a.createElement(rt.a,{type:o,group:r,comment:e,target:n,onCancel:u,onSave:l,getDefaultSuggestions:s,useMiniGuide:f}));var y=Object(et.a)()||Object(et.b)();return c.a.createElement(c.a.Fragment,null,c.a.createElement(xt,{className:"content-detail",onClick:function(){return i(e)}},y&&c.a.createElement("div",{style:{marginBottom:6}},c.a.createElement(ot.default,{key:"audits",doc:d,type:"Comment"})),c.a.createElement(nt.default,{id:e.id,key:"reply-".concat(e.id),genOutline:!1,genAnchor:!1,content:e.body_asl,disableYuqueCardEmbedView:p,simpleUI:!0,imageLazyLoad:!0})))}function Lt(){}Pt.defaultProps={onCancelEdit:Lt,onSave:Lt,onClick:Lt},Pt.propTypes={comment:l.a.object.isRequired,group:l.a.object.isRequired,target:l.a.object.isRequired,getDefaultSuggestions:l.a.func.isRequired,commentableType:l.a.oneOf(b.a.TARGET_TYPES),mode:l.a.oneOf(["edit","view"]),useMiniGuide:l.a.bool,disableYuqueCardEmbedView:l.a.bool,onCancelEdit:l.a.func,onSave:l.a.func,onClick:l.a.func};var Tt=Pt,kt=r(3618),Ct=r(3748),At=kt.a.REACTIONS;function Rt(t){var e=t.comment,r=t.onReactionUpdate,n=t.reactionMap,o=t.reactions,i=t.myReaction,a=t.reactionViewModel,u=t.reactionUserMap;return o.length>0?c.a.createElement("div",{className:"post-interaction",style:{marginTop:12}},c.a.createElement("div",{className:"post-interaction-reaction-summary"},c.a.createElement("ul",null,At.map((function(t){var o=n[t.id].count;return 0===o?null:c.a.createElement("li",{key:t.id},c.a.createElement(Ct.a,{myReaction:i,reaction:t,users:u[t.id]||[],total:o,loadUsers:function(){a.loadReactionUser(t.id)},reset:function(){a.resetReactionUser(t.id)},onReactionClick:function(){(i&&i.action_option.includes(t.id)?a.cancelReaction(t.id):a.reaction(t.id)).then((function(){a.loadReactionUser(t.id),r(t,e)}))}}))}))))):null}Rt.defaultProps={onReactionUpdate:function(){}},Rt.propTypes={comment:l.a.object.isRequired,onReactionUpdate:l.a.func,reactionMap:l.a.object.isRequired,reactions:l.a.array.isRequired,myReaction:l.a.object,reactionViewModel:l.a.object.isRequired,reactionUserMap:l.a.object.isRequired};var Nt=Rt,It=(r(267),r(127)),Dt=(r(197),r(36)),Mt=(r(207),r(91)),Ft=r(3706),Ut=r(3749),Gt={container:"commentActions-module_container_Pd8UE",actionsHiddenArea:"commentActions-module_actionsHiddenArea_rwxN3",actionItem:"commentActions-module_actionItem_IYkZw",actionItemWithoutMargin:"commentActions-module_actionItemWithoutMargin_UTjq4"},Bt={commentFloorListItem:"commentFloorListItem-module_commentFloorListItem_hEa7c",listItemWrapper:"commentFloorListItem-module_listItemWrapper_WP5Au",hashActive:"commentFloorListItem-module_hashActive_QOVC4",isSelected:"commentFloorListItem-module_isSelected_KRAD2",isMiniSize:"commentFloorListItem-module_isMiniSize_LwzVw",avatar:"commentFloorListItem-module_avatar_MHjSF",commentOrder:"commentFloorListItem-module_commentOrder_Iuwe4",main:"commentFloorListItem-module_main_gfOyp",commentMain:"commentFloorListItem-module_commentMain_sXNkM",actionsHiddenArea:"commentFloorListItem-module_actionsHiddenArea_sIy27",head:"commentFloorListItem-module_head_HFLrS",name:"commentFloorListItem-module_name_pqKOI",miniName:"commentFloorListItem-module_miniName_SV4Rr",toUserName:"commentFloorListItem-module_toUserName_ODbN0",miniToUserName:"commentFloorListItem-module_miniToUserName_tSChh",arrowRight:"commentFloorListItem-module_arrowRight_KtPw0",time:"commentFloorListItem-module_time_juhkg",commentIpRegion:"commentFloorListItem-module_commentIpRegion_jl233",wordCommentSelectionWrapper:"commentFloorListItem-module_wordCommentSelectionWrapper_7T0sG",content:"commentFloorListItem-module_content_Zn013",replyEditor:"commentFloorListItem-module_replyEditor_PeaGC",deleted:"commentFloorListItem-module_deleted_2GyFb",rootCommentFloorListItem:"commentFloorListItem-module_rootCommentFloorListItem_KZW6g"};function Yt(t){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(t)}function qt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Yt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Yt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vt(t){var e=t.comment,r=t.me,n=t.isMobile,o=t.canComment,i=t.canEdit,a=t.canReport,u=t.canDelete,l=t.onRemove,s=t.onEdit,f=t.onReplyTo,p=t.onCopyCommentLink,y=t.reactionViewModel,h=t.myReaction,m=t.onReactionUpdate;return r&&r.id?c.a.createElement("div",{className:Gt.container},o&&c.a.createElement("span",{className:Gt.actionItem},c.a.createElement(_.b,{name:"comment-bubble",color:"#8C8C8C",width:16,height:16,onClick:f})),o&&c.a.createElement(Ut.a,{placement:n?"topLeft":void 0,reactionIcon:c.a.createElement("span",{className:Gt.actionItemWithoutMargin},c.a.createElement(_.b,{className:Gt.action,name:"comment-reaction",color:"#8C8C8C",width:16,height:16})),active:(null==h?void 0:h.reaction_types)||[],onReaction:y.reaction,onCancelReaction:y.cancelReaction,onReactionUpdate:function(t){return m(t,e)}}),c.a.createElement("div",{className:d()(Gt.actionsHiddenArea,qt({},Bt.actionsHiddenArea,!n))},i&&c.a.createElement("span",{className:Gt.actionItem},c.a.createElement(_.b,{className:Gt.action,name:"edit-border",width:16,height:16,color:"#8C8C8C",onClick:s})),u&&c.a.createElement(Mt.a,{title:__("确认删除该评论么？"),onConfirm:l},c.a.createElement("span",{className:Gt.actionItem},c.a.createElement(_.b,{className:Gt.action,name:"icon-delete",color:"#8C8C8C",width:16,height:16}))),c.a.createElement(It.a,{type:"menu",getPopupContainer:function(t){return t.parentNode},placement:"bottomRight",arrowPointAtCenter:!0,trigger:n?"click":"hover",content:c.a.createElement(Dt.a,null,c.a.createElement(Dt.a.Item,{key:"copy"},c.a.createElement("span",{onClick:p},__("复制评论链接"))),a&&c.a.createElement(Dt.a.Item,{key:"report"},c.a.createElement(Ft.a,{targetId:e.id,targetType:"Comment"},(function(t){return c.a.createElement("span",{className:"action-link",onClick:t.onShowPanel},__("举报"))})))),hideWhenInactive:!0},c.a.createElement("span",{className:Gt.actionItem},c.a.createElement(_.b,{className:Gt.action,name:"comment-more",color:"#8C8C8C",width:16,height:16}))))):null}Vt.defaultProps={isMobile:!1},Vt.propTypes={comment:l.a.object.isRequired,me:l.a.object,canComment:l.a.bool,canEdit:l.a.bool,canReport:l.a.bool,canDelete:l.a.bool,onRemove:l.a.func.isRequired,onEdit:l.a.func.isRequired,onReplyTo:l.a.func.isRequired,onCopyCommentLink:l.a.func,onReactionUpdate:l.a.func,reactionViewModel:l.a.object,myReaction:l.a.object,isMobile:l.a.bool};var zt=Vt;function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function Wt(){Wt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function y(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var b=y.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ht(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Kt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function $t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Jt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Qt=f()("comment:editor"),Zt=function(t){var e,r=t.commentableType,n=t.target,o=t.dispatch,i=t.rootId,u=t.replyToComment,l=t.litecomment,s=void 0===l?{}:l,f=t.onCancelReply,p=t.onCreate,d=c.a.createRef(),y=$t(Object(a.useState)(!1),2),h=y[0],m=y[1];e=u.user?u.user.name:__("用户已注销");var b,g;return{state:{submitting:h,replyId:u.id,placeholder:__("回复 {user}",{user:e})},editorRef:d,handleCancelReply:function(){f()},toggleAreaCommenting:function(t){t.stopPropagation(),o&&o({type:"litecomment/toggleAreaCommenting"})},createReply:(b=Wt().mark((function t(e,o){var a,c,l,d;return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),a=s.page,c=s.rect,l={commentable_type:r,commentable_id:n.id,parent_id:u.id,to_user_id:u.user_id,body_asl:e.value,body:e.html,format:e.format,page:a,rect:c},(a||c)&&(l.type=E.a.TYPE.AREA_COMMENT),u&&(u.type===E.a.TYPE.WORDING_COMMENT&&(l.type=E.a.TYPE.WORDING_COMMENT,l.selection=u.selection),l.root_id=i),"lake"!==l.format&&(l.body=e.html),t.prev=6,t.next=9,v.a.comments.create(l);case 9:(d=t.sent).to_user=u.user,m(!1),Qt("reply success: ",d),o&&o(),p&&p(d),f(),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(6),m(!1);case 21:case"end":return t.stop()}}),t,null,[[6,18]])})),g=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=b.apply(t,e);function i(t){Kt(o,r,n,i,a,"next",t)}function a(t){Kt(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t,e){return g.apply(this,arguments)})}},Xt=c.a.forwardRef((function(t,e){var r=Zt(t),n=r.state,o=n.replyId,i=n.submitting,u=n.placeholder,l=c.a.createRef();Object(a.useImperativeHandle)(e,(function(){return{focusEditor:function(){l&&l.current&&l.current.focusEditor()}}}));var s=t.group,f=t.canComment,p=t.isMiniSize,d=t.disableYuqueCardEmbedView,y=t.cancelable,h=t.me,m=t.comments,v=t.useMiniGuide,b=t.replyToComment,g=t.commentableType,w=t.target,E=t.reverseReplyButton;return f?c.a.createElement(j.a,{me:h,place:"comment"},c.a.createElement(S.a,{ref:l,placeholder:u,me:h,group:s,type:g,submitting:i,target:w,replyId:o,replyToComment:b,showReply:!1,cancelReplyTo:r.cancelReply,comments:m,onSubmit:r.createReply,getDefaultSuggestions:t.getDefaultSuggestions,showAvatar:!1,useMiniGuide:v,onCancelCreate:r.handleCancelReply,isMiniSize:p,cancelable:y,disableYuqueCardEmbedView:d,reverseReplyButton:E})):null}));Xt.defaultProps={me:window.appData.me,onCancelReply:function(){}},Xt.propTypes={group:l.a.object.isRequired,target:l.a.object.isRequired,commentableType:l.a.oneOf(b.a.TARGET_TYPES),comments:l.a.array,canComment:l.a.bool,cancelable:l.a.bool,getDefaultSuggestions:l.a.func,isMiniSize:l.a.bool,useMiniGuide:l.a.bool,litecomment:l.a.object,dispatch:l.a.func,disableYuqueCardEmbedView:l.a.bool,me:l.a.object,rootId:l.a.number,replyToComment:l.a.object,onCancelReply:l.a.func,onCreate:l.a.func,reverseReplyButton:l.a.bool},Xt.displayName="CommentReplyEditor";var te=Xt,ee=(r(61),r(23)),re=r(229),ne=r.n(re),oe=r(3750);function ie(t){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(t)}function ae(){ae=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function y(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var b=y.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==ie(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function ce(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ue(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ce(i,n,o,a,c,"next",t)}function c(t){ce(i,n,o,a,c,"throw",t)}a(void 0)}))}}function le(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function se(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?le(Object(r),!0).forEach((function(e){fe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function fe(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==ie(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ie(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return de(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return de(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ye=function(t){var e,r,n,o,i,c=t.isRootComment,u=t.comment,l=t.commentableType,s=t.me,f=t.target,p=t.dispatch,d=t.onRemoveComment,y=t.onUpdateComment,h=t.canComment,m=t.onCreateComment,g=t.isMobile,_=t.onReplyToComment,O=Object(a.useContext)(U.a),S=pe(Object(a.useState)("view"),2),j=S[0],x=S[1],P=Object(a.useRef)(null),L=pe(Object(a.useState)(!1),2),T=L[0],k=L[1],C=!window.h5&&u.meta&&u.meta.ip,A=!c&&u.parent_id&&u.parent_id!==u.root_id,R=b.a.getAnchorId(u.id,l),N=c&&u.type===E.a.TYPE.WORDING_COMMENT,I=!!u.deleted_at,D=Object(oe.a)({me:s,comment:u,onReactionUpdate:function(t,e){var r=se(se({},u),{},{reactions:t});p({type:"litecomment/updateOne",payload:r}),null==O||O.updateReaction(null,r,e)}}),M=D.state,F=M.reactions,G=M.reactionUserMap,B=Object(a.useMemo)((function(){var t={reactionMap:kt.a.classifyReactions(F),myReaction:D.getMyReaction(),totalReaction:0};return Object.keys(t.reactionMap).forEach((function(e){t.totalReaction+=t.reactionMap[e].count})),t}),[F]),Y=B.reactionMap,q=B.myReaction;return{state:{showReplyToUser:A,anchor:R,wordingCommentVisible:N,contentEditorMode:j,isDeleted:I,reactionMap:Y,myReaction:q,reactions:F,reactionUserMap:G,replyEditorVisible:T,metaInfoVisible:C},reactionViewModel:D,editorRef:P,handleEdit:function(){x("edit")},handleCancelEdit:function(){x("view")},handleEditorSave:(i=ue(ae().mark((function t(e,r,n){var o,i;return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={id:e,format:r.format,body_asl:r.value,body:r.html},t.next=3,v.a.comments.update(o);case 3:(i=t.sent).to_user=u.to_user,i.reactions=u.reactions,i.sub_comments=u.sub_comments,n&&n(),y(i),p({type:"litecomment/updateOne",payload:i}),null==O||O.updateComment(i);case 11:case"end":return t.stop()}}),t)}))),function(t,e,r){return i.apply(this,arguments)}),handleCommentContentClick:function(){"Resource"===l&&p({type:"litecomment/updateCurrentCommentId",payload:u.id})},canComment:function(){return!I&&h},canEdit:function(){return!I&&(s&&s.id===u.user_id)},canReport:function(){if(I)return!1;if(!window.appData.isPublicCloud)return!1;var t=Object(et.a)()||Object(et.b)();return u.status===w.STATUS.normal&&t&&s&&s.id!==u.user_id},canDelete:function(){var t;return!I&&(!!s&&(s.id===u.user_id||"Doc"===l&&(null===(t=f.abilities)||void 0===t?void 0:t.destroy_comment)))},handleReplyToComment:(o=ue(ae().mark((function t(){return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g?_(u):(k(!0),setTimeout((function(){var t;null===(t=P.current)||void 0===t||t.focusEditor()}),200));case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)}),handleCreateComment:(n=ue(ae().mark((function t(e){return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.to_user=u.user,p({type:"litecomment/create",payload:{data:e,showEditorAtBottom:!0,commentListStyle:"floor"}}),null==O||O.createComment(e),m(e);case 4:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)}),handleCancelReply:(r=ue(ae().mark((function t(){return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k(!1);case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)}),handleRemoveComment:(e=ue(ae().mark((function t(){var e;return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e={id:u.id},v.a.comments.destroy(e).then((function(){p({type:"litecomment/remove",payload:e}),ee.a.success(__("操作成功"),3),d(e),null==O||O.destroyComment(u)}));case 2:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)}),handleReactionUpdate:function(){},handleCopyCommentLink:function(){var t=kt.a.getPostUrl(u.id);ne()(t),ee.a.success(__("评论链接复制成功"))}}};function he(t){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(t)}function me(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==he(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==he(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===he(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ve(t){var e,r=t.comment,n=t.flattenFloorComments,o=t.isRootComment,i=t.commentableType,a=t.getViewEngine,u=t.target,l=t.useMiniGuide,s=t.getDefaultSuggestions,f=t.disableYuqueCardEmbedView,p=t.group,y=t.me,h=t.canComment,m=t.dispatch,v=t.onUpdateComment,b=(t.editorAffixed,t.isMobile),g=t.isMiniSize,w=(t.areaCommenting,t.cancelable,t.onCancelCreate,t.litecomment),E=t.urlHash,O=t.currentCommentId,S=t.onCreateComment,j=t.onEditComment,x=t.onRemoveComment,P=t.onReplyToComment,L=t.reverseReplyButton,T=r.user,k=r.to_user,C=ye({isRootComment:o,comment:r,commentableType:i,me:y,target:u,onRemoveComment:x,onEditComment:j,dispatch:m,onUpdateComment:v,canComment:h,onCreateComment:S,onReplyToComment:P,isMobile:b}),A=C.state,R=A.showReplyToUser,N=A.anchor,I=A.wordingCommentVisible,D=A.contentEditorMode,F=A.replyEditorVisible,U=A.isDeleted,G=A.reactionMap,W=A.myReaction,K=A.reactions,$=A.reactionUserMap,J=C.reactionViewModel,Q=C.editorRef,Z=o?r.id:r.root_id,X=E==="#".concat(N),et=O===r.id,rt=g?24:32,nt={paddingLeft:rt+12};return c.a.createElement("div",{id:N,className:d()(Bt.commentFloorListItem,me({},Bt.rootCommentFloorListItem,o)),style:o?null:nt},c.a.createElement("div",{className:d()(Bt.listItemWrapper,(e={},me(e,Bt.hashActive,X),me(e,Bt.isSelected,et),me(e,Bt.isMiniSize,g),e))},T?c.a.createElement("div",{className:Bt.avatar},c.a.createElement(H.a,{url:"/".concat(T.login)},c.a.createElement(c.a.Fragment,null,c.a.createElement(V.a,{user:T},c.a.createElement(q.a,{src:T.avatar_url,size:rt,name:T.name})),r.order&&c.a.createElement("span",{className:Bt.commentOrder},r.order)))):c.a.createElement("div",{className:Bt.avatar},c.a.createElement(q.a,{src:B.avatar.user,size:rt,name:__("用户已注销")}),r.order&&c.a.createElement("span",{className:Bt.commentOrder},r.order)),c.a.createElement("div",{className:Bt.main},c.a.createElement("div",{className:Bt.commentMain},c.a.createElement("div",{className:Bt.head},T?c.a.createElement(H.a,{url:"/".concat(T.login),className:d()(Bt.name,me({},Bt.miniName,g))},c.a.createElement(c.a.Fragment,null,T.name,(null==y?void 0:y.isAdmin)&&[M.STATUS.banned,M.STATUS.blocked].includes(T.status)&&c.a.createElement("span",{className:"book-name-scope"},c.a.createElement(_.b,{name:"doc-has-content-risk",width:13,style:{opacity:.375,marginLeft:4}})))):c.a.createElement("a",{className:Bt.name},__("用户已注销")),R&&(k?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:Bt.arrowRight}),g?c.a.createElement(H.a,{url:"/".concat(k.login),className:d()(Bt.toUserName,Bt.miniToUserName)},k.name):c.a.createElement(V.a,{user:k},c.a.createElement(H.a,{url:"/".concat(k.login),className:Bt.toUserName},k.name))):c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:Bt.arrowRight}),c.a.createElement("a",{className:Bt.toUserName},__("用户已注销")))),!g&&c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{href:"#".concat(N),className:Bt.time},c.a.createElement(Y.a,{time:r.created_at})),c.a.createElement("span",{className:Bt.commentIpRegion},c.a.createElement(z.a,{target:r,type:"Comment"})))),g&&c.a.createElement("div",null,c.a.createElement("a",{href:"#".concat(N),className:Bt.time},c.a.createElement(Y.a,{time:r.created_at})),c.a.createElement("span",{className:Bt.commentIpRegion},c.a.createElement(z.a,{target:r,type:"Comment"}))),I&&c.a.createElement("div",{className:Bt.wordCommentSelectionWrapper},c.a.createElement(tt,{isMiniSize:g,comment:r,getViewEngine:a})),U?c.a.createElement("div",{className:Bt.content},c.a.createElement("div",{className:Bt.deleted},__("该评论已删除"))):c.a.createElement("div",{className:Bt.content},c.a.createElement(Tt,{comment:r,group:p,target:u,getDefaultSuggestions:s,commentableType:i,mode:D,useMiniGuide:l,disableYuqueCardEmbedView:f,onCancelEdit:C.handleCancelEdit,onSave:C.handleEditorSave,onClick:C.handleCommentContentClick})),!U&&c.a.createElement(Nt,{comment:r,onReactionUpdate:C.handleReactionUpdate,reactionViewModel:J,myReaction:W,reactionMap:G,reactions:K,reactionUserMap:$}),!U&&c.a.createElement(zt,{isMobile:b,comment:r,me:y,canComment:C.canComment(),canEdit:C.canEdit(),canReport:C.canReport(),canDelete:C.canDelete(),onReplyTo:C.handleReplyToComment,onEdit:C.handleEdit,onRemove:C.handleRemoveComment,onCopyCommentLink:C.handleCopyCommentLink,reactionViewModel:J,reactionMap:G,myReaction:W,reactions:K,reactionUserMap:$,onReactionUpdate:C.handleReactionUpdate}),F&&c.a.createElement("div",{className:Bt.replyEditor},c.a.createElement(te,{ref:Q,rootId:Z,replyToComment:r,group:p,me:y,target:u,commentableType:i,litecomment:w,comments:n,cancelable:!0,isMiniSize:g,disableYuqueCardEmbedView:f,getDefaultSuggestions:s,dispatch:m,canComment:h,onCancelReply:C.handleCancelReply,onCreate:C.handleCreateComment,reverseReplyButton:L}))))))}ve.defaultProps={canComment:!0,onEditComment:function(){},onRemoveComment:function(){},onCreateComment:function(){},getViewEngine:function(){}},ve.propTypes={comment:l.a.object.isRequired,flattenFloorComments:l.a.arrayOf(l.a.object),getViewEngine:l.a.func,isRootComment:l.a.bool,commentableType:l.a.oneOf(b.a.TARGET_TYPES),target:l.a.object.isRequired,useMiniGuide:l.a.bool,getDefaultSuggestions:l.a.func,disableYuqueCardEmbedView:l.a.bool,group:l.a.object.isRequired,me:l.a.object.isRequired,canComment:l.a.bool,onEditComment:l.a.func,onCreateComment:l.a.func,onRemoveComment:l.a.func,onUpdateComment:l.a.func,dispatch:l.a.func,editorAffixed:l.a.bool,isMobile:l.a.bool,isMiniSize:l.a.bool,areaCommenting:l.a.bool,cancelable:l.a.bool,onCancelCreate:l.a.func,litecomment:l.a.object,urlHash:l.a.string,currentCommentId:l.a.number,onReplyToComment:l.a.func.isRequired};var be=ve,ge={default:"index-module_default_FTDOK",commentEditor:"index-module_commentEditor_yI7Ow",mini:"index-module_mini_6PdDj",emptyView:"index-module_emptyView_t1FqB",miniEditor:"index-module_miniEditor_CRXwG",editorMobile:"index-module_editorMobile_0VdOM",miniFloorList:"index-module_miniFloorList_+ysrM"};function we(t){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we(t)}function Ee(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==we(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===we(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Oe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oe(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Se(t){var e=t.flattenFloorComments,r=t.commentableType,n=t.getViewEngine,o=t.target,i=t.useMiniGuide,u=t.getDefaultSuggestions,l=t.disableYuqueCardEmbedView,s=t.group,f=t.me,p=t.canComment,y=t.onReplyToComment,h=t.onEditComment,m=t.onCreateComment,v=t.onRemoveComment,b=t.onUpdateComment,g=t.dispatch,w=t.litecomment,E=t.isMiniSize,_=t.currentCommentId,O=t.isMobile,S=t.reverseReplyButton,j="";try{j=decodeURIComponent(window.location.hash)}catch(t){}var x=_e(Object(a.useState)(j),2),P=x[0],L=x[1];return Object(a.useEffect)((function(){var t=function(){try{L(decodeURIComponent(window.location.hash))}catch(t){}};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}}),[]),c.a.createElement("div",{className:d()(Ee({},ge.miniFloorList,E))},e.map((function(t){return c.a.createElement(be,{key:t.id,flattenFloorComments:e,isRootComment:!t.parent_id,comment:t,commentableType:r,getViewEngine:n,target:o,useMiniGuide:i,getDefaultSuggestions:u,disableYuqueCardEmbedView:l,group:s,me:f,canComment:p,dispatch:g,onReplyToComment:y,onCreateComment:m,onEditComment:h,onRemoveComment:v,onUpdateComment:b,litecomment:w,isMiniSize:E,urlHash:P,currentCommentId:_,isMobile:O,reverseReplyButton:S})})))}Se.defaultProps={onReplyToComment:function(){},onEditComment:function(){},onCreateComment:function(){},onRemoveComment:function(){},onUpdateComment:function(){},getViewEngine:function(){}},Se.propTypes={flattenFloorComments:l.a.arrayOf(l.a.object),getViewEngine:l.a.func,commentableType:l.a.oneOf(b.a.TARGET_TYPES),target:l.a.object.isRequired,useMiniGuide:l.a.bool,getDefaultSuggestions:l.a.func,disableYuqueCardEmbedView:l.a.bool,group:l.a.object.isRequired,me:l.a.object,canComment:l.a.bool,dispatch:l.a.func,onReplyToComment:l.a.func,onEditComment:l.a.func,onRemoveComment:l.a.func,onCreateComment:l.a.func,onUpdateComment:l.a.func,litecomment:l.a.object,isMiniSize:l.a.bool,currentCommentId:l.a.number,isMobile:l.a.bool,reverseReplyButton:l.a.bool};var je=Se;function xe(t){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(t)}function Pe(){return Pe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pe.apply(this,arguments)}function Le(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Te(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Le(Object(r),!0).forEach((function(e){ke(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ke(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==xe(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===xe(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ce(){Ce=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function y(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var b=y.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=s(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==xe(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ae(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Re(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ae(i,n,o,a,c,"next",t)}function c(t){Ae(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Ne(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ie(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ie(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var De=f()("commnent_floor");function Me(t){var e=t.commentableType,r=t.target,n=t.group,o=t.me,c=t.litecomment.comments,u=t.canMentionMembers,l=t.dispatch,s=t.isMobile,f=Ne(Object(a.useState)(!0),2),p=f[0],d=f[1],y=Ne(Object(a.useState)(!1),2),h=y[0],m=y[1],g=Ne(Object(a.useState)(0),2),E=g[0],_=g[1],O=Ne(Object(a.useState)(""),2),S=O[0],j=O[1],x=Ne(Object(a.useState)(null),2),P=x[0],L=x[1],T=Object(a.useRef)([]),k=Object(a.useContext)(U.a),C=function(){var t=document.querySelector("#scroll-to-comment");if(t){t.scrollIntoView();var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;window.scrollTo(0,e-40)}},A=function(){var t=Re(Ce().mark((function t(){var i,a,c,s,f;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=function(t){var e;return"Review"===t.selection_type?!(![w.TYPE.REVIEW_APPROVAL,w.TYPE.REVIEW_REJECTION,w.TYPE.REVIEW_OPINION].includes(t.type)||!t.body)&&(t.body_asl=t.body,!0):!!((null==o?void 0:o.id)===t.user_id||null!=o&&o.isAdmin)||![M.STATUS.banned,M.STATUS.blocked].includes(null==t||null===(e=t.user)||void 0===e?void 0:e.status)},i={commentable_type:e,commentable_id:r.id,include_section:!0,include_to_user:!0,include_reactions:!0},h||d(!0),t.next=5,v.a.comments.floorComments(i,{useOriginResp:!0});case 5:a=t.sent,c=(c=a.data.comments).filter((function(t){return t.sub_comments=(t.sub_comments||[]).filter(s),s(t)})),f=c.reduce((function(t,e){var r;return t++,null===(r=e.sub_comments)||void 0===r||r.forEach((function(e){t++})),t}),0),l({type:"litecomment/updateModel",payload:{comments:c,commentCount:f}}),d(!1),m(!0),u&&(n.members.length>0||(De("load members"),l({type:"group/getMembers",payload:{data:{group_id:n.id,with_invited:!1}}})));case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),R=Object(a.useMemo)((function(){var t=null==c?void 0:c.filter((function(t){var e;return t.comment_area&&(null===(e=t.comment_area)||void 0===e?void 0:e.rect)}));return t?(t.forEach((function(t,e){t.order=e+1})),c.sort((function(t,e){return new Date(t.created_at)-new Date(e.created_at)}))):c}),[c]),N=Object(a.useMemo)((function(){var t=R.reduce((function(t,e){var r;return t.push(e),null===(r=e.sub_comments)||void 0===r||r.forEach((function(e){t.push(e)})),t}),[]);return T.current=t,t}),[R]),I=function(){var e=i()(N,t.pageSize).length;_(e)};return Object(a.useEffect)((function(){function t(){return(t=Re(Ce().mark((function t(){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),d(!1);case 8:null==k||k.on("broadcast",(function(t){var e=t.type,r=t.body;if(e===G.a.MESSAGE.REACTION_UPDATE){var n=r.reactionAction,o=n.actionType,i=n.userId,a=n.actionOption,c=r.comment,u=N.find((function(t){return t.id===c.id}));if(u){var s=u.reactions||[],f=s;"create"===o?(f=s.filter((function(t){return t.user_id!==i}))).push({user_id:i,action_type:"reaction",action_option:a}):"delete"===o&&(f=s.filter((function(t){return t.user_id!==i}))),l({type:"litecomment/updateOne",payload:Te(Te({},u),{},{reactions:f})})}}else if(e===G.a.MESSAGE.COMMENT_CREATE){if(T.current.find((function(t){return t.id===r.comment.id})))return;l({type:"litecomment/create",payload:{data:r.comment,commentListStyle:"floor",insertToBottom:!0}})}else e===G.a.MESSAGE.COMMENT_UPDATE?l({type:"litecomment/updateOne",payload:r.comment}):e===G.a.MESSAGE.COMMENT_DELETE&&l({type:"litecomment/remove",payload:r.comment})}));case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){null==k||k.reset()}}),[]),{state:{loading:p,loaded:h,pageNo:E,flattenFloorComments:N,bottomEditorPlaceholder:S,replyToComment:P,commentCollab:k},setBottomEditorPlaceHolder:j,setReplyToComment:L,setPageNo:_,getDefaultSuggestions:function(){return b.a.getParticipants(r,N,{groupMembers:n.members,targetType:e})},handleCreateRootComment:function(e){l({type:"litecomment/create",payload:{data:e,showEditorAtBottom:!0,commentListStyle:"floor"}}),null==k||k.createComment(e),I(),"mini"===t.size&&C(),t.onCreate&&t.onCreate(e)},handleCreateReplyToComment:function(e){e.to_user=null==P?void 0:P.user,l({type:"litecomment/create",payload:{data:e,showEditorAtBottom:!0,commentListStyle:"floor"}}),null==k||k.createComment(e),I(),t.onCreate&&t.onCreate(e),s&&setTimeout((function(){var t=document.querySelector("#comment-".concat(e.id));null==t||t.scrollIntoView({behavior:"smooth",block:"center"})}),100)},renderAllComments:I,scrollToEditor:C}}function Fe(t){var e,r,o=t.group,u=t.book,l=t.doc,s=t.target,f=t.commentableType,p=t.canComment,y=t.useMiniGuide,h=t.size,v=t.withAreaSelection,b=t.cancelable,g=t.onCancelCreate,w=t.dispatch,E=t.litecomment,_=void 0===E?{}:E,O=_.areaCommenting,S=void 0!==O&&O,j=_.currentCommentId,x=t.me,P=t.isMobile,L=t.getViewEngine,T=t.openInfiniteScroll,k=t.pageSize,C=t.onCommentLoaded,A=t.commentTipText,R=t.reverseReplyButton,N=Ne(Object(a.useState)(!1),2),I=N[0],M=N[1],U=Ne(Object(a.useState)(!1),2),G=U[0],B=U[1],Y=Object(a.useRef)(null),q=Object(a.useRef)(!1),V=Me(t),z=V.state,H=z.loading,W=z.pageNo,K=z.flattenFloorComments,$=z.bottomEditorPlaceholder;Object(a.useEffect)((function(){H||q.current||(q.current=!0,null==C||C())}),[H,C]);var J=F.a.isPrivate(l,u,o),Q=c.a.createRef(),Z=function(t){Q&&Q.current&&(V.setReplyToComment(t),T&&(V.renderAllComments(),B(!0)),V.setBottomEditorPlaceHolder(__("回复 {user}",{user:t.user.name})),Q.current.handleReplyTo(t.id),V.scrollToEditor())},X=function(){var t=document.querySelector("#lark-mini-editor");t&&t.scrollIntoView({block:"center"})};if(Object(a.useEffect)((function(){t.focusToEditor&&Q&&Q.current&&Q.current.focusEditor()}),[t.focusToEditor]),Object(a.useEffect)((function(){I||t.onEditorReady&&Q&&Q.current&&(M(!0),t.onEditorReady(Q.current))}),[Q]),Object(a.useEffect)((function(){var t;G&&(X(),null==Q||null===(t=Q.current)||void 0===t||t.focusEditor())}),[G]),Object(a.useImperativeHandle)(t.forwardedRef,(function(){return{renderAllComments:V.renderAllComments}})),H)return c.a.createElement(n.a,{justify:"block"});var tt="mini"===h||P,et=tt&&y,rt=i()(K,k).length,nt=K.slice(0,k*(W+1));return c.a.createElement("div",{className:d()((e={},ke(e,ge.default,!tt),ke(e,ge.mini,tt),e),"comment-floor-mini"),ref:Y},T?c.a.createElement(m.a,{loadMore:function(){V.setPageNo(W+1)},hasMore:W<rt,useWindow:"mini"!==h,getScrollParent:function(){return Y.current}},c.a.createElement(je,{comments:nt,flattenFloorComments:K,me:x,group:o,target:s,commentableType:f,currentCommentId:j,isMiniSize:tt,useMiniGuide:y,disableYuqueCardEmbedView:!J,canComment:p,getViewEngine:L,getDefaultSuggestions:V.getDefaultSuggestions,onReplyToComment:Z,onEditComment:X,onRemoveComment:t.onRemove,onCreateComment:t.onCreate,dispatch:w,editorAffixed:et,isMobile:P,areaCommenting:S,cancelable:b,onCancelCreate:g,litecomment:t.litecomment,reverseReplyButton:R})):c.a.createElement(je,{comments:K,flattenFloorComments:K,me:x,group:o,target:s,commentableType:f,currentCommentId:j,isMiniSize:tt,useMiniGuide:y,disableYuqueCardEmbedView:!J,canComment:p,getViewEngine:L,getDefaultSuggestions:V.getDefaultSuggestions,onReplyToComment:Z,onEditComment:X,onRemoveComment:t.onRemove,onCreateComment:t.onCreate,dispatch:w,editorAffixed:et,isMobile:P,areaCommenting:S,cancelable:b,onCancelCreate:g,litecomment:t.litecomment,reverseReplyButton:R}),et&&!K.length&&c.a.createElement("div",{className:ge.emptyView},__("暂无回复")),c.a.createElement("div",{id:"scroll-to-comment"}),c.a.createElement("div",{className:d()(ge.commentEditor,(r={},ke(r,ge.miniEditor,et),ke(r,ge.editorMobile,P),r))},c.a.createElement(D,{ref:Q,disableYuqueCardEmbedView:!J,group:o,target:s,targetType:f,comments:K,litecomment:t.litecomment,useMiniGuide:y,canComment:p,onCreate:P?V.handleCreateReplyToComment:V.handleCreateRootComment,getDefaultSuggestions:V.getDefaultSuggestions,isMiniSize:tt,editorAffixed:et,withAreaSelection:v,dispatch:w,areaCommenting:S,cancelable:b,onCancelCreate:g,me:x,showReply:P,placeholder:$,onCloseReply:function(){V.setBottomEditorPlaceHolder("")},commentTipText:A})))}Fe.defaultProps={canComment:!0,canMentionMembers:!1,useMiniGuide:!1,size:"default",me:window.appData.me,isMobile:window.h5,openInfiniteScroll:!1,pageSize:15},Fe.propTypes={commentableType:l.a.oneOf(b.a.TARGET_TYPES),group:l.a.object.isRequired,book:l.a.object,doc:l.a.object,target:l.a.object.isRequired,canMentionMembers:l.a.bool,cancelable:l.a.bool,onCancelCreate:l.a.func,useMiniGuide:l.a.bool,onCreate:l.a.func,onRemove:l.a.func,focusToEditor:l.a.bool,canComment:l.a.bool,size:l.a.oneOf(["default","mini"]),withAreaSelection:l.a.bool,litecomment:l.a.object,onEditorReady:l.a.func,me:l.a.object,isMobile:l.a.bool,dispatch:l.a.func,getViewEngine:l.a.func,openInfiniteScroll:l.a.bool,pageSize:l.a.number,onCommentLoaded:l.a.func,commentTipText:l.a.string,reverseReplyButton:l.a.boolean};Object(y.d)((function(t){return{litecomment:t.litecomment}}))(Fe);var Ue=Object(y.d)((function(t){return{litecomment:t.litecomment,group:t.group}}))(Fe);e.a=Object(a.forwardRef)((function(t,e){return c.a.createElement(Ue,Pe({},t,{forwardedRef:e}))}))},3797:function(t,e,r){"use strict";var n=r(0),o=r.n(n),i=r(3617),a=r(8),c=r.n(a),u=function(t){var e,r=t.type,n=void 0===r?"Doc":r,a=t.target,c=t.style;return n&&a&&window.appData.isYuque?((null===(e=window.appData)||void 0===e?void 0:e.settings)||{}).disable_ip_region_model?null:(Object(i.a)()||Object(i.b)())&&("Doc"!==n||a.first_published_at)&&a.region?o.a.createElement("span",{style:c},__("IP 属地"),a.region||__("未知")):null:null};u.propTypes={target:c.a.object.isRequired,type:c.a.string},e.a=u},3977:function(t,e,r){"use strict";r.r(e);var n=r(0),o=r.n(n),i=r(8),a=r.n(i),c=r(13),u=r.n(c),l=r(555),s=r(42),f=r(3792),p=r(213),d=r(3727),y=r(269),h={commmentHeader:"ReaderComment-module_commmentHeader_U8YZ5",mobileCommmentHeaderWrapper:"ReaderComment-module_mobileCommmentHeaderWrapper_MxoIa",mobileCommmentHeader:"ReaderComment-module_mobileCommmentHeader_O2gLE",count:"ReaderComment-module_count_6syjv",replayBtn:"ReaderComment-module_replayBtn_YG364",text:"ReaderComment-module_text_E5A0E",commentFloorContainer:"ReaderComment-module_commentFloorContainer_hYRys",mobileCommentFloorContainer:"ReaderComment-module_mobileCommentFloorContainer_6CVJy",header:"ReaderComment-module_header_9Ej69",headerTitle:"ReaderComment-module_headerTitle_MaqXh",headerBtn:"ReaderComment-module_headerBtn_YdQfC",mobile:"ReaderComment-module_mobile_f+LqA"};function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===m(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var w=function(t){var e,r,i=t.target,a=t.isShare,c=t.group,l=t.book,p=t.withCornerBubble,m=t.getViewEngine,g=t.onRemoveComment,w=t.onCreateComment,E=t.litecomment,_=t.autoScrollToComment,O=a?"share":"read",S=null===(e=window.location.hash)||void 0===e?void 0:e.match(/#comment-(\d+)/),j=S?S[1]:void 0,x=!!j,P=!x,L=b(Object(n.useState)(!1),2),T=L[0],k=L[1],C=Object(n.useRef)(),A=function(){var t=document.querySelector("#lark-mini-editor");t?(P&&C.current&&C.current.renderAllComments(),t.scrollIntoView(),k(!0)):document.querySelector("#scroll-to-comment").scrollIntoView()},R=E.commentCount>0?o.a.createElement("div",{className:h.commmentHeader},__("所有评论（{count}）",{count:E.commentCount})):null,N=E.commentCount>0?o.a.createElement("div",{className:h.mobileCommmentHeaderWrapper},o.a.createElement("div",{className:h.mobileCommmentHeader},o.a.createElement("span",{className:h.count},__("所有评论（{count}）",{count:E.commentCount})),o.a.createElement("a",{className:h.replayBtn,onClick:A},o.a.createElement(s.b,{name:"edit-border",width:20}),o.a.createElement("span",{className:h.text},__("回复"))))):null,I=window.h5,D=o.a.createElement("div",{className:h.wrapper},I?N:R,o.a.createElement("div",{className:u()((r={},v(r,h.mobileCommentFloorContainer,I),v(r,h.commentFloorContainer,!I),r))},o.a.createElement(f.a,{ref:C,key:i.id,commentableType:t.targetType,target:t.target,group:c,book:l,doc:i,canMentionMembers:y.a.canMentionMembers(O,{group:c}),onCreate:w,onRemove:g,canComment:y.a.canPostCommentToDoc(i),focusToEditor:T,getViewEngine:m,openInfiniteScroll:P,onCommentLoaded:function(){_&&j&&setTimeout((function(){var t=document.querySelector("#comment-".concat(j));null==t||t.scrollIntoView(!0)}),1e3)}})),p&&o.a.createElement(d.a,{iconName:"comment-bubble",style:{bottom:"86px"},onClick:A,count:E.commentCount>0?E.commentCount:0})),M=b(Object(n.useState)(x?D:null),2),F=M[0],U=M[1];return Object(n.useEffect)((function(){U(D)}),[T]),Object(n.useEffect)((function(){U(D)}),[E.commentCount]),o.a.createElement(o.a.Fragment,null,F)};w.defaultProps={isShare:!1,onCreateComment:function(){},onRemoveComment:function(){}},w.propTypes={target:a.a.object.isRequired,litecomment:a.a.object.isRequired,targetType:a.a.oneOf(["Doc","DocVersion"]).isRequired,book:a.a.object.isRequired,group:a.a.object.isRequired,autoScrollToComment:a.a.bool,isShare:a.a.bool,onCreateComment:a.a.func,onRemoveComment:a.a.func,withCornerBubble:a.a.bool,getViewEngine:a.a.func};e.default=Object(p.b)(Object(l.d)((function(t){return{litecomment:t.litecomment}}))(w),!0)},452:function(t,e,r){t.exports=r(532)}}]);