(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{4655:function(e,t,n){"use strict";n.r(t);n(64);var a=n(21),r=n(0),o=n.n(r),l=n(8),c=n.n(l),i=n(555),u=n(13),s=n.n(u),d=n(677),v=n(42),p=n(213),m={wrapper:"InReviewBanner-module_wrapper_kANjy",box:"InReviewBanner-module_box_bigL9",close:"InReviewBanner-module_close_Af8Ns",closeIcon:"InReviewBanner-module_closeIcon_emjwp",h5Box:"InReviewBanner-module_h5Box_GbZe0",btn:"InReviewBanner-module_btn_ZCKco",tagModeWrapper:"InReviewBanner-module_tagModeWrapper_-PoJt",ball:"InReviewBanner-module_ball_Pjs8k",tagText:"InReviewBanner-module_tagText_shE94",tagClose:"InReviewBanner-module_tagClose_ZlDQO",active:"InReviewBanner-module_active_z0xP7",accepted:"InReviewBanner-module_accepted_OyCzR",rejected:"InReviewBanner-module_rejected_zNLJp",cancelled:"InReviewBanner-module_cancelled_egK9Q"};function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==f(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,l,c=[],i=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(a=o.call(n)).done)&&(c.push(a.value),c.length!==t);i=!0);}catch(e){u=!0,r=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw r}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function S(e){var t,n=e.review,l=e.doc,c=e.dispatch,i=e.me,u=e.showClose,p=e.isTagMode,f=b(Object(r.useState)((null==l?void 0:l.latestReviewStatus)>=0),2),_=f[0],S=f[1],y=function(){c({type:"review/update",payload:{showReviewDrawer:!0,showCreateReviewDrawer:!1}})};Object(r.useEffect)((function(){(null==l?void 0:l.latestReviewStatus)>=0&&null!=n&&n.activeReview&&S(!0)}),[n,null==l?void 0:l.id]);var T=function(e){e.stopPropagation(),S(!1)},h=n.activeReview,g=void 0===h?{status:l.latestReviewStatus}:h;if(!_||window.h5&&g.status!==d.STATUS.active)return null;var j,A,R=!!(g&&g.approvers&&(null===(t=g.approvers)||void 0===t?void 0:t.length)>0)&&!!g.approvers.find((function(e){return e.id===(null==i?void 0:i.id)&&!e.isCompleted}));if(window.h5&&!R)return null;if(p){var I,k;switch(g.status){case d.STATUS.accepted:k=__("评审已通过#tag");break;case d.STATUS.active:k=__("评审进行中#tag");break;case d.STATUS.rejected:k=__("评审未通过#tag");break;case d.STATUS.cancelled:k=__("评审已取消#tag");break;default:return null}return o.a.createElement("div",{className:s()(m.tagModeWrapper,(I={},w(I,m.active,d.STATUS.active===g.status),w(I,m.accepted,d.STATUS.accepted===g.status),w(I,m.rejected,d.STATUS.rejected===g.status),w(I,m.cancelled,d.STATUS.cancelled===g.status),I)),onClick:y},o.a.createElement("span",{className:m.ball}),o.a.createElement("span",{className:m.tagText},k),u&&o.a.createElement("div",{className:m.tagClose,onClick:T},o.a.createElement(v.b,{name:"close",width:10,height:10})))}switch(g.status){case d.STATUS.accepted:j="#25B864",A=__("评审已通过");break;case d.STATUS.active:j="#1890ff",A=__("评审进行中");break;case d.STATUS.rejected:j="#ff4d4f",A=__("评审未通过");break;case d.STATUS.cancelled:j="#595959",A=__("评审已取消");break;default:return null}return o.a.createElement("div",{className:m.wrapper},o.a.createElement("span",{className:s()(m.box,w({},m.h5Box,window.h5)),onClick:y},o.a.createElement(v.b,{name:"review-status",width:16,style:{color:j}}),o.a.createElement("span",null,A),g.status===d.STATUS.active&&R&&window.h5&&o.a.createElement(a.a,{type:"link",className:m.btn},__("去评审")),u&&o.a.createElement("div",{className:m.close,onClick:T},o.a.createElement("span",{className:s()("lake-icon","lake-icon-close",m.closeIcon)}))))}S.propTypes={doc:c.a.object,dispatch:c.a.func,review:c.a.object,me:c.a.object,showClose:c.a.bool,isTagMode:c.a.bool};t.default=Object(p.b)(Object(i.d)((function(e){return{review:e.review,dispatch:e.dispatch,doc:e.doc,me:e.me}}))(S))}}]);