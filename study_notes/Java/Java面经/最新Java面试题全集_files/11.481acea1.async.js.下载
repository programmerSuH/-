/*! For license information please see 11.481acea1.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1981:function(e,t,r){"use strict";r(227);var n=r(112),o=(r(445),r(166)),a=(r(94),r(27)),i=(r(228),r(66)),c=(r(204),r(76)),l=(r(218),r(55)),u=(r(258),r(69)),s=r(0),f=r.n(s),p=r(8),d=r.n(p),m=r(1409),y=r(1658),h={docTask:"DocTask-module_docTask_NywmO",settingFile:"DocTask-module_settingFile_bFy51",hr:"DocTask-module_hr_y8Wz9",settingFileIcon:"DocTask-module_settingFileIcon_++xRm",settingContent:"DocTask-module_settingContent_leSlb",isFirst:"DocTask-module_isFirst_RPJNh",settingTitlt2:"DocTask-module_settingTitlt2_OZfjd",settingFileTypeName:"DocTask-module_settingFileTypeName_S4Bv1",settingFileTypeExt:"DocTask-module_settingFileTypeExt_GCoBd"};function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}var v={STATUS:{INIT:"init",SETTING:"setting",PROCESSING:"processing",UPLOADING:"uploading",PENDING:"pending",DONE:"done",SUCCESS:"success",ERROR:"error"}};v.AdvanceSetting=u.a.create({name:"advanceSettingForm"})(Object(s.forwardRef)((function(e,t){var r=e.type,n=e.target,p=void 0===n?{}:n,d=e.settings,m=e.actions,y=e.title,v=e.form;if(!r)return null;var g=v.getFieldDecorator;return Object(s.useImperativeHandle)(t,(function(){return{form:v,getValue:function(){var e=v.getFieldsValue()||{};return Object.keys(e).forEach((function(t){if(Array.isArray(e[t])){var r=e[t][0];null==r?delete e[t]:e[t]=r}})),e}}})),f.a.createElement("div",{"data-testid":"docTask-".concat(r.key)},f.a.createElement(c.a,{className:h.settingFile,type:"flex",justify:"start",align:"middle"},f.a.createElement(l.a,{className:h.settingFileIcon},f.a.createElement("img",{src:r.icon,className:""})),f.a.createElement(l.a,{className:h.settingFileTypeMeta},f.a.createElement("div",{className:h.settingFileTypeName},y||p.title||p.name||r.name),f.a.createElement("div",{className:h.settingFileTypeExt},r.extensions.join(" ")))),f.a.createElement("div",{className:h.settingContent},f.a.createElement("h2",{className:h.settingTitlt2},__("高级选项")),f.a.createElement(u.a,null,d.map((function(e,t){if(Array.isArray(e)){var r=0===t?h.isFirst:"";return f.a.createElement(u.a.Item,{className:r},g(e[0].name,{initialValue:e.find((function(e){return e.default})).value})(f.a.createElement(i.a.Group,null,e.map((function(e){return f.a.createElement(i.a,{value:e.value},e.label)})))))}if("text"===e.type){var n={};return e.validator&&(e.validateOnBlur&&(n.validateTrigger=["onChange","onBlur"]),n.rules=[{validator:e.validator}]),f.a.createElement(u.a.Item,{label:e.label,colon:e.colon},g(e.name,n)(f.a.createElement(a.a,b({type:"text",autoComplete:"off",maxLength:"1000"},e))))}return f.a.createElement(u.a.Item,null,g(e.name,{initialValue:[e.default&&e.value]})(f.a.createElement(o.a.Group,null,f.a.createElement(o.a,{value:e.value},e.label))))})))),f.a.createElement("div",{className:h.settingFooter},m))}))),v.Error=function(e){return f.a.createElement("div",{className:"".concat(h.docTask," ").concat(h.docTaskError)},f.a.createElement("p",{className:"icon"},f.a.createElement(m.default,null)),f.a.createElement("p",{className:"tip"},e.tip),f.a.createElement("p",{className:"error"},e.error),f.a.createElement("p",{className:"action"},e.action))},v.Error.propTypes={tip:d.a.string,action:d.a.node,error:d.a.string},v.Success=function(e){return f.a.createElement("div",{className:"".concat(h.docTask," ").concat(h.docTaskSuccess)},f.a.createElement("p",{className:"icon"},f.a.createElement(y.default,null)),f.a.createElement("p",{className:"tip"},e.tip),f.a.createElement("p",{className:"action"},e.action))},v.Success.propTypes={tip:d.a.string,action:d.a.node},v.Processing=function(e){return f.a.createElement("div",{className:"".concat(h.docTask," ").concat(h.docTaskProcessing)},f.a.createElement(n.a,{justify:"block"}),f.a.createElement("p",{className:"tip"},f.a.createElement("span",null,e.tip)))},v.Processing.propTypes={tip:d.a.string};t.a=v},2064:function(e,t,r){"use strict";e.exports={DesktopBridgeBookEvents:{selectBook:"book.selectBook",addPin:"book.addPin",refreshPin:"app.refreshPin",addBook:"app.addBook"}}},2476:function(e,t,r){"use strict";r.d(t,"d",(function(){return m.b})),r.d(t,"a",(function(){return m.a})),r.d(t,"e",(function(){return Q})),r.d(t,"g",(function(){return ee})),r.d(t,"h",(function(){return re})),r.d(t,"b",(function(){return ne})),r.d(t,"f",(function(){return oe})),r.d(t,"c",(function(){return ae}));r(640);var n=r(327),o=(r(64),r(21),r(197),r(36)),a=(r(113),r(35)),i=r(0),c=r.n(i),l=r(13),u=r.n(l),s=(r(62),r(8)),f=r.n(s),p=r(2747),d=r(593),m=r(1734),y=r(42),h=r(268),b="index-module_label_qcR+D",v=function(e){return e.visible?c.a.createElement("span",{className:b},__("空间")):null},g=r(555),_=r(107),w=r.n(_),E=r(2753),O=r(70),k=r(2478),x=(r(2479),r(1979)),S=(r(61),r(23)),j=r(38),T=r(2755);function N(e){var t=e.group,r=e.book,n=e.closeModal;return c.a.createElement(T.a,{visible:!0,title:__("删除知识库"),content:c.a.createElement(x.a,{description:__("正在删除知识库 {name}，该操作不可逆，一旦操作成功，知识库下的所有内容将会删除。请输入下面内容再次确认操作。",{name:c.a.createElement("span",{className:"highlight_name"},r.name)}),type:"warning"}),buttonText:__("确定删除 {name}",{name:r.name}),slug:r.slug,onOk:function(){j.a.books.destroy({id:r.id}).then((function(e){S.a.success(__("操作成功"),3),n(),setTimeout((function(){window.location.href="/".concat(t.login)}),300)}))},onCancel:n})}N.propTypes={book:f.a.object,group:f.a.object,closeModal:f.a.func};var P=Object(g.d)((function(e){return{book:e.book,group:e.group}}))(N),R="BookAction-module_wrap_AiMmc";function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F(n.key),n)}}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D(e);if(t){var o=D(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}(this,r)}}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function M(e,t,r){return(t=F(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e){var t=function(e,t){if("object"!==B(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===B(t)?t:String(t)}var U=w()("book:action"),q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(a,e);var t,r,n,o=L(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),M(A(t=o.call(this,e)),"doAction",(function(e){e&&t.setState({cmd:e,exportModal:e===O.a.BOOK.export_book.cmd,deleteModal:e===O.a.BOOK.delete_book.cmd})})),M(A(t),"handleCloseDeleteModal",(function(){t.setState({deleteModal:!1})})),t.state={exportModal:!1,deleteModal:!1,cmd:null},t}return t=a,(r=[{key:"render",value:function(){var e,t=this,r=this.props,n=r.className,o=r.book;switch(this.state.cmd){case O.a.BOOK.manage.cmd:window.open("/r/".concat(o.namespace,"/docs"),"_self");break;case O.a.BOOK.catalog_manage.cmd:window.open("/r/".concat(o.namespace,"/toc"),"_self");break;case O.a.BOOK.manage_assets.cmd:window.open("/".concat(o.namespace,"/assets"),"_self");break;case O.a.BOOK.collaborators.cmd:window.open("/r/".concat(o.namespace,"/collaborators"),"_self");break;case O.a.BOOK.recycles.cmd:window.open("/r/".concat(o.namespace,"/trash"),"_self");break;case O.a.BOOK.statistics.cmd:window.open("/r/".concat(o.namespace,"/statistics"),"_self");break;case O.a.BOOK.settings.cmd:case O.a.BOOK.rename_book.cmd:window.open("/".concat(o.namespace,"/settings/basic"),"_self");break;case O.a.DOC.modify_toc.cmd:window.open("/r/".concat(o.namespace,"/toc"),"_self");break;default:U("no processor, do nothing, just trigger onSelect and set state")}var a=null==o||null===(e=o.abilities)||void 0===e?void 0:e.destroy;return c.a.createElement("div",{className:"".concat(R," ").concat(n)},void 0,c.a.createElement(E.a,{visible:this.state.exportModal,book:o,formats:k.a.getExportFormats(),onCancel:function(){return t.setState({exportModal:!1,cmd:null})}}),this.state.deleteModal&&a&&c.a.createElement(P,{closeModal:this.handleCloseDeleteModal}))}}])&&C(t.prototype,r),n&&C(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(c.a.Component);q.defaultProps={className:""},q.propTypes={className:f.a.string,book:f.a.object.isRequired};var G=Object(g.d)((function(e){return{book:e.book,group:e.group}}),null,null,{forwardRef:!0})(q),K=r(2754),z=r(2724),Y=r(252),J={bookTitle:"index-module_bookTitle_lUUrB",name:"index-module_name_OMCDB",group:"index-module_group_xaGsx",text:"index-module_text_UrMgl",checked:"index-module_checked_3fCif",moreActions:"index-module_moreActions_YYACs"},V=["group","book","showBookIcon","showPrivateIcon","showOrgLabel","href","target","iconSize","className","draggable","onItemClick","isMobile"];function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z.apply(this,arguments)}function W(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var $=window.appData.isDesktopApp,Q=(__("文档"),__("表格"),__("图集"),__("专栏"),__("资源"),function(e){var t=e.group,r=e.book,n=e.showBookIcon,o=void 0===n||n,a=e.showPrivateIcon,i=void 0===a||a,l=e.showOrgLabel,s=void 0!==l&&l,f=e.href,p=e.target,d=e.iconSize,m=e.className,y=e.draggable,b=e.onItemClick,v=e.isMobile,g=W(e,V),_=window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp||window.appData.isYuqueMobileApp?"_blank":"_self";return c.a.createElement(h.a,{href:f||"/".concat(t.login,"/").concat(r.slug),className:u()("book-link",m),target:p||_,desktopDisableHref:!0,draggable:y,onClick:function(t){$?Object(z.c)({book:r}):b&&(t.preventDefault(),b(e))}},c.a.createElement(re,Z({},g,{group:t,book:r,showBookIcon:o,showPrivateIcon:i,showOrgLabel:s,iconSize:d,isMobile:v})))});Q.propTypes={book:f.a.object,group:f.a.object,showBookIcon:f.a.bool,showOrgLabel:f.a.bool,className:f.a.string,target:f.a.string,showShareBadge:f.a.bool};f.a.object,f.a.object,f.a.bool,f.a.bool,f.a.bool,f.a.string,f.a.string,f.a.func,f.a.bool;var ee=function(e){var t=e.width,r=e.height;return c.a.createElement(a.a,{title:__("付费阅读")},c.a.createElement("a",{style:{display:"inline-block",marginLeft:"8px",verticalAlign:"middle",marginRight:"8px"},href:"https://www.yuque.com/yuque/thyzgp/un97yl",target:"_blank"},c.a.createElement(y.b,{name:"premium",width:t,height:r})))};ee.propTypes={width:f.a.number,height:f.a.number};var te=function(e){var t=e.book,r=e.org,n=e.group,o=e.getPopupContainer,a=Object(K.c)({type:"book",target:t,org:r,group:n});return c.a.createElement("span",{className:"book-name-scope"},c.a.createElement(m.a,{public:a,book:t,group:n,size:13,getPopupContainer:o}))},re=function(e){var t=e.group,r=e.book,n=e.showGroupName,o=void 0!==n&&n,a=e.showBookIcon,i=void 0===a||a,l=e.showPrivateIcon,s=void 0===l||l,f=e.showOrgLabel,p=void 0!==f&&f,h=e.isMobile,b=void 0!==h&&h,g=e.checked,_=void 0!==g&&g,w=e.href,E=e.getPopupContainer,O=e.className,k=e.iconSize||(b?28:24),x=t&&(t.organization||{id:t.organization_id}),S=window.appData.me;return b?c.a.createElement("span",{className:u()(J.bookTitle,O)},c.a.createElement("div",{className:u()(J.icon,"book-icon-wrapper")},c.a.createElement(m.b,{group:t,book:r,width:k})),c.a.createElement("div",{className:u()(J.name,"book-title-name")},c.a.createElement("div",{className:u()(J.text,"book-title-text"),title:r.name},r.name),t.name&&c.a.createElement("div",{className:u()(J.group,"book-title-desc")},t.name)),c.a.createElement("div",{className:J.checked},_&&c.a.createElement(d.default,null))):c.a.createElement("span",{className:u()("lark-book-title",O)},i&&c.a.createElement(m.b,{group:t,book:r,width:k}),c.a.createElement("span",{className:"book-name"},o&&c.a.createElement(c.a.Fragment,null,c.a.createElement("span",null,t.name),c.a.createElement("span",{className:"book-name-split"},"/")),w&&c.a.createElement("a",{className:"book-name-text-wrapper",href:w},c.a.createElement("span",{className:"book-name-text",title:r.name},r.name)),!w&&c.a.createElement("span",{className:"book-name-text",title:r.name},r.name),(null==S?void 0:S.isAdmin)&&-1===r.status&&c.a.createElement("span",{className:"book-name-scope"},c.a.createElement(y.b,{name:"doc-has-content-risk",width:13,style:{opacity:.375}})),s&&c.a.createElement(Y.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return c.a.createElement("span",{"data-test-id":"book-access-scope"})}},c.a.createElement(te,{book:r,org:x,group:t,getPopupContainer:E})),p&&c.a.createElement("span",{className:"book-name-orglabel"},c.a.createElement(v,{visible:t&&t.organization_id>0}))))};re.propTypes={group:f.a.object,book:f.a.object,iconSize:f.a.number,showBookIcon:f.a.bool,showPrivateIcon:f.a.bool,showOrgLabel:f.a.bool,showGroupName:f.a.bool,isMobile:f.a.bool,checked:f.a.bool,href:f.a.string,getPopupContainer:f.a.func,showShareBadge:f.a.bool};var ne=function(e){var t=e.book,r=e.clickable;return t.user?r?c.a.createElement("a",{href:"/".concat(t.user.login),title:t.user.name,className:"book-belong"},t.user.name):c.a.createElement("span",{className:"book-belong",title:t.user.name},t.user.name):null};ne.defaultProps={clickable:!0},ne.propTypes={book:f.a.object,clickable:f.a.bool};f.a.string;var oe=function(e){var t=Object(i.useRef)(null),r=H(Object(i.useState)(!1),2),n=r[0],a=r[1],l=e.book,u=e.group,s=e.me,f=k.a.actionsForNavMore(l,u,s).filter((function(e){return e.can||"divider"===e.action.cmd}));return f.length?c.a.createElement(c.a.Fragment,null,c.a.createElement(p.a,{className:J.moreActions,visible:n,onVisibleChange:function(e){return a(e)},direction:"circle",iconWidth:20,content:c.a.createElement(o.a,{selectable:!1},f.map((function(e){return"divider"===e.action.cmd?c.a.createElement(o.a.Divider,null):c.a.createElement(o.a.Item,{disabled:!1===e.can,key:e.action.cmd,onClick:function(){t.current.doAction(e.action.cmd),a(!1)}},e.action.title)})))}),c.a.createElement(G,{ref:t})):null};oe.propTypes={book:f.a.object.isRequired,styles:f.a.object.isRequired,group:f.a.object.isRequired,me:f.a.object};f.a.object,f.a.object;__("导出 PDF"),__("设置"),__("删除"),__("转移"),__("分享");var ae=function(e,t){switch(e){case"Design":return"name"===t?__("如：语雀视觉设计"):__("如：视觉设计与规范");case"Sheet":return"name"===t?__("如：研发计划"):__("如：第一季度研发计划");case"Column":return"name"===t?__("如：团队专栏"):__("如：团队设计分享");case"Resource":return"name"===t?__("资源知识库"):__("上传资源文件、本地文档等内容");default:return"name"===t?__("如：产品文档"):__("如：产品设计与研发")}};(function(e){var t=e.belongs,r=e.onChange,a=__("归属");if(!t||t.length<=1)return c.a.createElement("span",null,a);return c.a.createElement(n.a,{trigger:["click"],overlay:c.a.createElement(o.a,{className:"dashboard-dropdown-menu",selectedKeys:[]},t.map((function(e,t){return c.a.createElement(o.a.Item,{key:e.type},c.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),function(e){r(e.type)}(e)}},e.text))})))},c.a.createElement("span",null,a,c.a.createElement(y.b,{name:"arrow-down",width:16})))}).propTypes={belongs:f.a.array.isRequired,onChange:f.a.func.isRequired}},2478:function(e,t,r){"use strict";var n=r(151),o=r.n(n),a=r(84),i=r.n(a),c=r(109),l=r(360),u=r(70),s={getExportFormats:function(){return i.a.BOOK_EXPORT_FORMATS},adaptDocTypography:function(e){if(!e.doc_typography)return{type:c.DOC_TYPOGRAPHY.traditional,scope:"all"};var t=e.doc_typography.split("_");return 1===t.length?{type:t[0],scope:null}:{type:t[0],scope:t[1]}},actionsForNavMore:function(e,t,r){var n=e.abilities;if(!n)return[];var o=[];"Design"===e.type&&o.push({action:u.a.BOOK.manage_assets,can:n.create_doc}),o.push({action:u.a.BOOK.collaborators,can:n.create_doc}),s.isMixingType(e)&&o.push({action:u.a.BOOK.statistics,can:n.manage}),"Design"!==e.type&&o.push({action:u.a.BOOK.recycles,can:n.create_doc});var a=[];return a.push({action:u.a.BOOK.rename_book,can:n.modify_setting||n.manage}),a.push({action:u.a.BOOK.delete_book,can:n.destroy}),a.push({action:u.a.BOOK.settings,can:n.create_doc}),o.find((function(e){return e.can}))&&a.find((function(e){return e.can}))&&o.push({action:{cmd:"divider"}}),o.push.apply(o,a),o},sortByUpdatedAt:function(e,t){return new Date(e.content_updated_at)-new Date(t.content_updated_at)},sortByCreatedAt:function(e,t){return new Date(e.created_at)-new Date(t.created_at)},sortByTitle:function(e,t){return e.name.localeCompare(t.name,"zh-Hans-CN",{sensitivity:"accent"})},getBelong:function(e){var t={type:"",text:""};if(!e)return t;var r=e.user;return r?t={type:r.login,text:r.name}:t},getBelongs:function(e){var t=this,r=e.map((function(e){return t.getBelong(e)}));return(r=o()(r,"type").filter((function(e){return!!e.type}))).unshift({type:null,text:__("所有")}),r},filterByBelong:function(e,t){var r=this;return t?e.filter((function(e){return r.getBelong(e).type===t})):e},isMixingType:function(e){return!(!e||!e.type)&&c.MIXING_BOOK_TYPES.includes(e.type)},shouldShowTempStoreBox:function(e){var t;return null==e||null===(t=e.abilities)||void 0===t?void 0:t.create_doc},MEMBER_LIST_CONSTANT:{MAX_SIZE:2e3,PAGE_SIZE:500},getMemberCount:function(e,t){return e>s.MEMBER_LIST_CONSTANT.MAX_SIZE?"".concat(s.MEMBER_LIST_CONSTANT.MAX_SIZE,"+"):e<s.MEMBER_LIST_CONSTANT.PAGE_SIZE?(null==t?void 0:t.length)||0:e},getDefaultBookCover:function(){return l.defaultBookCovers}};t.a=s},2724:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i}));var n=r(2064);function o(e){window.YuqueDesktopJSBridge.postMessage(n.DesktopBridgeBookEvents.addBook,e)}function a(e){window.YuqueDesktopJSBridge.postMessage(n.DesktopBridgeBookEvents.refreshPin)}function i(e){window.YuqueDesktopJSBridge.postMessage(n.DesktopBridgeBookEvents.selectBook,e)}},2744:function(e,t,r){"use strict";var n=r(0);t.a=function(e){return n.createElement("a",e)}},2745:function(e,t,r){"use strict";r(204);var n=r(76),o=(r(218),r(55)),a=(r(113),r(35)),i=(r(1733),r(356)),c=(r(61),r(23)),l=r(0),u=r.n(l),s=r(8),f=r.n(s),p=r(13),d=r.n(p),m=r(177),y={fileTypeSelector:"index-module_fileTypeSelector_73BHW",item:"index-module_item_H3xgY",fileType:"index-module_fileType_l65Jm",fileTypeIcon:"index-module_fileTypeIcon_eSmiM",fileTypeMeta:"index-module_fileTypeMeta_4eYr8",fileTypeName:"index-module_fileTypeName_9B0Rn",fileTypeExt:"index-module_fileTypeExt_wTTFB",fileTypeReady:"index-module_fileTypeReady_TAUvL"};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n)}}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var o=w(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(this,r)}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function E(e,t,r){return(t=O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k.apply(this,arguments)}function x(){x=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new j(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function p(){}function d(){}function m(){}var y={};l(y,a,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&r.call(v,a)&&(y=v);var g=m.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==h(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return N()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return d.prototype=m,n(g,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:d,configurable:!0}),d.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),l(g,c,"Generator"),l(g,a,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function S(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function j(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var R={lake:__("语雀文档"),lakeboard:__("语雀画板"),lakesheet:__("语雀表格"),laketable:__("语雀数据表"),lakebook:__("语雀知识库")},B=function(e){var t,r,n,o,a,s=e.fileOption,f=e.getParamsOption,p=e.book,d=e.importType,y=e.onBeforeUpload,h=e.onUploadChange,b=e.customRequest,v=e.maxCount,g=T(Object(l.useState)([]),2),_=g[0],w=g[1],E=function(e){var t=j(e.fileList);w(t),h(e)},O=function(){var e,r=(e=x().mark((function e(r,n){var o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(v&&n.length>v)){e.next=4;break}throw o="一次最多上传 ".concat(v," 个文件。"),t||(c.a.warn(__(o)),t=!0),new Error(o);case 4:if(!y){e.next=7;break}return e.next=7,y();case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){S(a,n,o,i,c,"next",e)}function c(e){S(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e,t){return r.apply(this,arguments)}}();return u.a.createElement(i.a,k({},(r=s.extensions.join(", "),n="/api/import?ctoken=".concat(Object(m.a)(window)),o={book_id:p.id,type:s.key,import_type:d},a={name:"file",action:n,data:function(){if(f){var e=f();e&&(o.options=JSON.stringify(e))}return o},showUploadList:!1,dataType:"json",multiple:!0,supportServerRender:!1,accept:r,withCredentials:!0,beforeUpload:O,onChange:E},"function"==typeof b&&(a.customRequest=b),a),{fileList:_,key:s.key}),e.children)};B.defaultProps={maxCount:10};var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(l,e);var t,r,i,c=g(l);function l(e){var t,r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),E(_(t=c.call(this,e)),"handleSelect",(function(e){t.setState({selected:e}),t.props.onSelect(e)})),t.state={selected:null},"export"===e.mode)&&(null===(r=e.types)||void 0===r||r.forEach((function(e){e.extensions.length=1})));return t}return t=l,(r=[{key:"renderItem",value:function(e){var t,r=this,n="ready"===e.status,o=this.props.mode,i=u.a.createElement("div",{className:d()((t={},E(t,y.fileType,!0),E(t,y.fileTypeReady,n),E(t,y.fileTypeSelected,this.state.selected===e.key),t)),onClick:function(){r.handleSelect(e.key)},"data-aspm-click":"c34618.d69452","data-aspm-param":"file_type=".concat(e.key,"^action_mode=").concat(o),"data-testid":"fileTypeSelectorItem-".concat(e.key)},u.a.createElement("div",{className:y.fileTypeIcon},u.a.createElement("img",{src:e.icon,className:""})),u.a.createElement("div",{className:y.fileTypeMeta},u.a.createElement("div",{className:y.fileTypeName},R[e.key]||e.name),u.a.createElement("div",{className:y.fileTypeExt},e.extensions.join(" "))));return n?u.a.createElement(a.a,{title:__("即将支持，敬请期待。")},i):"confluence"===e.key?u.a.createElement(a.a,{title:__("将 cf 导出的文件加上 .zip 后缀再导入")},i):"zip"===e.key?u.a.createElement(a.a,{title:__("将文件使用 zip 压缩后再导入")},i):i}},{key:"render",value:function(){var e=this,t=this.props.types;return u.a.createElement("div",{className:y.fileTypeSelector},u.a.createElement(n.a,{gutter:6},null==t?void 0:t.map((function(t){return u.a.createElement(o.a,{key:t.key,className:y.item},"import"!==e.props.mode||t.status||e.props.disableUpload(t)?e.renderItem(t):u.a.createElement(B,k({},e.props,{fileOption:t}),e.renderItem(t)))}))))}}])&&b(t.prototype,r),i&&b(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(l.PureComponent);C.defaultProps={onSelect:function(){},onBeforeUpload:function(){},onUploadChange:function(){},disableUpload:function(){return!1}},C.propTypes={types:f.a.array.isRequired,mode:f.a.oneOf(["import","export"]),importType:f.a.string,maxCount:f.a.number,getParamsOption:f.a.func,book:f.a.object,disableUpload:f.a.func,onSelect:f.a.func,onBeforeUpload:f.a.func,customRequest:f.a.func,onUploadChange:f.a.func},C.FileUpload=B;t.a=C},2753:function(e,t,r){"use strict";r(95);var n=r(49),o=(r(64),r(21)),a=r(0),i=r.n(a),c=r(8),l=r.n(c),u=r(745),s=r(1766),f=r(2580),p=r.n(f),d=r(1981),m=r(2745),y=r(252),h=r(582),b=r(190),v=r(2744),g="BookExport-module_docExport_44PUl",_="BookExport-module_title_Hezdm",w="BookExport-module_tips_VJJKo",E="BookExport-module_setting_PXAtw",O="BookExport-module_settingTitle_pEiZb",k="BookExport-module_settingUpload_sNiNV";function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(){T=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function p(){}function d(){}function m(){}var y={};l(y,a,(function(){return this}));var h=Object.getPrototypeOf,b=h&&h(h(j([])));b&&b!==t&&r.call(b,a)&&(y=b);var v=m.prototype=p.prototype=Object.create(y);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==x(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return N()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return d.prototype=m,n(v,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:d,configurable:!0}),d.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(v),l(v,c,"Generator"),l(v,a,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function N(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){N(a,n,o,i,c,"next",e)}function c(e){N(a,n,o,i,c,"throw",e)}i(void 0)}))}}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=L(e);if(t){var o=L(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}(this,r)}}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function A(e,t,r){return(t=D(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){var t=function(e,t){if("object"!==x(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===x(t)?t:String(t)}var M=d.a.STATUS,F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(l,e);var t,r,a,c=C(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),A(I(t=c.call(this,e)),"handleExport",(function(e){t.setState({exportType:e,typeObj:p.a.THIRD_PARTY_FORMAT[e.toUpperCase()]}),t.settings[e]?t.setState({status:M.SETTING}):t.doExport(e)})),A(I(t),"doExport",function(){var e=P(T().mark((function e(r,n){var o,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({status:M.PROCESSING}),o=t.props.book,a={data:{id:o.id,type:r,title:n}},t["exportTo".concat(r)](a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),A(I(t),"_requestExports",(function(e){return h.a.books.exports(j(j({},t._exportParams),e.data))})),A(I(t),"exportTolakebook",(function(e){t.formRef&&(e.data.options=JSON.stringify(t.formRef.getValue())),t._requestExports(e).then((function(e){"success"===e.state&&(t.setState({exportResultUrl:e.url,status:M.SUCCESS}),b.b.download(e.url))})).catch((function(e){var r="";404===(null==e?void 0:e.status)&&(r=__("导出失败，知识库禁止导出，请检查权限")),t.setState({errorMessage:r,status:M.ERROR})}))})),A(I(t),"exportTopdf",function(){var e=P(T().mark((function e(r){var n,o,a,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.formRef&&(r.data.options=JSON.stringify(t.formRef.getValue())),n=1e4,o=66,a=0;case 4:if(!(a<o)){e.next=24;break}return e.prev=5,e.next=8,t._requestExports(r);case 8:i=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),t.setState({errorMessage:e.t0.message,status:M.ERROR}),e.abrupt("return");case 15:if("success"!==i.state){e.next=19;break}return t.setState({exportResultUrl:i.url,status:M.SUCCESS}),b.b.download(i.url),e.abrupt("return");case 19:return e.next=21,Object(s.a)(n);case 21:a++,e.next=4;break;case 24:t.setState({errorMessage:__("处理超时..."),status:M.ERROR});case 25:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}()),A(I(t),"renderEntry",(function(){var e=window.appData.isYuque?"https://www.yuque.com/yuque/thyzgp/import-lake-to-lark#ebsrF":"https://yuque.antfin.com/lark/bsgp0v/import-lake-to-lark#ebsrF";return i.a.createElement("div",{className:"entry"},i.a.createElement("div",{className:_},__("导出知识库")),i.a.createElement("div",{className:w},__("知识库文档过多时，可能导致导出变慢或失败，可拆分知识库后重试。"),i.a.createElement("a",{href:e,target:"_blanck"},__("查看帮助文档")),__("。")),i.a.createElement(m.a,{mode:"export",types:t._formats,onSelect:t.handleExport}))})),t._exportParams=e.exportParams||{},t._formats=t.props.formats||p.a.BOOK_EXPORT_FORMATS,t.state={exportType:null,typeObj:null,status:M.INIT,errorMessage:"",exportResultUrl:""},t.settings={pdf:[{label:__("导出文档大纲到 PDF 中"),default:!0,name:"enableToc",value:1}]},t}return t=l,(r=[{key:"renderProcessing",value:function(){var e=this.state.typeObj;return e?i.a.createElement("div",{className:E},i.a.createElement("h1",{className:O},__("导出知识库为 {type}",{type:e.name})),i.a.createElement(d.a.Processing,{tip:__("正在导出中...")})):null}},{key:"renderSuccess",value:function(){var e=this.state.typeObj;return e?i.a.createElement("div",{className:E},i.a.createElement("h1",{className:O},__("导出知识库为 {type}",{type:e.name})),i.a.createElement(d.a.Success,{tip:__("文件生成成功"),action:i.a.createElement(v.a,{href:this.state.exportResultUrl,target:"_blank"},__("点击下载"))})):null}},{key:"renderSetting",value:function(){var e=this,t=this.state,r=t.typeObj,n=t.status;if(!r)return null;var a,c=this.settings[r.key];return c?(this._exportParams.toc_node_title&&(a="".concat(this.props.book.name," - ").concat(this._exportParams.toc_node_title)),i.a.createElement("div",{className:E,style:{display:n===M.SETTING?"block":"none"}},i.a.createElement("h1",{className:O},__("导出知识库为 {type}",{type:r.name})),i.a.createElement(d.a.AdvanceSetting,{wrappedComponentRef:function(t){e.formRef=t},title:a,target:this.props.book,type:r,settings:c,actions:i.a.createElement(o.a,{type:"primary","data-testid":"btn-export",className:k,onClick:function(){return e.doExport(e.state.exportType,a)}},__("导出"))}))):null}},{key:"renderError",value:function(){var e=this,t=this.state.typeObj;return t?i.a.createElement("div",{className:E},i.a.createElement("h1",{className:O},__("导出知识库为 {type}",{type:t.name})),i.a.createElement(d.a.Error,{tip:__("文件生成失败"),error:this.state.errorMessage,action:i.a.createElement(o.a,{icon:i.a.createElement(u.default,null),size:"small","data-testid":"btn-reload",onClick:function(){e.doExport(e.state.exportType)}},__("重新生成"))})):null}},{key:"render",value:function(){var e=this.state.status,t=null;return e===M.PROCESSING?t=this.renderProcessing():e===M.SUCCESS?t=this.renderSuccess():e===M.ERROR?t=this.renderError():e===M.INIT&&(t=this.renderEntry()),i.a.createElement(n.a,{visible:this.props.visible,title:null,footer:null,width:360,onCancel:this.props.onCancel,maskClosable:!1},i.a.createElement("div",{"data-testid":"book-export",className:g,onClick:function(e){e.stopPropagation()}},t,this.renderSetting()))}}])&&R(t.prototype,r),a&&R(t,a),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.a.Component);F.propTypes={book:l.a.object.isRequired,visible:l.a.bool.isRequired,onCancel:l.a.func.isRequired,formats:l.a.array,exportParams:l.a.object};t.a=Object(y.b)(F,!0)},2754:function(e,t,r){"use strict";var n=r(198);r.d(t,"a",(function(){return n.a})),r.d(t,"c",(function(){return n.c})),r.d(t,"b",(function(){return n.b}))},2755:function(e,t,r){"use strict";r(95);var n=r(49),o=(r(64),r(21)),a=(r(258),r(69)),i=(r(94),r(27)),c=r(0),l=r.n(c),u=r(8),s=r.n(u),f={content:"index-module_content_rh7s3",form:"index-module_form_q8geJ",tip:"index-module_tip_s8Xrp"};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,r)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(s,e);var t,r,c,u=y(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(h(e=u.call.apply(u,[this].concat(r))),"handleOnOk",(function(t){t.preventDefault();var r=e.props,n=r.form,o=r.slug,a=n.validateFields,i=n.setFields,c=n.resetFields;a((function(t,r){t||(r.slug===o?(c(),e.props.onOk(r)):i({slug:{value:r.slug,errors:[__("输入的路径名称错误, 请重新输入")]}}))}))})),v(h(e),"handleOnCancel",(function(){var t=e.props.form.resetFields;e.props.onCancel(),t()})),e}return t=s,(r=[{key:"render",value:function(){var e=this.props,t=e.visible,r=e.title,c=e.content,u=e.buttonText,s=e.slug,p=this.props.form,d=p.getFieldDecorator,m=p.getFieldError;return l.a.createElement(n.a,{title:r,footer:null,visible:t,onCancel:this.handleOnCancel,destroyOnClose:!0},c&&l.a.createElement("div",{className:f.content},c),l.a.createElement(a.a,{onSubmit:this.handleOnOk,className:f.form},l.a.createElement("div",{className:f.tip},__('请在下方输入框中输入 "{login}" 以确认操作',{login:l.a.createElement("span",{className:f.slug},s)})),l.a.createElement(a.a.Item,{hasFeedback:!0,validateStatus:m("slug")?"error":null,help:m("slug")?(m("slug")||[]).join(", "):""},d("slug",{initialValue:"",rules:[{type:"string",required:!0,message:__("请按提示输入")}]})(l.a.createElement(i.a,{type:"text",autoComplete:"off",maxLength:200,placeholder:s}))),l.a.createElement(a.a.Item,null,l.a.createElement(o.a,{"data-testid":"btn-submit",type:"danger",style:{width:"100%"},htmlType:"submit"},l.a.createElement("span",{style:{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},u||__("确定"))))))}}])&&d(t.prototype,r),c&&d(t,c),Object.defineProperty(t,"prototype",{writable:!1}),s}(c.PureComponent);_.propTypes={visible:s.a.bool.isRequired,title:s.a.node.isRequired,content:s.a.node,buttonText:s.a.node,slug:s.a.string.isRequired,onOk:s.a.func.isRequired,onCancel:s.a.func.isRequired};t.a=a.a.create()(_)}}]);