/*! For license information please see 360.f2d936ed.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[360],{110:function(e,t,r){"use strict";var n=r(135),o=r.n(n),a=r(115),i=r.n(a),c=r(123),l=r.n(c),u=r(124),s=r.n(u),d=r(131),f=r.n(d),p=r(139),m=r.n(p),h=r(140),y=r.n(h),b=r(141),v=r.n(b),g=r(329),_=r.n(g),j=o.a,w=o.a.normal,E=o.a.paid,k=[m.a,y.a,f.a,v.a],O=_()(k).concat([".pdf"]),S=_()(k.map((function(e){return e.paid}))).concat([".pdf"]),C=i.a,T=i.a.normal,A=i.a.paid,P=l.a,I=l.a.paid,L=s.a,D=s.a.paid;t.a={LOCAL_DOC_EXT:O,LOCAL_DOC_EXT_NORMAL:[],LOCAL_DOC_EXT_PAID:S,FILE_EXT:j,FILE_EXT_NORMAL:w,FILE_EXT_PAID:E,IMAGE_EXT:C,IMAGE_EXT_NORMAL:T,IMAGE_EXT_PAID:A,VIDEO_EXT:P,VIDEO_EXT_NORMAL:[],VIDEO_EXT_PAID:I,AUDIO_EXT:L,AUDIO_EXT_NORMAL:[],AUDIO_EXT_PAID:D}},138:function(e,t,r){"use strict";var n,o;r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o})),function(e){e.NOTE="NOTE",e.BOOK="BOOK",e.DOC="DOC",e.GROUP="GROUP"}(n||(n={})),function(e){e.PERSON="PERSON",e.ORG="ORG",e.INTERNAL="INTERNAL"}(o||(o={}))},144:function(e,t,r){"use strict";r(2490);var n=r(434),o=r(0),a=r.n(o),i=r(8),c=r.n(i),l=r(13),u=r.n(l),s=r(90),d=r.n(s);r(1707);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var p=["className","title"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function v(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var g=a.a.forwardRef((function(e,t){var r=e.className,o=e.title,i=v(e,p),c={},l=u()("larkui-skeleton",r);return o?(o.size&&(l=u()(l,{"larkui-skeleton-title-sm":"sm"===o.size})),o.width&&(c.title={width:o.width})):c.title=o,a.a.createElement(n.a,b({className:l,ref:t},c,i))}));g.propTypes=h(h({},n.a.SkeletonProps),{},{className:c.a.string}),d()(g,n.a),t.a=g},168:function(e,t,r){var n=r(46),o=r(87),a="Expected a function";e.exports=function(e,t,r){var i=!0,c=!0;if("function"!=typeof e)throw new TypeError(a);return o(r)&&(i="leading"in r?!!r.leading:i,c="trailing"in r?!!r.trailing:c),n(e,t,{leading:i,maxWait:t,trailing:c})}},1705:function(e,t,r){"use strict";r.d(t,"d",(function(){return d})),r.d(t,"b",(function(){return f})),r.d(t,"a",(function(){return p})),r.d(t,"c",(function(){return m}));var n=r(0),o=r.n(n),a=r(8),i=r.n(a),c=r(291),l=r(550);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function s(e){var t=window.appData.zone,r=window.__CUSTOM_LOGO__||(e?l.DASHBOARD_LOGOS:l.LOGOS),n=r.public;return window.appData.isYuque||(n=r.internal[0],t&&(n=r.internal[t.id]||n)),n}var d=function(e){var t=e.height,r=void 0===t?32:t,n=e.className,a=void 0===n?"":n,i=e.useNewLogo,l=s(void 0!==i&&i);return o.a.createElement(c.a,{src:l.full,darkSrc:l.darkFull,style:{height:r},alt:l.alt,className:a})};d.propTypes={height:i.a.number,className:i.a.string,useNewLogo:i.a.bool};var f=function(e){var t=e.height,r=void 0===t?32:t,n=e.className,a=void 0===n?"":n,i=e.useNewLogo,c=s(void 0!==i&&i);return o.a.createElement("img",{src:c.icon,alt:c.alt,width:r,height:r,className:a})};f.propTypes={height:i.a.number,className:i.a.string,useNewLogo:i.a.bool};var p=function(e){var t=e.height,r=void 0===t?32:t,n=e.className,a=void 0===n?"":n,i=e.useNewLogo,c=void 0!==i&&i,l=e.organization,u=void 0===l?window.appData.organization:l,d=u?u.logo:s(c).icon,f=u?"语雀空间":s(c).alt;return o.a.createElement("img",{src:d,alt:f,width:r,height:r,className:a})};p.propTypes={height:i.a.number,className:i.a.string,useNewLogo:i.a.bool,organization:i.a.object};var m=function(e){var t=s(e);return o.a.createElement(c.a,u({},e,{src:t.text,darkSrc:t.darkText,style:{marginLeft:"2px",height:32},alt:t.alt}))}},1706:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){switch(t.type){case"init":return{response:null,error:null,loading:!0};case"success":return{response:t.response,error:null,loading:!1};case"error":return{response:null,error:t.error,loading:!1};default:return{response:null,error:null,loading:!1}}}function c(e){var t=Object(n.useRef)(0),r=o(Object(n.useReducer)(i,{response:null,loading:!1,error:null}),2),a=r[0],c=r[1];return{data:a.response,loading:a.loading,request:function(r,n){var o=++t.current;return c({type:"init"}),e(r,n).then((function(e){return o===t.current&&c({type:"success",response:e}),e})).catch((function(e){if(c({type:"error",error:e}),null!=n&&n.ignoreGlobalMessage)throw e;console.error(e)}))},error:a.error}}},1730:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(100),o=r(1844),a=r(184);function i(e){if(e.symbol){var t=a.e.URL_TYPE_LIST,r=a.e.LEGACY_URL_TYPE_LIST,n=a.e.ICON_TYPE_LIST,o=a.e.LEGACY_ICON_TYPE_LIST,i=a.e.BOOK_ICON_TYPE_MAP;if(Object.keys(i).includes(e.symbol))return i[e.symbol];if("url"===e.type){if(r.includes(e.symbol))return t[r.findIndex((function(t){return t===e.symbol}))||0];if(t.includes(e.symbol))return e.symbol}else if("icon"===e.type){if(o.includes(e.symbol))return n[o.findIndex((function(t){return t===e.symbol}))||0];if(n.includes(e.symbol))return e.symbol}}}var c={book:function(e){var t=(e.type||"").toLowerCase();return a.a[t]||a.a.default},user:function(e){var t=e.scene||"";return e.avatar?null:a.g[t]||null},doc:function(e){return"Thread"===e.type?this.thread(e):a.c[e.type.toLowerCase()]||null},template:function(e){return"lakesheet"===e.format?c.doc({type:"Sheet"}):"lake"===e.format?c.doc({type:"Doc"}):"lakemind"===e.format?c.doc({type:"Mind"}):"lakeboard"===e.format?c.doc({type:"Board"}):"lakeshow"===e.format?c.doc({type:"Show"}):"laketable"===e.format?c.doc({type:"Table"}):void 0},thread:function(e){var t=e.sub_type||"";return e.view_status===n.VIEW_STATUS.archive?"thread-archive":a.f[t.toLowerCase()]||a.f.default},resource:function(e){return Object(o.getFileIcon)(e)},artboardGroup:function(){return a.c.artboardgroup},docVersion:function(e){return a.b[e.format]},recycle:function(e){var t=e.target_type,r=e.params;if(!t||!r)return null;if("User"===t)return c.user(r.group)||a.g.default;if("Note"===t)return a.c.note;if("Issue"===t)return a.c.issue;if("ArtboardGroup"===t)return a.c.artboardgroup;if("Artboard"===t)return a.c.artboard;var n=t.toLowerCase();return c[n]&&r[n]?c[n](r[n]):null},action:function(e){var t=e.target_type,r=e.action_option;if(e.target&&e.target.book_icon){var n=i(e.target.book_icon);if(n)return n}if("Doc"===t){var l=this._entityTypeOfAction(e);return l&&a.c[l]}if("Book"===t){if(e.target)return c.book(e.target);var u=this._entityTypeOfAction(e);return u&&a.c[u]}return"User"===t&&e.target?c.user(e.target):"Resource"===t?Object(o.getFileIcon)({type:"file",ext:r}):"ArtboardGroup"===t?a.c.artboardgroup:"DocVersion"===t&&e.target?c.docVersion(e.target):"ActionTag"===t?a.c.actiontag:null},_entityTypeOfAction:function(e){var t=e.action_option.split("_"),r=null;return t.length>=1&&(r=t[t.length-1]),r},userActionLog:function(e){var t=e.target_type,r=e.subject_type;if("Book"===t)return e.target?c.book(e.target):a.a.default;if("User"===t)return a.g.default;if("Resource"===t)return c.resource({type:"file",ext:e.fileExt});var n="";return"Design"===r?n=a.c.artboardgroup:"Sheet"===r?n=a.c.sheet:"Table"===r?n=a.c.table:"Doc"===r?n=a.c.doc:"Thread"===r?n=a.c.thread:"Mind"===r?n=a.c.mind:"Board"===r?n=a.c.board:"Show"===r&&(n=a.c.show),n}},l={getName:function(e,t){if(!e||!t)return null;if(e=e.charAt(0).toLowerCase()+e.slice(1),t.book_icon){var r=i(t.book_icon);if(r)return r}if("resource"===e){var n="file";return"folder"===t.type&&(n="folder"),c.resource({type:n,ext:t.ext,name:t.title||t.name})}return c[e]?c[e](t):null},getStyle:function(e){if(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).size,r=void 0===t?24:t;return{width:"".concat(r,"px"),height:"".concat(r,"px")}}},getSelectorIcons:function(){return a.e},getSymbolName:i,getColor:function(e){if(e&&e.color)return e.color}};t.b=l},1734:function(e,t,r){"use strict";r.d(t,"b",(function(){return v})),r.d(t,"a",(function(){return _}));r(113);var n=r(35),o=r(0),a=r.n(o),i=r(8),c=r.n(i),l=r(18),u=r(198),s=r(252),d=r(42),f=r(1730),p=r(190),m=["book","width"];function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}function y(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var b={book:__("文档"),sheet:__("表格"),design:__("图集"),column:__("专栏"),resource:__("资源")},v=function(e){var t,r=e.book,o=e.width,i=void 0===o?24:o,c=y(e,m),l=null===(t=r.type)||void 0===t?void 0:t.toLowerCase(),u=b[l];return a.a.createElement(n.a,{title:u},a.a.createElement(d.b,h({name:f.b.getName("Book",r),style:f.b.getStyle(r),className:"book-icon",width:i},c)))};v.propTypes={book:c.a.object.isRequired,width:c.a.number};var g=function(e){var t,r=e.size,o=void 0===r?14:r,i=e.placement,c=void 0===i?"top":i,s=e.showTooltip,f=void 0===s||s,m=e.group,h=e.book,y=e.organization,b=Object(u.d)({privacy:e.public,type:"book",organization:y,book:h,group:m});return a.a.createElement(n.a,{open:f,placement:c,getPopupContainer:e.getPopupContainer,title:a.a.createElement("span",null,b,(null===(t=h.abilities)||void 0===t?void 0:t.share)&&a.a.createElement("a",{onClick:function(e){e.stopPropagation(),p.b.windowOpen("/r/".concat(null==m?void 0:m.login,"/").concat(h.slug,"/collaborators"))},className:"toggle-publicity"},__("切换公开性")))},a.a.createElement("span",{className:"name-lock"},a.a.createElement(d.b,{name:e.public!==l.PRIVACY.private?"icon-public":(null==h||h.extend_private,l.EXTEND_PRIVATE.BIND_DEPARTMENTS,"permission-private"),width:o})))},_=function(e){return a.a.createElement(s.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.a.createElement("span",{"data-test-id":"book-access-scope"})}},a.a.createElement(g,e))};_.propTypes={public:c.a.number,group:c.a.object,book:c.a.object,getPopupContainer:c.a.func,size:c.a.number,placement:c.a.string,organization:c.a.object,showTooltip:c.a.bool}},1766:function(e,t,r){"use strict";function n(e){return new Promise((function(t,r){setTimeout(t,e)}))}r.d(t,"a",(function(){return n}))},1777:function(e,t,r){"use strict";var n=r(2678);r.d(t,"a",(function(){return n.a})),r.d(t,"b",(function(){return n.b})),r.d(t,"c",(function(){return n.c})),r.d(t,"d",(function(){return n.e})),r.d(t,"e",(function(){return n.f})),r.d(t,"f",(function(){return n.g})),r.d(t,"g",(function(){return n.h})),r.d(t,"h",(function(){return n.i})),r.d(t,"i",(function(){return n.j})),r.d(t,"j",(function(){return n.k})),r.d(t,"k",(function(){return n.l})),r.d(t,"l",(function(){return n.m})),r.d(t,"m",(function(){return n.n})),r.d(t,"n",(function(){return n.o})),r.d(t,"o",(function(){return n.p}))},1778:function(e,t,r){"use strict";r.d(t,"downloadCsvFile",(function(){return c})),r.d(t,"isValidResource",(function(){return l}));var n=r(2578),o=r(1844);r.o(o,"allowResourceEdit")&&r.d(t,"allowResourceEdit",(function(){return o.allowResourceEdit})),r.o(o,"getExtname")&&r.d(t,"getExtname",(function(){return o.getExtname})),r.o(o,"getFileBgColor")&&r.d(t,"getFileBgColor",(function(){return o.getFileBgColor})),r.o(o,"getFileIcon")&&r.d(t,"getFileIcon",(function(){return o.getFileIcon})),r.o(o,"getFilename")&&r.d(t,"getFilename",(function(){return o.getFilename})),r.o(o,"isAudio")&&r.d(t,"isAudio",(function(){return o.isAudio})),r.o(o,"isImage")&&r.d(t,"isImage",(function(){return o.isImage})),r.o(o,"isPpt")&&r.d(t,"isPpt",(function(){return o.isPpt})),r.o(o,"isSketch")&&r.d(t,"isSketch",(function(){return o.isSketch})),r.o(o,"isVideo")&&r.d(t,"isVideo",(function(){return o.isVideo}));var a=r(1844).getExtname,i=r(616).getFileAcceptArr;function c(e,t){var r=new Blob(["\ufeff"+e],{type:"text/csv;charset=utf-8;"});Object(n.b)(r,t)}function l(e){var t=a(e);return!!t&&i().includes(".".concat(t.toLowerCase()))}},1781:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function o(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(o=e[r],a=t[r],!(o===a||n(o)&&n(a)))return!1;var o,a;return!0}function a(e,t){void 0===t&&(t=o);var r=null;function n(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;var a=e.apply(this,n);return r={lastResult:a,lastArgs:n,lastThis:this},a}return n.clear=function(){r=null},n}},184:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"e",(function(){return i})),r.d(t,"d",(function(){return c})),r.d(t,"a",(function(){return l})),r.d(t,"g",(function(){return u})),r.d(t,"c",(function(){return s})),r.d(t,"f",(function(){return d})),r.d(t,"b",(function(){return f}));var i={URL_TYPE_LIST:["book-type-default","book-type-sheet","book-type-blog","book-icon-topic","group-type-project","book-type-manual","book-type-design","book-type-thread","group-type-interest","book-type-travel","group-type-default","book-type-reports","book-type-import","group-type-department","book-type-project","book-type-notes","book-type-resource","book-icon-yuque","book-icon-alibaba","book-icon-taobao","book-icon-alipay"],LEGACY_URL_TYPE_LIST:["books-url-wendangzhishiku","books-url-biaogezhishiku","books-url-boke","books-url-bokebeifen","books-url-bumen","books-url-chanpinshouce","books-url-huabanzhishiku","books-url-huati","books-url-lanqiubeifen","books-url-lvhanggonglve","books-url-morentuandui","books-url-tuanduizhoubao","books-url-wenjianjiabeifen","books-url-xiangmu","books-url-xiangmufangan","books-url-xuexibiji","books-url-ziyuanzhishiku","books-url-ali","books-url-taobao","books-url-zhifubao","books-url-yuque"],ICON_TYPE_LIST:["books-icon-default","books-icon-aixin","books-icon-baozhi","books-icon-biaoge","books-icon-biaoqian","books-icon-bikan","books-icon-boke","books-icon-chanpinwendang","books-icon-chucun","books-icon-dabiaowenjian","books-icon-dengpao","books-icon-duihua","books-icon-gerendangan","books-icon-huabao","books-icon-huati","books-icon-huati2","books-icon-hudun","books-icon-huojian","books-icon-huowu","books-icon-jiami","books-icon-jiangbei","books-icon-jihua","books-icon-lanqiu","books-icon-lingdang","books-icon-liucheng","books-icon-mubiao","books-icon-penzai","books-icon-qiqiu","books-icon-qunzu","books-icon-renwuliebiao","books-icon-rili","books-icon-suozhu","books-icon-tongxunlu","books-icon-tuandui","books-icon-wengao","books-icon-wenjiandai","books-icon-wenjiandai-2","books-icon-wenjianjia","books-icon-xiezuo","books-icon-xinfeng","books-icon-xingquxiaozu","books-icon-xuexibiji","books-icon-yingyuxuexi","books-icon-zhiding"],LEGACY_ICON_TYPE_LIST:["books-icon-wendang"],EMOJI_TYPE_LIST:[],BOOK_ICON_TYPE_MAP:{"books-icon-aixin":"group-type-interest","books-icon-baozhi":"book-type-blog","books-icon-biaoge":"book-type-sheet","books-icon-alibaba":"book-icon-alibaba","books-icon-bianzu":"book-icon-taobao","books-icon-bianzu-15":"book-icon-alipay","books-icon-biaoqian":"book-type-manual","books-icon-bikan":"group-type-project","books-icon-boke":"book-type-notes","books-icon-chanpinwendang":"book-type-project","books-icon-chucun":"book-type-resource","books-icon-dabiaowenjian":"book-type-travel","books-icon-default":"book-type-default","books-icon-dengpao":"group-type-project","books-icon-duihua":"book-icon-topic","books-icon-gerendangan":"book-type-manual","books-icon-huabao":"book-type-design","books-icon-huati":"group-type-department","books-icon-huati2":"book-type-thread","books-icon-hudun":"group-type-project","books-icon-huojian":"book-type-sheet","books-icon-huowu":"book-type-notes","books-icon-jiami":"book-type-import","books-icon-jiangbei":"group-type-project","books-icon-jihua":"book-type-reports","books-icon-lanqiu":"book-type-default","books-icon-lingdang":"group-type-department","books-icon-liucheng":"book-type-sheet","books-icon-mubiao":"group-type-project","books-icon-penzai":"book-type-default","books-icon-qiqiu":"book-type-default","books-icon-qunzu":"group-type-default","books-icon-renwuliebiao":"book-type-manual","books-icon-rili":"book-type-manual","books-icon-suozhu":"book-type-default","books-icon-tongxunlu":"group-type-interest","books-icon-tuandui":"group-type-default","books-icon-wendang":"book-type-default","books-icon-wengao":"book-type-blog","books-icon-wenjiandai":"book-type-project","books-icon-wenjiandai-2":"book-type-resource","books-icon-wenjianjia":"book-type-blog","books-icon-xiezuo":"book-type-blog","books-icon-xinfeng":"book-type-manual","books-icon-xingquxiaozu":"group-type-interest","books-icon-xuexibiji":"book-type-notes","books-icon-yingyuxuexi":"book-type-default","books-icon-yuque-logo":"book-icon-yuque","books-icon-zhiding":"book-type-default"}},c=["group-type-default","book-type-thread","book-type-blog","book-icon-topic","group-type-project","book-type-manual","book-type-design","book-type-sheet","group-type-interest","book-type-travel","book-type-default","book-type-reports","book-type-import","group-type-department","book-type-project","book-type-notes","book-type-resource","book-icon-yuque"],l={default:"book-type-default",book:"book-type-default",sheet:"book-type-sheet",design:"book-type-design",thread:"book-type-thread",resource:"book-type-resource",column:"book-type-blog",notes:"book-type-notes",blog:"book-type-blog",travel:"book-type-travel",project:"book-type-project",manual:"book-type-manual",reports:"book-type-reports",team_blog:"book-type-blog"},u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({default:"group-type-default",project:"group-type-project",department:"group-type-department",interest:"group-type-interest",commerce:"group-type-default",official_doc:"group-type-department"},Object.fromEntries(c.map((function(e){return[e,e]})))),s={doc:"doc-type-default",sheet:"doc-type-sheet",table:"doc-type-table",mind:"doc-type-mind",board:"doc-type-board",show:"file-ppt",thread:"book-type-thread",artboardgroup:"book-type-design",artboard:"book-type-design",note:"doc-type-note",actiontag:"book-type-resource",issue:"doc-type-task"},d={default:"book-type-thread",daily:"book-type-thread",weekly:"book-type-thread"},f={markdown:"doc-type-default",asl:"doc-type-default",lake:"doc-type-default",spreadjs:"doc-type-sheet",lakesheet:"doc-type-sheet",lakemind:"doc-type-mind",lakeboard:"doc-type-board",lakeshow:"file-ppt"}},1969:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(0),o=r.n(n),a=r(8),i=r.n(a),c=r(2018),l={link:"Link",text:"Text"},u=function(e){var t,r=e.user,n=void 0===r?{}:r,a=e.type,i=void 0===a?l.text:a,u=e.withCard,s=e.children,d=e.style,f=void 0===d?{}:d,p=e.className,m=void 0===p?"":p,h=e.target,y=n.name,b=n.login;switch(i){case l.link:t=o.a.createElement("a",{href:"/".concat(b),"data-testid":"login-a-tag",target:h,style:f,className:m},s||y);break;case l.text:default:t=s||y}return u?o.a.createElement(c.a,{user:n,style:f,className:m},t):t};u.propTypes={user:i.a.object.isRequired,withCard:i.a.bool,style:i.a.object,className:i.a.string,type:i.a.oneOf([l.link,l.text,l.card]),children:i.a.any,target:i.a.object},t.b=u},1979:function(e,t,r){"use strict";r(3148);var n=r(2498);r(2479);t.a=n.a},1986:function(e,t,r){"use strict";r(3160);var n=r(2506);r(2484);t.a=n.b},2018:function(e,t,r){"use strict";r(267);var n=r(127),o=r(0),a=r.n(o),i=r(8),c=r.n(i),l=r(38),u=r(242),s=(r(1707),r(144)),d=r(292),f=r(2441),p=r(2703),m=r(2704),h=r(42),y=r(342),b={userCard:"index-module_userCard_NOTbr",body:"index-module_body_20bgh",avatar:"index-module_avatar_OBHFJ",userInfos:"index-module_userInfos_B16Pa",nameContainer:"index-module_nameContainer_elI96",name:"index-module_name_QeZm4",dingtalk:"index-module_dingtalk_kYXBj",badge:"index-module_badge_lsJBP",dingding:"index-module_dingding_l7pi0",infoWithBg:"index-module_infoWithBg_JGcdP",signature:"index-module_signature_aQ+Wz",infoList:"index-module_infoList_Y58li",infoItem:"index-module_infoItem_same7",icon:"index-module_icon_MGwU8",footer:"index-module_footer_FNHCP",follow:"index-module_follow_1HgLb",footerItem:"index-module_footerItem_H0y7j",number:"index-module_number_NahUE",userLink:"index-module_userLink_i0XYI",skeleton:"index-module_skeleton_Z4M4v",infoDetail:"index-module_infoDetail_dKXCO"};function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _={mobile:"user-mobile",email:"user-email",departments:"user-department-opa",job_title:"user-job",location:"user-location"},j=function(e){var t=e.style,r=void 0===t?{}:t,n=e.className,i=void 0===n?"":n,c=e.user,u=void 0===c?{}:c,g=e.profile,j=void 0===g?{}:g,w=e.loading,E=e.isInGroup,k=e.userAvatar,O=u.avatar_url,S=u.avatar,C=u.description,T=u.followers_count,A=u.following_count,P=u.name,I=u.id,L=window.appData,D=L.isYuque,N=L.isPublicCloud,x=L.organization,R=v(Object(o.useState)(),2),M=R[0],B=R[1],F=v(Object(o.useState)(null),2),U=F[0],G=F[1],V=v(Object(o.useState)(null),2),z=V[0],W=V[1],H=j.dingtalk_id,Y=j.orgName,q=j.role,K=j.status,X=j.isPublicUser,Q=K===d.organizationUser.STATUS.terminated,J=q===d.organizationUser.ROLE.outsourcer,$=x&&X,Z=x&&(null==x?void 0:x.id);Object(o.useEffect)((function(){G("following_count"in j?j.following_count||0:A||0),W("followers_count"in j?j.followers_count||0:T||0)}),[j]);var ee=function(){M||l.a.users.mobile({id:I}).then(B)},te=function(e){return e.map((function(e){return{key:e,icon:_[e],value:j[e]}})).filter((function(e){return!!e.value}))},re=[];re=te(D?x?["mobile","email","departments","job_title"]:["location","job_title"]:["departments","job_title"]);var ne=null;$?ne=a.a.createElement("div",{className:b.infoWithBg},__("非本空间成员")):Q?ne=a.a.createElement("div",{className:b.infoWithBg},N?__("已离职"):__("已退隐江湖")):J&&(ne=a.a.createElement("div",{className:b.infoWithBg},__("外部联系人")));var oe,ae=!x&&(!Q&&!J&&!$&&j.enable_home);if(Z){var ie={avatar:(oe=j).avatar||O,name:oe.orgName,description:oe.description,departments:null==oe?void 0:oe.departments,job_title:oe.job_title,location:oe.location};return a.a.createElement(m.b,{orgUser:ie,user:u,organization:x})}return a.a.createElement("div",{className:"".concat(i," ").concat(b.userCard),style:r,"data-aspm":"c39373"},a.a.createElement("div",{className:b.body},Z?a.a.createElement(y.a,{src:k||O||S,size:48,className:b.avatar,bordered:!0}):a.a.createElement("a",{href:"/".concat(u.login),target:"_blank"},a.a.createElement(y.a,{src:k||O||S,size:48,className:b.avatar,bordered:!0})),a.a.createElement("div",{className:b.userInfos},a.a.createElement("div",{className:b.nameContainer},Z?a.a.createElement("span",{className:b.name},Y||P):a.a.createElement("a",{href:"/".concat(u.login),target:"_blank",className:b.name},Y||P),H&&a.a.createElement("a",{href:"dingtalk://dingtalkclient/action/sendmsg?dingtalk_id=".concat(H),className:b.dingtalk,"data-testid":"dingtalk","data-aspm-click":"d001"},a.a.createElement(h.b,{name:"dingding-filled",className:b.dingding})),a.a.createElement(f.a,{user:u,useMobile:!0,className:b.badge}),ne),a.a.createElement("div",{className:b.signature},C||""),w&&a.a.createElement("div",{className:b.skeleton},a.a.createElement(s.a,{active:!0,title:!1})),re&&re.length>0?a.a.createElement("div",{className:b.infoList,style:{marginTop:E?0:10}},re.map((function(e){return function(e){return"departments"===e.key?e.value.map((function(t,r){return a.a.createElement("div",{className:b.infoItem,key:e.key+r,"data-testid":e.key},a.a.createElement(h.b,{name:e.icon,width:16,className:b.icon}),a.a.createElement("span",{className:b.infoDetail},t))})):a.a.createElement("div",{className:b.infoItem,key:e.key,"data-testid":e.key},a.a.createElement(h.b,{name:e.icon,width:16,className:b.icon}),"mobile"===e.key?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:b.infoDetail},M||e.value),!M&&a.a.createElement("a",{onClick:ee},__("查看"))):a.a.createElement("span",{className:b.infoDetail},e.value))}(e)}))):null)),!!ae&&a.a.createElement("div",{className:b.footer},a.a.createElement("div",{className:b.follow},a.a.createElement("div",{className:b.footerItem},__("粉丝"),a.a.createElement("span",{className:b.number},z)),a.a.createElement("div",{className:b.footerItem},__("关注"),a.a.createElement("span",{className:b.number},U))),a.a.createElement(p.a,{user:u,className:b.followBtn})))};j.propTypes={user:c.a.object.isRequired,profile:c.a.object,style:c.a.object,className:c.a.string,loading:c.a.bool,isInGroup:c.a.bool};var w=j,E=r(165),k="index-module_popover_Xyidp",O="index-module_overlay_A0ouW";function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T=function(e){var t=e.user,r=void 0===t?{}:t,i=e.children,c=e.style,s=void 0===c?{}:c,d=e.className,f=void 0===d?"":d,p=e.isInGroup,m=e.userAvatar,h=void 0===m?"":m,y=r&&r.id,b=S(Object(o.useState)("topLeft"),2),v=b[0],g=b[1],_=Object(o.useRef)(null),j=Object(u.a)(l.a.users.profile),C=j.data,T=j.loading,A=j.request;if(null==y||E.a.isGroupOrPublication(r))return i;return window.h5?i:a.a.createElement(n.a,{placement:v,content:a.a.createElement(w,{isInGroup:p,user:r,profile:C||{},loading:T,userAvatar:h}),style:s,className:"".concat(f," ").concat(k),overlayClassName:O,mouseEnterDelay:.3},a.a.createElement("span",{onMouseOver:function(){var e=_&&_.current.getBoundingClientRect().top;g(e<240?"bottomLeft":"topLeft"),C||T||A({id:y})},ref:_,"data-testid":"content",style:{cursor:"pointer"}},i))};T.propTypes={user:c.a.object.isRequired,style:c.a.object,className:c.a.string,children:c.a.any,isInGroup:c.a.bool};t.a=T},208:function(e,t,r){"use strict";r(2480);var n=r(1712);r(581);t.a=n.a},214:function(e,t,r){"use strict";r(2489);var n=r(347);r(645);t.a=n.a},242:function(e,t,r){"use strict";var n=r(1706);r.d(t,"a",(function(){return n.a}))},2445:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"d",(function(){return l})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return s}));r(30),r(430);var n=r(138),o=r(190);var a=r(198),i=r(18);function c(e,t,r,n){var a=o.b.getHost(),i="";switch(t){case"BOOK":i="".concat(a,"/").concat(r.login,"/").concat(e.slug);break;case"DOC":i="".concat(a,"/").concat(r.login,"/").concat(n.slug,"/").concat(e.slug);break;case"NOTE":i="".concat(a,"/r/notes/share/").concat(e.slug)}var c="",l="";if("NOTE"!==t){"Sheet"===e.type&&(c=window.location.hash.slice(1));var u=e.title||e.name;u&&(l+="《".concat(u,"》"));var d=s(e,t,r,n).currentPassword;d&&(l+=" ".concat(__("密码：")).concat(d))}return{url:i,urlWithDesc:i+(c||l?"?".concat("DOC"===t?"singleDoc":"","#").concat(c||""," ").concat(l||""):"")}}var l=function(e,t,r,o,c){var l=null==t?void 0:t.public;switch(r){case"BOOK":l=Object(a.c)({type:"book",target:t,group:o});break;case"DOC":l=Object(a.c)({type:"doc",target:t,group:o,book:c})}var u=l;if(3===l)switch(e){case n.a.ORG:u=2;break;case n.a.PERSON:case n.a.INTERNAL:u=1}return{privacy:u,isShareActive:u!==i.PRIVACY.private}},u=function(e,t,r,n){var o=e.indexed_level,c=!1;"DOC"===t&&(Object(a.c)({type:"book",target:n,group:r})!==i.PRIVACY.private&&1===(null==n?void 0:n.indexed_level)&&(o=null==n?void 0:n.indexed_level,c=!0));return{currentIndexedLevel:o,isInheritBookIndex:c}},s=function(e,t,r,n){var o=e.password,c=!1;"DOC"===t&&(Object(a.c)({type:"book",target:n,group:r})!==i.PRIVACY.private&&null!=n&&n.password&&(o=null==n?void 0:n.password,c=!0));return{currentPassword:o,isInheritBookPassword:c}}},2578:function(e,t,r){"use strict";function n(e,t){var r=document.createElement("a");r.setAttribute("href",URL.createObjectURL(e)),r.setAttribute("download",t),document.body.appendChild(r),r.click(),document.body.removeChild(r)}function o(e,t){var r=e.toDataURL("image/png"),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download","".concat(t,".png")),document.body.appendChild(n),n.click(),document.body.removeChild(n)}r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o}))},2580:function(e,t,r){e.exports=r(84)},2582:function(e,t,r){"use strict";r(113);var n=r(35),o=r(0),a=r.n(o),i=["textRef","visible","onVisibleChange"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}t.a=function(e){var t=e.textRef,r=(e.visible,e.onVisibleChange),u=s(e,i),d=l(Object(o.useState)(!1),2),f=d[0],p=d[1];return a.a.createElement(n.a,c({},u,{visible:f,onVisibleChange:function(e){var n=e;null!=t&&t.current&&n&&(n=void 0!==t.current.offsetWidth&&void 0!==t.current.scrollWidth&&t.current.offsetWidth<t.current.scrollWidth),p(n),r&&r(n)}}))}},2678:function(e,t,r){"use strict";r.d(t,"a",(function(){return z})),r.d(t,"i",(function(){return W})),r.d(t,"e",(function(){return H})),r.d(t,"p",(function(){return q})),r.d(t,"c",(function(){return K})),r.d(t,"n",(function(){return X})),r.d(t,"o",(function(){return Q})),r.d(t,"l",(function(){return J})),r.d(t,"h",(function(){return Z})),r.d(t,"j",(function(){return ee})),r.d(t,"b",(function(){return re})),r.d(t,"m",(function(){return ne})),r.d(t,"k",(function(){return ae})),r.d(t,"f",(function(){return ie})),r.d(t,"g",(function(){return ce})),r.d(t,"d",(function(){return le})),r.d(t,"q",(function(){return ue}));r(640);var n=r(327),o=(r(197),r(36)),a=(r(2706),r(2708)),i=(r(267),r(127)),c=(r(581),r(208)),l=(r(113),r(35)),u=r(0),s=r.n(u),d=r(8),f=r.n(d),p=r(13),m=r.n(p),h=r(593),y=r(100),b=r(18),v=r(1703),g=r(1969),_=g.b,j=r(42),w=r(2438),E={wrap:"index-module_wrap_iKZPE",close:"index-module_close_mZbMN",icon:"index-module_icon_gxtpV",closeIcon:"index-module_closeIcon_kM1zW"};function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t=e.icon,r=e.content,n=e.style,o=e.showClose,a=k(Object(u.useState)(!0),2),i=a[0],c=a[1];return i?s.a.createElement("div",{className:E.wrap,style:n},t&&s.a.createElement("div",{className:E.icon},t),s.a.createElement("div",{className:E.content},r),o&&s.a.createElement("div",{className:E.close,onClick:function(){c(!1)}},s.a.createElement("span",{className:m()("lake-icon","lake-icon-close",E.closeIcon)}))):null};S.propTypes={icon:f.a.node,content:f.a.node.isRequired,style:f.a.object,showClose:f.a.bool};var C=S,T=r(198),A=r(252),P=r(2445),I=r(1845),L=r(295),D=r(1730),N={articleTitle:"index-module_articleTitle_VJTLJ",popover:"index-module_popover_nfMC3",belongMenu:"index-module_belongMenu_2QmLB",belongText:"index-module_belongText_TkCAl",belongMenuOverlay:"index-module_belongMenuOverlay_ua9Uh",belongMenuLabel:"index-module_belongMenuLabel_Eor0q",privacy:"index-module_privacy_QkaFB"};function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function R(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){if(e){if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){V(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==x(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===x(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z={},W=function(e){var t=e.className,r=e.type,n=void 0===r?"doc":r,o=e.width,a=void 0===o?20:o;return s.a.createElement(j.b,{className:"doc-icon ".concat(t),name:D.b.getName("Doc",{type:n}),width:a})};z.getTypeText=function(e){var t=e;return"Doc"===e?t=__("文档#lower_case"):"Sheet"===e?t=__("表格#lower_case"):"Table"===e?t=__("数据表#lower_case"):"Board"===e&&(t=__("画板#lower_case")),t},z.getTypeTextOfBook=function(e){var t=e;return"Book"===e?t=__("文档"):"Sheet"===e&&(t=__("表格")),t},z.getFormalTitle=function(e){return e.title},z.getDefaultTitle=L.a.getDefaultTitle;var H=function(e){var t=e.doc,r=e.showType,n=e.showAuthor,o=void 0===n||n,a=L.a.getDocShowAuthorOption(t);return o&&a!==y.SHOW_AUTHOR_OPTION.hide?"sheet"===r?s.a.createElement("div",{"data-testid":"doc-contributors-wrapper-sheet"},s.a.createElement("span",{className:"larkicon larkicon-user"}),s.a.createElement("span",{className:N.label},__("参与编辑：")," "),s.a.createElement(Y,{doc:t,showAuthor:!0})):"doc"===r?s.a.createElement("div",{"data-testid":"doc-contributors-wrapper-doc",className:"meta-item"},s.a.createElement(l.a,{title:__("参与编辑")},s.a.createElement("span",{className:"author larkicon larkicon-user"})),s.a.createElement(Y,{doc:t,showAuthor:o})):s.a.createElement(Y,{doc:t,showAuthor:o}):null};H.propTypes={doc:f.a.object.isRequired,showAuthor:f.a.bool.isRequired,showType:f.a.oneOf(["sheet","doc"])};var Y=function(e){var t=e.doc,r=L.a.getDocShowAuthorOption(t);if(r===y.SHOW_AUTHOR_OPTION.hide)return null;if(r===y.SHOW_AUTHOR_OPTION.custom_text){var n=L.a.getDocShowAuthorCustomText(t);return n?s.a.createElement("span",{"data-testid":"doc-contributors-custom-text"},n):null}var o=L.a.getDocContributors(t);if(!o||0===o.length)return null;var a=o.slice(0,3);return s.a.createElement("span",{"data-testid":"doc-contributors",className:"doc-contributors"},a.map((function(e,t){return e&&s.a.createElement("span",{key:e.id},s.a.createElement(_,{user:e,type:g.a.link,withCard:!0,className:N.popover}),t!==a.length-1&&__("、"))})),o.length>3&&s.a.createElement("span",null,__("等")))};Y.propTypes={doc:f.a.object.isRequired};var q=function(e){var t=e.doc,r=e.hasDraftSign,n=z.getFormalTitle(t);return r&&0===t.status?s.a.createElement("span",{className:"doc-title",title:n},s.a.createElement("span",{className:"doc-title-draft"},"[",__("草稿"),"]"),n):s.a.createElement("span",{className:"doc-title",title:n},n)};q.propTypes={hasDraftSign:f.a.bool,doc:f.a.object};var K=function(e){var t=e.title;return s.a.createElement("h1",{id:"article-title",className:m()(N.articleTitle,"doc-article-title")},t)},X=function(e){return"YUQUE_TEMPLATE"===e.tag?s.a.createElement(c.a,{className:"doc-template-tag"},__("模板")):null},Q=function(e){var t=e.doc;return t.content_updated_at&&t.content_updated_at!==t.created_at?s.a.createElement("span",{className:"doc-time"},__("更改于"),s.a.createElement(v.a,{time:new Date(t.content_updated_at)})):s.a.createElement("span",{className:"doc-time"},__("创建于"),s.a.createElement(v.a,{time:new Date(t.created_at)}))},J=function(e){var t=e.doc,r=t[e.showBy]||t.content_updated_at;return s.a.createElement("span",{className:"doc-time"},s.a.createElement(v.a,{time:new Date(r)}))},$=function(){return s.a.createElement("div",{className:"doc-draft-tip-content"},s.a.createElement("p",null,__("有内容未更新，请去编辑页更新")))},Z=function(e){var t=e.doc,r=e.className;return t.content_modified?"Sheet"===t.type||"Table"===t.type?s.a.createElement("div",{className:r,title:__("当前展示不是最新版本，可点击编辑按钮查看最新内容，并进行发布或更新")},s.a.createElement(j.b,{name:"doc-has-new-content",height:18,width:18}),s.a.createElement("p",null,__("当前展示不是最新版本，可点击编辑按钮查看最新内容，并进行发布或更新"))):s.a.createElement(C,{style:{marginBottom:"Doc"===t.type?24:0},icon:s.a.createElement(j.b,{name:"edit-border",height:18,width:18}),content:s.a.createElement($,{doc:t}),showClose:"Doc"===t.type}):null};Z.propTypes={doc:f.a.object.isRequired,className:f.a.string};f.a.object.isRequired;var ee=function(e){var t=e.doc,r=e.url,n=e.target,o=window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp||window.appData.isYuqueMobileApp?"_blank":"_self";return s.a.createElement("a",{href:r,target:n||o,className:"doc-link",onClick:function(){I.a&&Object(I.c)(r)}},s.a.createElement(q,{doc:t}))};ee.propTypes={doc:f.a.object,url:f.a.string,target:f.a.string};var te=function(e){var t=e.organization,r=e.doc,n=e.book,o=e.group,a=e.getPopupContainer,i=e.placement,c=void 0===i?"top":i,u=e.onlyIcon;if(window.appData.sharePage)return null;if(null==r||!r.id)return null;if(n){var d=Object(T.c)({type:"doc",target:r,group:o,book:n}),f=function(){return d!==b.PRIVACY.private?"icon-public":(null==n||n.extend_private,b.EXTEND_PRIVATE.BIND_DEPARTMENTS,"permission-private")};return u?s.a.createElement(l.a,{title:Object(T.d)({privacy:d,type:"doc",organization:t,group:o,book:n}),getPopupContainer:a,placement:c},s.a.createElement(j.b,{name:f(),width:14,height:14})):s.a.createElement(l.a,{title:Object(T.d)({privacy:d,type:"doc",organization:t,group:o,book:n}),getPopupContainer:a,placement:c},s.a.createElement("span",{className:"doc-access-scope"},s.a.createElement(j.b,{name:f(),width:14,height:14})))}return null},re=function(e){return s.a.createElement(A.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return s.a.createElement("span",{"data-test-id":"doc-access-scope"})}},s.a.createElement(te,e))};re.propTypes={group:f.a.object.isRequired,book:f.a.object.isRequired,doc:f.a.object.isRequired,organization:f.a.object,getPopupContainer:f.a.func,placement:f.a.string,onlyIcon:f.a.bool};var ne=function(e){var t=e.doc,r=e.withTip,n=void 0===r||r;if(0!==t.status)return null;var o=s.a.createElement("div",{className:"doc-draft-tip",style:{width:"360px"}},s.a.createElement($,{doc:t})),a=s.a.createElement(c.a,{className:"doc-draft-tag","data-testid":"doc-draft-tag",onClick:function(e){e.stopPropagation(),e.preventDefault()}},t.published_at?__("未更新"):__("未发布"));return n?s.a.createElement(i.a,{placement:"bottomLeft",content:o},a):a};ne.displayName="LarkDocStatus";var oe=function(e){var t=e.doc,r=e.group,n=e.book;if(t.public!==b.PRIVACY.private){var o=Object(P.a)(t,"DOC",r,n);return s.a.createElement(c.a,{className:"doc-share-tag"},s.a.createElement("a",{href:o.url,target:"_blank"},__("分享中")))}return null},ae=function(e){return s.a.createElement(A.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return s.a.createElement("span",{"data-test-id":"doc-ShareLink-tag"})}},s.a.createElement(oe,e))};ae.propTypes={group:f.a.object.isRequired,book:f.a.object.isRequired,doc:f.a.object.isRequired},ae.displayName="LarkShareLink";var ie=function(e){var t=e.doc,r=e.size,n=void 0===r?{}:r,o=e.placeholder,a=t.cover||o;return a?s.a.createElement("div",{style:{width:"100%",height:"100%",backgroundSize:"cover",backgroundPosition:"center",backgroundImage:'url("'.concat(Object(w.a)(a,G({},n)),'")')}}):s.a.createElement(j.b,{name:t.type.toLowerCase(),width:48})},ce=function(e){var t=e.doc,r=e.highlightUsers;if(L.a.getDocShowAuthorOption(t)===y.SHOW_AUTHOR_OPTION.hide)return s.a.createElement("span",{className:"info-not-show-creator"},__("不显示作者"));var n=L.a.getDocContributors(t);return n?(Array.isArray(n)||(n=[n]),s.a.createElement(l.a,{title:function(){return n.map((function(e){return e.name})).join("、")}},s.a.createElement("span",null,n.reduce((function(e,t,n){return null!=r&&r.includes(String(t.id))?(e.unshift.apply(e,[s.a.createElement("a",{href:"/".concat(t.login)},s.a.createElement("b",null,t.name)),"、"]),e):(e.push.apply(e,[s.a.createElement("a",{href:"/".concat(t.login)},t.name),"、"]),e)}),[]).slice(0,-1)))):null},le=function(e){var t=e.belongs,r=e.onChange,n=e.overlayClassName,o=e.overlayPlacement;function i(e){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=B(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.text||(n.text=n.label,n.label=s.a.createElement("span",{className:N.belongMenuLabel},s.a.createElement(h.default,null),s.a.createElement("span",null,n.label)),n.children&&n.children.length&&i(n.children))}}catch(e){r.e(e)}finally{r.f()}return e}var c=M(s.a.useState(""),2),l=c[0],u=c[1],d=M(s.a.useState(R(t)),2),f=d[0],p=d[1];s.a.useEffect((function(){p(i(R(t)))}),[t]);return!f||f.length<=1?s.a.createElement("span",{className:N.belongText},l||__("归属")):s.a.createElement(a.a,{defaultValue:[null],popupClassName:m()(N.belongMenuOverlay,n),popupPlacement:o||"bottomLeft",options:f,onChange:function(e,t){r(e),e&&e[0]?u(t.map((function(e){return e.text})).join(" / ")):u("")},changeOnSelect:!0},s.a.createElement("span",{className:N.belongMenu},s.a.createElement("span",{className:N.belongText},l||__("归属")),s.a.createElement(j.b,{name:"arrow-down",width:16})))};le.propTypes={belongs:f.a.array.isRequired,onChange:f.a.func.isRequired,overlayClassName:f.a.string,overlayPlacement:f.a.string};var ue=function(e){var t=e.current,r=e.onChange,a=e.overlayClassName,i=e.overlayPlacement,c=[{name:__("所有"),value:""},{name:__("文档"),value:"Doc"},{name:__("表格"),value:"Sheet"},{name:__("画板"),value:"Board"},{name:__("数据表"),value:"Table"}];t||(t="");var l=c.find((function(e){return e.value===t}));return s.a.createElement(n.a,{trigger:"click",placement:i||"bottomLeft",overlay:s.a.createElement(o.a,null,c.map((function(e){return s.a.createElement(o.a.Item,{key:e.value,onClick:function(){r(e.value)}},t===e.value&&s.a.createElement(h.default,null),e.name)}))),overlayClassName:a},s.a.createElement("span",null,l.value?l.name:__("类型")," ",s.a.createElement(j.b,{name:"arrow-down",width:16})))};ue.propTypes={current:f.a.string.isRequired,onChange:f.a.func.isRequired,overlayClassName:f.a.string,overlayPlacement:f.a.string}},2690:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(n=r(2854))&&n.__esModule?n:{default:n};t.default=o,e.exports=o},2691:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(n=r(2856))&&n.__esModule?n:{default:n};t.default=o,e.exports=o},2692:function(e,t,r){"use strict";var n=r(385);t.a=function(){return Object(n.getInterest)()}},2702:function(e,t,r){"use strict";var n={number:function(e){return"number"!=typeof(e=Number(e))||e<1e3?e:"".concat((e/1e3).toFixed(1),"K")},maxNumber:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999;return"number"!=typeof e||e<=t?e:"".concat(t,"+")}};t.a=n},2703:function(e,t,r){"use strict";r(64);var n=r(21),o=(r(61),r(23)),a=r(0),i=r.n(a),c=r(8),l=r.n(c),u=r(38),s=r(586),d=r(2702),f="index-module_count_pDHQn";function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(){m=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),c=new C(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d={};function f(){}function h(){}function y(){}var b={};l(b,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==t&&r.call(g,a)&&(b=g);var _=y.prototype=f.prototype=Object.create(b);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==p(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return A()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=k(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return h.prototype=y,n(_,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:h,configurable:!0}),h.displayName=l(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},j(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function h(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t=y(Object(a.useState)(!1),2),r=t[0],c=t[1],l=y(Object(a.useState)(!1),2),p=l[0],b=l[1],v=e.me,g=e.user,_=e.onStatusChange,j=e.isPrimary,w=e.size,E=e.showCount,k=g.meta&&g.meta.is_followed,O=y(Object(a.useState)(null==g?void 0:g.followers_count),1)[0],S=function(){var e,t=(e=m().mark((function e(t){var r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,u.a.actions.findOne({target_type:"User",target_id:t,action_type:"follow"},{ignoreGlobalMessage:!0});case 3:return r=e.sent,b(!1),e.abrupt("return",Boolean(r.actioned));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){h(a,n,o,i,c,"next",e)}function c(e){h(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();if(Object(a.useEffect)((function(){void 0===e.isFollowing?S(g.id).then(c):c(e.isFollowing)}),[e.isFollowing,g.id]),v.id===g.id)return null;var C=__("关注");return r&&(C=k?__("互相关注"):__("已关注")),i.a.createElement(n.a,{className:"btn-follow",type:!r&&j?"primary":"",disabled:p,onClick:function(){var e=r?"destroy":"create";b(!0),Object(s.a)("c62147",{action:e}),u.a.actions[e]({target_type:"User",target_id:g.id,action_type:"follow"}).then((function(){b(!1),o.a.success(r?__("已取消关注"):__("关注成功")),c(!r),_&&_(g.id,!r)})).catch((function(e){b(!1)}))},size:window.h5||"small"===w?"small":"default",style:e.style},i.a.createElement("span",null,C),E&&O>0&&i.a.createElement("span",{className:f},d.a.number(O)))};v.defaultProps={me:window.appData.me,showCount:!1},v.propTypes={me:l.a.object,size:l.a.string,user:l.a.object,onStatusChange:l.a.func,isFollowing:l.a.bool,showCount:l.a.bool};t.a=v},2704:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return h}));var n=r(0),o=r.n(n),a=r(13),i=r.n(a),c=r(62),l=r(273),u=r(342),s=r(42),d={departmentInfo:"OrgUserInfo-module_departmentInfo_3udmp",cardHeader:"OrgUserInfo-module_cardHeader_502Md",details:"OrgUserInfo-module_details_hR4Nc",job:"OrgUserInfo-module_job_erqLq",location:"OrgUserInfo-module_location_9-cQz",icon:"OrgUserInfo-module_icon_okrek",fullWidth:"OrgUserInfo-module_fullWidth_zv0Qo",department:"OrgUserInfo-module_department_MJvg6",departmentName:"OrgUserInfo-module_departmentName_fuR97",h5:"OrgUserInfo-module_h5_M+nrk",divider:"OrgUserInfo-module_divider_igZMz",orgUserInfoCard:"OrgUserInfo-module_orgUserInfoCard_7n-Or",headerInfo:"OrgUserInfo-module_headerInfo_5B731",avatar:"OrgUserInfo-module_avatar_iMqQ+",wrapper:"OrgUserInfo-module_wrapper_cpsZr",name:"OrgUserInfo-module_name_9rYrf",description:"OrgUserInfo-module_description_4Q94H"};function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){var t,r=e.organization,n=e.orgUser,a=e.className,c=window.h5,u=null==n?void 0:n.job_title,f=null==n?void 0:n.location;return o.a.createElement("div",{className:i()(d.departmentInfo,a)},null==n||null===(t=n.departments)||void 0===t?void 0:t.map((function(e,t){return o.a.createElement("div",{className:d.department,key:t},o.a.createElement(l.g,{className:d.orgAvatar,organization:r,size:20}),o.a.createElement(l.c,{organization:r,department:e,className:i()(d.departmentName,p({},d.h5,c))}))})),o.a.createElement("div",{className:d.divider}),o.a.createElement("div",{className:d.details},o.a.createElement("div",{className:i()(d.job,p({},d.fullWidth,!c))},o.a.createElement(s.b,{name:"user-job",className:d.icon,size:16}),o.a.createElement("span",null,u||__("暂无职位信息"))),o.a.createElement("div",{className:i()(d.location,p({},d.fullWidth,!c))},o.a.createElement(s.b,{name:"user-location",className:d.icon,size:16}),o.a.createElement("span",null,f||__("暂无地址信息")))))},h=function(e){var t=e.orgUser,r=e.user,n=e.className,a=null==t?void 0:t.departments,l=null==t?void 0:t.job_title,f=null==t?void 0:t.location,p=(null==a?void 0:a.length)||l||f;return o.a.createElement("div",{className:i()(d.orgUserInfoCard,n)},o.a.createElement("div",{className:d.headerInfo},o.a.createElement(c.Link,{to:"/".concat(null==r?void 0:r.login),target:"_blank"},o.a.createElement(u.a,{size:44,src:null==t?void 0:t.avatar,className:d.avatar})),o.a.createElement("div",{className:d.wrapper},o.a.createElement(c.Link,{to:"/".concat(null==r?void 0:r.login),target:"_blank"},o.a.createElement("div",{className:d.name},null==t?void 0:t.name)),(null==t?void 0:t.description)&&o.a.createElement("div",{className:d.description},null==t?void 0:t.description))),p&&o.a.createElement("div",{className:d.details},o.a.createElement("div",{className:d.divider}),(null==a?void 0:a.length)&&(null==a?void 0:a.map((function(e,t){return o.a.createElement("div",{className:d.department,key:t},o.a.createElement(s.b,{name:"line-framework",className:d.icon,size:16}),o.a.createElement("span",{title:e,className:n},e))}))),l&&o.a.createElement("div",{className:d.job},o.a.createElement(s.b,{name:"user-job",className:d.icon,size:16}),o.a.createElement("span",null,l)),f&&o.a.createElement("div",{className:d.location},o.a.createElement(s.b,{name:"user-location",className:d.icon,size:16}),o.a.createElement("span",null,f))))}},2708:function(e,t,r){"use strict";r(3144);var n=r(2493);r(2706);t.a=n.a},2747:function(e,t,r){"use strict";r(267);var n=r(127),o=r(0),a=r.n(o),i=r(8),c=r.n(i),l=r(42),u={more:"index-module_more_sDgGm"},s=["data-testid","visible","onVisibleChange","getPopupContainer","isHover","iconName","placement"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function f(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=24,m=function(e){return e.parentNode};function h(e){var t=e["data-testid"],r=void 0===t?"more-actions":t,o=e.visible,i=e.onVisibleChange,c=e.getPopupContainer,h=void 0===c?m:c,y=e.isHover,b=e.iconName,v=e.placement,g=f(e,s),_={horizontal:"more-horizontal",vertical:"more-vertical",circle:"more-circle"},j={};void 0!==o&&(j.visible=e.visible),void 0!==i&&(j.onVisibleChange=e.onVisibleChange);var w=e.iconWidth||16,E={lineHeight:"".concat(w,"px"),padding:(p-w)/2},k=["click"];return y&&(k[0]="hover"),a.a.createElement(n.a,d({className:e.className,overlayClassName:e.overlayClassName,type:"menu",getPopupContainer:h,placement:v||"bottomRight",arrowPointAtCenter:!0,destroyTooltipOnHide:e.destroyTooltipOnHide,trigger:k,content:e.content,hideWhenInactive:!0},j,g),a.a.createElement("span",{className:u.more,style:E,"data-testid":r},a.a.createElement(l.b,{name:b||_[e.direction]||_.horizontal,width:w})))}h.defaultProps={direction:"horizontal"},h.propTypes={className:c.a.string,overlayClassName:c.a.string,direction:c.a.oneOf(["horizontal","vertical","circle"]),iconWidth:c.a.number,visible:c.a.bool,content:c.a.node.isRequired,onVisibleChange:c.a.func,"data-testid":c.a.string,getPopupContainer:c.a.func,iconName:c.a.string,destroyTooltipOnHide:c.a.bool,placement:c.a.string};t.a=h},2756:function(e,t,r){var n=r(216),o=r(629),a=Object.prototype.hasOwnProperty,i=o((function(e,t,r){a.call(e,r)?e[r].push(t):n(e,r,[t])}));e.exports=i},2780:function(e,t,r){"use strict";var n=r(401),o=r(1744),a=r(373),i=r(109),c=r(312),l=r(126),u=r(70);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(){d=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),c=new C(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p={};function m(){}function h(){}function y(){}var b={};l(b,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==t&&r.call(g,a)&&(b=g);var _=y.prototype=m.prototype=Object.create(b);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var l=f(e[n],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==s(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return A()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=k(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=f(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=f(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return h.prototype=y,n(_,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:h,configurable:!0}),h.displayName=l(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},j(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){h(a,n,o,i,c,"next",e)}function c(e){h(a,n,o,i,c,"throw",e)}i(void 0)}))}}function b(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g={limitExceeded:function(e){return e&&e.length>=a.MAX_NODES_COUNT},shouldShowToc:function(e){return!!e&&"Book"===e.layout},shouldShowColumnToc:function(e){return!!e&&"Column"===e.layout},parseCatalogVersions:function(e){if(!e)return[];var t,r=[],o=b(e);try{for(o.s();!(t=o.n()).done;){var a=t.value,i=a.item.toc_yml;if(i)try{var c=Object(n.ymlToToc)(i),l=c[0];l&&l.published&&(a.meta=c[0],a.toc=c.slice(1),a.catalog_tree=Object(n.generateTreeFromYml)(i),r.push(a))}catch(e){}}}catch(e){o.e(e)}finally{o.f()}return r},parseVersion:function(e){if(e){try{var t,r=e.item.toc_yml,o=Object(n.ymlToToc)(r),a=b(o);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.key=i.uuid}}catch(e){a.e(e)}finally{a.f()}var c=o[0];c?(e.meta=c,e.toc=o.slice(1)):e.toc=o,e.catalog_tree=Object(n.generateTreeByTocItems)(e.toc)}catch(e){console.error(e)}return e}},updateNode:function(e){var t=arguments,r=this;return y(d().mark((function o(){var i,c,u;return d().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=t.length>1&&void 0!==t[1]?t[1]:{},c=t.length>2&&void 0!==t[2]?t[2]:{catalog_tree:!0},e){o.next=4;break}return o.abrupt("return");case 4:if(!e.should_manually_create_uid){o.next=8;break}return o.next=7,l.webProxy.catalogNodes.ensureUpdateTocYml({book_id:e.id,toc_yml:Object(n.tocToYml)(e.toc)});case 7:e.should_manually_create_uid=!1;case 8:return o.prev=8,o.next=11,l.webProxy.catalogNodes.update(p({book_id:e.id,format:"list"},i),{ignoreGlobalMessage:!0,useOriginResp:!0});case 11:u=o.sent,o.next=18;break;case 14:throw o.prev=14,o.t0=o.catch(8),"limit_exceeded"===o.t0.code&&(o.t0.message=__("目录节点数超过最大限制 {MAX_NODES_COUNT}，无法新增",{MAX_NODES_COUNT:a.MAX_NODES_COUNT})),o.t0;case 18:return o.abrupt("return",r._returnWithCatalogTree(p(p({},u.meta),{},{toc:u.data}),c));case 19:case"end":return o.stop()}}),o,null,[[8,14]])})))()},_returnWithCatalogTree:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).catalog_tree&&e.toc&&(e.catalog_tree=Object(n.generateTreeByTocItems)(e.toc)),e},getCatalogNodes:function(e){var t=arguments;return y(d().mark((function r(){var o,a,i,c,u;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.length>1&&void 0!==t[1]?t[1]:{},e){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,l.webProxy.catalogNodes.find(p({book_id:e},o),{useOriginResp:!0});case 5:a=r.sent,i=b(a.data);try{for(i.s();!(c=i.n()).done;)(u=c.value).key=u.uuid}catch(e){i.e(e)}finally{i.f()}return r.abrupt("return",p({catalog_tree:Object(n.generateTreeByTocItems)(a.data),toc:a.data},a.meta));case 9:case"end":return r.stop()}}),r)})))()},actionsInReaderPage:function(e,t){var r=[];return e.type!==a.TYPES.link?r.push(u.a.CATALOG.rename):r.push(u.a.CATALOG.edit_link),t.create_doc&&e.type===a.TYPES.doc&&r.push(u.a.DOC.edit),e.type!==a.TYPES.title&&e.type!==a.TYPES.uncreated_doc&&r.push(u.a.DOC.copyLink),t.create_doc&&(r.push(u.a.DOC.divide),r.push(u.a.CATALOG.remove),r.push(u.a.DOC.divide),r.push(u.a.CATALOG.copy),r.push(u.a.CATALOG.move)),t.export&&e.type===a.TYPES.doc&&r.push(u.a.CATALOG.export),t.create_doc&&(r.push(u.a.DOC.divide),r.push(u.a.CATALOG.destroy)),r},actionsForEdit:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[];return"desktop"===t?(n.push(u.a.CATALOG.move),n):(e.type===a.TYPES.link?n.push(u.a.CATALOG.edit_link):n.push(u.a.CATALOG.rename),"lite"===t?this.actionsInReaderPage(e,r):("full"===t&&(e.type===a.TYPES.doc&&(n.push(u.a.CATALOG.view_doc),n.push(u.a.CATALOG.remove),n.push(u.a.DOC.edit)),n.push(u.a.CATALOG.copy),n.push(u.a.CATALOG.move),r.export&&e.type===a.TYPES.doc&&n.push(u.a.CATALOG.export),e.share&&e.share.status===c.STATUS.active&&(n.push(u.a.DOC.divide),n.push(u.a.DOC.unshare)),n.push(u.a.DOC.divide),n.push(u.a.CATALOG.destroy)),n))},formatNode:function(e){return{type:e.type||i.TOC_TYPES.DOC,title:e.title,uuid:e.uuid||Object(o.nanoid)(16),url:e.url||null,prev_uuid:e.prev_uuid||null,sibling_uuid:e.sibling_uuid||null,child_uuid:e.child_uuid||null,parent_uuid:e.parent_uuid||null,doc_id:e.doc_id||null,level:e.level||0,id:e.doc_id||null,open_window:0===e.open_window?0:1,visible:0===e.visible?0:1}},insertNodeToCatalog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{catalog_tree:!0},n=g.formatNode(t),o=t.target_uuid,a=t.action,i=e.findIndex((function(e){return e.uuid===o}));if(i>=0){var c=e[i];n.level="insertSibling"===a?c.level:c.level+1,e.splice(i+1,0,n)}else e.unshift(n);return this._returnWithCatalogTree({toc:e,node_uuid:n.uuid},r)},getRedirectURL:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.group,o=r.book,a=r.currentItem,i=e.filter((function(e){return"DOC"===e.type&&e.id}));if(!a)return i&&i[0]?"/".concat(n.login,"/").concat(o.slug,"/").concat(i[0].url):"";var c,l=i.findIndex((function(e){return e.url&&e.url===a.url}));return i=t.filter((function(e){return"DOC"===e.type&&e.id})),l<0?c=i[0]:(c=i[l]||null)||(c=i[l-1]||null),c?"/".concat(n.login,"/").concat(o.slug,"/").concat(c.url):""}};t.a=g},2822:function(e,t,r){"use strict";r(2492);var n=r(620),o=r(0),a=r.n(o),i=r(8),c=r.n(i),l=r(13),u=r.n(l),s=r(90),d=r.n(s);r(2821);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var p=["className","showSizeChanger"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function v(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var g=a.a.forwardRef((function(e,t){var r=e.className,o=e.showSizeChanger,i=void 0!==o&&o,c=v(e,p);return a.a.createElement(n.a,b({},c,{className:u()("larkui-pagination",r),showSizeChanger:i,ref:t}))}));g.propTypes=h(h({},n.a.PaginationProps),{},{className:c.a.string,showSizeChanger:c.a.bool}),d()(g,n.a),t.a=g},2854:function(e,t,r){"use strict";var n=r(284),o=r(60);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(390)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(n,i,c):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),c=n(r(2855)),l=n(r(1711));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var s=function(e,t){return i.createElement(l.default,(0,a.default)((0,a.default)({},e),{},{ref:t,icon:c.default}))};s.displayName="CheckOutlined";var d=i.forwardRef(s);t.default=d},2855:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"}},2856:function(e,t,r){"use strict";var n=r(284),o=r(60);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(390)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(n,i,c):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),c=n(r(2857)),l=n(r(1711));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var s=function(e,t){return i.createElement(l.default,(0,a.default)((0,a.default)({},e),{},{ref:t,icon:c.default}))};s.displayName="DownOutlined";var d=i.forwardRef(s);t.default=d},2857:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"}},307:function(e,t,r){"use strict";r.d(t,"a",(function(){return C})),r.d(t,"c",(function(){return T}));var n=r(292),o=r(25),a=r.n(o),i=r(260),c=r(154);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=m(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=[{key:"all",label:__("类型不限")},{key:"doc",label:__("文档#compact")},{key:"sheet",label:__("表格")},{key:"board",label:__("画板")},{key:"table",label:__("数据表")},{key:"show",label:__("演示文稿")},{key:"thread",label:__("话题")},{key:"artboard",label:__("图集")},{key:"resource",label:__("文件")}],b=[{key:"all",label:__("时间不限")},{key:"1d",label:__("24 小时内")},{key:"7d",label:__("7 天内")},{key:"30d",label:__("30 天内")},{key:"183d",label:__("半年内")}],v=[{key:"content",label:__("内容#compact")},{key:"book",label:__("知识库#compact")},{key:"group",label:c.b.isPublication()?__("知识小组#nav"):__("团队#nav")},{key:"user",label:__("用户#nav")}],g={book:"book",group:"group",related:"related",public:"public",organization:"organization"},_=[{key:g.organization,label:__("空间")},{key:g.public,label:window.appData.isYuque?__("公开语雀"):__("内网公开")},{key:g.related,label:__("与我相关")},{key:g.group,label:c.b.isPublication()?__("当前知识小组#nav"):__("当前团队#nav")},{key:g.book,label:__("当前知识库")}],j={CONTENT_TYPES:y,TIMES:b,SEARCH_TYPES:v,SEARCH_TAB_LIST:_};function w(e){var t;return"modal"===e&&"dashboard"===(null===(t=window.appData.matchCondition)||void 0===t?void 0:t.page)||window&&window.location&&"/search"===window.location.pathname}function E(e,t){if(!e||"/"===e)return g.public;"/"===e.charAt(0)&&(e=e.slice(1));var r=p(e.split("/").map((function(e){return e.trim()})),2),n=r[0],o=void 0===n?"":n,a=r[1];return(void 0===a?"":a)||t?g.book:o?g.group:void 0}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"public",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.embed,o=t.isDocCollaborator,a=(t.search,t.organization),i=t.group,l=t.me,u=t.share,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dropdown",d=l&&l.id,f=u&&u.token,p=[g.public,g.related],m=JSON.parse(JSON.stringify(_));if(r||e!==g.group||(p=[g.group]),d?([g.public,g.related].includes(e)&&(p=[g.public,g.related]),e===g.group&&(p=[g.group,g.public,g.related]),e===g.book&&(p=[g.book,g.group,g.public,g.related],(o||f)&&(p=[g.book,g.public,g.related]))):([g.public,g.related].includes(e)&&(p=[]),e===g.group&&(p=[g.group]),e===g.book&&(p=[g.book,g.group]),e===g.book&&f&&(p=[g.book])),null!=a&&a.id){var h,y=a.abilities&&a.abilities.read_home,b=window.appData.organizations,v=null==b||null===(h=b.find((function(e){return e.id===a.id})))||void 0===h?void 0:h.member,j=n.organizationUser.ROLE,w=(null==v?void 0:v.role)===j.outsourcer;p=p.map((function(e){return e===g.public?w?null:y?g.organization:null:e===g.related?y?g.related:null:e===g.group?y?g.group:null:e})).filter((function(e){return e})),m=m.map((function(e){return e.key===g.organization&&(e.label=a.name),e}))}return window.appData.isDesktopApp&&(p=p.filter((function(e){return e!==g.public}))),p.includes(g.group)&&(m=m.map((function(e){return e.key===g.group&&("User"===(null==i?void 0:i.type)?e.label=__("当前用户"):e.label=c.b.isPublication()?__("当前知识小组#nav"):__("当前团队#nav")),e}))),"dropdown"===s?p.map((function(e){return m.find((function(t){return t.key===e}))})):m.map((function(e){return p.includes(e.key)&&e})).filter((function(e){return e}))}var O={create_doc:{key:"create_doc",icon:"doc-type-default",label:__("新建文档"),label_en:"create doc"},create_sheet:{key:"create_sheet",icon:"doc-type-sheet",label:__("新建表格"),label_en:"create sheet"},create_board:{key:"create_board",icon:"doc-type-board",label:__("新建画板"),label_en:"create board"},create_table:{key:"create_table",icon:"doc-type-table",label:__("新建数据表"),label_en:"create table"},create_repo:{key:"create_repo",icon:"book-type-default",label:__("新建知识库"),label_en:"create repo"},edit_doc:{key:"edit_doc",icon:"edit-border",label:__("编辑文档"),url:"/:group_login/:book_slug/:doc_slug/edit"},enter_ppt:{key:"enter_ppt",icon:"present",label:__("进入演示模式"),noJump:!0,label_en:"ppt show"},view_notification:{key:"notification",icon:"nav-bell",label:__("查看消息"),noJump:!0,label_en:"open notification"},switch_theme:{key:"switch_theme",icon:"nav-night",label:__("切换主题模式"),noJump:!0,label_en:"switch dark mode theme"},sep:{key:"seperator",isSep:!0}},S={book_home:{key:"book_home",icon:"knowledge-base-home",label:__("知识库首页"),url:"/:group_login/:book_slug",label_en:"repo home page"},book_settings:{key:"book_settings",icon:"more-settings",label:__("知识库设置"),url:"/:group_login/:book_slug/settings/basic",label_en:"repo setting page"},group_home:{key:"group_home",icon:"left-arrow",label:":group_name",url:"/:group_login",label_en:"group home"},group_activity:{key:"group_activity",icon:"dynamic2",label:__("动态"),url:"/r/:group_login/activities",label_en:"group activity"},group_book:{key:"group_book",icon:"helpdoc",label:__("知识库"),url:"/r/:group_login/books",label_en:"my books"},dashboard:{key:"dashboard",icon:"nav-clock",label:__("开始"),url:"/dashboard",label_en:"dashboard"},back_dashboard:{key:"back_dashboard",icon:"left-arrow",label:__("工作台"),url:"/dashboard"},note:{key:"note",icon:"note",label:__("小记"),url:"/dashboard/notes",label_en:"create note"},wiki:{key:"wiki",icon:"wiki",label:__("公共区"),url:"/dashboard/org_wiki",label_en:"common wiki"}};var C={GROUP_SELECT:"GROUP_SELECT",DOC_SELECT:"DOC_SELECT"},T=new a.a;t.b={SEARCH_TOOL_EVENTS:C,CONTENT_TYPES:y,TIMES:b,SEARCH_TABS:g,JUMP_LINKS:S,searchToolEvent:T,getLabelByKey:function(e,t){return((j[e.toUpperCase()]||[]).filter((function(e){return e.key===t}))[0]||{}).label||null},getQueryByString:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).share,r={},n=new URLSearchParams(e);n.get("p")>250&&n.set("p",250);var o,a=f(n);try{for(a.s();!(o=a.n()).done;){var i=p(o.value,2),c=i[0],l=i[1];"false"!==l&&(r[c]=l)}}catch(e){a.e(e)}finally{a.f()}return t&&"Book"===t.target_type&&(r.token=t.token),r.type=r.type||"content",r.tab||(r.tab=E(r.scope,r.token)),r},gotoSearchPage:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.history,o=r.forceOpen,a=r.overwrite,i=r.handleMobileTabChange,c=r.handleDesktopTabChange,l=w(r.sence);t.tab!==g.public&&t.tab!==g.related||(t.scope="/"),a?e=new URLSearchParams(t):(e=l?new URLSearchParams(window.location.search):new URLSearchParams({}),Object.keys(t).forEach((function(r){e.set(r,t[r])})));var u,s=f(e);try{for(s.s();!(u=s.n()).done;){var d=p(u.value,2),m=d[0];"false"===d[1]&&e.delete(m)}}catch(e){s.e(e)}finally{s.f()}if(i)return i(function(e){var t,r={},n=f(e);try{for(n.s();!(t=n.n()).done;){var o=p(t.value,2),a=o[0],i=o[1];r[a]=i}}catch(e){n.e(e)}finally{n.f()}return r}(e));var h="/search?".concat(e.toString());return c?c({},h):o?window.open(h):void(window.h5||l?n?n.push(h):window.location.href=h:window.open(h))},clacTabByScope:E,getSearchTypesByTab:function(e){var t=[];return e===g.book&&(t=["content"]),e===g.group&&(t=["content","book","topic"]),e===g.public&&(t=["content","book","topic","group","user"]),[g.related,g.organization].includes(e)&&(t=["content","book","topic","group"]),v.filter((function(e){return t.includes(e.key)}))},getShowTabs:k,isSearchEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=e.isYuque,n=e.settings,o=void 0===n?{}:n,a=e.search,c=e.share&&e.share.token;return!(!a||!a.display)&&((!r||!1!==o.public_space_doc_search_enable)&&((!o||!1!==o.enable_search)&&(!i.a.shouldHiddenFeature("search")&&((a.scope||c)&&(t=E(a.scope,c)),k(t,e).length>0))))},isSearchPage:function(e){return window&&window.location&&"/search"===window.location.pathname},isSinglePage:w,generateMenuList:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=t.organization,a=t.group,i=t.book,c=t.doc,l=t.me,u=window.appData.isDesktopApp,d=null==o?void 0:o.id,f=(null==l?void 0:l.id)&&(!d||(null==o||null===(e=o.abilities)||void 0===e?void 0:e.read));if("command"===r){var p,m,h=[];if("book"===n&&null!=c&&c.id)h.push.apply(h,[O.sep,!u&&(null==c||null===(m=c.abilities)||void 0===m?void 0:m.update)&&O.edit_doc,"Doc"===(null==c?void 0:c.type)&&O.enter_ppt]);else if("book"===n)h.push.apply(h,[O.sep]);else if("group"===n){var y;h.push.apply(h,[(null==a||null===(y=a.abilities)||void 0===y?void 0:y.create_book)&&O.create_repo,O.sep])}else h.push.apply(h,[(null==l?void 0:l.id)&&O.create_repo,O.sep]);var b,v,g=[O.create_doc,O.create_sheet,O.create_board,O.create_table];if(("book"===n&&null!=i&&null!==(p=i.abilities)&&void 0!==p&&p.create_doc||"book"!==n&&null!=l&&l.id)&&h.unshift.apply(h,g),null!=l&&l.id)h.push.apply(h,[!u&&(!d||(null==o||null===(b=o.abilities)||void 0===b?void 0:b.read))&&O.view_notification,(!d||(null==o||null===(v=o.abilities)||void 0===v?void 0:v.read))&&O.switch_theme]);return 1===h.length&&h[0].isSep&&h.pop(),h.filter(Boolean).map((function(e){return s({},e)}))}var _,j,w=[];if("book"===n&&null!=c&&c.id)w.push.apply(w,[!u&&S.book_home,(null==i||null===(_=i.abilities)||void 0===_?void 0:_.update)&&S.book_settings,(null==a||null===(j=a.abilities)||void 0===j?void 0:j.read)&&S.group_home,f&&S.back_dashboard]);else if("book"===n){var E,k;w.push.apply(w,[(null==i||null===(E=i.abilities)||void 0===E?void 0:E.update)&&S.book_settings,(null==a||null===(k=a.abilities)||void 0===k?void 0:k.read)&&S.group_home,f&&S.back_dashboard])}else if("group"===n)"Group"===(null==a?void 0:a.type)&&w.push.apply(w,[!u&&S.group_activity,S.group_book]);else{var C;w.push.apply(w,[f&&S.dashboard,(null==l?void 0:l.id)&&(d?(null==o||null===(C=o.abilities)||void 0===C?void 0:C.read)&&S.wiki:S.note)])}return w.length&&w.push(O.sep),w.filter(Boolean).map((function(e){return s({},e)}))}}},327:function(e,t,r){"use strict";r(2020);var n=r(163),o=r(0),a=r.n(o),i=r(8),c=r.n(i),l=r(13),u=r.n(l),s=r(90),d=r.n(s);r(3135);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var p=["className","overlayClassName"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function v(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var g=a.a.forwardRef((function(e,t){var r=e.className,o=e.overlayClassName,i=v(e,p);return a.a.createElement(n.a,b({className:u()(r,"larkui-dropdown-trigger"),overlayClassName:u()(o,"larkui-dropdown"),ref:t},i))}));g.propTypes=h(h({},n.a.DropDownProps),{},{className:c.a.string,overlayClassName:c.a.string}),d()(g,n.a);var _=g;function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}var w=["className","overlayClassName","overlay","children"];function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==j(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===j(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S.apply(this,arguments)}function C(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var T=a.a.forwardRef((function(e,t){var r=e.className,o=e.overlayClassName,i=e.overlay,c=e.children,l=C(e,w),s=i?i.props:{};return a.a.createElement(n.a.Button,S({className:u()(r,"larkui-dropdown-trigger"),overlay:a.a.cloneElement(i,{className:u()(s.className,o,"larkui-dropdown-menu")}),ref:t},l),c)}));T.propTypes=k(k({},n.a.DropdownButtonProps),{},{className:c.a.string,overlayClassName:c.a.string,overlay:c.a.node,children:c.a.any}),d()(T,n.a.Button);var A=T,P=r(2691),I=r.n(P),L=r(2690),D=r.n(L),N=r(533),x=r(36),R=r(35);r(3136);function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M.apply(this,arguments)}var B=function(e){var t=e.className,r=e.overlayClassName,n=e.currentValue,o=e.menus,i=e.disableMenus,c=void 0===i?[]:i,l=e.disableTip,s=e.handleChange,d=e.triggerPrefix,f=o.find((function(e){return e.value===n}));return a.a.createElement(_,M({},e,{trigger:["click"],className:u()("larkui-dropdown-selector",t),overlayClassName:u()("larkui-dropdown-selector-menu",r),overlay:a.a.createElement(x.a,{selectedKeys:[n]},o.map((function(e){var t=c.some((function(t){return t.value===e.value})),r=a.a.createElement("span",{className:"larkui-dropdown-selector-option"},a.a.createElement("span",{className:"larkui-dropdown-selector-option-name"},e.name),e.value===n&&a.a.createElement("span",{className:"larkui-dropdown-selector-option-checked"},a.a.createElement(D.a,null)));return a.a.createElement(x.a.Item,{key:e.value,disabled:t,onClick:function(){s(e.value)}},t&&l?a.a.createElement(R.a,{title:l,placement:"right"},r):r)})),e.externalActions&&a.a.createElement(x.a.Divider,null),e.externalActions&&e.externalActions())}),a.a.createElement("span",{className:"larkui-dropdown-selector-trigger"},a.a.createElement("span",null,d),a.a.createElement("span",null,f?f.name:Object(N.a)("请选择")),a.a.createElement("span",{className:"larkui-dropdown-selector-trigger-icon"},a.a.createElement(I.a,null))))};B.propTypes={className:c.a.string,overlayClassName:c.a.string,currentValue:c.a.string.isRequired,menus:c.a.arrayOf(c.a.shape({name:c.a.string.isRequired,value:c.a.string.isRequired})).isRequired,disableMenus:c.a.array,disableTip:c.a.node,handleChange:c.a.func.isRequired,externalActions:c.a.func,triggerPrefix:c.a.node};var F=B;_.Selector=F,_.Button=A;t.a=_},3454:function(e,t){e.exports={WORKFLOW_EVENT:{error:"error",message:"message",change:"change",saveTitle:"saveTitle",miniExpand:"miniExpand",editableChange:"editableChange",collabUsersChange:"collabUsersChange",editModeChange:"editModeChange",docStatusChange:"docStatusChange",netStatusChange:"netStatusChange",afterSaveSuccess:"afterSaveSuccess",afterPublishSuccess:"afterPublishSuccess",started:"started",afterEditorActive:"afterEditorActive",onPublishSuccess:"onPublishSuccess"},ACTION:{save:"save",publish:"publish"},SAVE_TYPE:{FORCE:1,AUTO:2,USER_SAVE:3,USER_PUBLISH:4,USER_SAVE_AS_VERSION:5,USER_SAVE_AS_TEMPLATE:6},ERROR_CODE:{INIT_FAILED:"INIT_FAILED",SAVE_BEFORE_FAILED:"SAVE_BEFORE_FAILED",SAVE_FAILED:"SAVE_FAILED",PUBLISH_FAILED:"PUBLISH_FAILED",DOC_DELETED:"DOC_DELETED",DOC_NOT_EXIST:"DOC_NOT_EXIST",DOC_SAVE_CONFLICT:"DOC_SAVE_CONFLICT",CACHE_FAILED:"CACHE_FAILED",CONTENT_UNREADY:"CONTENT_UNREADY",RENDER_FAILED:"RENDER_FAILED",DISCONNECTED:"DISCONNECTED",CONNECT_COLLAB_SERVER_FAILED:"CONNECT_COLLAB_SERVER_FAILED",LOCK_FAILED:"LOCK_FAILED",LOCKED_BY_COLLAB:"LOCKED_BY_COLLAB",LOCKED_BY_SELF_COLLAB:"LOCKED_BY_SELF_COLLAB",LOCKED_BY_COLLAB_DISCONNECT:"LOCKED_BY_COLLAB_DISCONNECT",LOCKED_BY_DESKTOP:"LOCKED_BY_DESKTOP",LOCKED_BY_OTHER:"LOCKED_BY_OTHER",LOCKED_BY_VERSIONCONFLICT:"LOCKED_BY_VERSIONCONFLICT",DATA_ERROR:"DATA_ERROR",COLLAB_DATA_INIT_ERROR:"COLLAB_DATA_INIT_ERROR",COMMAND_ERROR:"COMMAND_ERROR"},MESSAGE:{DOC_PUBLISHED:"DOC_PUBLISHED",DOC_DELETED:"DOC_DELETED",DOC_CACHE_SAVED:"DOC_CACHE_SAVED",SAVE_FAILED:"SAVE_FAILED",SAVING:"SAVING",PUBLISHING:"PUBLISHING",DISCONNECT:"DISCONNECT",UNREADY:"UNREADY",CACHE_FAILED:"CACHE_FAILED",RENDER_BIG_DOCUMENT:"RENDER_BIG_DOCUMENT",BUZY:"BUZY",CLEAR:"CLEAR",EDIT_DISABLE:"EDIT_DISABLE"},DOC_STATUS:{loading:"loading",loaded:"loaded",saving:"saving",saved:"saved",publishing:"publishing",published:"published",changed:"changed",deleted:"deleted"},NET_STATUS:{offline:"offline",online:"online",congestion:"congestion"},DOC_DOMAIN:{DOCLET:"Doclet",DOC:"Doc"},DOC_VERSION:{ORIGIN:{manual:1,cache:2}},DOCLET_CATEGORY:{BOOK_INDEX_PAGE:"book_index_page",NOTE:"note",ORG_BOARD:"org_board"},SUMMARY_NODES_COUNT:50,SUMMARY_PARAGRAPH_MAX_COUNT:10,BIG_DOCUMENT_BLOCK_COUNT:200,EDIT_MODE:{LOCK:"lock",COLLAB:"collab",OFFLINE:"offline",COLLAB_CUSTOM:"collab_custom"},EDIT_SCENE:{NOTE:"note",DESKTOP:"desktop",WEB:"web"},REPORT_ACTION_ERROR:["DATA_ERROR","COLLAB_DATA_INIT_ERROR","SAVE_FAILED","PUBLISH_FAILED","DOC_DELETED","DOC_SAVE_CONFLICT","LOCKED_BY_OTHER","LOCKED_BY_DESKTOP"],EDITOR_NAME:{LAKEX:"lakex",SHEET:"sheet",BOARD:"board",TABLE:"table"}}},3473:function(e,t,r){"use strict";var n=".lake-sheet-scrollbar-x .lake-sheet-scrollbar-trigger",o=".lake-sheet-scrollbar-y .lake-sheet-scrollbar-trigger",a={storePosition:function(e,t){if(sessionStorage){var r=this._getStorageKey(e);sessionStorage.setItem(r,"".concat(t))}},storeSheetPosition:function(e,t){if(sessionStorage){var r=this._getStorageKey(e);sessionStorage.setItem("".concat(r,"-x"),"".concat(t.x)),sessionStorage.setItem("".concat(r,"-y"),"".concat(t.y))}},getStoredPosition:function(e){if(!sessionStorage)return-1;var t=this._getStorageKey(e),r=sessionStorage.getItem(t);return r?parseInt(r,10):-1},getSheetStoredPosition:function(e){if(!sessionStorage)return null;var t=this._getStorageKey(e),r=sessionStorage.getItem("".concat(t,"-x")),n=sessionStorage.getItem("".concat(t,"-y"));return r&&n?{x:parseFloat(r),y:parseFloat(n)}:null},clearStorage:function(e){if(sessionStorage){var t=this._getStorageKey(e);sessionStorage.removeItem(t)}},clearSheetStorage:function(e){if(sessionStorage){var t=this._getStorageKey(e);sessionStorage.removeItem("".concat(t,"-x")),sessionStorage.removeItem("".concat(t,"-y"))}},_getStorageKey:function(e){return"content-position-offset-".concat(e)}},i={saveReadPosition:function(e){var t,r=(null===(t=document.scrollingElement)||void 0===t?void 0:t.scrollTop)||document.body.scrollTop;r&&r>=32?a.storePosition(e,r):a.clearStorage(e)},letReaderFocusToMemorizedPosition:function(e){var t=a.getStoredPosition(e);t<=0||(window.scrollTo(0,t),a.clearStorage(e))},letEditorFocusToReadPosition:function(e){var t=a.getStoredPosition(e);if(!(t<=0)){var r=this.getScrollContainer();r&&(r.scrollTop=t,a.clearStorage(e))}},getScrollContainer:function(){return document.querySelector(".ne-editor-wrap")||document.querySelector(".lake-editor-scroll-container")},saveEditPosition:function(e){if("lakesheet"!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"lake")){var t=this.getScrollContainer();if(t){var r=t.scrollTop;r>=32&&a.storePosition(e,r)}}else i.saveSheetPosition(e)},saveSheetPosition:function(e){var t=document.querySelector(n),r=document.querySelector(o);if(t&&r){var i={x:t.getAttribute("data-scroll"),y:r.getAttribute("data-scroll")};a.storeSheetPosition(e,i)}},getSheetStoredPosition:function(e){var t=a.getSheetStoredPosition(e);return t?(a.clearSheetStorage(e),t):null}};t.a=i},3480:function(e,t,r){"use strict";r.d(t,"e",(function(){return i}));var n=r(343),o=r.n(n),a=r(3454);r.d(t,"i",(function(){return a.WORKFLOW_EVENT})),r.d(t,"h",(function(){return a.SAVE_TYPE})),r.d(t,"d",(function(){return a.ERROR_CODE})),r.d(t,"f",(function(){return a.MESSAGE})),r.d(t,"a",(function(){return a.DOC_STATUS})),r.d(t,"g",(function(){return a.NET_STATUS})),r.d(t,"b",(function(){return a.EDIT_MODE})),r.d(t,"c",(function(){return a.EDIT_SCENE}));var i={edit:{key:"e",title:"E"},publish:{key:["⌘+enter","ctrl+enter"],title:o.a.mac?"⌘+Enter":"Ctrl+Enter"}};a.WORKFLOW_EVENT,a.ACTION,a.SAVE_TYPE,a.ERROR_CODE,a.MESSAGE,a.DOC_STATUS,a.NET_STATUS,a.EDIT_MODE},3488:function(e,t,r){!function(t){var r,n={},o={16:!1,18:!1,17:!1,91:!1},a="all",i={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},c={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l=function(e){return c[e]||e.toUpperCase().charCodeAt(0)},u=[];for(r=1;r<20;r++)c["f"+r]=111+r;function s(e,t){for(var r=e.length;r--;)if(e[r]===t)return r;return-1}function d(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var f={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function p(e){for(r in o)o[r]=e[f[r]]}function m(e,t,r){var o,a;o=y(e),void 0===r&&(r=t,t="all");for(var i=0;i<o.length;i++)a=[],(e=o[i].split("+")).length>1&&(a=b(e),e=[e[e.length-1]]),e=e[0],(e=l(e))in n||(n[e]=[]),n[e].push({shortcut:o[i],scope:t,method:r,key:o[i],mods:a})}for(r in i)m[r]=!1;function h(){return a||"all"}function y(e){var t;return""==(t=(e=e.replace(/\s/g,"")).split(","))[t.length-1]&&(t[t.length-2]+=","),t}function b(e){for(var t=e.slice(0,e.length-1),r=0;r<t.length;r++)t[r]=i[t[r]];return t}function v(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){r(window.event)}))}v(document,"keydown",(function(e){!function(e){var t,r,a,c,l,d;if(t=e.keyCode,-1==s(u,t)&&u.push(t),93!=t&&224!=t||(t=91),t in o)for(a in o[t]=!0,i)i[a]==t&&(m[a]=!0);else if(p(e),m.filter.call(this,e)&&t in n)for(d=h(),c=0;c<n[t].length;c++)if((r=n[t][c]).scope==d||"all"==r.scope){for(a in l=r.mods.length>0,o)(!o[a]&&s(r.mods,+a)>-1||o[a]&&-1==s(r.mods,+a))&&(l=!1);(0!=r.mods.length||o[16]||o[18]||o[17]||o[91])&&!l||!1===r.method(e,r)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e)})),v(document,"keyup",(function(e){var t,r=e.keyCode,n=s(u,r);if(n>=0&&u.splice(n,1),93!=r&&224!=r||(r=91),r in o)for(t in o[r]=!1,i)i[t]==r&&(m[t]=!1)})),v(window,"focus",(function(){for(r in o)o[r]=!1;for(r in i)m[r]=!1}));var g=t.key;t.key=m,t.key.setScope=function(e){a=e||"all"},t.key.getScope=h,t.key.deleteScope=function(e){var t,r,o;for(t in n)for(r=n[t],o=0;o<r.length;)r[o].scope===e?r.splice(o,1):o++},t.key.filter=function(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)},t.key.isPressed=function(e){return"string"==typeof e&&(e=l(e)),-1!=s(u,e)},t.key.getPressedKeyCodes=function(){return u.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=g,e},t.key.unbind=function(e,t){var r,o,a,i,c,u=[];for(r=y(e),i=0;i<r.length;i++){if((o=r[i].split("+")).length>1&&(u=b(o),e=o[o.length-1]),e=l(e),void 0===t&&(t=h()),!n[e])return;for(a=0;a<n[e].length;a++)(c=n[e][a]).scope===t&&d(c.mods,u)&&(n[e][a]={})}},e.exports=m}(this)},3534:function(e,t,r){"use strict";var n=r(1730);r.d(t,"b",(function(){return n.b})),r.d(t,"a",(function(){return n.a}))},356:function(e,t,r){"use strict";r(3138);var n=r(2486);r(1733);t.a=n.a},36:function(e,t,r){"use strict";r(2058);var n=r(63),o=r(0),a=r.n(o),i=r(90),c=r.n(i);r(197);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var u=["onKeyDown"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var m=[37,38,39,40],h=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],y=function(e){var t,r=e.onKeyDown,n=p(e,u),i=Object(o.useCallback)((t=r,function(e){return!(!h.includes(e.key)&&!m.includes(e.keyCode))||t(e)}),[r]);return a.a.createElement("ul",f({},n,{onKeyDown:i}))},b=a.a.forwardRef((function(e){var t=f({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return a.a.createElement(n.a,f({component:y},t))}));b.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n.a.MenuProps),c()(b,n.a),t.a=b},3612:function(e,t,r){"use strict";var n=r(0),o=r(8),a=r(3622);function i(){}i.prototype=Object.create(n.Component.prototype),i.displayName="DocumentTitle",i.propTypes={title:o.string.isRequired},i.prototype.render=function(){return this.props.children?n.Children.only(this.props.children):null},e.exports=a((function(e){var t=e[e.length-1];if(t)return t.title}),(function(e){var t=e||"";t!==document.title&&(document.title=t)}))(i)},3617:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i}));var n=r(18),o=r(198),a=function(e,t,r){var a=window.appData.note;return a?1===a.public:(e=e||window.appData.group,t=t||window.appData.book,r=r||window.appData.doc,!(!e||!t)&&(r?Object(o.c)({type:"doc",target:r,group:e,book:t}):Object(o.c)({type:"book",target:t,group:e}))===n.PRIVACY.public)},i=function(e,t,r){var n=window.appData.note;return n?n.is_public:(e=e||window.appData.share,t=t||window.appData.book,r=r||window.appData.doc,!!(e&&t&&r&&r.book_id===t.id)&&(0===e.status&&0===e.scope&&(e.target_id===r.book_id||e.target_id===r.id)))}},3622:function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var o=r(0),a=n(o),i=n(r(333));function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,r){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==r&&"function"!=typeof r)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(n){if("function"!=typeof n)throw new Error("Expected WrappedComponent to be a React component.");var u,s=[];function d(){u=e(s.map((function(e){return e.props}))),f.canUseDOM?t(u):r&&(u=r(u))}var f=function(e){var t,r;function o(){return e.apply(this,arguments)||this}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,o.peek=function(){return u},o.rewind=function(){if(o.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=u;return u=void 0,s=[],e};var c=o.prototype;return c.shouldComponentUpdate=function(e){return!i(e,this.props)},c.componentWillMount=function(){s.push(this),d()},c.componentDidUpdate=function(){d()},c.componentWillUnmount=function(){var e=s.indexOf(this);s.splice(e,1),d()},c.render=function(){return a.createElement(n,this.props)},o}(o.Component);return c(f,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(n)+")"),c(f,"canUseDOM",l),f}}},3635:function(e,t,r){"use strict";var n=r(0),o=r.n(n);t.a=function(){return o.a.createElement("div",null)}},3657:function(e,t,r){"use strict";r(267);var n=r(127),o=r(0),a=r.n(o),i=r(13),c=r.n(i),l=r(8),u=r.n(l),s=r(555),d=r(42),f=r(3534),p={bookIconPopover:"BookIcon-module_bookIconPopover_-uyNA",bookTitle:"BookIcon-module_bookTitle_hK56I",bookIconSelector:"BookIcon-module_bookIconSelector_yaICm",iconSelectorTab:"BookIcon-module_iconSelectorTab_SP0xx",iconSelectorTabActive:"BookIcon-module_iconSelectorTabActive_l6Wg3",iconSelectorContent:"BookIcon-module_iconSelectorContent_3acOH",iconSelectorContentTab2:"BookIcon-module_iconSelectorContentTab2_sapYE",iconSelectorColorPicker:"BookIcon-module_iconSelectorColorPicker_W+uxH",spanActive:"BookIcon-module_spanActive_zUcmt"};function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var o=j(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(this,r)}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function w(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}var k=f.b.getSelectorIcons().URL_TYPE_LIST,O=["book-icon-alipay","book-icon-alibaba","book-icon-taobao"],S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(l,e);var t,r,o,i=g(l);function l(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),w(_(r=i.call(this,e,t)),"updateIcon",(function(e,t){var n=r.state.bookIcon;if(n[e]!==t){var o=y({},n);if(o[e]=t,"type"===e)switch(t){case"icon":case"url":o.symbol=k[0];break;default:return}o.type="url",r.setState({bookIcon:o}),r.props.updateIcon(o,r.props.book)}}));var n=e.value,o=e.icon;return r.state={bookIcon:null!=n&&n.type?n:{type:"url",symbol:o||k[0]}},r}return t=l,(r=[{key:"render",value:function(){var e=this,t=this.state.bookIcon,r=this.props.value,o=t.type||r.type||"url";return a.a.createElement(n.a,{trigger:this.props.disabled?"":"click",noArrow:!0,getPopupContainer:function(e){return e.parentNode},overlayClassName:p.bookIconPopover,placement:"bottomLeft",content:a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:p.bookIconSelector},a.a.createElement("ul",{className:p.iconSelectorTab},a.a.createElement("li",{onClick:function(){return e.updateIcon("type","url")},"data-testid":"bookicon-url",className:"url"===o?p.iconSelectorTabActive:""},__("默认"))),a.a.createElement("div",null,a.a.createElement("ul",{className:p.iconSelectorContent},k.filter((function(e){return!O.includes(e)})).map((function(t,r){return a.a.createElement("li",{key:r,onClick:function(){return e.updateIcon("symbol",t)}},a.a.createElement(d.b,{className:p.bookIcon,name:t,width:24}))}))))))},a.a.createElement("div",{tabIndex:"0","data-testid":"popover-bookicon",style:y({},this.props.style),className:this.props.className},a.a.createElement(d.b,{className:c()(p.bookIcon,w({},p.iconSize,"icon"===t.type)),size:this.props.size,width:this.props.width,height:this.props.height,name:f.b.getSymbolName(t)||r.symbol})))}}])&&b(t.prototype,r),o&&b(t,o),Object.defineProperty(t,"prototype",{writable:!1}),l}(o.Component);S.defaultProps={value:{}},S.propTypes={value:u.a.object,book:u.a.object,icon:u.a.string,updateIcon:u.a.func.isRequired,disabled:u.a.bool,className:u.a.string,size:u.a.number,width:u.a.number,height:u.a.number};t.a=Object(s.d)((function(e){return e}))(S)},3658:function(e,t,r){"use strict";r(95);var n=r(49),o=(r(94),r(27)),a=(r(64),r(21)),i=(r(254),r(56)),c=r(0),l=r.n(c),u=r(8),s=r.n(u),d=r(126),f={collectionModal:"CollectionModal-module_collectionModal_sJKOy",collectionModalContent:"CollectionModal-module_collectionModalContent_6NiUd"};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(){m=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),c=new C(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d={};function f(){}function h(){}function y(){}var b={};l(b,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==t&&r.call(g,a)&&(b=g);var _=y.prototype=f.prototype=Object.create(b);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==p(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return A()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=k(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return h.prototype=y,n(_,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:h,configurable:!0}),h.displayName=l(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},j(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function h(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){h(a,n,o,i,c,"next",e)}function c(e){h(a,n,o,i,c,"throw",e)}i(void 0)}))}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e){var t=e.isModalVisible,r=e.handleOk,u=e.handleCancel,s=e.type,p=e.value,h=b(i.a.useForm(),1)[0],v=b(Object(c.useState)(!0),2),g=v[0],_=v[1];function j(){return(j=y(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.webProxy.actionTags.create({name:t,action_type:"mark"});case 2:(n=e.sent)&&(r("CREATE",n),u());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=y(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.webProxy.actionTags.update({id:p.id,name:t});case 2:(n=e.sent)&&(r("UPDATE",n),u());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){var e=h.getFieldsValue(),t=null==e?void 0:e.name;!t||t.length>50||("CREATE"===s?function(e){j.apply(this,arguments)}(t):function(e){w.apply(this,arguments)}(t))}return Object(c.useEffect)((function(){h.setFieldsValue({name:"EDIT"===s?p.name:null}),_("EDIT"!==s)}),[]),l.a.createElement("div",null,l.a.createElement(n.a,{title:"CREATE"===s?__("新建分组"):__("编辑分组"),width:400,visible:t,onCancel:u,className:f.collectionModal,zIndex:9999,footer:[l.a.createElement(a.a,{key:"back",onClick:u},__("取消")),l.a.createElement(a.a,{key:"submit",type:"primary",onClick:E,disabled:g},__("确定"))]},l.a.createElement("div",{className:f.collectionModalContent},l.a.createElement(i.a,{form:h,onValuesChange:function(e){e&&e.name&&e.name.trim()?_(!1):_(!0),h.setFieldsValue(e)},layout:"vertical"},l.a.createElement(i.a.Item,{label:__("分组名称"),name:"name",rules:[{max:50,message:__("请调整分组名称，不要超过50个字")}]},l.a.createElement(o.a,{className:"collection-input",placeholder:__("请输入分组名称"),onKeyDown:function(e){13===(e.keyCode||e.which)&&(e.preventDefault(),E())},autocomplete:"off"}))))))}g.propTypes={isModalVisible:s.a.bool,handleOk:s.a.func,handleCancel:s.a.func,type:s.a.string,value:s.a.object};t.a=g},3661:function(e,t,r){"use strict";r(227);var n=r(112),o=(r(61),r(23)),a=(r(445),r(166)),i=r(0),c=r.n(i),l=r(8),u=r.n(l),s=r(571),d=r(126),f=r(2582),p=r(3658),m="SelectGroup-module_selectGroup_PPbXd",h="SelectGroup-module_title_62QjW",y="SelectGroup-module_p1_iKXf5",b="SelectGroup-module_p2_vn1NJ",v="SelectGroup-module_content_J8Ejd",g="SelectGroup-module_empty_k0F6W",_="SelectGroup-module_checkContent_hhsnD",j="SelectGroup-module_checkboxWrapper_5aHCt",w="SelectGroup-module_footer_09b+K";function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function k(){k=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),c=new C(o||[]);return n(i,"_invoke",{value:j(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d={};function f(){}function p(){}function m(){}var h={};l(h,a,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(T([])));b&&b!==t&&r.call(b,a)&&(h=b);var v=m.prototype=f.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==E(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function j(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return A()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function w(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=m,n(v,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(v),l(v,c,"Generator"),l(v,a,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function O(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function S(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){O(a,n,o,i,c,"next",e)}function c(e){O(a,n,o,i,c,"throw",e)}i(void 0)}))}}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I(e);if(t){var o=I(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}(this,r)}}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function L(e,t,r){return(t=D(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E(t)?t:String(t)}var N=function(e){var t=e.collection,r=e.onSelectChange,n=Object(i.useRef)(null);return c.a.createElement(a.a,{className:j,checked:t.checked,onChange:r},c.a.createElement(f.a,{textRef:n,title:t.name,placement:"bottom"},c.a.createElement("span",{className:"ellipsis-wrapper"},c.a.createElement("span",{ref:n,className:"ellipsis-text"},t.name))))},x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(l,e);var t,r,a,i=A(l);function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return L(P(e=i.call.apply(i,[this].concat(r))),"state",{collectionList:[],modalVisible:!1,loading:!1}),L(P(e),"getCollectionList",S(k().mark((function t(){var r,n,o,a,i,c,l=arguments;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>0&&void 0!==l[0]?l[0]:"OTHER",n=l.length>1&&void 0!==l[1]?l[1]:null,e.setState({loading:!0}),o=e.props.record,a=o.action_tags,i=a&&a.split(","),t.next=8,d.webProxy.actionTags.list({action_type:"mark",v:new Date});case 8:(c=t.sent)&&(c.forEach((function(e){i&&i.includes(String(e.id))?e.checked=!0:e.checked=!1})),"CREATE"===r&&(c&&c.find((function(e){return e.id===n.id}))||c.unshift(n),c[0].checked=!0,e.setTags(c)),e.setState({collectionList:c,loading:!1}));case 10:case"end":return t.stop()}}),t)})))),L(P(e),"onUnMarks",S(k().mark((function t(){var r,n,a,i,c;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.collectionList,n=e.props,a=n.record,i=n.refetch,c=null==r?void 0:r.filter((function(e){return e.checked})),t.next=5,d.webProxy.mine.marks.destroy({action_id:a.id});case 5:t.sent&&(o.a.success(__("已取消收藏")),i&&i({type:"CANCEL",value:c,actionInfo:a}));case 7:case"end":return t.stop()}}),t)})))),L(P(e),"onSelectChange",(function(t,r){var n=e.state.collectionList;(null==n?void 0:n.find((function(e){return e.id===t.id}))).checked=r,e.setState({collectionList:n}),e.setTags(n)})),L(P(e),"setTags",function(){var t=S(k().mark((function t(r){var n,o,a,i;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null==r?void 0:r.filter((function(e){return e.checked})),o=e.props,a=o.record,i=o.refetch,t.next=4,d.webProxy.actionTags.setTags({action_id:a.id,tags:n});case 4:t.sent&&i({type:"SET_TAG",value:n});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),L(P(e),"createHandleOk",(function(t,r){var n=e.state.collectionList,o=e.props.refetch,a=null==n?void 0:n.filter((function(e){return e.checked}));e.getCollectionList(t,r),e.setState({modalVisible:!1}),o&&o({type:"CREATE",value:a}),document.getElementById("scrollContent").scrollTop=0})),e}return t=l,(r=[{key:"componentDidMount",value:function(){this.getCollectionList()}},{key:"render",value:function(){var e=this,t=this.state,r=t.collectionList,o=t.modalVisible;return c.a.createElement("div",null,c.a.createElement("div",{className:m},c.a.createElement("div",null,c.a.createElement("div",{className:h},c.a.createElement("p",{className:y},__("选择分组")),c.a.createElement("p",{className:b},__("你可以选择分组或直接")," ",c.a.createElement("a",{onClick:this.onUnMarks},__("取消收藏")))),c.a.createElement("div",{className:v,id:"scrollContent"},c.a.createElement(n.a,{spinning:this.state.loading},!(null!=r&&r.length)&&c.a.createElement("div",{className:g},__("暂无分组")),r.length>0&&(null==r?void 0:r.map((function(t){return c.a.createElement("div",{key:t.id,className:_},c.a.createElement(N,{collection:t,onSelectChange:function(r){return e.onSelectChange(t,r.target.checked)}}))}))))),c.a.createElement("div",{className:w,onClick:function(){e.setState({modalVisible:!0})}},c.a.createElement(s.default,{style:{marginRight:"4px"}}),__("新建分组")))),o&&c.a.createElement(p.a,{type:"CREATE",isModalVisible:o,handleOk:this.createHandleOk,handleCancel:function(){e.setState({modalVisible:!1})}}))}}])&&C(t.prototype,r),a&&C(t,a),Object.defineProperty(t,"prototype",{writable:!1}),l}(c.a.Component);x.propTypes={isModalVisible:u.a.bool,refetch:u.a.func,record:u.a.object};t.a=x},3665:function(e,t,r){"use strict";r(267);var n=r(127),o=(r(113),r(35)),a=(r(61),r(23)),i=r(0),c=r.n(i),l=r(8),u=r.n(l),s=r(1858),d=r.n(s),f=r(13),p=r.n(f),m=r(126),h=r(3661),y=r(42),b=r(170),v=r(1845),g="index-module_icon_hhi0u",_="index-module_markedHover_PaCO8",j="index-module_markedNormal_lQdFH",w="index-module_smallMark_FfS6d",E="index-module_mark_3qbSl",k="index-module_markIconContent_GN4G+",O="index-module_isMiniTypeMark_Q9Bf6",S="index-module_iconMarked_vNmDS";function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){var t=e.target,r=e.isMiniType,l=e.me,u=void 0===l?{}:l,s=e.reGetData,d=e.size,f=void 0===d?"normal":d,T=e.iconSize,A=e.getPopupContainer,P=Object(b.b)().isDarkMode,I=C(Object(i.useState)(!1),2),L=I[0],D=I[1],N=C(Object(i.useState)(),2),x=N[0],R=N[1],M=C(Object(i.useState)(!1),2),B=M[0],F=M[1],U=C(Object(i.useState)(t.action_tags||null),2),G=U[0],V=U[1];Object(i.useEffect)((function(){F(!!t.id)}),[t.id]),Object(i.useEffect)((function(){V(t.action_tags)}),[t.action_tags]);var z={target_type:e.targetType,id:x||t&&t.id,target_id:t&&t.target_id,action_tags:G},W=c.a.createElement(h.a,{record:z,refetch:function(e){var t=e.type,r=e.value,n=r&&r.map((function(e){return e.id})).join();V(n),"CANCEL"===t&&(F(!1),D(!1),V(null),s&&s())}}),H="small"===f?w:E,Y=P?c.a.createElement(y.b,{name:"icon-collected",width:"12",height:"12",color:"#D2A638",style:{marginRight:"4px"}}):c.a.createElement("img",{width:"12",height:"12",style:{marginRight:"4px"},src:"https://gw.alipayobjects.com/mdn/rms_a6038f/afts/img/A*LpjOSJolIloAAAAAAAAAAAAAARQnAQ",alt:"avatar"}),q=P?c.a.createElement(y.b,{name:"icon-collect",width:"12",height:"12",style:{marginRight:"4px"}}):c.a.createElement("img",{width:"12",height:"12",style:{marginRight:"4px"},src:"https://gw.alipayobjects.com/mdn/rms_a6038f/afts/img/A*s0VKTqCIM0EAAAAAAAAAAAAAARQnAQ",alt:"avatar"});return c.a.createElement(n.a,{type:"menu",trigger:["click"],content:W,visible:L,onVisibleChange:function(e){if(!u||!u.id)return null;D(e)},destroyPopupOnHide:!0,getPopupContainer:A,placement:r?"bottomRight":"bottomLeft"},c.a.createElement("div",{className:r?O:H},c.a.createElement(o.a,{title:r?__("收藏"):null,placement:"bottom"},c.a.createElement("div",{className:p()(L&&r?_:j,"select-group-mark-wrapper")},B?c.a.createElement("div",{className:k,"data-testid":"already-mark",onClick:function(){D(!0)}},window.h5?Y:c.a.createElement(y.b,{name:"star",className:p()(g,S),size:T||12}),!r&&c.a.createElement("span",null,__("已收藏"))):c.a.createElement("div",{className:k,"data-testid":"select-group-mark-entry",onClick:function(){!function(){var r,n=e.targetType,o=e.goLogin,i=window.appData,l=i.sharePage,d=i.share;i.isCollaborationPage&&(r=n),u.id||!o?m.webProxy.mine.marks.create({target_type:n,target_id:t.target_id,share_target_type:l&&d&&d.target_type,collaboration_target_type:r}).then((function(e){F(!0),R(e.id),setTimeout((function(){D(!0)}),100);var t=window.appData,r=t.organization,n=t.defaultSpaceHost,o=r&&r.id,i="/dashboard/collections",l=i;0===e.organization_id&&o&&(l="".concat(n).concat(i));var u=c.a.createElement("a",{href:l},"收藏");v.a?a.a.success(c.a.createElement("span",null,__("收藏成功"))):a.a.success(c.a.createElement("span",null,__("收藏成功，前往 {toastText} 查看",{toastText:u}))),s&&s()})).catch((function(e){a.a.error(e.message)})):o()}()}},window.h5?q:c.a.createElement(y.b,{name:"star-outlined",className:g,size:T||12}),!r&&c.a.createElement("span",null,__("收藏")))))))};A.defaultProps={me:window.appData.me,isMobile:window.h5,getPopupContainer:function(e){return e.parentNode}},A.propTypes={isMiniType:u.a.bool,target:u.a.object,targetType:u.a.oneOf(d.a.ALLOW_MARK_TARGET_TYPES).isRequired,style:u.a.object,onStatusChange:u.a.func,me:u.a.object,isMobile:u.a.bool,iconSize:u.a.number,getPopupContainer:u.a.func};var P=A,I=r(555);function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L.apply(this,arguments)}t.a=Object(I.d)()((function(e){var t=e.dispatch;return React.createElement(P,L({},e,{goLogin:function(){t({type:"error/toggleLoginModal",payload:{visible:!0}})}}))}))},3693:function(e,t,r){"use strict";var n=r(2725);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}t.a=function(e){var t=window.appData,r=t.isYuque,a=t.organization;return React.createElement(n.a,o({},e,{isYuque:r,organization:a}))}},3700:function(e,t,r){"use strict";var n=r(307);r.d(t,"a",(function(){return n.a})),r.d(t,"c",(function(){return n.c})),r.d(t,"b",(function(){return n.b}))},3728:function(e,t,r){var n,o,a;o=[],n=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},r=!t.document&&!!t.postMessage,n=t.IS_PAPA_WORKER||!1,o={},a=0,i={parse:function(r,n){var c=(n=n||{}).dynamicTyping||!1;if(j(c)&&(n.dynamicTypingFunction=c,c={}),n.dynamicTyping=c,n.transform=!!j(n.transform)&&n.transform,n.worker&&i.WORKERS_SUPPORTED){var l=function(){if(!i.WORKERS_SUPPORTED)return!1;var r,n,c=(r=t.URL||t.webkitURL||null,n=e.toString(),i.BLOB_URL||(i.BLOB_URL=r.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",n,")();"],{type:"text/javascript"})))),l=new t.Worker(c);return l.onmessage=y,l.id=a++,o[l.id]=l}();return l.userStep=n.step,l.userChunk=n.chunk,l.userComplete=n.complete,l.userError=n.error,n.step=j(n.step),n.chunk=j(n.chunk),n.complete=j(n.complete),n.error=j(n.error),delete n.worker,void l.postMessage({input:r,config:n,workerId:l.id})}var p=null;return i.NODE_STREAM_INPUT,"string"==typeof r?(r=function(e){return 65279===e.charCodeAt(0)?e.slice(1):e}(r),p=n.download?new u(n):new d(n)):!0===r.readable&&j(r.read)&&j(r.on)?p=new f(n):(t.File&&r instanceof File||r instanceof Object)&&(p=new s(n)),p.stream(r)},unparse:function(e,t){var r=!1,n=!0,o=",",a="\r\n",c='"',l=c+c,u=!1,s=null,d=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||i.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(o=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(r=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(u=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(c=t.quoteChar),"boolean"==typeof t.header&&(n=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");s=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+c),("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(d=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var f=new RegExp(m(c),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return p(null,e,u);if("object"==typeof e[0])return p(s||Object.keys(e[0]),e,u)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||s),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),p(e.fields||[],e.data||[],u);throw new Error("Unable to serialize unrecognized input");function p(e,t,r){var i="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var c=Array.isArray(e)&&0<e.length,l=!Array.isArray(t[0]);if(c&&n){for(var u=0;u<e.length;u++)0<u&&(i+=o),i+=h(e[u],u);0<t.length&&(i+=a)}for(var s=0;s<t.length;s++){var d=c?e.length:t[s].length,f=!1,p=c?0===Object.keys(t[s]).length:0===t[s].length;if(r&&!c&&(f="greedy"===r?""===t[s].join("").trim():1===t[s].length&&0===t[s][0].length),"greedy"===r&&c){for(var m=[],y=0;y<d;y++){var b=l?e[y]:y;m.push(t[s][b])}f=""===m.join("").trim()}if(!f){for(var v=0;v<d;v++){0<v&&!p&&(i+=o);var g=c&&l?e[v]:v;i+=h(t[s][g],v)}s<t.length-1&&(!r||0<d&&!p)&&(i+=a)}}return i}function h(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var n=!1;d&&"string"==typeof e&&d.test(e)&&(e="'"+e,n=!0);var a=e.toString().replace(f,l);return(n=n||!0===r||"function"==typeof r&&r(e,t)||Array.isArray(r)&&r[t]||function(e,t){for(var r=0;r<t.length;r++)if(-1<e.indexOf(t[r]))return!0;return!1}(a,i.BAD_DELIMITERS)||-1<a.indexOf(o)||" "===a.charAt(0)||" "===a.charAt(a.length-1))?c+a+c:a}}};if(i.RECORD_SEP=String.fromCharCode(30),i.UNIT_SEP=String.fromCharCode(31),i.BYTE_ORDER_MARK="\ufeff",i.BAD_DELIMITERS=["\r","\n",'"',i.BYTE_ORDER_MARK],i.WORKERS_SUPPORTED=!r&&!!t.Worker,i.NODE_STREAM_INPUT=1,i.LocalChunkSize=10485760,i.RemoteChunkSize=5242880,i.DefaultDelimiter=",",i.Parser=h,i.ParserHandle=p,i.NetworkStreamer=u,i.FileStreamer=s,i.StringStreamer=d,i.ReadableStreamStreamer=f,t.jQuery){var c=t.jQuery;c.fn.parse=function(e){var r=e.config||{},n=[];return this.each((function(e){if("INPUT"!==c(this).prop("tagName").toUpperCase()||"file"!==c(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var o=0;o<this.files.length;o++)n.push({file:this.files[o],inputElem:this,instanceConfig:c.extend({},r)})})),o(),this;function o(){if(0!==n.length){var t,r,o,l,u=n[0];if(j(e.before)){var s=e.before(u.file,u.inputElem);if("object"==typeof s){if("abort"===s.action)return t="AbortError",r=u.file,o=u.inputElem,l=s.reason,void(j(e.error)&&e.error({name:t},r,o,l));if("skip"===s.action)return void a();"object"==typeof s.config&&(u.instanceConfig=c.extend(u.instanceConfig,s.config))}else if("skip"===s)return void a()}var d=u.instanceConfig.complete;u.instanceConfig.complete=function(e){j(d)&&d(e,u.file,u.inputElem),a()},i.parse(u.file,u.instanceConfig)}else j(e.complete)&&e.complete()}function a(){n.splice(0,1),o()}}}function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=g(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new p(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,r){if(this.isFirstChunk&&j(this._config.beforeFirstChunk)){var o=this._config.beforeFirstChunk(e);void 0!==o&&(e=o)}this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+e;this._partialLine="";var c=this._handle.parse(a,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=c.meta.cursor;this._finished||(this._partialLine=a.substring(l-this._baseIndex),this._baseIndex=l),c&&c.data&&(this._rowCount+=c.data.length);var u=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)t.postMessage({results:c,workerId:i.WORKER_ID,finished:u});else if(j(this._config.chunk)&&!r){if(this._config.chunk(c,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);c=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(c.data),this._completeResults.errors=this._completeResults.errors.concat(c.errors),this._completeResults.meta=c.meta),this._completed||!u||!j(this._config.complete)||c&&c.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),u||c&&c.meta.paused||this._nextChunk(),c}this._halted=!0},this._sendError=function(e){j(this._config.error)?this._config.error(e):n&&this._config.error&&t.postMessage({workerId:i.WORKER_ID,error:e,finished:!1})}}function u(e){var t;(e=e||{}).chunkSize||(e.chunkSize=i.RemoteChunkSize),l.call(this,e),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),r||(t.onload=_(this._chunkLoaded,this),t.onerror=_(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var n in e)t.setRequestHeader(n,e[n])}if(this._config.chunkSize){var o=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+o)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}r&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var r=t.statusText||e;this._sendError(new Error(r))}}function s(e){var t,r;(e=e||{}).chunkSize||(e.chunkSize=i.LocalChunkSize),l.call(this,e);var n="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,n?((t=new FileReader).onload=_(this._chunkLoaded,this),t.onerror=_(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var o=Math.min(this._start+this._config.chunkSize,this._input.size);e=r.call(e,this._start,o)}var a=t.readAsText(e,this._config.encoding);n||this._chunkLoaded({target:{result:a}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function d(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,r=this._config.chunkSize;return r?(e=t.substring(0,r),t=t.substring(r)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function f(e){l.call(this,e=e||{});var t=[],r=!0,n=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=_((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=_((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=_((function(){this._streamCleanUp(),n=!0,this._streamData("")}),this),this._streamCleanUp=_((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function p(e){var t,r,n,o=Math.pow(2,53),a=-o,c=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,l=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,u=this,s=0,d=0,f=!1,p=!1,y=[],b={data:[],errors:[],meta:{}};if(j(e.step)){var v=e.step;e.step=function(t){if(b=t,E())w();else{if(w(),0===b.data.length)return;s+=t.data.length,e.preview&&s>e.preview?r.abort():(b.data=b.data[0],v(b,u))}}}function _(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function w(){return b&&n&&(O("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+i.DefaultDelimiter+"'"),n=!1),e.skipEmptyLines&&(b.data=b.data.filter((function(e){return!_(e)}))),E()&&function(){if(b)if(Array.isArray(b.data[0])){for(var t=0;E()&&t<b.data.length;t++)b.data[t].forEach(r);b.data.splice(0,1)}else b.data.forEach(r);function r(t,r){j(e.transformHeader)&&(t=e.transformHeader(t,r)),y.push(t)}}(),function(){if(!b||!e.header&&!e.dynamicTyping&&!e.transform)return b;function t(t,r){var n,o=e.header?{}:[];for(n=0;n<t.length;n++){var a=n,i=t[n];e.header&&(a=n>=y.length?"__parsed_extra":y[n]),e.transform&&(i=e.transform(i,a)),i=k(a,i),"__parsed_extra"===a?(o[a]=o[a]||[],o[a].push(i)):o[a]=i}return e.header&&(n>y.length?O("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+n,d+r):n<y.length&&O("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+n,d+r)),o}var r=1;return!b.data.length||Array.isArray(b.data[0])?(b.data=b.data.map(t),r=b.data.length):b.data=t(b.data,0),e.header&&b.meta&&(b.meta.fields=y),d+=r,b}()}function E(){return e.header&&0===y.length}function k(t,r){return n=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[n]&&(e.dynamicTyping[n]=e.dynamicTypingFunction(n)),!0===(e.dynamicTyping[n]||e.dynamicTyping)?"true"===r||"TRUE"===r||"false"!==r&&"FALSE"!==r&&(function(e){if(c.test(e)){var t=parseFloat(e);if(a<t&&t<o)return!0}return!1}(r)?parseFloat(r):l.test(r)?new Date(r):""===r?null:r):r;var n}function O(e,t,r,n){var o={type:e,code:t,message:r};void 0!==n&&(o.row=n),b.errors.push(o)}this.parse=function(o,a,c){var l=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var r=new RegExp(m(t)+"([^]*?)"+m(t),"gm"),n=(e=e.replace(r,"")).split("\r"),o=e.split("\n"),a=1<o.length&&o[0].length<n[0].length;if(1===n.length||a)return"\n";for(var i=0,c=0;c<n.length;c++)"\n"===n[c][0]&&i++;return i>=n.length/2?"\r\n":"\r"}(o,l)),n=!1,e.delimiter)j(e.delimiter)&&(e.delimiter=e.delimiter(o),b.meta.delimiter=e.delimiter);else{var u=function(t,r,n,o,a){var c,l,u,s;a=a||[",","\t","|",";",i.RECORD_SEP,i.UNIT_SEP];for(var d=0;d<a.length;d++){var f=a[d],p=0,m=0,y=0;u=void 0;for(var b=new h({comments:o,delimiter:f,newline:r,preview:10}).parse(t),v=0;v<b.data.length;v++)if(n&&_(b.data[v]))y++;else{var g=b.data[v].length;m+=g,void 0!==u?0<g&&(p+=Math.abs(g-u),u=g):u=g}0<b.data.length&&(m/=b.data.length-y),(void 0===l||p<=l)&&(void 0===s||s<m)&&1.99<m&&(l=p,c=f,s=m)}return{successful:!!(e.delimiter=c),bestDelimiter:c}}(o,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);u.successful?e.delimiter=u.bestDelimiter:(n=!0,e.delimiter=i.DefaultDelimiter),b.meta.delimiter=e.delimiter}var s=g(e);return e.preview&&e.header&&s.preview++,t=o,r=new h(s),b=r.parse(t,a,c),w(),f?{meta:{paused:!0}}:b||{meta:{paused:!1}}},this.paused=function(){return f},this.pause=function(){f=!0,r.abort(),t=j(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){u.streamer._halted?(f=!1,u.streamer.parseChunk(t,!0)):setTimeout(u.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,r.abort(),b.meta.aborted=!0,j(e.complete)&&e.complete(b),t=""}}function m(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function h(e){var t,r=(e=e||{}).delimiter,n=e.newline,o=e.comments,a=e.step,c=e.preview,l=e.fastMode,u=t=void 0===e.quoteChar||null===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(u=e.escapeChar),("string"!=typeof r||-1<i.BAD_DELIMITERS.indexOf(r))&&(r=","),o===r)throw new Error("Comment character same as delimiter");!0===o?o="#":("string"!=typeof o||-1<i.BAD_DELIMITERS.indexOf(o))&&(o=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var s=0,d=!1;this.parse=function(i,f,p){if("string"!=typeof i)throw new Error("Input must be a string");var h=i.length,y=r.length,b=n.length,v=o.length,g=j(a),_=[],w=[],E=[],k=s=0;if(!i)return Y();if(e.header){var O=i.split(n)[0].split(r),S=[],C={},T=!1;for(var A in O){var P=O[A];j(e.transformHeader)&&(P=e.transformHeader(P,A));var I=P,L=C[P]||0;0<L&&(T=!0,I=P+"_"+L),C[P]=L+1,S.push(I)}if(T){var D=i.split(n);D[0]=S.join(r),i=D.join(n)}}if(l||!1!==l&&-1===i.indexOf(t)){for(var N=i.split(n),x=0;x<N.length;x++){if(E=N[x],s+=E.length,x!==N.length-1)s+=n.length;else if(p)return Y();if(!o||E.substring(0,v)!==o){if(g){if(_=[],V(E.split(r)),q(),d)return Y()}else V(E.split(r));if(c&&c<=x)return _=_.slice(0,c),Y(!0)}}return Y()}for(var R=i.indexOf(r,s),M=i.indexOf(n,s),B=new RegExp(m(u)+m(t),"g"),F=i.indexOf(t,s);;)if(i[s]!==t)if(o&&0===E.length&&i.substring(s,s+v)===o){if(-1===M)return Y();s=M+b,M=i.indexOf(n,s),R=i.indexOf(r,s)}else if(-1!==R&&(R<M||-1===M))E.push(i.substring(s,R)),s=R+y,R=i.indexOf(r,s);else{if(-1===M)break;if(E.push(i.substring(s,M)),H(M+b),g&&(q(),d))return Y();if(c&&_.length>=c)return Y(!0)}else for(F=s,s++;;){if(-1===(F=i.indexOf(t,F+1)))return p||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_.length,index:s}),W();if(F===h-1)return W(i.substring(s,F).replace(B,t));if(t!==u||i[F+1]!==u){if(t===u||0===F||i[F-1]!==u){-1!==R&&R<F+1&&(R=i.indexOf(r,F+1)),-1!==M&&M<F+1&&(M=i.indexOf(n,F+1));var U=z(-1===M?R:Math.min(R,M));if(i.substr(F+1+U,y)===r){E.push(i.substring(s,F).replace(B,t)),i[s=F+1+U+y]!==t&&(F=i.indexOf(t,s)),R=i.indexOf(r,s),M=i.indexOf(n,s);break}var G=z(M);if(i.substring(F+1+G,F+1+G+b)===n){if(E.push(i.substring(s,F).replace(B,t)),H(F+1+G+b),R=i.indexOf(r,s),F=i.indexOf(t,s),g&&(q(),d))return Y();if(c&&_.length>=c)return Y(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:_.length,index:s}),F++}}else F++}return W();function V(e){_.push(e),k=s}function z(e){var t=0;if(-1!==e){var r=i.substring(F+1,e);r&&""===r.trim()&&(t=r.length)}return t}function W(e){return p||(void 0===e&&(e=i.substring(s)),E.push(e),s=h,V(E),g&&q()),Y()}function H(e){s=e,V(E),E=[],M=i.indexOf(n,s)}function Y(e){return{data:_,errors:w,meta:{delimiter:r,linebreak:n,aborted:d,truncated:!!e,cursor:k+(f||0)}}}function q(){a(Y()),_=[],w=[]}},this.abort=function(){d=!0},this.getCharIndex=function(){return s}}function y(e){var t=e.data,r=o[t.workerId],n=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var a={abort:function(){n=!0,b(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(j(r.userStep)){for(var i=0;i<t.results.data.length&&(r.userStep({data:t.results.data[i],errors:t.results.errors,meta:t.results.meta},a),!n);i++);delete t.results}else j(r.userChunk)&&(r.userChunk(t.results,a,t.file),delete t.results)}t.finished&&!n&&b(t.workerId,t.results)}function b(e,t){var r=o[e];j(r.userComplete)&&r.userComplete(t),r.terminate(),delete o[e]}function v(){throw new Error("Not implemented.")}function g(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var r in e)t[r]=g(e[r]);return t}function _(e,t){return function(){e.apply(t,arguments)}}function j(e){return"function"==typeof e}return n&&(t.onmessage=function(e){var r=e.data;if(void 0===i.WORKER_ID&&r&&(i.WORKER_ID=r.workerId),"string"==typeof r.input)t.postMessage({workerId:i.WORKER_ID,results:i.parse(r.input,r.config),finished:!0});else if(t.File&&r.input instanceof File||r.input instanceof Object){var n=i.parse(r.input,r.config);n&&t.postMessage({workerId:i.WORKER_ID,results:n,finished:!0})}}),(u.prototype=Object.create(l.prototype)).constructor=u,(s.prototype=Object.create(l.prototype)).constructor=s,(d.prototype=Object.create(d.prototype)).constructor=d,(f.prototype=Object.create(l.prototype)).constructor=f,i},void 0===(a="function"==typeof n?n.apply(t,o):n)||(e.exports=a)},3832:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));r(113);var n=r(35),o=r(0),a=r(42),i=r(13),c=r.n(i),l="styles-module_iconAction_3ZFFk",u=["iconName","className"],s=["tooltip"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function f(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=function(e){var t=e.iconName,r=e.className,n=f(e,u);return o.createElement("button",d({type:"button"},n,{className:c()(l,r)}),o.createElement(a.b,{name:t,size:20}))},m=function(e){var t=e.tooltip,r=f(e,s);return t?o.createElement(n.a,{placement:"bottom",title:t},o.createElement(p,r)):o.createElement(p,r)}},3837:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return a}));var n="data-lark-popup-container",o="data-lark-doc-embed",a="doc_embed"},3839:function(e,t,r){"use strict";var n=r(0),o=r(3488),a=r.n(o),i=r(3473),c=r(3480);t.a=function(e,t){Object(n.useEffect)((function(){var r=new URLSearchParams(window.location.search);if("doc_embed"!==r.get("view")&&!r.get("inner")&&"Thread"!==t.type)return t.abilities&&t.abilities.update&&a()(c.e.edit.key,(function(r){var n=r.target;"INPUT"!==n.tagName&&(n.isContentEditable&&!n.classList.contains("textarea-cell")||("Sheet"===t.type||"Table"===t.type?i.a.saveSheetPosition(t.id):i.a.saveReadPosition(t.id),window.location.href="/".concat(e.namespace,"/").concat(t.slug,"/edit")))})),function(){a.a.unbind(c.e.edit.key)}}),[])}},3851:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));r(64);var n=r(21),o=r(0),a=r.n(o),i=r(42),c={playBtn:"index-module_playBtn_5wHuG"};function l(){return a.a.createElement(n.a,{className:c.playBtn,onClick:function(){return window.postMessage("show:play")}},a.a.createElement(i.b,{name:"play",width:8,height:12}),__("播放"))}},3856:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(3635),o=r(553),a=Object(o.a)({loader:function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(10),r.e(112)]).then(r.bind(null,3885)).then((function(e){return e.PresentationRender}))},loading:n.a}),i=Object(o.a)({loader:function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(10),r.e(112)]).then(r.bind(null,3885))},loading:n.a});t.b=i},3874:function(e,t,r){"use strict";t.a={logoWrapper:"ViewerHeader-module_logoWrapper_nnDzf",navigation:"ViewerHeader-module_navigation_opJY6",logoWrapperActive:"ViewerHeader-module_logoWrapperActive_Ptc2p",logo:"ViewerHeader-module_logo_-rHiY",wrapper:"ViewerHeader-module_wrapper_vhIJ4",mark:"ViewerHeader-module_mark_c28hV",collaborate:"ViewerHeader-module_collaborate_VW8td",iconWrapper:"ViewerHeader-module_iconWrapper_Wis4F",icon:"ViewerHeader-module_icon_TPz6f",playButton:"ViewerHeader-module_playButton_3Qm5h",skylink:"ViewerHeader-module_skylink_toi1A",popoverMore:"ViewerHeader-module_popoverMore_JrUsz",editorBtn:"ViewerHeader-module_editorBtn_Sb8OT",versionSelector:"ViewerHeader-module_versionSelector_Gx9Eb",versionName:"ViewerHeader-module_versionName_4oYUk",logoOnboardingWrapper:"ViewerHeader-module_logoOnboardingWrapper_VyXtw",search:"ViewerHeader-module_search_fw9Jl",collabEntry:"ViewerHeader-module_collabEntry_XfPGf",larkDotZoom:"ViewerHeader-module_larkDotZoom_NeG+z"}},3899:function(e,t,r){"use strict";r(267);var n=r(127),o=(r(64),r(21)),a=r(0),i=r.n(a),c=r(13),l=r.n(c),u=r(3832),s={container:"index-module_container_cvFEw",descImg:"index-module_descImg_yuOS4",title:"index-module_title_xRvvb",firstLine:"index-module_firstLine_1EISJ",description:"index-module_description_DuIJN",footer:"index-module_footer_W9yDd",detailBtn:"index-module_detailBtn_GSAtM",shareBtn:"index-module_shareBtn_vdQ5k"};function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.a=function(e){var t,r=e.onShare,c=e.noButton,p=e.overlayClassName,m=e.type,h=e.onChangeShareStatus,y=e.restProps,b=f(Object(a.useState)(!1),2),v=b[0],g=b[1],_=function(e,t){"function"==typeof h&&t&&h(e,t),g(e)};return t=c?i.a.createElement("span",{onClick:function(){return g(!0)},style:{display:"block"}},__("分享到花园")):i.a.createElement(u.a,d({iconName:"digitalgarden",tooltip:__("分享到花园")},y)),i.a.createElement(i.a.Fragment,null,i.a.createElement(n.a,{content:i.a.createElement("div",{className:s.container},i.a.createElement("img",{className:s.descImg,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*ljInRZpwD6UAAAAAAAAAAAAAARQnAQ",alt:""}),i.a.createElement("p",{className:s.title},__("分享到花园")),i.a.createElement("p",{className:l()(s.description,s.firstLine)},__("推送内容会出现在粉丝的「逛逛-关注」里")),i.a.createElement("p",{className:s.description},__("并同步到你的"),i.a.createElement("a",{href:"/".concat(window.appData.me.login),target:"_blank"},__("我的花园")),__("的「更新」模块")),i.a.createElement("div",{className:s.footer},i.a.createElement(o.a,{className:s.detailBtn,onClick:function(){window.open(window.appData.isYuque?"https://www.yuque.com/yuque/mgcsc6/xtgy5c":"https://yuque.antfin.com/lark/xwhu77/lhqpnw")}},__("查看介绍")),i.a.createElement(o.a,{className:s.shareBtn,type:"primary",onClick:function(){_(!1,!0),r()}},__("确认")))),trigger:"click",noArrow:!0,visible:v,placement:"bottomRight",overlayClassName:l()(p),onVisibleChange:_,getPopupContainer:function(e){return"note"===m?e.closest(".note-list-item").querySelector(".note-item"):e.parentNode}},t))}},3939:function(e,t,r){"use strict";var n=r(1766);t.a=n.a},3961:function(e,t,r){"use strict";r(95);var n=r(49),o=r(0),a=r.n(o),i=r(75),c=r(59),l=r(118),u=r(385),s="BookStatisticsLimit-module_wrapper_CrRJ2",d="BookStatisticsLimit-module_content_akwox",f="BookStatisticsLimit-module_title_ejahI",p="BookStatisticsLimit-module_desc_c-ita",m="BookStatisticsLimit-module_img_Thh7u";function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(){y=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),c=new C(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d={};function f(){}function p(){}function m(){}var b={};l(b,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==t&&r.call(g,a)&&(b=g);var _=m.prototype=f.prototype=Object.create(b);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==h(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return A()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=k(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=m,n(_,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},j(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function b(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}t.a={hasAbility:function(){return Object(u.getInterest)().interests[l.INTEREST_CODE.book_statistics]},showMemberIntro:function(){var e,t,r,o,l,u,h=null===(e=window)||void 0===e?void 0:e.appData,v=h.organization,g=h.group,_=h.me,j=null==v?void 0:v.id,w=null==v||null===(t=v.abilities)||void 0===t?void 0:t.destroy,E={collab:{title:__("你正在协作的知识库无此权限"),btnText:__("知道了"),btnAction:function(){}},member:{title:__("开通会员可享知识库统计功能"),desc:__("开通会员可查看知识库的详细统计，如文档数、点赞数、知识库各文档的阅读点赞数等。"),btnText:__("开通会员"),btnAction:function(){var e;return null===(e=window.__member_message_ref)||void 0===e?void 0:e.current.showMemberIntro(c.LIMIT_SCENE.book_statistics)}},organization:{title:__("专业版、旗舰版空间专属功能"),desc:__("知识库统计可以查看知识库内容数据统计和阅读、点赞、评论等访问数据统计。"),btnText:w?i.a.getPaymentActionGuide(null==v?void 0:v.payment_type):__("我知道了"),btnAction:function(){return w&&window.open("/r/organizations/dashboard/cashier?action=buy","","noopener,noreferrer")}}},k=g&&_&&g.id!==_.id;u=j?E.organization:k?E.collab:E.member,n.a.info({width:480,closable:!0,maskClosable:!0,centered:!0,className:s,content:a.a.createElement("div",null,a.a.createElement("img",{className:m,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*Wl-qQ4teHLUAAAAAAAAAAAAAARQnAQ"}),a.a.createElement("div",{className:d},a.a.createElement("p",{className:f},null===(r=u)||void 0===r?void 0:r.title),a.a.createElement("p",{className:p},null===(o=u)||void 0===o?void 0:o.desc))),okText:null===(l=u)||void 0===l?void 0:l.btnText,onOk:function(){return(e=y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=u)||void 0===t||t.btnAction();case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){b(a,n,o,i,c,"next",e)}function c(e){b(a,n,o,i,c,"throw",e)}i(void 0)}))})();var e}})}}},3973:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),o=r(4096);function a(){var e=Object(n.useContext)(o.a);if(!e)throw new Error("Managers not found, please use ManagersProvider");return e}},4026:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));r(113);var n=r(35),o=(r(64),r(21)),a=r(0),i=r(62),c=r(198),l=r(532),u=function(e){var t,r,u=e.doc,s=e.book,d=e.group,f=Object(i.useHistory)(),p=a.useMemo((function(){var e,t;return Object(c.c)({type:"book",target:s,group:d})!==l.PRIVACY.private?null!==(t=s.abilities)&&void 0!==t&&t.read_private?__("当前文档归属公开知识库，你和游客都可查看完整的知识库目录"):__("当前文档归属公开知识库，你可查看完整的知识库目录"):null!==(e=s.abilities)&&void 0!==e&&e.read_private?__("你拥有知识库权限，可回到知识库目录中查看，游客不可见该功能"):void 0}),[s,d]),m=a.createElement(o.a,{onClick:function(){var e=new URLSearchParams(f.location.search);e.delete("singleDoc"),f.push({pathname:f.location.pathname,search:"?".concat(e.toString())}),window.location.reload()}},null!==(t=s.abilities)&&void 0!==t&&t.read||null===(r=u.abilities)||void 0===r||!r.update?__("回到知识库"):__("查看原始文档"));return p?a.createElement(n.a,{placement:"bottom",title:p||""},m):m}},4033:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(25),o=r.n(n),a=r(4095);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function s(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"model",{visible:!1,currentPanel:null,containerStyle:{}}),s(this,"_renderInstanceCachedMap",new Map),s(this,"_shouldCachedSet",new Set),s(this,"_contentMap",new Map),s(this,"_renderer",a.b),s(this,"_subscribers",new Set),s(this,"_deferedPanel",{}),s(this,"emitter",void 0),e.inited&&(console.error("[SidePanelManager] manager has been inited, please check usage, e.g. ManagerProvider is used at two different places."),console.error("[SidePanelManager] if it's caused by HMR, ingore this")),e.inited=!0,this.emitter=new o.a}var t,r,n;return t=e,(r=[{key:"render",value:function(e){var t=this;this.model=l(l({},this.model),e),this._renderer(this.model),this._subscribers.forEach((function(e){e({visible:t.model.visible,currentPanel:t.model.currentPanel})}))}},{key:"getPanelContent",value:function(e){var t=this._contentMap.get(e);return t||console.warn("%s Panel not found, you should check registry",e),t||a.a}},{key:"registerContent",value:function(e,t,r){this._contentMap.set(e,t),null!=r&&r.cached&&this._shouldCachedSet.add(e),this._deferedPanel.panel&&(this.show(this._deferedPanel.panel,this._deferedPanel.options),this._deferedPanel={})}},{key:"registerCachedPanelInstance",value:function(e,t){this._shouldCachedSet.has(e)&&this._renderInstanceCachedMap.set(e,t)}},{key:"getCachedPanelInstance",value:function(e){return this._renderInstanceCachedMap.get(e)}},{key:"setRenderer",value:function(e){this._renderer=e}},{key:"show",value:function(e,t){e!==this.model.currentPanel&&(this._contentMap.get(e)?this.render({visible:!0,currentPanel:e,panelProps:null==t?void 0:t.panelProps,containerStyle:null==t?void 0:t.containerStyle}):this._deferedPanel={panel:e,options:t})}},{key:"hide",value:function(e){e?this.flushCacheByPanel(e):this.flushCaches(),e&&this.model.currentPanel!==e||this.render({visible:!1,currentPanel:null,panelProps:{},containerStyle:{}})}},{key:"subscribe",value:function(e){var t=this;return this._subscribers.add(e),function(){t._subscribers.delete(e)}}},{key:"flushCacheByPanel",value:function(e){this._renderInstanceCachedMap.delete(e)}},{key:"flushCaches",value:function(){this._renderInstanceCachedMap.clear()}},{key:"flushPanels",value:function(){this._shouldCachedSet.clear(),this._contentMap.clear()}},{key:"flushSubscribers",value:function(){this._subscribers.clear()}},{key:"flushAll",value:function(){this.flushCaches(),this.flushPanels()}}])&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();s(f,"inited",!1)},4036:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return c}));var n=r(0),o=r.n(n);var a=Object(n.createContext)({showHistory:function(){}});function i(e){return o.a.createElement(a.Provider,{value:e},e.children)}function c(){return Object(n.useContext)(a)}},4037:function(e,t,r){var n={"./AboutIcon1.js":[734],"./AboutIcon2.js":[735],"./AboutIcon3.js":[736],"./AboutIcon4.js":[737],"./AboutRight.js":[964],"./ActionCopy.js":[1395],"./ActionDelete.js":[570],"./ActionDocInfo.js":[1657],"./ActionExport.js":[1396],"./ActionMobile.js":[738],"./ActionMove.js":[1397],"./ActionPrint.js":[739],"./ActionSaveAs.js":[1360],"./ActionSubmenu.js":[965],"./ActionVersion.js":[740],"./Add.js":[571],"./AddHollow.js":[1521],"./AddList.js":[1398],"./AddToCatalog.js":[1522],"./Addlink.js":[741],"./Addnav.js":[1399],"./AddressBook.js":[1150],"./AdvancedSearch.js":[742],"./AliYuque.js":[1523],"./Alibaba.js":[1361],"./AnchorRect.js":[1362],"./AnnouncementEdit.js":[1400],"./AntdDown.js":[743],"./AntdSync.js":[744],"./AntdUndo.js":[745],"./AntdUp.js":[746],"./AntdWarning.js":[747],"./AppBubble.js":[748],"./Architecture.js":[1524],"./AreaComment.js":[1401],"./ArrowDown.js":[457],"./ArrowLeft.js":[695],"./ArrowLeft2.js":[966],"./ArrowLeft3.js":[967],"./ArrowOutlined.js":[932],"./ArrowRight.js":[968],"./ArrowUp.js":[969],"./Assignee.js":[749],"./Assistance.js":[1219],"./Avatar.js":[1151],"./AvatarDark.js":[1152],"./AvatarUpload.js":[572],"./Avatarvip.js":[1246],"./Backlog.js":[1197],"./Beta.js":[1247],"./Book.js":[1525],"./BookFill.js":[1328],"./BookIconAlibaba.js":[852],"./BookIconAlipay.js":[853],"./BookIconTaobao.js":[854],"./BookIconTopic.js":[904],"./BookIconTopicDark.js":[905],"./BookIconYuque.js":[906],"./BookIconYuqueDark.js":[907],"./BookNewCreate.js":[1329],"./BookTemporaryStorage.js":[1363],"./BookTypeBlog.js":[908],"./BookTypeBlogDark.js":[909],"./BookTypeDefault.js":[910],"./BookTypeDefault2.js":[1364],"./BookTypeDefaultDark.js":[911],"./BookTypeDesign.js":[912],"./BookTypeDesign2.js":[1365],"./BookTypeDesignDark.js":[913],"./BookTypeImport.js":[914],"./BookTypeImport2.js":[1366],"./BookTypeImportDark.js":[915],"./BookTypeManual.js":[916],"./BookTypeManualDark.js":[917],"./BookTypeNotes.js":[918],"./BookTypeNotesDark.js":[919],"./BookTypeProject.js":[920],"./BookTypeProjectDark.js":[921],"./BookTypeReports.js":[922],"./BookTypeReportsDark.js":[923],"./BookTypeResource.js":[924],"./BookTypeResource2.js":[726],"./BookTypeResourceDark.js":[925],"./BookTypeSheet.js":[926],"./BookTypeSheetDark.js":[927],"./BookTypeThread.js":[928],"./BookTypeThread2.js":[1367],"./BookTypeThreadDark.js":[929],"./BookTypeTravel.js":[930],"./BookTypeTravelDark.js":[931],"./BooksIconAixin.js":[855],"./BooksIconAlibaba.js":[856],"./BooksIconBaozhi.js":[857],"./BooksIconBianzu.js":[858],"./BooksIconBianzu15.js":[859],"./BooksIconBiaoge.js":[860],"./BooksIconBiaoqian.js":[861],"./BooksIconBikan.js":[862],"./BooksIconBoke.js":[863],"./BooksIconChanpinwendang.js":[864],"./BooksIconChucun.js":[865],"./BooksIconDabiaowenjian.js":[866],"./BooksIconDefault.js":[867],"./BooksIconDengpao.js":[868],"./BooksIconDuihua.js":[869],"./BooksIconGerendangan.js":[870],"./BooksIconHuabao.js":[871],"./BooksIconHuati.js":[872],"./BooksIconHuati2.js":[873],"./BooksIconHudun.js":[874],"./BooksIconHuojian.js":[875],"./BooksIconHuowu.js":[876],"./BooksIconJiami.js":[877],"./BooksIconJiangbei.js":[878],"./BooksIconJihua.js":[879],"./BooksIconLanqiu.js":[880],"./BooksIconLingdang.js":[881],"./BooksIconLiucheng.js":[882],"./BooksIconMubiao.js":[883],"./BooksIconPenzai.js":[884],"./BooksIconQiqiu.js":[885],"./BooksIconQunzu.js":[886],"./BooksIconRenwuliebiao.js":[887],"./BooksIconRili.js":[888],"./BooksIconSuozhu.js":[889],"./BooksIconTongxunlu.js":[890],"./BooksIconTuandui.js":[891],"./BooksIconWendang.js":[892],"./BooksIconWengao.js":[893],"./BooksIconWenjiandai.js":[894],"./BooksIconWenjiandai2.js":[895],"./BooksIconWenjianjia.js":[896],"./BooksIconXiezuo.js":[897],"./BooksIconXinfeng.js":[898],"./BooksIconXingquxiaozu.js":[899],"./BooksIconXuexibiji.js":[900],"./BooksIconYingyuxuexi.js":[901],"./BooksIconYuqueLogo.js":[902],"./BooksIconZhiding.js":[903],"./BulkOperations.js":[1402],"./Canceled.js":[1198],"./Card.js":[1020],"./CardStyle.js":[1526],"./CardView.js":[946],"./CardView2.js":[1187],"./Caretleftoutlined.js":[970],"./Catalog.js":[1527],"./CatalogCaret.js":[1368],"./CatalogCreateLink.js":[750],"./CatalogCreateTitle.js":[1528],"./CatalogExpand.js":[1529],"./CatalogFold.js":[1530],"./CatalogMore.js":[751],"./Change.js":[1403],"./Check.js":[1404],"./CheckFill.js":[1405],"./CheckOutlined.js":[593],"./Chinese.js":[752],"./Clear.js":[1406],"./Close.js":[458],"./CloseOpenInapp.js":[1407],"./CloseOutline.js":[1408],"./CloseOutlined.js":[426],"./Closecircleoutlined.js":[1409],"./Cloud.js":[753],"./CollabBook.js":[754],"./CollabOutlined.js":[755],"./Collapse.js":[1410],"./CommentArrow.js":[971],"./CommentBubble.js":[1411],"./CommentEdit.js":[1412],"./CommentEdit2.js":[1413],"./CommentHide.js":[1658],"./CommentMore.js":[756],"./CommentReaction.js":[1414],"./CommentReply.js":[757],"./CommentTimeline.js":[758],"./CommentTrash.js":[1415],"./Comments.js":[1416],"./CommentsPara.js":[1417],"./Compass.js":[1330],"./Concern.js":[759],"./Connect.js":[1674],"./CostDetail.js":[760],"./CreateBook.js":[1369],"./CreateStudyNote.js":[1370],"./CreateTodo.js":[1371],"./CreateWeeklyReport.js":[1372],"./CupColor.js":[761],"./Cut.js":[1418],"./Date.js":[947],"./Delete.js":[1419],"./DeleteSolid.js":[1188],"./Demonstration.js":[1086],"./DemonstrationDark.js":[1087],"./Department.js":[762],"./Dept.js":[763],"./DiamondGold.js":[1248],"./DiamondGray.js":[1249],"./Digitalgarden.js":[1275],"./DingdingFilled.js":[1550],"./DingdingLine.js":[1551],"./Dingtalk.js":[1552],"./Directory.js":[1531],"./DocAdapt.js":[933],"./DocData.js":[1220],"./DocDataDark.js":[1221],"./DocFixed.js":[934],"./DocHasContentRisk.js":[764],"./DocHasNewContent.js":[1659],"./DocManagement.js":[1532],"./DocOutline.js":[1021],"./DocQuickCreate.js":[1420],"./DocStyle.js":[765],"./DocTypeActiontag.js":[992],"./DocTypeActiontagDark.js":[993],"./DocTypeArtboard.js":[994],"./DocTypeArtboardDark.js":[995],"./DocTypeBoard.js":[996],"./DocTypeBoardDark.js":[997],"./DocTypeDefault.js":[998],"./DocTypeDefaultDark.js":[999],"./DocTypeGroup.js":[1e3],"./DocTypeGroupDark.js":[1001],"./DocTypeLink.js":[1002],"./DocTypeLinkDark.js":[1003],"./DocTypeMarkdown.js":[1004],"./DocTypeMarkdownDark.js":[1005],"./DocTypeMind.js":[1006],"./DocTypeMindDark.js":[1007],"./DocTypeNote.js":[1008],"./DocTypeNoteDark.js":[1009],"./DocTypeSheet.js":[1010],"./DocTypeSheetDark.js":[1011],"./DocTypeShow.js":[1012],"./DocTypeShowDark.js":[1013],"./DocTypeTable.js":[1014],"./DocTypeTableDark.js":[1015],"./DocTypeTask.js":[1016],"./DocTypeTaskDark.js":[1017],"./DocTypeThread.js":[1018],"./DocTypeThreadDark.js":[1019],"./Docs.js":[766],"./DoubleArrowDown.js":[767],"./DoubleClick.js":[768],"./Doubleright.js":[972],"./Down.js":[973],"./DownArrow.js":[974],"./DownMiniarrow.js":[975],"./Downcircle.js":[976],"./Download.js":[1421],"./Download2.js":[1422],"./Drag.js":[573],"./Dynamic.js":[1174],"./Dynamic2.js":[769],"./Edit.js":[1022],"./EditBorder.js":[1423],"./EditCard.js":[1023],"./EditDate.js":[948],"./EditDraw.js":[1024],"./EditEvent.js":[1025],"./EditMember.js":[949],"./EditNoBorder.js":[1424],"./EditOutline.js":[1026],"./EditPreview.js":[1425],"./EditReadme.js":[1027],"./EditSolid.js":[935],"./EditSudoku.js":[1331],"./EditTable.js":[1028],"./EditorAlignmentCenter.js":[1029],"./EditorAlignmentLeft.js":[1030],"./EditorAlignmentRight.js":[1031],"./EditorBgColor.js":[1032],"./EditorBold.js":[1033],"./EditorCard.js":[1034],"./EditorCellBgColor.js":[1035],"./EditorClearFormat.js":[1036],"./EditorCode.js":[1037],"./EditorCodeblock.js":[1038],"./EditorColor.js":[1039],"./EditorCommand.js":[1040],"./EditorFindandreplace.js":[1041],"./EditorFontsize.js":[1042],"./EditorFormatPainter.js":[1043],"./EditorH1.js":[1044],"./EditorH2.js":[1045],"./EditorH3.js":[1046],"./EditorH4.js":[1047],"./EditorH5.js":[1048],"./EditorH6.js":[1049],"./EditorHr.js":[1050],"./EditorImage.js":[1051],"./EditorImages.js":[557],"./EditorIndent.js":[1052],"./EditorInlinecode.js":[1053],"./EditorItalic.js":[1054],"./EditorLineHeight.js":[1055],"./EditorLink.js":[1056],"./EditorMainAite.js":[1567],"./EditorMainAiteDark.js":[1568],"./EditorMainAttachment.js":[1569],"./EditorMainAttachmentDark.js":[1570],"./EditorMainCalendar.js":[1571],"./EditorMainCalendarDark.js":[1572],"./EditorMainClockIn.js":[1573],"./EditorMainClockInDark.js":[1574],"./EditorMainCodeBlock.js":[1575],"./EditorMainCodeBlockDark.js":[1576],"./EditorMainColumnSplitting.js":[1577],"./EditorMainColumnSplittingDark.js":[1578],"./EditorMainDataTableCardView.js":[1579],"./EditorMainDataTableCardViewDark.js":[1580],"./EditorMainDataTableGridView.js":[1581],"./EditorMainDataTableGridViewDark.js":[1582],"./EditorMainDataTableKanbanView.js":[1583],"./EditorMainDataTableKanbanViewDark.js":[1584],"./EditorMainDrawingBoard.js":[1585],"./EditorMainDrawingBoardDark.js":[1586],"./EditorMainEncryptedText.js":[1587],"./EditorMainEncryptedTextDark.js":[1588],"./EditorMainExpression.js":[1589],"./EditorMainExpressionDark.js":[1590],"./EditorMainFiveColumns.js":[1591],"./EditorMainFiveColumnsDark.js":[1592],"./EditorMainFlowchart.js":[1593],"./EditorMainFlowchartDark.js":[1594],"./EditorMainFoldingBlock.js":[1595],"./EditorMainFoldingBlockDark.js":[1596],"./EditorMainFormula.js":[1597],"./EditorMainFormulaDark.js":[1598],"./EditorMainFourColumns.js":[1599],"./EditorMainFourColumnsDark.js":[1600],"./EditorMainHighlightBlock.js":[1601],"./EditorMainHighlightBlockDark.js":[1602],"./EditorMainImage.js":[1603],"./EditorMainImageDark.js":[1604],"./EditorMainImages.js":[1605],"./EditorMainImagesDark.js":[1606],"./EditorMainInlineCode.js":[1607],"./EditorMainInlineCodeDark.js":[1608],"./EditorMainLink.js":[1609],"./EditorMainLinkDark.js":[1610],"./EditorMainLocalAudio.js":[1611],"./EditorMainLocalAudioDark.js":[1612],"./EditorMainLocalFile.js":[1613],"./EditorMainLocalFileDark.js":[1614],"./EditorMainLocalVideo.js":[1615],"./EditorMainLocalVideoDark.js":[1616],"./EditorMainMindMap.js":[1617],"./EditorMainMindMapDark.js":[1618],"./EditorMainOrderedList.js":[1619],"./EditorMainOrderedListDark.js":[1620],"./EditorMainReference.js":[1621],"./EditorMainReferenceDark.js":[1622],"./EditorMainSixColumns.js":[1623],"./EditorMainSixColumnsDark.js":[1624],"./EditorMainSplitLine.js":[1625],"./EditorMainSplitLineDark.js":[1626],"./EditorMainStatus.js":[1627],"./EditorMainStatusDark.js":[1628],"./EditorMainTable.js":[1629],"./EditorMainTableDark.js":[1630],"./EditorMainTaskList.js":[1631],"./EditorMainTaskListDark.js":[1632],"./EditorMainTextDrawing.js":[1633],"./EditorMainTextDrawingDark.js":[1634],"./EditorMainThreeColumns.js":[1635],"./EditorMainThreeColumnsDark.js":[1636],"./EditorMainTitle1.js":[1637],"./EditorMainTitle1Dark.js":[1638],"./EditorMainTitle2.js":[1639],"./EditorMainTitle2Dark.js":[1640],"./EditorMainTitle3.js":[1641],"./EditorMainTitle3Dark.js":[1642],"./EditorMainTitle4.js":[1643],"./EditorMainTitle4Dark.js":[1644],"./EditorMainTitle5.js":[1645],"./EditorMainTitle5Dark.js":[1646],"./EditorMainTitle6.js":[1647],"./EditorMainTitle6Dark.js":[1648],"./EditorMainUml.js":[1649],"./EditorMainUmlDark.js":[1650],"./EditorMainUnorderedList.js":[1651],"./EditorMainUnorderedListDark.js":[1652],"./EditorMainVote.js":[1653],"./EditorMainVoteDark.js":[1654],"./EditorMainYuqueContent.js":[1655],"./EditorMainYuqueContentDark.js":[1656],"./EditorMath.js":[1057],"./EditorMention.js":[1426],"./EditorMergeCell.js":[1058],"./EditorOpenLibrary.js":[1059],"./EditorOpenSearchpanel.js":[1060],"./EditorOpenTranslatepanel.js":[1061],"./EditorOption.js":[1062],"./EditorOrderedList.js":[1063],"./EditorOutdent.js":[1064],"./EditorParagraph.js":[1065],"./EditorPaste.js":[1066],"./EditorPasteText.js":[1067],"./EditorPasteplaintext.js":[1068],"./EditorPick.js":[1250],"./EditorQuote.js":[1069],"./EditorRedo.js":[1070],"./EditorSave.js":[1071],"./EditorShortcut.js":[770],"./EditorStrikethrough.js":[1072],"./EditorSub.js":[1073],"./EditorSup.js":[1074],"./EditorTable.js":[1075],"./EditorTaskList.js":[1076],"./EditorToggleBorder.js":[1077],"./EditorUnderline.js":[1078],"./EditorUndo.js":[1079],"./EditorUnorderedList.js":[1080],"./EditorVerticalAlignBottom.js":[1081],"./EditorVerticalAlignMiddle.js":[1082],"./EditorVerticalAlignTop.js":[1083],"./EllipsisOutlined.js":[936],"./Email.js":[771],"./EnSpacepaymentBusiness.js":[1251],"./English.js":[772],"./Enter.js":[977],"./Exclamationcircle.js":[1660],"./Exclamationcirclefilled.js":[696],"./Expand.js":[1427],"./ExpandOutline.js":[1428],"./ExpireBook.js":[1332],"./ExpireDoc.js":[773],"./ExpireMember.js":[774],"./ExpireResource.js":[775],"./ExportX.js":[1429],"./ExternalContacts.js":[1675],"./Failed.js":[1276],"./Feather.js":[1175],"./FeatherColor.js":[1430],"./FeatherOutlined.js":[1333],"./FeatureGuideClose.js":[1431],"./FileAi.js":[1100],"./FileAiDark.js":[1101],"./FileAudio.js":[1102],"./FileAudioDark.js":[1103],"./FileAxure.js":[1104],"./FileAxureDark.js":[1105],"./FileDefault.js":[1106],"./FileDefaultDark.js":[1107],"./FileDoc.js":[1108],"./FileDocDark.js":[1109],"./FileExcel.js":[1110],"./FileExcelDark.js":[1111],"./FileFolder.js":[1112],"./FileFolderDark.js":[1113],"./FileGraffle.js":[1114],"./FileGraffleDark.js":[1115],"./FileImage.js":[1116],"./FileImageDark.js":[1117],"./FileKeynote.js":[1118],"./FileKeynoteDark.js":[1119],"./FileMindmap.js":[1120],"./FileMindmapDark.js":[1121],"./FileMindnode.js":[1122],"./FileMindnodeDark.js":[1123],"./FileNumbers.js":[1124],"./FileNumbersDark.js":[1125],"./FilePdf.js":[1126],"./FilePdfDark.js":[1127],"./FilePpt.js":[1128],"./FilePptDark.js":[1129],"./FilePsd.js":[1130],"./FilePsdDark.js":[1131],"./FileRar.js":[1132],"./FileRarDark.js":[1133],"./FileSheet.js":[1134],"./FileSheetDark.js":[1135],"./FileSketch.js":[1136],"./FileSketchDark.js":[1137],"./FileTxt.js":[1138],"./FileTxtDark.js":[1139],"./FileVideo.js":[1140],"./FileVideoDark.js":[1141],"./FileWord.js":[1142],"./FileWordDark.js":[1143],"./FileXmind.js":[1144],"./FileXmindDark.js":[1145],"./Filter.js":[776],"./Fold.js":[1533],"./FoldTwo.js":[978],"./FoldingOutline.js":[1432],"./Functionboard.js":[777],"./GiftBox.js":[1277],"./Grain.js":[1278],"./Grid.js":[1334],"./GroupCreatePublication.js":[1534],"./GroupEmpty.js":[1373],"./GroupType.js":[1222],"./GroupTypeCommerce.js":[1223],"./GroupTypeDark.js":[1224],"./GroupTypeDefault.js":[1225],"./GroupTypeDefaultDark.js":[1226],"./GroupTypeDepartment.js":[1227],"./GroupTypeDepartmentDark.js":[1228],"./GroupTypeInterest.js":[1229],"./GroupTypeInterestDark.js":[1230],"./GroupTypeOfficialDoc.js":[1231],"./GroupTypeProject.js":[1232],"./GroupTypeProjectDark.js":[1233],"./GroupTypePublication.js":[1374],"./H5Comment.js":[1433],"./H5DocEdit.js":[1434],"./H5DocPublish.js":[1435],"./H5NoteAdd.js":[1436],"./H5Outline.js":[1084],"./H5SocialShare.js":[1437],"./Help.js":[778],"./HelpSearch.js":[1438],"./Helpdoc.js":[1335],"./Hide.js":[1439],"./High.js":[1199],"./HistoryDelete.js":[1440],"./Home.js":[594],"./HomepageArrowRight.js":[979],"./Hot.js":[779],"./Hotkey.js":[780],"./IconActiveMembers.js":[1375],"./IconAddLight.js":[1441],"./IconAddTo.js":[1189],"./IconAnnexCard.js":[1279],"./IconApproval.js":[1442],"./IconAuthorize.js":[1336],"./IconBank.js":[1553],"./IconBankcard.js":[1153],"./IconBill.js":[1337],"./IconBold.js":[1308],"./IconBookGroup.js":[1376],"./IconCancelMini.js":[1309],"./IconCancellink.js":[1443],"./IconChain.js":[1377],"./IconCheck.js":[1154],"./IconCheckbox.js":[1310],"./IconChecked.js":[1444],"./IconCollaboratorlist.js":[1445],"./IconCollect.js":[1446],"./IconCollected.js":[1190],"./IconComputerlogin.js":[1661],"./IconCooperation.js":[1280],"./IconCustom.js":[1378],"./IconCustomerservice.js":[1447],"./IconDarkCard.js":[1281],"./IconData.js":[1282],"./IconDataflow.js":[1155],"./IconDelete.js":[1448],"./IconDeleteDesk.js":[1311],"./IconDeleteMini.js":[1312],"./IconDeletehistoryMini.js":[1313],"./IconDeleteovalMini.js":[1314],"./IconDesktop.js":[781],"./IconDing.js":[1554],"./IconDiscuss.js":[1200],"./IconDiscuz.js":[1379],"./IconDisorder.js":[1315],"./IconDocument1.js":[1156],"./IconDocumentCard.js":[1283],"./IconDocumentmanagement.js":[1338],"./IconDone.js":[1157],"./IconDown.js":[782],"./IconEmail.js":[1555],"./IconEmpty.js":[1201],"./IconExcelGray.js":[1146],"./IconExcelGrayDark.js":[1147],"./IconExcelGreen.js":[1148],"./IconExcelGreenDark.js":[1149],"./IconFold.js":[1316],"./IconFunction.js":[1284],"./IconGarden.js":[1191],"./IconGarden1.js":[1285],"./IconGuide.js":[1380],"./IconHide.js":[1449],"./IconHomepagelight.js":[1450],"./IconHomepagenormal.js":[1451],"./IconHotBook.js":[1381],"./IconHotDoc.js":[1382],"./IconHotThread.js":[1383],"./IconInternetpublic.js":[1286],"./IconIntroductionbook.js":[1202],"./IconIntroductioncheck.js":[1452],"./IconIntroductionpublicarea.js":[1203],"./IconIntroductionspace.js":[1204],"./IconIntroductionteam.js":[1205],"./IconKey.js":[1453],"./IconKey2.js":[783],"./IconKnowledgebaseCard.js":[1287],"./IconLable.js":[1317],"./IconLeft.js":[1454],"./IconLimits.js":[1455],"./IconLink.js":[784],"./IconListmoreMini.js":[1318],"./IconLoadingDesk.js":[266],"./IconLoadingGreen.js":[1158],"./IconLock.js":[785],"./IconManage.js":[1288],"./IconMember.js":[1159],"./IconMember2.js":[1160],"./IconMemberen.js":[1252],"./IconMemberinformation.js":[1339],"./IconMembernew.js":[1253],"./IconMobile.js":[786],"./IconMorenavMini.js":[1319],"./IconOcr.js":[1456],"./IconOfficialwebsite.js":[1457],"./IconOrganization.js":[1384],"./IconOtherchannels.js":[1206],"./IconPaddy.js":[1340],"./IconPaidspace.js":[1289],"./IconPaidspacelable.js":[1254],"./IconPersonalmember.js":[1290],"./IconPersonalmemberEn.js":[1255],"./IconPersonalmemberlable.js":[1256],"./IconPhone.js":[1458],"./IconPhonelogin.js":[1662],"./IconPic.js":[1320],"./IconPublic.js":[1663],"./IconPublicwelfare.js":[1207],"./IconQrcode.js":[1161],"./IconQrcode2.js":[1459],"./IconRange.js":[787],"./IconRecoverMini.js":[1321],"./IconReduceDisable.js":[1460],"./IconRefresh.js":[788],"./IconResourceCopy.js":[1461],"./IconResourceMove.js":[1462],"./IconResourceRemove.js":[1463],"./IconResourceUpload.js":[1464],"./IconResourceUploadFolder.js":[1465],"./IconRight.js":[1466],"./IconSafe.js":[1291],"./IconSafeCard.js":[1292],"./IconSafesetting.js":[1341],"./IconSearchDesk.js":[1322],"./IconSearchMini.js":[1323],"./IconSearchPrivate.js":[1467],"./IconSearchgreyMini.js":[1324],"./IconSecuritylog.js":[1342],"./IconSelect.js":[1468],"./IconSelected.js":[1192],"./IconSelectedDesk.js":[1325],"./IconSelectedMini.js":[1326],"./IconShow.js":[1469],"./IconSpacepaymentEn.js":[1257],"./IconSpeaker.js":[1385],"./IconTeam.js":[1162],"./IconTeambition.js":[1556],"./IconToken.js":[1343],"./IconTop.js":[1208],"./IconUnfold.js":[1470],"./IconUnfoldmini.js":[1327],"./IconUpdate.js":[1293],"./IconUpdatelog.js":[1471],"./IconVerify.js":[1472],"./IconVote.js":[1209],"./IconWechat.js":[1557],"./IconWeekly.js":[1210],"./IconZhi.js":[1558],"./IconZhifubao.js":[1559],"./IconZoomer.js":[1386],"./Idea.js":[1676],"./IllstratorDynamic.js":[1234],"./Import.js":[1535],"./ImportX.js":[1473],"./IndexBook.js":[789],"./IndexComment.js":[790],"./IndexDoc.js":[791],"./IndexMac.js":[1560],"./IndexMobile.js":[1163],"./IndexNote.js":[792],"./IndexPc.js":[1164],"./IndexPeople.js":[793],"./IndexTodoList.js":[794],"./IndexWindows.js":[1561],"./Info.js":[1664],"./Infocirclefilled.js":[697],"./Information.js":[1665],"./InsertDoc.js":[937],"./InstallDesktop.js":[795],"./KanbanView.js":[950],"./Knowledge.js":[1536],"./KnowledgeBase.js":[1537],"./KnowledgeBaseHome.js":[1538],"./KnowledgeList.js":[1387],"./KnowledgeNetwork.js":[1088],"./KnowledgeNetworkDark.js":[1089],"./LeftArrow.js":[980],"./Light.js":[796],"./LightOutlined.js":[797],"./Like.js":[1474],"./LikeBubble.js":[1475],"./LikeBubbleActive.js":[1294],"./LikeSmallAfter.js":[1295],"./LikeSmallBefore.js":[1296],"./LineChildTask.js":[1677],"./LineData.js":[798],"./LineDynamic.js":[1678],"./LineFramework.js":[799],"./LineHonor.js":[800],"./LineTag.js":[801],"./Link.js":[802],"./LinkcardBook.js":[558],"./LinkcardBookDark.js":[559],"./LinkcardDatabase.js":[420],"./LinkcardDatabaseDark.js":[421],"./LinkcardDoc.js":[422],"./LinkcardDocDark.js":[423],"./LinkcardGroup.js":[560],"./LinkcardGroupDark.js":[561],"./LinkcardMindDark.js":[424],"./LinkcardMindnote.js":[425],"./LinkcardResource.js":[562],"./LinkcardResourceDark.js":[563],"./LinkcardSheet.js":[564],"./LinkcardSheetDark.js":[565],"./LinkcardTopic.js":[566],"./LinkcardTopicDark.js":[567],"./LinkcardXiaoji.js":[568],"./LinkcardXiaojiDark.js":[569],"./List.js":[1476],"./ListStyle.js":[1539],"./LocalBook.js":[803],"./LogoBilibili.js":[1562],"./LogoWeibo.js":[1563],"./LogoWeixin.js":[1564],"./LogoZhihu.js":[1565],"./Logout.js":[1477],"./Low.js":[1211],"./LowDark.js":[1679],"./LowerLevel.js":[804],"./LowerRightCorner.js":[981],"./MNotificationArrow.js":[982],"./Medium.js":[1212],"./MediumDark.js":[1680],"./Meh.js":[805],"./Member.js":[806],"./MemberBigLevel1.js":[1259],"./MemberBigLevel1Alibaba.js":[1260],"./MemberBigLevel1AlibabaGray.js":[1261],"./MemberBigLevelBordered.js":[1258],"./MemberDesc1.js":[727],"./MemberDesc2.js":[728],"./MemberDesc3.js":[729],"./MemberDesc4.js":[730],"./MemberDesc5.js":[731],"./MemberExpiredLevel1.js":[1262],"./MemberLevel1.js":[1263],"./Membership.js":[1264],"./MembershipExpired.js":[1265],"./MiniDropdown.js":[1540],"./MiniEditorShortcut.js":[807],"./Minus.js":[1478],"./More.js":[808],"./MoreAction.js":[938],"./MoreCircle.js":[809],"./MoreHorizontal.js":[810],"./MoreSettings.js":[1541],"./MoreVertical.js":[811],"./Moresetting.js":[812],"./MoveBottom.js":[1479],"./MoveTop.js":[1480],"./NavBell.js":[1344],"./NavBook1.js":[1345],"./NavBook2.js":[1176],"./NavBuildarea.js":[1481],"./NavClock.js":[813],"./NavDay.js":[1482],"./NavEnglish.js":[1483],"./NavFold.js":[1484],"./NavGarden1.js":[1346],"./NavGarden2.js":[1178],"./NavGardenColor.js":[1177],"./NavInvite.js":[814],"./NavMenu.js":[1347],"./NavMessage1.js":[1348],"./NavMessage2.js":[1179],"./NavNight.js":[1485],"./NavOpen.js":[1486],"./NavPublic1.js":[1349],"./NavPublic2.js":[1180],"./NavSearch.js":[1487],"./NavSearch1.js":[1350],"./NavSearch2.js":[1181],"./NavStar1.js":[1351],"./NavStar2.js":[1182],"./NavStencil1.js":[1352],"./NavStencil2.js":[1183],"./NavTeam1.js":[1353],"./NavTeam2.js":[1184],"./NavWiki.js":[1185],"./NewEllipsis.js":[815],"./NewTabOutlined.js":[1488],"./NewbookDefault.js":[1297],"./NewbookDefaultDark.js":[1298],"./NewdocDefault.js":[1299],"./NewdocDefaultDark.js":[1300],"./Newtrash.js":[1193],"./NewtrashOutlined.js":[1489],"./NextPage.js":[983],"./NoDynamic.js":[1681],"./NoInCatalog.js":[1542],"./NoPriority.js":[1213],"./NoSidebar.js":[1682],"./NopinOutlined.js":[1490],"./Note.js":[816],"./NoteCollapse.js":[939],"./NoteExpand.js":[940],"./NoteMobile.js":[817],"./NoteSwap.js":[1491],"./NoteTag.js":[818],"./Order.js":[1492],"./OrgAddNew.js":[1493],"./OrgAddNew2.js":[1494],"./OrgBuyTips.js":[1388],"./OrgDashboardAdmin.js":[819],"./OrgDashboardCashier.js":[820],"./OrgDashboardEdit.js":[1495],"./OrgDashboardQuestion.js":[821],"./OrgDashboardStatistics.js":[1354],"./OrgDashboardTraffic.js":[1355],"./Original.js":[1266],"./Outline.js":[1543],"./Passed.js":[1301],"./Pay.js":[1085],"./PencilOutlined.js":[1496],"./PencilUnderscore.js":[941],"./Permission.js":[1544],"./PermissionIntranet.js":[1165],"./PermissionIntranetAll.js":[1166],"./PermissionPrivate.js":[698],"./PermissionPrivateBook.js":[1167],"./PermissionPublic.js":[1168],"./Phone.js":[822],"./Pin.js":[1194],"./PinOutlined.js":[1497],"./Pinned.js":[942],"./Play.js":[1498],"./Plus.js":[943],"./Pluscircle.js":[1499],"./Pluscirclefilled.js":[1195],"./Premium.js":[1389],"./Present.js":[823],"./Preview.js":[1500],"./PreviousPage.js":[984],"./Profile.js":[824],"./Progress.js":[1214],"./Promo.js":[825],"./PublishLoadingIcon.js":[1666],"./PublishSend.js":[1169],"./Question.js":[1667],"./Question2.js":[826],"./Questioncirclefilled.js":[596],"./RecentEdit.js":[827],"./RemoveDirectories.js":[1545],"./Removenav.js":[1501],"./Rename.js":[1546],"./Report.js":[1668],"./Rescinded.js":[1302],"./Review.js":[1090],"./ReviewAccept.js":[1502],"./ReviewArrowDown.js":[985],"./ReviewArrowRight.js":[986],"./ReviewArrowUp.js":[987],"./ReviewCancel.js":[1669],"./ReviewDark.js":[1091],"./ReviewFinish.js":[1670],"./ReviewHistory.js":[988],"./ReviewReject.js":[1503],"./ReviewStart.js":[1671],"./ReviewStartActive.js":[1672],"./ReviewStatus.js":[1170],"./RightArrow.js":[989],"./Rightboard.js":[828],"./Safe.js":[1267],"./SaveAsTemplate.js":[829],"./Saveastemplate2.js":[1504],"./SceneReview.js":[1303],"./SceneSendMail.js":[1304],"./SceneTranslate.js":[1305],"./SearchIcon.js":[1505],"./SecurityAlipay.js":[1390],"./SecurityDjcp.js":[1391],"./SecurityIso.js":[1392],"./SendMail.js":[830],"./Sendemail.js":[1092],"./SendemailDark.js":[1093],"./Setting.js":[1506],"./Setting1.js":[1507],"./Share.js":[831],"./ShareDingtalkIcon.js":[1566],"./ShareLink.js":[1171],"./Sidebar.js":[1683],"./SignOut.js":[1508],"./SiteTip.js":[832],"./SkylinkIcon.js":[1356],"./SpacepaymentBusiness.js":[1268],"./SpacepaymentPro.js":[1269],"./Star.js":[1196],"./StarOutlined.js":[1509],"./Statistics.js":[1094],"./StatisticsBook.js":[1235],"./StatisticsContribution.js":[1236],"./StatisticsDark.js":[1095],"./StatisticsGrain.js":[1237],"./StatisticsGroup.js":[1238],"./StatisticsLike.js":[1239],"./StatisticsMember.js":[1240],"./StatisticsWatch.js":[1241],"./Submit.js":[944],"./Success.js":[1215],"./SwipOutlined.js":[1510],"./Sync.js":[833],"./SyncError.js":[834],"./TabDigitalgarden.js":[732],"./TabDigitalgardenActive.js":[733],"./Table.js":[951],"./TableView.js":[952],"./Tag.js":[1172],"./TagPinned.js":[945],"./Task.js":[1684],"./TaskData.js":[1242],"./TaskDataDark.js":[1243],"./Taskgroup.js":[1685],"./Tasklist.js":[1686],"./Team.js":[631],"./TeamTaskgroup.js":[1687],"./TemplateCenter.js":[1306],"./TemplateCenterDark.js":[1307],"./Theme.js":[851],"./ThreadArchive.js":[1673],"./ThreadH5HomeMenu.js":[1511],"./ThreadHomeList.js":[835],"./ThreadHomeRecent.js":[836],"./ThreadMainPost.js":[1393],"./ThreadReaction.js":[1512],"./ThreadReply.js":[1513],"./ThreadSchedule.js":[1514],"./ThreadUserDockerClose.js":[1515],"./ThreadUserPosts.js":[837],"./Time.js":[1186],"./TimeOutlined.js":[1357],"./ToDashboard.js":[1358],"./ToipicBaiyanBug.js":[838],"./Topic.js":[1394],"./TopicData.js":[1244],"./TopicDataDark.js":[1245],"./Translation.js":[1096],"./TranslationDark.js":[1097],"./TrashGrid.js":[1516],"./Unlink.js":[1547],"./Unlock.js":[839],"./Unsafe.js":[1270],"./UpArrow.js":[990],"./Upcircle.js":[991],"./Update.js":[1173],"./Upload.js":[1517],"./Urgent.js":[1216],"./User.js":[595],"./UserBook.js":[840],"./UserBriefcase.js":[841],"./UserDepartment.js":[842],"./UserDepartmentOpa.js":[843],"./UserEmail.js":[844],"./UserFill.js":[845],"./UserJob.js":[846],"./UserLocation.js":[847],"./UserLocationLine.js":[848],"./UserMember.js":[1271],"./UserMemberActive.js":[1272],"./UserMobile.js":[849],"./Video.js":[850],"./Warning.js":[1217],"./WarningRed.js":[1218],"./WebappAdd.js":[953],"./WebappExplore.js":[954],"./WebappExploreActive.js":[955],"./WebappHome.js":[956],"./WebappHomeActive.js":[957],"./WebappNewbie.js":[1518],"./WebappNote.js":[958],"./WebappNoteActive.js":[959],"./WebappNotification.js":[960],"./WebappNotificationActive.js":[961],"./WebappPlus.js":[1519],"./WebappProfile.js":[962],"./WebappProfileActive.js":[963],"./WebappSearch.js":[1520],"./WelfareDisable.js":[1273],"./WelfareNormal.js":[1274],"./Width.js":[1098],"./WidthDark.js":[1099],"./Wiki.js":[1359],"./Workbench.js":[1548],"./Yuque.js":[1549],"./index.js":[4529,80]};function o(e){if(!r.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return Promise.all(t.slice(1).map(r.e)).then((function(){return r(o)}))}o.keys=function(){return Object.keys(n)},o.id=4037,e.exports=o},4043:function(e,t,r){"use strict";r.d(t,"a",(function(){return X}));r(113);var n=r(35),o=r(0),a=r.n(o),i=r(8),c=r.n(i),l=r(34),u=r(62),s="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function d(e,t,r,n){e.addEventListener?e.addEventListener(t,r,n):e.attachEvent&&e.attachEvent("on".concat(t),(function(){r(window.event)}))}function f(e,t){for(var r=t.slice(0,t.length-1),n=0;n<r.length;n++)r[n]=e[r[n].toLowerCase()];return r}function p(e){"string"!=typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),r=t.lastIndexOf("");r>=0;)t[r-1]+=",",t.splice(r,1),r=t.lastIndexOf("");return t}for(var m={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":s?173:189,"=":s?61:187,";":s?59:186,"'":222,"[":219,"]":221,"\\":220},h={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},y={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},b={16:!1,18:!1,17:!1,91:!1},v={},g=1;g<20;g++)m["f".concat(g)]=111+g;var _=[],j=!1,w="all",E=[],k=function(e){return m[e.toLowerCase()]||h[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function O(e){w=e||"all"}function S(){return w||"all"}var C=function(e){var t=e.key,r=e.scope,n=e.method,o=e.splitKey,a=void 0===o?"+":o;p(t).forEach((function(e){var t=e.split(a),o=t.length,i=t[o-1],c="*"===i?"*":k(i);if(v[c]){r||(r=S());var l=o>1?f(h,t):[];v[c]=v[c].filter((function(e){return!((!n||e.method===n)&&e.scope===r&&function(e,t){for(var r=e.length>=t.length?e:t,n=e.length>=t.length?t:e,o=!0,a=0;a<r.length;a++)-1===n.indexOf(r[a])&&(o=!1);return o}(e.mods,l))}))}}))};function T(e,t,r,n){var o;if(t.element===n&&(t.scope===r||"all"===t.scope)){for(var a in o=t.mods.length>0,b)Object.prototype.hasOwnProperty.call(b,a)&&(!b[a]&&t.mods.indexOf(+a)>-1||b[a]&&-1===t.mods.indexOf(+a))&&(o=!1);(0!==t.mods.length||b[16]||b[18]||b[17]||b[91])&&!o&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function A(e,t){var r=v["*"],n=e.keyCode||e.which||e.charCode;if(P.filter.call(this,e)){if(93!==n&&224!==n||(n=91),-1===_.indexOf(n)&&229!==n&&_.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(t){var r=y[t];e[t]&&-1===_.indexOf(r)?_.push(r):!e[t]&&_.indexOf(r)>-1?_.splice(_.indexOf(r),1):"metaKey"===t&&e[t]&&3===_.length&&(e.ctrlKey||e.shiftKey||e.altKey||(_=_.slice(_.indexOf(r))))})),n in b){for(var o in b[n]=!0,h)h[o]===n&&(P[o]=!0);if(!r)return}for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(b[a]=e[y[a]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===_.indexOf(17)&&_.push(17),-1===_.indexOf(18)&&_.push(18),b[17]=!0,b[18]=!0);var i=S();if(r)for(var c=0;c<r.length;c++)r[c].scope===i&&("keydown"===e.type&&r[c].keydown||"keyup"===e.type&&r[c].keyup)&&T(e,r[c],i,t);if(n in v)for(var l=0;l<v[n].length;l++)if(("keydown"===e.type&&v[n][l].keydown||"keyup"===e.type&&v[n][l].keyup)&&v[n][l].key){for(var u=v[n][l],s=u.splitKey,d=u.key.split(s),f=[],p=0;p<d.length;p++)f.push(k(d[p]));f.sort().join("")===_.sort().join("")&&T(e,u,i,t)}}}function P(e,t,r){_=[];var n=p(e),o=[],a="all",i=document,c=0,l=!1,u=!0,s="+",m=!1;for(void 0===r&&"function"==typeof t&&(r=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(a=t.scope),t.element&&(i=t.element),t.keyup&&(l=t.keyup),void 0!==t.keydown&&(u=t.keydown),void 0!==t.capture&&(m=t.capture),"string"==typeof t.splitKey&&(s=t.splitKey)),"string"==typeof t&&(a=t);c<n.length;c++)o=[],(e=n[c].split(s)).length>1&&(o=f(h,e)),(e="*"===(e=e[e.length-1])?"*":k(e))in v||(v[e]=[]),v[e].push({keyup:l,keydown:u,scope:a,mods:o,shortcut:n[c],method:r,key:n[c],splitKey:s,element:i});void 0!==i&&!function(e){return E.indexOf(e)>-1}(i)&&window&&(E.push(i),d(i,"keydown",(function(e){A(e,i)}),m),j||(j=!0,d(window,"focus",(function(){_=[]}),m)),d(i,"keyup",(function(e){A(e,i),function(e){var t=e.keyCode||e.which||e.charCode,r=_.indexOf(t);if(r>=0&&_.splice(r,1),e.key&&"meta"===e.key.toLowerCase()&&_.splice(0,_.length),93!==t&&224!==t||(t=91),t in b)for(var n in b[t]=!1,h)h[n]===t&&(P[n]=!1)}(e)}),m))}var I={setScope:O,getScope:S,deleteScope:function(e,t){var r,n;for(var o in e||(e=S()),v)if(Object.prototype.hasOwnProperty.call(v,o))for(r=v[o],n=0;n<r.length;)r[n].scope===e?r.splice(n,1):n++;S()===e&&O(t||"all")},getPressedKeyCodes:function(){return _.slice(0)},isPressed:function(e){return"string"==typeof e&&(e=k(e)),-1!==_.indexOf(e)},filter:function(e){var t=e.target||e.srcElement,r=t.tagName,n=!0;return!t.isContentEditable&&("INPUT"!==r&&"TEXTAREA"!==r&&"SELECT"!==r||t.readOnly)||(n=!1),n},trigger:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(v).forEach((function(r){var n=v[r].find((function(r){return r.scope===t&&r.shortcut===e}));n&&n.method&&n.method()}))},unbind:function(e){if(void 0===e)Object.keys(v).forEach((function(e){return delete v[e]}));else if(Array.isArray(e))e.forEach((function(e){e.key&&C(e)}));else if("object"==typeof e)e.key&&C(e);else if("string"==typeof e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=r[0],a=r[1];"function"==typeof o&&(a=o,o=""),C({key:e,scope:o,method:a,splitKey:"+"})}},keyMap:m,modifier:h,modifierMap:y};for(var L in I)Object.prototype.hasOwnProperty.call(I,L)&&(P[L]=I[L]);if("undefined"!=typeof window){var D=window.hotkeys;P.noConflict=function(e){return e&&window.hotkeys===P&&(window.hotkeys=D),P},window.hotkeys=P}P.filter=function(){return!0};var N=function(e,t){var r=e.target,n=r&&r.tagName;return Boolean(n&&t&&t.includes(n))},x=function(e){return N(e,["INPUT","TEXTAREA","SELECT"])};function R(e,t,r,n){r instanceof Array&&(n=r,r=void 0);var a=r||{},i=a.enableOnTags,c=a.filter,l=a.keyup,u=a.keydown,s=a.filterPreventDefault,d=void 0===s||s,f=a.enabled,p=void 0===f||f,m=a.enableOnContentEditable,h=void 0!==m&&m,y=Object(o.useRef)(null),b=Object(o.useCallback)((function(e,r){var n,o;return c&&!c(e)?!d:!!(x(e)&&!N(e,i)||null!=(n=e.target)&&n.isContentEditable&&!h)||!!(null===y.current||document.activeElement===y.current||null!=(o=y.current)&&o.contains(document.activeElement))&&(t(e,r),!0)}),n?[y,i,c].concat(n):[y,i,c]);return Object(o.useEffect)((function(){if(p)return l&&!0!==u&&(r.keydown=!1),P(e,r||{},b),function(){return P.unbind(e,b)};P.unbind(e,b)}),[b,e,p]),y}P.isPressed;function M(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[1],a=t.slice(2);return R.apply(void 0,[n,function(){var e;null!==(e=document.activeElement)&&void 0!==e&&e.closest('[contenteditable="true"]')||o.apply(void 0,arguments)}].concat(M(a)))}var U=r(213),G=r(3856),V=r(42),z={present:"index-module_present_RJR62",badge:"index-module_badge_oAZ5w",btn:"index-module_btn_nQfFi",badgeDot:"index-module_badgeDot_bduY4",dot_breathe:"index-module_dot_breathe_vfzeN",tooltip:"index-module_tooltip_-a6S+",scaleGuide:"index-module_scaleGuide_mHEzN",recentEditGuide:"index-module_recentEditGuide_VfSe+",guideClose:"index-module_guideClose_zdMKD",guideImg:"index-module_guideImg_o4XNr",guideText:"index-module_guideText_qYtoP"};function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Y={overlayClassName:z.tooltip,placement:"bottom",title:a.a.createElement(a.a.Fragment,null,__("演示")+__("：")+__("P")),trigger:["hover"]};function q(e){var t=e.doc,r=e.onPresent;function o(e){e.preventDefault(),"Doc"===t.type&&"function"==typeof r&&r()}return F(l.ua.macos?"⌘+shift+p,p":"ctrl+shift+p,p",o),a.a.createElement(n.a,Y,a.a.createElement("button",{type:"button","data-aspm-click":"d129827",id:"present-btn","data-testid":"present-btn",className:z.btn,onClick:o},a.a.createElement(V.b,{name:"present",width:20,height:20})))}function K(e){var t=e.doc,r=e.onPresent;function o(e){e.preventDefault(),"Doc"===t.type&&"function"==typeof r&&r()}return F(l.ua.macos?"⌘+shift+p,p":"ctrl+shift+p,p",o),a.a.createElement(n.a,Y,a.a.createElement("button",{type:"button","data-aspm-click":"d129827",id:"present-btn","data-testid":"present-btn",className:z.btn,onClick:o},a.a.createElement(V.b,{name:"present",width:20,height:20})))}q.propTypes={doc:c.a.object.isRequired,onPresent:c.a.func.isRequired},K.propTypes=q.propTypes;var X=function(e){var t=e.doc,r=e.button,n=W(Object(o.useState)(!1),2),i=n[0],c=n[1],l=Object(o.useCallback)((function(){c(!1)}),[]),s=Object(o.useCallback)((function(){var e;c(!0),(e=document.body).requestFullScreen=e.requestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen,e.requestFullScreen&&e.requestFullScreen()}),[]),d=Object(u.useLocation)().hash,f=a.a.useMemo((function(){return d.slice(1)}),[d]);return a.a.createElement("div",{className:z.present},a.a.createElement(r,{doc:t,onPresent:s}),i&&a.a.createElement(G.b,{headingId:f,doc:t,onCancel:l}))};X.propTypes={doc:c.a.object.isRequired,button:c.a.elementType.isRequired};var Q=function(e){var t=e.doc;return a.a.createElement(U.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.a.createElement(X,{doc:t,button:q})}},a.a.createElement(X,{doc:t,button:K}))};Q.propTypes={doc:c.a.object.isRequired},Q.displayName="ExposedPresentButton";t.b=Q},4049:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(0),o=r(3832),a=r(252),i=r(3899),c=(r(61),r(23)),l=r(190),u=r(38);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(){d=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),c=new C(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p={};function m(){}function h(){}function y(){}var b={};l(b,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==t&&r.call(g,a)&&(b=g);var _=y.prototype=m.prototype=Object.create(b);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var l=f(e[n],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==s(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return A()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=k(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=f(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=f(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return h.prototype=y,n(_,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:h,configurable:!0}),h.displayName=l(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},j(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function f(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){f(a,n,o,i,c,"next",e)}function c(e){f(a,n,o,i,c,"throw",e)}i(void 0)}))}}var m=["docId","currentUser"];function h(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var y=function(e){var t=e.docId,r=(e.currentUser,h(e,m)),o=function(e){var t=window.appData.me;return{handleShare:n.useCallback(p(d().mark((function r(){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.a.docs.shareToPersonalFeed({id:e});case 2:c.a.success({content:n.createElement(n.Fragment,null,__("分享成功 "),n.createElement("a",{target:"_blank",href:"".concat(l.b.getHost(),"/").concat(t.login)},__("去查看")))});case 3:case"end":return r.stop()}}),r)}))),[e])}}(t),a=o.handleShare;return n.createElement(n.Fragment,null,n.createElement(i.a,{type:"doc",restProps:r,overlayClassName:"share-note-button",onShare:a}))},b=function(e){return n.createElement(a.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return n.createElement(o.a,{role:"alternative",iconName:"digitalgarden",tooltip:__("我的花园")})}},n.createElement(y,e))}},4053:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l.a}));var n=r(0),o=r.n(n),a=r(4033),i=r(4096);function c(e){var t=Object(n.useMemo)((function(){return{sidePanelManager:new a.a}}),[]);return o.a.createElement(i.a.Provider,{value:t},e.children)}var l=r(3973)},4065:function(e,t,r){"use strict";r(64);var n=r(21),o=(r(113),r(35)),a=r(0),i=r.n(a),c=r(8),l=r.n(c),u=r(3473),s=r(3839);function d(e){var t=e.book,r=e.doc,a="Sheet"===r.type||"Table"===r.type;return Object(s.a)(t,r),i.a.createElement(n.a,{type:"primary",onClick:function(){a?u.a.saveSheetPosition(r.id):u.a.saveReadPosition(r.id)},href:"/".concat(t.namespace,"/").concat(r.slug,"/edit").concat(a?window.location.hash:"")},i.a.createElement(o.a,{title:i.a.createElement("p",{style:{textAlign:"center"}},__("编辑")+__("：")+__("E")),placement:"bottom"},__("编辑")))}d.propTypes={book:l.a.object.isRequired,doc:l.a.object.isRequired},t.a=d},4095:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var n=function(){return null};function o(){}},4096:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(0),o=r.n(n).a.createContext(null)},4101:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return se}));r(95);var n=r(49),o=(r(2821),r(2822)),a=(r(113),r(35)),i=r(0),c=r.n(i),l=r(13),u=r.n(l),s=r(300),d=r(2447),f=r(342),p=r(2018),m=r(4402),h={statisticHead:"style-module_statisticHead_M8b22",interactHead:"style-module_interactHead_aw+2s",statisticBody:"style-module_statisticBody_1ft2Y",interactBody:"style-module_interactBody_V1bDl",basicInfo:"style-module_basicInfo_wa0uq",row2Col2Item:"style-module_row2Col2Item_qtrTw",row2Col2Clickable:"style-module_row2Col2Clickable_ZlaMW",rightArrow:"style-module_rightArrow_6Rftv",name:"style-module_name_IyunN",value:"style-module_value_NDE+i",authorInfo:"style-module_authorInfo_UtZn1",row2Col1Item:"style-module_row2Col1Item_ECpAN",creatorName:"style-module_creatorName_-uWSQ",longValueItem:"style-module_longValueItem_Q6CK9",infoValueWrapper:"style-module_infoValueWrapper_+ZcEA",infoItemValue:"style-module_infoItemValue_DV6Qa",interactInfo:"style-module_interactInfo_UwF70",row1Col4Item:"style-module_row1Col4Item_ay5bD",row1Col4Clickable:"style-module_row1Col4Clickable_20wcl",active:"style-module_active_AN7V9",pv:"style-module_pv_VqoM8",uv:"style-module_uv_4GFCm",iconWrapper:"style-module_iconWrapper_vYWpL",downloadAreaIcon:"style-module_downloadAreaIcon_tXk4f",tipIcon:"style-module_tipIcon_aQ3h4",userListContainer:"style-module_userListContainer_BPEvb",userColumnListWrapper:"style-module_userColumnListWrapper_vogM8",empty:"style-module_empty_KEDVQ",userColumnList:"style-module_userColumnList_RFhhE",userItem:"style-module_userItem_g7TOe",userItemLeft:"style-module_userItemLeft_zhOUj",userItemName:"style-module_userItemName_8FJg8",userTagList:"style-module_userTagList_ES-d5",tag:"style-module_tag_Cxaqq",commentTag:"style-module_commentTag_3E6h-",likeTag:"style-module_likeTag_xe+8Z",frequentVisitTag:"style-module_frequentVisitTag_x1wae",paginationWrapper:"style-module_paginationWrapper_j7srn",downloadWrapper:"style-module_downloadWrapper_bD0zM",download:"style-module_download_U1-mK",downloadTxt:"style-module_downloadTxt_FH9kd",hidden:"style-module_hidden_1hAWE"},y=r(555),b=r(143),v=r.n(b),g=r(2756),_=r.n(g),j=r(151),w=r.n(j),E=r(2825),k=r(2826),O=r(2827),S=function(){return function(e,t,r){if(window.__engine&&window.__engine.execCommand)return window.__engine[e](t,r)}("queryCommandValue","wordCount")},C=r(4036),T=["creator","contributors","last_editor"],A=["creator","contributors","last_editor"];function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function I(){I=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),c=new O(o||[]);return n(i,"_invoke",{value:j(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d={};function f(){}function p(){}function m(){}var h={};l(h,a,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(S([])));b&&b!==t&&r.call(b,a)&&(h=b);var v=m.prototype=f.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==P(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function j(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function w(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=m,n(v,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(v),l(v,c,"Generator"),l(v,a,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=S,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function L(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function D(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){L(a,n,o,i,c,"next",e)}function c(e){L(a,n,o,i,c,"throw",e)}i(void 0)}))}}function N(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==P(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===P(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var V=4;var z=r(4398),W=(r(61),r(23)),H=r(1778),Y=r(3728),q=r.n(Y);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function X(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==K(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===K(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Z(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Q(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Q(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(){}function te(e){var t=e.name,r=e.value,n=e.clickable,o=e.onClick,a=void 0===o?ee:o;return c.a.createElement("div",{className:u()(h.row2Col2Item,Z({},h.row2Col2Clickable,n)),onClick:a},c.a.createElement("div",null,c.a.createElement("div",{className:h.value},r),c.a.createElement("div",{className:h.name},t)),n&&c.a.createElement(m.a,{name:"ArrowRight",className:h.rightArrow}))}function re(e){var t=e.wordCount,r=e.versionCount,n=e.contentUpdatedAt,o=e.createdAt,a=e.showHistory;e.hide;return c.a.createElement("div",{className:h.basicInfo},c.a.createElement(te,{name:__("字数"),value:t}),c.a.createElement(te,{name:__("历史版本#docStatistic"),value:r>99?"99+":r,clickable:!0,onClick:function(){a("named_version")}}),c.a.createElement(te,{name:__("更新时间#docStatistic"),value:n}),c.a.createElement(te,{name:__("创建时间#docStatistic"),value:o}))}function ne(e){var t=e.name,r=e.value,n=e.suffix,o=Object(z.a)(),i=o.hasEllipsis,l=o.ellipsisDomRef,u=c.a.createElement("div",{className:h.infoValueWrapper},c.a.createElement("div",{ref:l,className:h.infoItemValue},r),c.a.createElement("div",null,n));return c.a.createElement("div",{className:h.longValueItem},i?c.a.createElement(a.a,{title:r,placement:"bottomRight"},u):u,c.a.createElement("div",{className:h.name},t))}function oe(e){var t=e.name,r=e.value;return c.a.createElement("div",{className:h.row2Col1Item},c.a.createElement("div",{className:h.value},r),c.a.createElement("div",{className:h.name},t))}function ae(e){var t=e.creator,r=e.contributorsStr,n=e.contributorSuffix;return c.a.createElement("div",{className:h.authorInfo},c.a.createElement(oe,{name:c.a.createElement("div",{style:{marginTop:6}},__("创建者")),value:c.a.createElement("div",null,c.a.createElement(p.a,{user:t},c.a.createElement(f.a,{src:t.avatar_url,size:20,name:t.name})),c.a.createElement("span",{className:h.creatorName},t.name))}),c.a.createElement(ne,{name:__("编辑者"),value:r,suffix:n}))}function ie(e){var t,r=e.name,n=e.value,o=e.clickable,a=e.onClick,i=void 0===a?ee:a,l=e.active;return c.a.createElement("div",{className:u()(h.row1Col4Item,(t={},Z(t,h.row1Col4Clickable,o),Z(t,h.active,l),t)),onClick:i},c.a.createElement("div",{className:h.value},n),c.a.createElement("div",{className:h.name},r))}function ce(e){var t=e.pv,r=e.uv,n=e.commentCount,o=e.likeCount,i=e.setSelectedType,l=e.selectedType;return c.a.createElement("div",{className:h.interactInfo},c.a.createElement(ie,{name:c.a.createElement("div",{className:h.pv},__("总访问次数"),c.a.createElement(a.a,{title:__("去除了编辑者的访问次数")},c.a.createElement("div",{className:h.iconWrapper},c.a.createElement(m.a,{name:"ActionDocInfo",className:h.tipIcon})))),value:t,active:"pv"===l,clickable:!0,onClick:function(){i("pv")}}),c.a.createElement(ie,{name:c.a.createElement("div",{className:h.uv},__("总访问人数"),c.a.createElement(a.a,{title:__("只显示累积到昨日的数据")},c.a.createElement("div",{className:h.iconWrapper},c.a.createElement(m.a,{name:"ActionDocInfo",className:h.tipIcon})))),value:r,active:"uv"===l,clickable:!0,onClick:function(){i("uv")}}),c.a.createElement(ie,{name:__("评论数"),value:n,active:"comment"===l}),c.a.createElement(ie,{name:__("点赞数"),value:o,active:"like"===l}))}function le(e){var t=e.type;return"comment"===t?c.a.createElement("span",{className:u()(h.tag,h.commentTag)},__("评过")):"like"===t?c.a.createElement("span",{className:u()(h.tag,h.likeTag)},__("赞过")):"frequentVisit"===t?c.a.createElement("span",{className:u()(h.tag,h.frequentVisitTag)},__("常来")):null}function ue(e){var t=e.selectedType,r=e.dataSource,n=e.showTag,l=e.showDownload,u=e.tagMaps,d=u.frequentVisitMap,y=u.commentTagMap,b=u.likeTagMap,v=10,g=J(Object(i.useState)([]),2),_=g[0],j=g[1],w=J(Object(i.useState)(1),2),E=w[0],k=w[1],O=r.length;Object(i.useEffect)((function(){var e=r.slice((E-1)*v,E*v);j(e)}),[E,r]);var S=[_.slice(0,5),_.slice(5,v)],C=O>v,T=0===O;return c.a.createElement("div",{className:h.userListContainer},c.a.createElement("div",{className:h.userColumnListWrapper},T?c.a.createElement("p",{className:h.empty},__("暂无数据")):S.map((function(e,t){return c.a.createElement("div",{className:h.userColumnList,key:t},e.map((function(e,t){var r=e.id,o=[{type:"frequentVisit",did:d[r]},{type:"like",did:b[r]},{type:"comment",did:y[r]}];return c.a.createElement("div",{className:h.userItem,key:t},c.a.createElement("div",{className:h.userItemLeft},c.a.createElement(p.a,{user:e},c.a.createElement(f.a,{src:e.avatar_url,size:20,name:e.name})),c.a.createElement("span",{className:h.userItemName},e.name),n?c.a.createElement("span",{className:h.userTagList},o.map((function(e){return e.did?c.a.createElement(le,{type:e.type}):null}))):null),c.a.createElement(s.a,{time:e.time}))})))}))),c.a.createElement("div",{className:h.paginationWrapper},c.a.createElement("div",{className:h.downloadWrapper},l?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:h.download,onClick:function(){!function(e){var t=e.filename,r=e.dataSource;if(0===r.length)return W.a.warning(__("暂无数据可导出"));var n=r.map((function(e){var t;return X(t={},__("用户名"),e.name),X(t,__("时间"),e.time),t})),o=q.a.unparse(n);Object(H.downloadCsvFile)(o,t)}({dataSource:r,filename:"pv"===t?__("访问次数信息"):__("访问人数信息")})}},c.a.createElement(m.a,{name:"Download",className:h.downloadAreaIcon}),c.a.createElement("span",{className:h.downloadTxt},__("下载明细"))),c.a.createElement(a.a,{title:__("仅支持最近1000条数据的查询（包含编辑者访问）")},c.a.createElement("div",{className:h.iconWrapper},c.a.createElement(m.a,{name:"ActionDocInfo",className:h.tipIcon})))):null),C&&c.a.createElement(o.a,{className:h.pagination,size:"small",current:E,total:O,pageSize:v,onChange:function(e){k(e)}})))}function se(e){var t=e.visible,r=e.hide,o=function(){var e=Object(C.b)().showHistory,t=Object(y.f)((function(e){var t=e.doc,r=t.id,n=t.user,o=t.contributors,a=t.last_editor,i=t.hits,c=t.created_at,l=t.content_updated_at,u=t.likes_count,s=t.word_count,d=e.litecomment.comments,f=e.me,p=d.sort((function(e,t){return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()})),m=w()(p,"user.id").map((function(e){var t=e.user,r=e.created_at;return U(U({},t),{},{time:r})}));return{statisticDoc:{id:r,creator:n,contributors:o,last_editor:a,pv:i,created_at:c,content_updated_at:l,likes_count:u,word_count:s,comments_count:d.length},commentUsers:m,me:f}}),(function(e,t){var r=e.statisticDoc,n=r.creator,o=r.contributors,a=r.last_editor,i=B(r,T),c={creatorId:null==n?void 0:n.id,contributorsCount:o.length,lastEditor:null==a?void 0:a.id},l=t.statisticDoc,u=l.creator,s=l.contributors,d=l.last_editor,f=B(l,A),p={creatorId:null==u?void 0:u.id,contributorsCount:s.length,lastEditor:null==d?void 0:d.id};return e.commentUsers.length===t.commentUsers.length&&v()(c,p)&&v()(i,f)})),r=t.statisticDoc,n=t.commentUsers,o=t.me,a=r.id,l=r.contributors,u=r.last_editor,s=r.creator,d=r.pv,f=r.comments_count,p=r.likes_count,m=r.word_count,h=r.content_updated_at,b=r.created_at,g=x(Object(i.useState)(0),2),j=g[0],P=g[1],L=x(Object(i.useState)(0),2),R=L[0],M=L[1],F=x(Object(i.useState)(0),2),G=F[0],z=F[1],W=x(Object(i.useState)([]),2),H=W[0],Y=W[1],q=x(Object(i.useState)([]),2),K=q[0],X=q[1],Q=x(Object(i.useState)([]),2),J=Q[0],$=Q[1],Z=x(Object(i.useState)({frequentVisitMap:{},commentTagMap:{},likeTagMap:{}}),2),ee=Z[0],te=Z[1],re=x(Object(i.useState)("pv"),2),ne=re[0],oe=re[1],ae=x(Object(i.useState)([]),2),ie=ae[0],ce=ae[1],le=c.a.useMemo((function(){var e=l.findIndex((function(e){return e.name===u.name})),t=N(l);-1!==e&&t.splice(e,1);var r=t;return r.unshift(u),r.map((function(e){return e.name})).join("、")}),[l,u]),ue=l.length>=2?" ".concat(__("{count}人",{count:l.length})):"";return Object(i.useEffect)((function(){function e(){return(e=D(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.find)({doc_id:a,doc_type:"Doc",named:!0,limit:100});case 2:t=e.sent,P(t.length);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return t=D(I().mark((function e(){var t,r,n,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,r=[],n=0;case 3:if(!(n<1e3&&t)){e.next=12;break}return e.next=6,Object(k.users)({action_type:"like",target_type:"Doc",target_id:a,limit:200,offset:n},{useOriginResp:!0});case 6:o=e.sent,t=o.meta.hasMore,r=[].concat(N(r),N(o.data.map((function(e){return U(U({},e),{},{time:e.action_created_at})}))));case 9:e.next=3;break;case 12:$(r);case 13:case"end":return e.stop()}}),e)}))),t.apply(this,arguments)}function r(){return(r=D(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.pvList)({id:a});case 2:t=e.sent,Y(t.recentVisitHistory.map((function(e){return U(U({},e.user),{},{time:e.updated_at})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=D(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.uvList)({id:a});case 2:t=e.sent,z(t.uv),X(t.recentVisitors.map((function(e){return U(U({},e.user),{},{time:e.updated_at})})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){r.apply(this,arguments)}(),function(){n.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[]),Object(i.useEffect)((function(){M(S()||m||0)}),[]),Object(i.useEffect)((function(){"pv"===ne?ce(H):"uv"===ne?ce(K):"comment"===ne?ce(n):"like"===ne&&ce(J)}),[ne,H,K,n,J]),Object(i.useEffect)((function(){var e=_()(H,(function(e){return e.id})),t=Object.keys(e).reduce((function(t,r){return e[r].length>V&&(t[e[r][0].id]=!0),t}),{});delete t[o.id],te(U(U({},ee),{},{frequentVisitMap:t}))}),[H]),Object(i.useEffect)((function(){var e=J.reduce((function(e,t){return e[t.id]=!0,e}),{});te(U(U({},ee),{},{likeTagMap:e}))}),[J]),Object(i.useEffect)((function(){var e=n.reduce((function(e,t){return e[t.id]=!0,e}),{});te(U(U({},ee),{},{commentTagMap:e}))}),[n]),{wordCount:R,versionCount:j,contributorsStr:le,contributorSuffix:ue,contentUpdatedAt:h,createdAt:b,pv:d,uv:G,commentCount:f,likeCount:p,userListDataSource:ie,setUserListDataSource:ce,creator:s,selectedType:ne,setSelectedType:oe,tagMaps:ee,showHistory:e}}(),a=o.wordCount,l=o.versionCount,u=o.contributorsStr,s=o.contributorSuffix,f=o.createdAt,p=o.contentUpdatedAt,m=o.creator,b=o.pv,g=o.uv,j=o.commentCount,P=o.likeCount,L=o.userListDataSource,R=o.selectedType,M=o.tagMaps,F=o.setSelectedType,G=o.showHistory,z={wordCount:a,versionCount:l,contentUpdatedAt:d.default.format(p),createdAt:d.default.format(f),showHistory:G,hide:r},W={creator:m,contributorsStr:u,contributorSuffix:s},H={pv:b,uv:g,commentCount:j,likeCount:P,selectedType:R,setSelectedType:F};return c.a.createElement(n.a,{width:700,zIndex:999,footer:null,visible:t,onCancel:r},c.a.createElement("div",null,c.a.createElement("div",{className:h.statisticHead},__("统计详情")),c.a.createElement("div",{className:h.statisticBody},c.a.createElement(re,z),c.a.createElement(ae,W)),c.a.createElement("div",{className:h.interactHead},__("阅读数据")),c.a.createElement("div",{className:h.interactBody},c.a.createElement(ce,H),c.a.createElement(ue,{key:R,selectedType:R,dataSource:L,showTag:"uv"===R,showDownload:"pv"===R||"uv"===R,tagMaps:M}))))}},4106:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l}));var n=r(0),o=r.n(n);var a=Object(n.createContext)({isShare:!1}),i={isShare:!1};function c(e){return o.a.createElement(a.Provider,{value:i},e.children)}function l(){return Object(n.useContext)(a)}},4367:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(107),o=r.n(n),a=(r(0),r(25)),i=r.n(a);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===c(a)?a:String(a)),n)}var o,a}var u=o()("biz.doc_events"),s={rename:"rename"},d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._event=new i.a}var t,r,n;return t=e,(r=[{key:"emit",value:function(e,t){if(!Object.keys(s).includes(e))throw new Error("event type ".concat(e," not support."));if(!t.doc_id)throw new Error("emit data missing data_id, data: ".concat(JSON.stringify(t)));u("".concat(e," emitted")),this._event.emit(e,t)}},{key:"off",value:function(e,t){this._event.off(e,t)}},{key:"on",value:function(e,t){if(!s[e])throw new Error("event type ".concat(e," not support."));this._event.on(e,t)}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),f=new d},4373:function(e,t,r){"use strict";r.d(t,"b",(function(){return v})),r.d(t,"a",(function(){return u}));var n=r(0),o=r.n(n),a=r(3685),i=r(447),c=r(3973),l=r(4095),u={Outline:"Outline",WordingComment:"WordingComment",SideComment:"SideComment",MoreFeature:"MoreFeature",EditDocMeta:"EditDocMeta",Review:"Review"},s={PanelLayoutChange:"PanelLayoutChange"},d={panel:"sidePanel-module_panel_Vr-DC",toggleShow:"sidePanel-module_toggleShow_o7eFp",toggleHide:"sidePanel-module_toggleHide_BreQk"};function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=Object(i.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(5),r.e(6),r.e(140)]).then(r.bind(null,5084))}),{suspense:!0}),y=Object(i.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(5),r.e(147)]).then(r.bind(null,5101))}),{suspense:!0}),b=305;function v(e){var t=e.doc,r=Object(c.a)().sidePanelManager,i=p(Object(n.useState)({visible:!1,currentPanel:null,panelProps:{},containerStyle:{}}),2),u=i[0],m=i[1],v=Object(a.a)(t),g=u.visible,_=u.currentPanel,j=u.panelProps,w=u.containerStyle,E=Object(n.useRef)(null),k=function(e){m(e)},O=function(e){r.emitter.emit(s.PanelLayoutChange,{width:e.width})},S=_?r.getPanelContent(_):l.a,C=o.a.createElement(S,f({panel:_,hide:function(e){r.hide(e)},maxWidth:b,onLayout:O},j));return Object(n.useEffect)((function(){r.setRenderer(k)}),[r]),Object(n.useEffect)((function(){g||O({width:0})}),[g]),Object(n.useEffect)((function(){(null==v?void 0:v.id)!==(null==t?void 0:t.id)&&(r.flushAll(),r.hide(),r.registerContent("MoreFeature",h),r.registerContent("SideComment",y))}),[v,t,r]),Object(n.useEffect)((function(){return function(){r.flushAll(),r.hide()}}),[r]),o.a.createElement("div",{id:"sidePanel",ref:E,className:d.panel,style:w},C)}r(4033)},4397:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(0),o=r.n(n).a.createContext({ref:{current:null}})},4398:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(){var e=o(Object(n.useState)(!1),2),t=e[0],r=e[1],a=Object(n.useRef)(null);return Object(n.useEffect)((function(){a.current&&a.current.clientWidth!==a.current.scrollWidth&&r(!0)}),[]),{ellipsisDomRef:a,hasEllipsis:t}}},4401:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p})),r.d(t,"DocStatisticModal",(function(){return m.default})),r.d(t,"DocStatisticProvider",(function(){return s})),r.d(t,"useDocStatisticStore",(function(){return d}));var n=r(0),o=r.n(n),a=r(447);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(){}var u=Object(n.createContext)({visible:!1,hide:l,show:l});function s(e){var t=i(Object(n.useState)(!1),2),r=t[0],a=t[1],c=Object(n.useMemo)((function(){return{visible:r,hide:function(){a(!1)},show:function(){a(!0)}}}),[r]);return o.a.createElement(u.Provider,{value:c},e.children)}function d(){return Object(n.useContext)(u)}var f=Object(a.c)((function(){return Promise.resolve().then(r.bind(null,4101))}),{suspense:!0});function p(){var e=d(),t=e.visible,r=e.hide;return Object(n.useEffect)((function(){t&&f.start()}),[t]),o.a.createElement(f,{visible:t,hide:r})}var m=r(4101)},4402:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(0),o=r.n(n),a=r(447),i=r(170);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={};function d(){return null}function f(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({display:"inline-block"},e.style);return o.a.createElement("span",{className:e.className,style:t})}function p(e){var t=e.name,n=e.style,c=e.className,l=Object(i.b)().isDarkMode,u="".concat(t,"Dark"),p=d,m=l?u:t;return s[m]?p=s[m]:l?(p=Object(a.b)((function(){return r(4037)("./".concat(u,".js")).catch((function(e){return{default:s[t]?s[t]:Object(a.b)((function(){return r(4037)("./".concat(t,".js"))}),{suspense:!0,fallback:o.a.createElement(f,{style:n,className:c})})}}))}),{suspense:!0,fallback:o.a.createElement(f,{style:n,className:c})}),s[u]=p):(p=Object(a.b)((function(){return r(4037)("./".concat(t,".js"))}),{suspense:!0,fallback:o.a.createElement(f,{style:n,className:c})}),s[m]=p),o.a.createElement(p,{style:n,className:c})}},4433:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"d",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return i}));var n=850,o=305,a=39,i=305},4434:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return a})),r.d(t,"c",(function(){return i}));var n=480,o=236,a=0,i=991},4448:function(e,t,r){"use strict";r.d(t,"a",(function(){return _}));r(61);var n=r(23),o=r(0),a=r.n(o),i=r(42),c=r(13),l=r.n(c),u=r(252),s=r(4053),d=r(4373),f=r(3685),p={container:"style-module_container_5pQ7D",switchContent:"style-module_switchContent_FKoVH",iconWrapper:"style-module_iconWrapper_bAMkc",icon:"style-module_icon_ucXPM",disabled:"style-module_disabled_4E4EI",switchActiveBg:"style-module_switchActiveBg_3DMlv",commentActive:"style-module_commentActive_dTftF",moreFeatureActive:"style-module_moreFeatureActive_zPkBd",isPrevNotActive:"style-module_isPrevNotActive_xWwFe"};function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v={WordingComment:d.a.WordingComment,SideComment:d.a.SideComment,MoreFeature:d.a.MoreFeature,Outline:d.a.Outline};function g(){}var _=function(e){var t=e.enableComment,r=e.isWordingComment,n=y(Object(o.useState)(null),2),i=n[0],c=n[1],l=Object(s.b)().sidePanelManager;return Object(o.useEffect)((function(){var e=l.subscribe((function(e){var t=e.currentPanel;e.visible?"EditDocMeta"===t||"Review"===t?c("MoreFeature"):t!==i&&c("MoreFeature"===t||"WordingComment"===t||"SideComment"===t||null===t?t:null):c(null)}));return function(){e()}}),[i]),a.a.createElement(u.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.a.createElement(j,{enableComment:t,isWordingComment:r,onTabClick:g})}},a.a.createElement(j,{sidePanelManager:l,enableComment:t,isWordingComment:r,activeTab:i,onTabClick:function(e){i===e?(c(null),l.hide()):(c(e),l.show(e))}}))};function j(e){var t,r=e.activeTab,o=e.onTabClick,c=e.enableComment,u=e.isWordingComment,s=e.sidePanelManager,d=null===Object(f.a)(r);return a.a.createElement("div",{className:l()(p.container,(t={},h(t,p.commentActive,r===v.WordingComment||r===v.SideComment),h(t,p.moreFeatureActive,r===v.MoreFeature),h(t,p.isPrevNotActive,d),t))},a.a.createElement("div",{className:p.switchActiveBg}),a.a.createElement("div",{className:p.switchContent},a.a.createElement("div",{className:l()(p.iconWrapper,h({},p.disabled,!c)),onMouseOver:function(){s&&s.getPanelContent("SideComment").preload&&s.getPanelContent("SideComment").preload()},onClick:function(){c?o(u?v.WordingComment:v.SideComment):n.a.info(__("请开启知识库设置中的评论功能"))}},a.a.createElement(i.b,{name:"comment-reply",className:p.icon})),a.a.createElement("div",{className:p.iconWrapper,onMouseOver:function(){s&&s.getPanelContent("MoreFeature").preload&&s.getPanelContent("MoreFeature").preload()},onClick:function(){return o(v.MoreFeature)}},a.a.createElement(i.b,{name:"rightboard",className:p.icon}))))}},4449:function(e,t,r){"use strict";r.d(t,"a",(function(){return F}));r(267);var n=r(127),o=(r(64),r(21)),a=r(0),i=r(252),c=r(1777),l=(r(2484),r(1986)),u=(r(228),r(66)),s=(r(113),r(35)),d=(r(61),r(23)),f=(r(95),r(49)),p=r(13),m=r.n(p),h=r(555),y=r(38),b=r(18),v=r(1857),g=r(2725),_=r(154),j=r(59),w=r(118),E=r(138),k=r(190),O=r(615),S=r(2692),C={popover:"index-module_popover_qKMQ0",shareIcon:"index-module_shareIcon_2tsVL",cardArea:"index-module_cardArea_4ySac",radioOption:"index-module_radioOption_QzUCq",disabledOption:"index-module_disabledOption_6kUkH",tooltip:"index-module_tooltip_ck55t",memberAbleIcon:"index-module_memberAbleIcon_cDHHk"};function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function A(){A=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),c=new O(o||[]);return n(i,"_invoke",{value:j(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d={};function f(){}function p(){}function m(){}var h={};l(h,a,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(S([])));b&&b!==t&&r.call(b,a)&&(h=b);var v=m.prototype=f.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==T(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function j(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function w(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=m,n(v,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(v),l(v,c,"Generator"),l(v,a,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=S,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===T(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function N(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){D(a,n,o,i,c,"next",e)}function c(e){D(a,n,o,i,c,"throw",e)}i(void 0)}))}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=function(e){var t=e.doc,r=e.book,n=e.group,o=e.organization,i=e.me,c=a.useRef(!1),p=Object(h.e)(),T=x(f.a.useModal(),2),P=T[0],D=T[1],R=a.useMemo((function(){var e=null!=o&&o.id?E.a.ORG:E.a.PERSON;return Object(k.a)()?e:E.a.INTERNAL}),[o]),M=Object(S.a)(),B=!Object(_.f)(n),F=!M.interests[w.INTEREST_CODE.create_public_resource],U=function(){var e;null===(e=window.__member_message_ref)||void 0===e||e.current.showMemberIntro(j.LIMIT_SCENE.share_public)},G=function(){if((null==o||!o.id)&&"User"===(null==n?void 0:n.type)&&F)return n.id===i.id?__("会员可公开内容至互联网 {btn}",{btn:a.createElement("a",{onClick:U,style:{marginLeft:"5px"}},__("开通会员"))}):__("联系知识库所有者开通会员可公开内容至互联网")},V=function(){var e=N(A().mark((function e(r){var n,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=I(I({},r),{},{id:t.id}),e.next=3,y.a.docs.updateMeta(n,{ignoreGlobalMessage:!0});case 3:o=e.sent,p({type:"doc/update",payload:{public:o.public}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();a.useEffect((function(){var e=function(){var e=N(A().mark((function e(){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("visible"!==document.visibilityState||!c.current){e.next=5;break}return e.next=3,y.a.docs.findOne({id:t.id,book_id:r.id},{});case 3:n=e.sent,t.public!==n.public&&p({type:"doc/update",payload:{public:n.public}});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return document.addEventListener("visibilitychange",e,!0),function(){document.removeEventListener("visibilitychange",e,!0)}}),[]);var z=function(){var e=N(A().mark((function e(r){var n,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==b.PRIVACY.public||!F){e.next=2;break}return e.abrupt("return");case 2:if(r!==b.PRIVACY.public){e.next=33;break}if(Object(k.a)()){e.next=27;break}return e.prev=4,e.next=7,V({public:r});case 7:e.next=27;break;case 9:if(e.prev=9,e.t0=e.catch(4),n=v.TargetType.Doc,o=v.WorkflowType.DocPublicPrivacyWorkflow,(null===e.t0||void 0===e.t0?void 0:e.t0.errorCode)!==b.PUBLIC_SET_CODE.public_has_approve){e.next=17;break}return c.current=!0,k.b.windowOpen("/g/approve_workflow?target_id=".concat(t.id,"&target_type=").concat(n,"&type=").concat(o)),e.abrupt("return");case 17:if((null===e.t0||void 0===e.t0?void 0:e.t0.errorCode)!==b.PUBLIC_SET_CODE.public_need_approve){e.next=26;break}return e.next=20,Object(O.f)(E.b.DOC,P);case 20:if(e.sent){e.next=23;break}return e.abrupt("return");case 23:return c.current=!0,k.b.windowOpen("/g/approve_workflow?target_id=".concat(t.id,"&target_type=").concat(n,"&type=").concat(o)),e.abrupt("return");case 26:d.a.error((null===e.t0||void 0===e.t0?void 0:e.t0.message)||__("操作失败"));case 27:if(!Object(k.a)()){e.next=33;break}return e.next=30,Object(O.f)(E.b.DOC,P);case 30:if(e.sent){e.next=33;break}return e.abrupt("return");case 33:if(r!==b.PRIVACY.extend_private){e.next=37;break}return e.next=36,V({public:b.PRIVACY.private});case 36:return e.abrupt("return");case 37:return e.next=39,V({public:r});case 39:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}();return a.createElement("div",{className:C.cardArea},a.createElement(u.a.Group,{buttonStyle:"solid",value:t.public===b.PRIVACY.private&&r.extend_private===b.EXTEND_PRIVATE.BIND_DEPARTMENTS?b.PRIVACY.extend_private:t.public,onChange:function(e){return z(e.target.value)}},a.createElement(l.a,{direction:"vertical",size:16,style:{display:"flex"}},O.a[R].action.map((function(e){var t;if(R===E.a.INTERNAL){if(e.value===b.PRIVACY.extend_private&&r.extend_private===b.EXTEND_PRIVATE.NONE)return null;if(e.value===b.PRIVACY.private&&r.extend_private===b.EXTEND_PRIVATE.BIND_DEPARTMENTS)return null}return a.createElement(u.a,{key:"docPublicSet-".concat(e.value),value:e.value,disabled:e.value===b.PRIVACY.public&&F,className:m()(C.radioOption,L({},C.disabledOption,e.value===b.PRIVACY.public&&F))},a.createElement(s.a,{overlayClassName:C.tooltip,title:e.value===b.PRIVACY.public&&F?a.createElement(a.Fragment,null,R===E.a.ORG&&a.createElement("span",null,null===(t=e.tip)||void 0===t?void 0:t.call(e,o)),R===E.a.PERSON&&a.createElement("span",null,G())):"",placement:"right",autoAdjustOverflow:!0},a.createElement("span",{className:C.label},e.label),e.value===b.PRIVACY.public&&B&&a.createElement(g.a,{className:C.memberAbleIcon,noTooltip:!0,group:n,organization:o,isYuque:Object(k.a)()})))})))),D)},B=function(e){var t=e.doc,r=e.book,i=e.group,l=e.organization,u=e.me,s=e.canShare,d=e.style;return a.createElement(a.Fragment,null,s?a.createElement(n.a,{overlayClassName:C.popover,content:a.createElement(M,{doc:t,book:r,group:i,organization:l,me:u}),trigger:["click"],placement:"bottom",destroyTooltipOnHide:!0,noArrow:!0},a.createElement(o.a,{type:"text",className:C.shareIcon,style:d,icon:a.createElement(c.b,{book:r,group:i,doc:t,organization:l,placement:"top",onlyIcon:!0})})):a.createElement(c.b,{book:r,group:i,doc:t,organization:l,placement:"top"}))},F=function(e){var t=e.doc,r=e.book,n=e.group,o=e.organization;return a.createElement(i.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.createElement(c.b,{book:r,group:n,doc:t,organization:o,placement:"top"})}},a.createElement(B,e))}},4475:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(){return window.self!==window.top}},4476:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(174);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function l(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}var s=function(e){try{return JSON.parse(e)}catch(e){return{}}},d=function(){function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{tab:"Catalog",sort:"content_updated_at"};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fallbackValue=o,l(this,"namespace","ACTIVE_TAB_KEY"),l(this,"key",void 0),this.key="".concat(t.id,"/").concat(r.id,"/").concat(n.id)}var t,r,o;return t=e,(r=[{key:"getValue",value:function(){return(s(n.a.get(this.namespace))||{})[this.key]||this.fallbackValue}},{key:"setValue",value:function(e){var t=s(n.a.get(this.namespace))||{};t[this.key]=i(i(i({},this.fallbackValue),t[this.key]||{}),e),n.a.set(this.namespace,JSON.stringify(t))}},{key:"getTab",value:function(){var e,t;return null!==(e=null===(t=this.getValue())||void 0===t?void 0:t.tab)&&void 0!==e?e:this.fallbackValue.tab}},{key:"setTab",value:function(e){this.setValue({tab:e})}},{key:"getSort",value:function(){var e,t;return null!==(e=null===(t=this.getValue())||void 0===t?void 0:t.sort)&&void 0!==e?e:this.fallbackValue.sort}},{key:"setSort",value:function(e){this.setValue({sort:e})}}])&&c(t.prototype,r),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},4489:function(e,t,r){"use strict";r.r(t);r(197);var n=r(36),o=r(0),a=r.n(o),i=r(2747),c=r(3961),l={bookOverviewMoreActionsOverlay:"bookOverviewMoreSetting-module_bookOverviewMoreActionsOverlay_LvPUV",memberIcon:"bookOverviewMoreSetting-module_memberIcon_2acB1"},u=r(3693),s=r(118),d=r(42);t.default=function(e){var t,r,o,f=e.book,p=e.group,m=e.showMore,h=window.appData.organization;if(!f.abilities)return null;var y=null===(t=f.abilities)||void 0===t?void 0:t.create_doc,b=null===(r=f.abilities)||void 0===r?void 0:r.read_private,v=null===(o=f.abilities)||void 0===o?void 0:o.manage;return y?a.a.createElement(i.a,{direction:"horizontal",className:e.className,overlayClassName:l.bookOverviewMoreActionsOverlay,getPopupContainer:e.getPopupContainer||function(e){return e.parentNode},placement:e.placement||"bottomLeft",content:a.a.createElement(n.a,{selectable:!1,mode:"vertical"},e.prepend,[{key:"permission",href:"/r/".concat(p.login,"/").concat(f.slug,"/collaborators"),icon:a.a.createElement(d.b,{width:16,className:l.actionIcon,name:"permission"}),name:__("权限"),enabled:m&&b},{key:"statistics",href:"/r/".concat(p.login,"/").concat(f.slug,"/statistics"),icon:a.a.createElement(d.b,{width:16,className:l.actionIcon,name:"statistics"}),name:__("统计"),enabled:m&&v},{key:"toc",href:"/r/".concat(p.login,"/").concat(f.slug,"/toc"),icon:a.a.createElement(d.b,{width:16,className:l.actionIcon,name:"directory"}),name:__("目录管理"),enabled:m&&y},{key:"setting",href:"/".concat(p.login,"/").concat(f.slug,"/settings/basic"),icon:a.a.createElement(d.b,{width:16,className:l.actionIcon,name:"more-settings"}),name:__("更多设置"),enabled:y}].map((function(e){if(!e.enabled)return null;var t="statistics"===e.key;return a.a.createElement(n.a.Item,{key:e.key,onClick:function(){!t||c.a.hasAbility()?window.location.href=e.href:c.a.showMemberIntro()},icon:e.icon},a.a.createElement("span",null,e.name),t&&a.a.createElement(u.a,{className:l.memberIcon,group:p,code:s.INTEREST_CODE.book_statistics,organization:h}))})))}):null}},4538:function(e,t,r){"use strict";r(61);var n=r(23),o=(r(113),r(35)),a=(r(267),r(127)),i=r(0),c=r.n(i),l=r(8),u=r.n(l),s=r(13),d=r.n(s),f=r(168),p=r.n(f),m=r(555),h=r(62),y=r(3612),b=r.n(y),v=r(343),g=r.n(v),_=r(3488),j=r.n(_),w=r(298),E=r(3939),k=r(232),O=r(1438),S=r(1538),C=r(42),T=r(2438),A=r(170),P=r(447),I=r(4433),L=r(4397),D=r(4036),N=r(4106),x=r(4401),R=r(269),M=r(2780),B=r(3837),F=r(4434),U=(r(64),r(21)),G=r(3617),V=r(38),z=r(2754),W=r(100),H=r(3665),Y=r(4049),q=r(1777),K=r(4065),X=r(4043),Q=r(3851),J=r(4026),$=r(4449),Z=r(4448),ee=r(3874);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(){re=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),c=new O(o||[]);return n(i,"_invoke",{value:j(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d={};function f(){}function p(){}function m(){}var h={};l(h,a,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(S([])));b&&b!==t&&r.call(b,a)&&(h=b);var v=m.prototype=f.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==te(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function j(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function w(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=m,n(v,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(v),l(v,c,"Generator"),l(v,a,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=S,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function ne(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,se(n.key),n)}}function ae(e,t){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ae(e,t)}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=le(e);if(t){var o=le(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ce(e)}(this,r)}}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},le(e)}function ue(e,t,r){return(t=se(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(e){var t=function(e,t){if("object"!==te(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===te(t)?t:String(t)}var de=Object(P.d)((function(){return r.e(75).then(r.bind(null,4656))}),{suspense:!0}),fe=Object(P.d)((function(){return r.e(22).then(r.bind(null,4655))}),{suspense:!0}),pe=Object(P.d)((function(){return r.e(89).then(r.bind(null,3630))}),{suspense:!0}),me=Object(P.b)((function(){return r.e(85).then(r.bind(null,2713)).then((function(e){return e.default.Login}))}),{suspense:!0}),he=Object(P.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(9),r.e(29),r.e(97)]).then(r.bind(null,3699)).then((function(e){return e.ShareButton}))}),{suspense:!0}),ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ae(e,t)}(i,e);var t,r,n,a=ie(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ue(ce(e=a.call.apply(a,[this].concat(r))),"showContentReportEntry",(function(){var t=e.props,r=t.doc,n=t.book,o=t.group,a=t.me,i=window.appData,c=i.isPublicCloud,l=i.share;return c&&r.user_id!==a.id&&(Object(G.a)(o,n,r)||Object(G.b)(l,n,r))})),ue(ce(e),"isAnonymous",(function(){return!e.props.me.id})),ue(ce(e),"showEditEntry",(function(){if(window.appData.sharePage)return!1;var t=e.props,r=t.doc,n=t.version;return!e.isSingleDocMode()&&(!n&&("Thread"!==r.type&&(r.abilities&&r.abilities.update)))})),ue(ce(e),"onChangeShare",function(){var t,r=(t=re().mark((function t(r){var n;return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V.a.docs.updateMeta(r,{ignoreGlobalMessage:!0});case 2:n=t.sent,e.props.dispatch({type:"doc/update",payload:{public:n.public,password:n.password,indexed_level:n.indexed_level,privacy_migrated:n.privacy_migrated}});case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){ne(a,n,o,i,c,"next",e)}function c(e){ne(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}()),e}return t=i,(r=[{key:"componentDidMount",value:function(){setTimeout((function(){de.start(),fe.start(),pe.start()}),2e3)}},{key:"isSingleDocMode",value:function(){return"singleDoc"in this.props.location.query}},{key:"showBackToToc",value:function(){var e,t,r=this.props,n=r.doc,o=r.book;return!r.version&&!!o&&this.isSingleDocMode()&&((null===(e=o.abilities)||void 0===e?void 0:e.read)||(null===(t=n.abilities)||void 0===t?void 0:t.update))}},{key:"showShareToDigitalGarden",value:function(){var e=this.props.me,t=window.appData,r=t.sharePage,n=t.enableUserFeed,o=t.organization;if(this.isSingleDocMode())return!1;if(r||null!=o&&o.id)return!1;var a=this.props,i=a.group,c=a.doc,l=a.book;if(a.version)return!1;if(!c||!l||!i)return!1;var u=Object(z.c)({type:"doc",target:c,group:i,book:l});return[W.PUBLIC.public,W.PUBLIC.intranet_all,W.PUBLIC.intranet].includes(u)&&l.user_id===e.id&&n}},{key:"showShareEntry",value:function(){var e,t;if(window.appData.sharePage)return!1;var r=this.props,n=r.doc,o=r.version;return!this.isSingleDocMode()&&!o&&((null===(e=n.abilities)||void 0===e?void 0:e.share)||(null===(t=n.abilities)||void 0===t?void 0:t.create_collaborator))}},{key:"showShareCheckout",value:function(){var e;if(window.appData.sharePage)return!1;var t=this.props,r=t.doc,n=t.version;return!this.isSingleDocMode()&&!n&&(null===(e=r.abilities)||void 0===e?void 0:e.share)}},{key:"showCollaborationEntry",value:function(){if(window.appData.sharePage)return!1;var e=this.props,t=e.doc;return!e.version&&t.abilities&&t.abilities.create_collaborator}},{key:"showSkylinkEntry",value:function(){var e=this.props,t=e.doc;return!e.version&&["Doc","Board","Sheet"].includes(t.type)}},{key:"renderOriginDocEntry",value:function(){var e=this.props,t=e.doc,r=e.book,n=e.group,o=e.version,a={thread:__("查看原始话题"),sheet:__("查看原始表格"),doc:__("查看原始文档")};return o?c.a.createElement("span",{className:"header-action-item"},c.a.createElement(U.a,{href:"/".concat(r.namespace,"/").concat(t.slug)},__("查看最新文档"))):window.appData.sharePage?t.abilities&&t.abilities.read_origin?c.a.createElement("span",{className:"header-action-item"},c.a.createElement(U.a,{href:"/".concat(n.login,"/").concat(r.slug,"/").concat(t.slug),"data-testid":"view-origin-btn"},a[t.type.toLowerCase()]||a.doc)):void 0:null}},{key:"render",value:function(){var e,t,r,n=this.props,a=n.book,i=n.group,l=n.me,u=n.doc,s=n.version,f=n.style,p=n.shouldHideLogo,m=n.shouldShowSeparator,h=n.showBreadcrumb,y=window.appData.organization,b=d()("header",this.props.className,[ee.a.wrapper],ue({"doc-version-head":!!s},ee.a.docTypeHead,"Doc"===u.type)),v={id:u.mark&&u.mark.id,target_id:u&&u.id,target_type:u.mark&&u.mark.target_type,action_tags:u.mark&&u.mark.action_tags};return c.a.createElement("div",{id:"header",className:b,"data-header-mode":"title","data-aspm":"c36321",style:f},c.a.createElement("div",{className:"doc-head-inner"},c.a.createElement("div",{className:d()("header-crumb","title-visible",{"with-separator":m,"only-doc-title":p&&!h})},null!=u&&u.error?null:c.a.createElement(c.a.Fragment,null,c.a.createElement(q.o,{doc:u}),c.a.createElement($.a,{doc:u,book:a,group:i,organization:y,me:l,canShare:this.showShareCheckout(),style:{marginLeft:5}}),"Doc"===(null==u?void 0:u.type)&&c.a.createElement("span",{style:{marginLeft:8}},c.a.createElement(fe,{isTagMode:!0,showClose:!0})),c.a.createElement(de,{doc:u,showClose:!0}),c.a.createElement(pe,{doc:u,type:"Doc",tagMode:!0}))),c.a.createElement("div",{className:"header-action"},null!=u&&u.error?null:c.a.createElement(c.a.Fragment,null,u.id&&!s&&c.a.createElement("div",{className:ee.a.mark,"data-aspm-click":"d223108"},c.a.createElement(H.a,{me:l,iconSize:20,target:v,targetType:"Doc",isMiniType:!0})),this.showCollaborationEntry()&&c.a.createElement("div",{className:ee.a.collaborate},c.a.createElement(he,{shareViewType:"DOC",key:"collaborator-doc-".concat(u.id),targetResource:u,organization:y,book:a,group:i,canCollaborator:null===(e=u.abilities)||void 0===e?void 0:e.create_collaborator,defaultPanel:"collaborator",me:l},c.a.createElement(o.a,{title:__("协作"),placement:"bottom"},c.a.createElement("span",{"data-testid":"doc-action-collaborate","data-aspm-click":"d225876",className:ee.a.iconWrapper},c.a.createElement(C.b,{name:"nav-invite",className:ee.a.icon}))))),"Doc"===u.type&&c.a.createElement(X.b,{group:i,book:a,doc:u}),"Show"===u.type&&c.a.createElement("div",{className:[ee.a.collaborate,ee.a.playButton].join(" "),"data-class":"header-action-item"},c.a.createElement(Q.a,null)),this.isAnonymous()&&c.a.createElement("span",{className:"header-action-item header-action-anonymous"},c.a.createElement(me,{goto:window.location.href})),this.showShareToDigitalGarden()&&c.a.createElement(Y.a,{style:{marginLeft:8},docId:u.id,currentUser:window.appData.me}),this.showBackToToc()&&c.a.createElement("div",{className:"header-action-item"},c.a.createElement(J.a,{doc:u,book:a,group:i})),this.showShareEntry()&&c.a.createElement("div",{className:"header-action-item"},c.a.createElement(he,{shareViewType:"DOC",key:"share-doc-".concat(u.id),targetResource:u,onChangeShare:this.onChangeShare,organization:y,book:a,group:i,me:l,canShare:null===(t=u.abilities)||void 0===t?void 0:t.share,canCollaborator:null===(r=u.abilities)||void 0===r?void 0:r.create_collaborator})),this.showEditEntry()&&c.a.createElement("span",{className:"header-action-item",style:{marginLeft:8}},c.a.createElement(K.a,{book:a,doc:u})),this.renderOriginDocEntry(),c.a.createElement("span",{className:"header-action-item",style:{marginLeft:8}},c.a.createElement(Z.a,{enableComment:a.enable_comment,isWordingComment:"Doc"===u.type}))))))}}])&&oe(t.prototype,r),n&&oe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(c.a.Component);ye.propTypes={className:u.a.string,me:u.a.object,group:u.a.object,book:u.a.object,doc:u.a.object,note:u.a.object,version:u.a.object,history:u.a.object,showVersion:u.a.func,dispatch:u.a.func.isRequired,style:u.a.object,shouldHideLogo:u.a.bool,shouldShowSeparator:u.a.bool};var be=Object(m.d)((function(e){return{me:e.me,group:e.group,book:e.book,doc:e.doc,review:e.review}}))(Object(h.withRouter)(ye)),ve=r(3657),ge={back:"ReaderLayout-module_back_EoSX1",wrapper:"ReaderLayout-module_wrapper_l-8F+",desktopWrapper:"ReaderLayout-module_desktopWrapper_LRxkD",higherBackTop:"ReaderLayout-module_higherBackTop_RpYEv",cornerBubble:"ReaderLayout-module_cornerBubble_NhEGn",commentBubble:"ReaderLayout-module_commentBubble_ku3YV",asidePinned:"ReaderLayout-module_asidePinned_owRmW",crumb:"ReaderLayout-module_crumb_wF-5C",yuqueLogo:"ReaderLayout-module_yuqueLogo_KdpAI",miniDropdown:"ReaderLayout-module_miniDropdown_7uya+",crumbText:"ReaderLayout-module_crumbText_l2jpO",bookInfo:"ReaderLayout-module_bookInfo_FivMr",bookName:"ReaderLayout-module_bookName_7LuCC",icon:"ReaderLayout-module_icon_HU4bU",text:"ReaderLayout-module_text_3S3RN",asideWrapper:"ReaderLayout-module_asideWrapper_+Fdu8",aside:"ReaderLayout-module_aside_WX6k7",asideHead:"ReaderLayout-module_asideHead_dVgz0",asideNav:"ReaderLayout-module_asideNav_-Kxml",pinTip:"ReaderLayout-module_pinTip_w+Yhb",pinWrapper:"ReaderLayout-module_pinWrapper_8A7Ri",pinIconWrapper:"ReaderLayout-module_pinIconWrapper_WglAw",arrowRight:"ReaderLayout-module_arrowRight_xXebO",dragbar:"ReaderLayout-module_dragbar_NUlrA",dragging:"ReaderLayout-module_dragging_gY9-f",privateIcon:"ReaderLayout-module_privateIcon_zehlB",navIcon:"ReaderLayout-module_navIcon_eoaa4",nav:"ReaderLayout-module_nav_k8NJg",searchNav:"ReaderLayout-module_searchNav_KneVs",searchBar:"ReaderLayout-module_searchBar_F9DSq",searchHotKey:"ReaderLayout-module_searchHotKey_1i9So",selected:"ReaderLayout-module_selected_sXnrs",asideActions:"ReaderLayout-module_asideActions_3HOeJ",actionItem:"ReaderLayout-module_actionItem_CbOzz",bookOverviewMoreActions:"ReaderLayout-module_bookOverviewMoreActions_fKcZR"},_e=r(1549),je=r(967),we=r(290),Ee=r(1705),ke=function(e){var t,r=e.me,n=e.org,o=e.group,a=null;null!==(t=o.abilities)&&void 0!==t&&t.read&&(a="User"===o.type&&o.id===r.id?c.a.createElement("a",{className:ge.crumbText,href:"/dashboard/books"},__("个人知识库")):c.a.createElement("a",{className:ge.crumbText,href:"/".concat(o.login)},o.name));var i=c.a.createElement("a",{href:"/dashboard",className:ge.yuqueLogo},c.a.createElement(_e.default,{width:16,height:16}));return n&&n.id&&n.logo&&(i=c.a.createElement("a",{href:"/dashboard",className:ge.yuqueLogo},c.a.createElement(we.c,{src:n.logo,size:16}))),window.appData.isYuque||(i=c.a.createElement("a",{href:"/dashboard",className:ge.yuqueLogo},c.a.createElement(Ee.b,{height:16,useNewLogo:!0}))),c.a.createElement("div",{className:ge.crumb},i,o.abilities.read&&c.a.createElement(je.default,{className:ge.miniDropdown,width:14,height:14}),a)},Oe=r(2476),Se=r(4489),Ce=r(4053),Te=(r(227),r(112)),Ae=(r(388),r(133)),Pe=(r(645),r(214)),Ie=r(4367),Le=r(373),De=r(360),Ne=r(70),xe=r(3700),Re=r(213),Me=r(1531),Be=r(593),Fe=r(1543),Ue={actionItem:"CatalogTreeCollapseTrigger-module_actionItem_ym+tH",icon:"CatalogTreeCollapseTrigger-module_icon_k49Ct"},Ge=r(3944);function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var We={whiteSpace:"nowrap"};function He(e){return e}var Ye=function(e){var t=e.onFoldAll,r=void 0===t?Ge.c:t,n=e.onUnfoldAll,a=void 0===n?Ge.c:n,l=Ve(Object(i.useState)(!1),2),u=l[0],s=l[1],d=Object(i.useCallback)((function(){s(!0),r()}),[r]),f=Object(i.useCallback)((function(){s(!1),a()}),[a]);return c.a.createElement(c.a.Fragment,null,u?c.a.createElement(o.a,{title:__("全部展开"),getPopupContainer:He,overlayInnerStyle:We},c.a.createElement("span",{className:Ue.actionItem,onClick:f},c.a.createElement(C.b,{name:"catalog-fold",width:16,className:Ue.icon}))):c.a.createElement(o.a,{title:__("全部折叠"),getPopupContainer:He,overlayInnerStyle:We},c.a.createElement("span",{className:Ue.actionItem,onClick:d},c.a.createElement(C.b,{name:"catalog-expand",width:16,className:Ue.icon}))))},qe={asiderTab:"BookCatalog-module_asiderTab_0aJLs",tabBar:"BookCatalog-module_tabBar_BKeYX",tabBarPopover:"BookCatalog-module_tabBarPopover_TTy3+",tabItem:"BookCatalog-module_tabItem_CbnYy",subMenuIcon:"BookCatalog-module_subMenuIcon_3FZt3",tabTitle:"BookCatalog-module_tabTitle_Efcqe",asideActionsCont:"BookCatalog-module_asideActionsCont_31lvb",asideActions:"BookCatalog-module_asideActions_NXLy1",actionItem:"BookCatalog-module_actionItem_gOq-V",actionItemGap:"BookCatalog-module_actionItemGap_jbUf6",selectPanel:"BookCatalog-module_selectPanel_F2B3H",selectTitle:"BookCatalog-module_selectTitle_LPXkO",disabled:"BookCatalog-module_disabled_nvCu5",selectItem:"BookCatalog-module_selectItem_Ja1sM",divider:"BookCatalog-module_divider_4+nla",sideCatalog:"BookCatalog-module_sideCatalog_wpCdP"},Ke=r(4476),Xe={CATALOG:{value:"Catalog",text:__("目录")},ALLDOCS:{value:"All_Docs",text:__("全部文档")}};function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach((function(t){ct(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ze(){Ze=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),c=new O(o||[]);return n(i,"_invoke",{value:j(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d={};function f(){}function p(){}function m(){}var h={};l(h,a,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(S([])));b&&b!==t&&r.call(b,a)&&(h=b);var v=m.prototype=f.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==Qe(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function j(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function w(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=m,n(v,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(v),l(v,c,"Generator"),l(v,a,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=S,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function et(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function tt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){et(a,n,o,i,c,"next",e)}function c(e){et(a,n,o,i,c,"throw",e)}i(void 0)}))}}function rt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lt(n.key),n)}}function nt(e,t){return nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nt(e,t)}function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=it(e);if(t){var o=it(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return at(e)}(this,r)}}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function it(e){return it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},it(e)}function ct(e,t,r){return(t=lt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lt(e){var t=function(e,t){if("object"!==Qe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Qe(t)?t:String(t)}var ut=Object(P.b)((function(){return r.e(62).then(r.bind(null,4652))}),{suspense:!0}),st=Object(P.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(6),r.e(9),r.e(73)]).then(r.bind(null,5085))}),{suspense:!0}),dt=Pe.a.TabPane,ft=[{id:1,value:"created_at",title:__("按创建时间排序")},{id:2,value:"content_updated_at",title:__("按更新时间排序")},{id:3,value:"title",title:__("按标题排序")}],pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nt(e,t)}(l,e);var t,r,o,i=ot(l);function l(e){var t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),ct(at(r=i.call(this,e)),"getBookDocs",tt(Ze().mark((function e(){var t;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.a.docs.find({book_id:r.props.book.id,only_order_by_id:!0});case 3:return t=e.sent,r.props.dispatch({type:"searchtool/updateBookToc",payload:{book_id:r.props.book.id,docs:t}}),e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(0),n.a.error(e.t0.msg),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))),ct(at(r),"loadDocListViewerData",tt(Ze().mark((function e(){var t,n,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null===(t=r.props.book)||void 0===t||null===(n=t.docs)||void 0===n?void 0:n.length)>0)){e.next=2;break}return e.abrupt("return");case 2:return r.setState({isDocListLoading:!0}),e.next=5,r.getBookDocs();case 5:return o=e.sent,r.props.dispatch({type:"book/updateDocs",payload:o}),r.setState({isDocListLoading:!1}),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))),ct(at(r),"getSlugFromUrl",(function(e){var t=r.props.book,n=3;t.namespace&&t.namespace.startsWith("books/share/")&&(n=4);var o=e.pathname.split("/")[n];if(o&&o.trim())return o=o.trim()})),ct(at(r),"onCommandsExecuted",(function(e){e===Ne.a.CATALOG.create_title.cmd&&r.createTitle({activeCatalogTab:!0}),e===Ne.a.CATALOG.create_link.cmd&&r.createLink({activeCatalogTab:!0})})),ct(at(r),"handleTabChange",function(){var e=tt(Ze().mark((function e(t){var n,o,a,i,c,l,u,s;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.setActiveTabKey(t),r.setState({tabVisible:!1}),o=r.props,a=o.currentDocSlug,i=o.book,c=i.docs,l=c.find((function(e){return e.slug===a})),t!==Xe.ALLDOCS.value||c.length){e.next=10;break}return e.next=8,r.loadDocListViewerData();case 8:u=e.sent,l=u.find((function(e){return e.slug===a}));case 10:s=setTimeout((function(){r.revealDoc(l),clearTimeout(s)})),null===(n=r.props)||void 0===n||n.onTabChange(t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ct(at(r),"handleCatalogScrollToTop",(function(){var e;null===(e=r.catalogViewer.current)||void 0===e||e.scrollToTop()})),ct(at(r),"handleCatalogScrollToItem",(function(e){var t,n=r.props.book.toc.find((function(t){return t.doc_id===e.id||t.url===e.slug}));n&&(null===(t=r.catalogViewer.current)||void 0===t||t.scrollToItem(n.uuid))})),ct(at(r),"handleDocListScrollToItem",(function(e){var t;null===(t=r.docListViewer.current)||void 0===t||t.scrollToItem(e.id)})),ct(at(r),"revealDoc",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(e.id||e.slug)&&(Object(De.isDocNotInToc)(e,r.props.book.toc)&&!t?r.state.activeTabKey!==Xe.ALLDOCS.value?r.setActiveTabKey(Xe.ALLDOCS.value,tt(Ze().mark((function t(){return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.loadDocListViewerData();case 2:r.handleDocListScrollToItem(e);case 3:case"end":return t.stop()}}),t)})))):r.handleDocListScrollToItem(e):r.state.activeTabKey===Xe.CATALOG.value?r.handleCatalogScrollToItem(e):r.handleDocListScrollToItem(e))})),ct(at(r),"handleSearchSelect",(function(e){var t=setTimeout((function(){r.revealDoc(e,!1),clearTimeout(t)}))})),ct(at(r),"handleAddToCatalogSuccess",(function(e){var t="/".concat(r.props.book.namespace,"/").concat(e.slug);r.props.history.push(t),r.setActiveTabKey(Xe.CATALOG.value,(function(){r.handleCatalogScrollToItem(e)}))})),ct(at(r),"handleMoveToStagingBoxSuccess",(function(e){var t=r.props.currentDocSlug;if("DOC"===e.type&&t===e.url){var n="/".concat(r.props.book.namespace,"/").concat(t);r.props.history.push(n)}}));var o=e.space,a=e.book,u=e.group;r.catalogActiveTabKeyStorage=new Ke.a(o,u,a);var s=r.catalogActiveTabKeyStorage.getTab()||null;return null===(t=r.props)||void 0===t||t.onTabChange(s),r.state={activeTabKey:s,isDocListLoading:!1,tabVisible:!1},r.catalogViewer=c.a.createRef(),r.docListViewer=c.a.createRef(),r}return t=l,r=[{key:"setActiveTabKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.setState({activeTabKey:e},t),this.catalogActiveTabKeyStorage.setTab(e)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.doc;if(this.state.activeTabKey===Xe.ALLDOCS.value)this.loadDocListViewerData().then((function(){var r=setTimeout((function(){e.revealDoc(t),clearTimeout(r)}))}));else var r=setTimeout((function(){e.revealDoc(t),clearTimeout(r)}),200);xe.c.on(xe.a.DOC_SELECT,(function(t){var r=t.doc,n=t.path;e.revealDoc(r,!1),e.props.history.push(n)}))}},{key:"createTitle",value:function(){var e,t=this,r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).activeCatalogTab;null===(e=this.catalogViewer.current)||void 0===e||e.onAction({target_uuid:null,action:Le.ACTIONS.insert,type:Le.TYPES.title}),r&&this.setActiveTabKey(Xe.CATALOG.value,(function(){t.handleCatalogScrollToTop()}))}},{key:"createLink",value:function(){var e,t=this,r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).activeCatalogTab;null===(e=this.catalogViewer.current)||void 0===e||e.showCatalogLinkForm({target_uuid:null,action:Le.ACTIONS.insert,type:Le.TYPES.title,onSubmit:function(){r&&t.setActiveTabKey(Xe.CATALOG.value,(function(){t.handleCatalogScrollToTop()}))}})}},{key:"handleSortSelectClick",value:function(e){this.setState({tabVisible:!1}),this.catalogActiveTabKeyStorage.setSort(e)}},{key:"canCreateDoc",value:function(){var e=this.props.book;return e.abilities&&e.abilities.create_doc}},{key:"handleCatalogDidMount",value:function(){Object(w.a)("finish-catalog-render")}},{key:"render",value:function(){var e=this,t=this.props,r=t.space,n=t.book,o=t.group,i=t.history,l=t.dispatch,u=t.currentDocSlug;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Pe.a,{className:qe.asiderTab,activeKey:this.state.activeTabKey,onChange:this.handleTabChange,renderTabBar:function(t){var r,n;return c.a.createElement("div",{className:qe.tabBar,onMouseOver:function(){ut.preload(),st.preload()}},c.a.createElement(a.a,{noArrow:!0,getPopupContainer:function(e){return e.parentNode},overlayClassName:qe.tabBarPopover,placement:"bottomLeft",trigger:"click",visible:e.state.tabVisible,onVisibleChange:function(t){return e.setState({tabVisible:t})},content:c.a.createElement("div",{className:qe.selectPanel},c.a.createElement("div",{className:qe.selectList},c.a.createElement("div",{className:qe.selectItem,onClick:function(){return t.onTabClick(Xe.CATALOG.value)}},c.a.createElement("span",null,c.a.createElement(Me.default,{width:16,height:16}),c.a.createElement("span",null,Xe.CATALOG.text)),e.state.activeTabKey===Xe.CATALOG.value&&c.a.createElement(Be.default,null)),c.a.createElement("div",{className:qe.selectItem,onClick:function(){return t.onTabClick(Xe.ALLDOCS.value)}},c.a.createElement("span",null,c.a.createElement(Fe.default,{width:16,height:16}),c.a.createElement("span",null,Xe.ALLDOCS.text)),e.state.activeTabKey===Xe.ALLDOCS.value&&c.a.createElement(Be.default,null))),e.state.activeTabKey===Xe.ALLDOCS.value&&c.a.createElement(c.a.Fragment,null,c.a.createElement(Ae.a,null),c.a.createElement("div",{className:qe.selectTitle},c.a.createElement("span",null,__("排序"))),c.a.createElement("div",{className:d()(qe.selectList,ct({},qe.disabled,e.state.activeTabKey!==Xe.ALLDOCS.value))},ft.map((function(t){return c.a.createElement("div",{key:t.value,className:qe.selectItem,onClick:function(){return e.handleSortSelectClick(t.value)}},c.a.createElement("span",null,t.title),e.state.activeTabKey===Xe.ALLDOCS.value&&e.catalogActiveTabKeyStorage.getSort()===t.value&&c.a.createElement(Be.default,null))})))))},c.a.createElement("span",{className:qe.tabTitle,onClick:function(t){return e.setState((function(e){return{tabVisible:!e.tabVisible}}))}},e.state.activeTabKey===Xe.CATALOG.value?c.a.createElement(Me.default,{width:16,height:16,className:qe.tabIcon}):c.a.createElement(Fe.default,{width:16,height:16,className:qe.tabIcon}),c.a.createElement("span",{className:qe.tabName},e.state.activeTabKey===Xe.CATALOG.value?Xe.CATALOG.text:Xe.ALLDOCS.text))),c.a.createElement("div",{className:qe.asideActionsCont},e.state.activeTabKey===Xe.CATALOG.value&&c.a.createElement(Ye,{onFoldAll:null===(r=e.catalogViewer.current)||void 0===r?void 0:r.foldAll,onUnfoldAll:null===(n=e.catalogViewer.current)||void 0===n?void 0:n.unFoldAll})))}},c.a.createElement(dt,{key:Xe.CATALOG.value},c.a.createElement(ut,{ref:this.catalogViewer,className:qe.sideCatalog,book:n,currentDocSlug:u,onDidMount:this.handleCatalogDidMount})),c.a.createElement(dt,{key:Xe.ALLDOCS.value},c.a.createElement("div",{style:{minHeight:100,paddingTop:8}},c.a.createElement(Te.a,{delay:100,spinning:this.state.isDocListLoading},c.a.createElement(st,{ref:this.docListViewer,currentDocSlug:u,history:i,group:o,book:n,space:r,onAddToCatalogSuccess:this.handleAddToCatalogSuccess}))))),c.a.createElement(ht,{book:n,dispatch:l}))}}],r&&rt(t.prototype,r),o&&rt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.PureComponent);pt.propTypes={doc:u.a.object.isRequired,space:u.a.object.isRequired,group:u.a.object.isRequired,book:u.a.object.isRequired,history:u.a.object.isRequired,currentDocSlug:u.a.string,dispatch:u.a.func,onTabChange:u.a.func};var mt=Object(Re.b)((function(e){var t=c.a.createRef(),r=c.a.useContext(L.a).ref,n=Object(h.useParams)().doc;r.current=t;var o=$e($e({ref:t},e),{},{currentDocSlug:n});return c.a.createElement(pt,o)}),!0);function ht(e){var t=e.book,r=e.dispatch;return Object(i.useEffect)((function(){function e(e){var n=e.title,o=t.toc.map((function(t){return t.doc_id===e.doc_id?$e($e({},t),{},{title:n}):t})),a=(t.docs||[]).map((function(t){return t.id===e.doc_id?$e($e({},t),{},{title:n}):t}));Object(m.c)((function(){r({type:"book/updateToc",payload:o}),r({type:"book/updateDocs",payload:a})}))}return Ie.a.on("rename",e),function(){Ie.a.off("rename",e)}}),[t.docs,t.toc]),null}ht.propTypes={book:u.a.object.isRequired,dispatch:u.a.func};var yt=r(4373);function bt(e){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(e)}function vt(){return vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vt.apply(this,arguments)}function gt(){gt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),c=new O(o||[]);return n(i,"_invoke",{value:j(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d={};function f(){}function p(){}function m(){}var h={};l(h,a,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(S([])));b&&b!==t&&r.call(b,a)&&(h=b);var v=m.prototype=f.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==bt(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function j(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function w(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=m,n(v,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(v),l(v,c,"Generator"),l(v,a,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=S,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function _t(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function jt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){_t(a,n,o,i,c,"next",e)}function c(e){_t(a,n,o,i,c,"throw",e)}i(void 0)}))}}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Tt(n.key),n)}}function Et(e,t){return Et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Et(e,t)}function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=St(e);if(t){var o=St(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ot(e)}(this,r)}}function Ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function St(e){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},St(e)}function Ct(e,t,r){return(t=Tt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tt(e){var t=function(e,t){if("object"!==bt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===bt(t)?t:String(t)}var At=I.a+I.d,Pt=Object(P.c)((function(){return Promise.all([r.e(14),r.e(27),r.e(81)]).then(r.bind(null,5079))}),{suspense:!0}),It=Object(P.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(5),r.e(7),r.e(95)]).then(r.bind(null,2732))}),{suspense:!0}),Lt=Object(P.b)((function(){return Promise.all([r.e(5),r.e(14),r.e(27),r.e(72)]).then(r.bind(null,3777))}),{suspense:!0}),Dt=Object(P.b)((function(){return r.e(74).then(r.bind(null,4580))}),{suspense:!0}),Nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Et(e,t)}(u,e);var t,r,i,l=kt(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),Ct(Ot(t=l.call(this,e)),"initHotKeys",(function(){t.state.asideWidth&&(j()(g.a.windows?"ctrl+alt+,":"⌘+option+,",(function(e){e.preventDefault(),t.togglePin()})),j()(g.a.windows?"ctrl+j":"⌘+j",(function(e){e.preventDefault(),e.repeat||t.handleSearchClick()})))})),Ct(Ot(t),"getAsideResizable",(function(){return window.innerWidth>F.c})),Ct(Ot(t),"handleTabChange",(function(e){t.setState({activeTabKey:e})})),Ct(Ot(t),"handleCommandsExecuted",(function(e){var r,n;null===(r=t.bookCatalogRef.current)||void 0===r||null===(n=r.current)||void 0===n||n.onCommandsExecuted(e)})),Ct(Ot(t),"handleContentSidebarVisibleChange",(function(e){var r=e.detail.visible;t.setState({contentSidebarVisible:r})})),Ct(Ot(t),"handleResize",p()((function(){t.asideResizable=t.getAsideResizable(),t.asideResizable||t.state.asidePinned||t.togglePin(),!t.asideResizable||t.asideResized||t.state.asidePinned||t.setState({asideWidth:t.getAsideWidth(),asideWrapperWidth:t.getAsideWidth()})}),300)),Ct(Ot(t),"handleMouseOverPinIcon",(function(e){t.state.asidePinned&&(e.stopPropagation(),e.preventDefault())})),Ct(Ot(t),"handleMouseDown",(function(){!0!==t.state.asideResizing&&t.setState({asideResizing:!0})})),Ct(Ot(t),"handleMouseUp",(function(){!1!==t.state.asideResizing&&t.setState({asideResizing:!1})})),Ct(Ot(t),"handleMouseMove",(function(e){t.state.asideResizing&&(t.asideResized=!0,t.setAsideWidth(e),window.dispatchEvent(new Event("resize")))})),Ct(Ot(t),"recalculateHeaderStyle",(function(){t.state.asidePinned&&t.forceUpdate()})),Ct(Ot(t),"setAsideWidth",(function(e){if(t.asideResizable&&t.asideRef&&!t.state.asidePinned){var r=t.asideRef.getBoundingClientRect(),n=r.width,o=e.clientX-r.left;n>=F.a&&e.clientX>r.right?o=F.a:n<=F.b&&e.clientX<r.right&&(o=F.b),t.setState({asidePinned:!1,asideWidth:o,asideWrapperWidth:o})}})),Ct(Ot(t),"togglePin",(function(e){e&&(e.preventDefault(),e.stopPropagation()),t.setState((function(e){var r=e.asideWidth;return e.asidePinned?{asideWrapperWidth:t.asideResizable?r:F.b,asidePinned:!1}:{asideWrapperWidth:F.d,asidePinned:!0}}),(function(){setTimeout((function(){t.recalculateHeaderStyle()}),100)}))})),Ct(Ot(t),"handlePinnedAsideClick",(function(){t.state.asidePinned&&t.togglePin()})),Ct(Ot(t),"bookOverviewNavClick",(function(){t.props.history.push(t.getOverviewPath())})),Ct(Ot(t),"handleSearchCancel",jt(gt().mark((function e(){return gt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.a)(500);case 2:t.setState({searchModalVisible:!1});case 3:case"end":return e.stop()}}),e)})))),Ct(Ot(t),"handleSearchClick",(function(){t.setState({searchModalVisible:!0})})),Ct(Ot(t),"getOverviewPath",(function(){var e=t.props,r=e.group,n=e.book;return"/".concat(r.login,"/").concat(n.slug)})),Ct(Ot(t),"isOverviewPage",(function(){var e=t.props,r=e.group,n=e.book,o=window.location.pathname;return o==="/".concat(r.login,"/").concat(n.slug)||o==="/".concat(r.login,"/").concat(n.slug,"/")})),Ct(Ot(t),"updateToc",jt(gt().mark((function e(){var r,n,o,a,i;return gt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.book,o=r.dispatch,e.next=3,M.a.getCatalogNodes(n.id);case 3:a=e.sent,i=a.toc,o({type:"book/updateToc",payload:i});case 6:case"end":return e.stop()}}),e)})))),Ct(Ot(t),"renderDocAction",(function(){var e=t.props,r=e.book,n=e.doc;if(t.canCreateDoc())return c.a.createElement(a.a,{type:"menu",overlayStyle:{minWidth:126},trigger:["hover"],placement:"bottomLeft",arrowPointAtCenter:!0,hideWhenInactive:!0,content:c.a.createElement(Lt,{book:r,doc:n,commands:R.a.additionalActionsForNewDoc({canImport:!0,canExport:r.abilities&&r.abilities.export,canCreateCatalogGroup:t.state.activeTabKey===Xe.CATALOG.value,canCreateCatalogLink:t.state.activeTabKey===Xe.CATALOG.value}),commandParams:{insert_to_catalog:!0,action:"prependChild"},onCommandsExecuted:function(e){var r=e.cmd;t.handleCommandsExecuted(r)}})},c.a.createElement("div",{className:d()(ge.asideActions),onMouseOver:function(){Lt.preload()}},c.a.createElement(C.b,{name:"add",width:16,height:16,className:ge.actionItem})))})),Ct(Ot(t),"renderBookCatlog",(function(){var e=t.props,r=e.doc,n=e.book,o=e.group,a=e.dispatch,i=e.space,l=e.history;return c.a.createElement(mt,{ref:t.bookCatalogRef,doc:r,group:o,book:n,space:i,dispatch:a,history:l,onTabChange:t.handleTabChange})})),Ct(Ot(t),"renderDragBar",(function(){var e=g.a.windows?"Ctrl+Alt+,":"⌘+Option+,";return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:d()([ge.dragbar],Ct({},ge.dragging,t.state.asideResizing)),onClick:t.handlePinnedAsideClick,onMouseDown:t.handleMouseDown,onContextMenu:function(e){e.preventDefault()}}),c.a.createElement("div",{className:ge.pinWrapper},c.a.createElement(o.a,{mouseEnterDelay:.5,placement:"right",title:t.state.asidePinned?c.a.createElement("span",{className:ge.pinTip},__("展开"),c.a.createElement("br",null),e):c.a.createElement("span",{className:ge.pinTip},__("收起"),c.a.createElement("br",null),e),getTooltipContainer:function(e){return e.parentNode}},c.a.createElement("span",{className:ge.pinIconWrapper,onMouseOver:t.handleMouseOverPinIcon,onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},onClick:t.togglePin},c.a.createElement("span",{className:ge.arrowRight})))))})),Ct(Ot(t),"renderSearch",(function(){if(t.state.searchModalVisible)return c.a.createElement(It,{name:"LazyScopedSearch",onCancel:t.handleSearchCancel,visible:t.state.searchModalVisible})})),Ct(Ot(t),"renderImportBookModal",(function(){var e=t.props,r=e.book,n=e.group;return c.a.createElement(Pt,{book:r,group:n,onCommandsExecuted:function(e){var r=e.cmd;t.handleCommandsExecuted(r)},onUpdate:t.updateToc})})),Ct(Ot(t),"renderAsideHead",(function(){var e=t.props,r=e.group,n=e.book,o=e.me,a=e.organization;return c.a.createElement("div",{className:d()(ge.asideHead,Ct({},ge.bookSharePopover,t.state.bookShareVisible)),id:"asideHead"},c.a.createElement(ke,{me:o,group:r,org:a}),c.a.createElement("div",{className:ge.bookInfo},c.a.createElement("div",{className:ge.bookName},c.a.createElement(ve.a,{className:ge.icon,value:n.book_icon,disabled:!0}),c.a.createElement("div",{className:ge.bookName},c.a.createElement("span",{className:ge.text},n.name),(null==o?void 0:o.is_admin)&&-1===n.status&&c.a.createElement(C.b,{name:"doc-has-content-risk",width:14,style:{opacity:.375,marginLeft:8}}),c.a.createElement("div",{className:ge.privateIcon},c.a.createElement(Oe.a,{public:n.public,book:n,group:r,size:14,placement:"bottom"})))),c.a.createElement(Se.default,{group:r,book:n,showMore:!0,className:ge.bookOverviewMoreActions,getPopupContainer:function(){return document.getElementById("asideHead")}})))})),Ct(Ot(t),"renderNav",(function(){var e,r={willChange:"width",transition:"width 200ms cubic-bezier(0.1, 0, 0, 1) 0s",width:t.state.asideWidth,maxWidth:F.a,minWidth:F.b};return c.a.createElement("nav",{className:ge.asideNav,style:r,id:"navBox",ref:function(e){t.asideRef=e}},c.a.createElement("div",{className:ge.searchNav},c.a.createElement("div",{className:ge.searchBar,onMouseOver:function(){It.preload()},onClick:t.handleSearchClick},c.a.createElement(O.default,{className:ge.navIcon}),c.a.createElement("span",null,__("搜索#readPage")),c.a.createElement("span",{className:ge.searchHotKey},g.a.windows?"Ctrl + J":"⌘ + J")),t.renderDocAction()),c.a.createElement("div",{className:d()((e={},Ct(e,ge.nav,!0),Ct(e,ge.selected,t.isOverviewPage()),e)),onClick:t.bookOverviewNavClick},c.a.createElement(S.default,{className:ge.navIcon}),c.a.createElement("span",null,__("首页#readPage"))),t.renderBookCatlog())})),Ct(Ot(t),"renderAside",(function(){var e,r={willChange:"width",transition:"width 200ms cubic-bezier(0.1, 0, 0, 1) 0s",width:t.state.asideWrapperWidth};return c.a.createElement("div",vt({className:d()((e={},Ct(e,ge.asideWrapper,!0),Ct(e,ge.asidePinned,t.state.asidePinned),e)),"data-testid":"aside"},Ct({},B.c,!0)),c.a.createElement("div",{className:ge.aside,style:r},t.renderAsideHead(),t.renderNav()),t.renderDragBar(),t.renderSearch(),t.renderImportBookModal())})),t.state={historyView:!1,defaultCategory:"all",asideWidth:t.getAsideWidth(),asideWrapperWidth:t.getAsideWidth(),asideResizing:!1,asidePinned:!t.getAsideResizable(),contentSidebarVisible:!1,activeTabKey:null,searchModalVisible:!1},t.asideResized=!1,t.asideResizable=t.getAsideResizable(),t.bookCatalogRef={current:null},t}return t=u,(r=[{key:"componentDidMount",value:function(){Object(w.a)("finish-readerlayout-render");var e=this.props,t=e.group,r=e.book,n=e.dispatch;"#import_to_book"===window.location.hash&&Pt.start(),n({type:"search/update",payload:{display:!0,scope:"".concat(t.login,"/").concat(r.slug)}}),this.initHotKeys(),window.addEventListener("resize",this.handleResize),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("contentSidebarVisibleChange",this.handleContentSidebarVisibleChange),document.body.classList.add(ge.higherBackTop),document.body.classList.add("with-miniapp-code")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("contentSidebarVisibleChange",this.handleContentSidebarVisibleChange),document.body.classList.remove(ge.higherBackTop)}},{key:"canCreateDoc",value:function(){var e=this.props.book;return e.abilities&&e.abilities.create_doc}},{key:"getAsideWidth",value:function(){if(!this.props.withAside)return 0;var e=window.innerWidth;if(e<=F.c)return 0;var t=Math.max(Math.min(Math.floor(.18*e),F.a),F.b);return e-t<=At?F.b:t}},{key:"render",value:function(){var e,t,r=this,o=this.props,a=o.book,i=o.doc,l=o.children,u=o.withAside,s=o.Header,f=o.HeaderProps,p=void 0===f?{}:f,m=o.isDarkMode,h=o.hideHeader,y=o.isBookOverview,v=this.state,g=v.asidePinned,_=v.asideWrapperWidth,j=v.historyView,w=v.contentSidebarVisible,E=v.defaultCategory,O=window.appData.isDesktopApp,S=d()((Ct(t={"doc-head":!0},"doc-head-".concat(null==i||null===(e=i.type)||void 0===e?void 0:e.toLowerCase()),!0),Ct(t,"doc-type-head","Doc"===(null==i?void 0:i.type)&&!w),Ct(t,ge.asidePinned,g),t)),C=s||be,A=null;return this.isOverviewPage()&&(A=m?k.themeDarkToken["@yuque-color-bg-primary"]:k.themeToken["@yuque-color-bg-secondary"],a.cover&&(A=m?"linear-gradient(to bottom, rgba(0, 0, 0, 0.1) 0, rgba(0, 0, 0, 1) 70vh, rgba(0, 0, 0, 1) 100%), url(".concat(Object(T.a)(a.cover,{blur:"r_50,s_2"}),") center top/100% no-repeat"):"linear-gradient(to bottom, rgba(255, 255, 255, 0) 0, rgba(255, 255, 255, 1) 70vh, rgba(255, 255, 255, 1) 100%), url(".concat(Object(T.a)(a.cover,{blur:"r_50,s_2"}),") center top/100% no-repeat"))),c.a.createElement(b.a,{title:this.isOverviewPage()?null==a?void 0:a.name:null==i?void 0:i.title},c.a.createElement("div",{className:"lark","data-testid":"reader-main"},c.a.createElement("div",{className:"main-wrapper"},c.a.createElement(D.a,{showHistory:function(e){r.setState({historyView:!0,defaultCategory:e})}},c.a.createElement(L.a.Provider,{value:{ref:this.bookCatalogRef}},c.a.createElement("div",{className:d()(ge.wrapper,Ct({},ge.desktopWrapper,O)),style:{paddingLeft:g||_,background:A}},!h&&c.a.createElement(C,vt({className:S,me:this.props.me,group:this.props.group,book:this.props.book,doc:this.props.doc,key:"doc-header-".concat(i.id),shouldHideLogo:u,shouldShowSeparator:g,style:{left:_}},p)),l),j&&c.a.createElement(Dt,{doc:i,docDomain:"Doc",onCancel:function(){r.setState({historyView:!1})},onReverted:function(){n.a.success(__("恢复成功，正在跳转至编辑页，你可以在确认内容无误后更新文档"),3,(function(){window.location.href="/".concat(a.namespace,"/").concat(i.slug,"/edit")}))},defaultCategory:E}),u&&this.renderAside(),!y&&c.a.createElement(N.a,{isShare:window.appData.sharePage},c.a.createElement(yt.b,{doc:i})))))))}}])&&wt(t.prototype,r),i&&wt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),u}(i.Component);Nt.propTypes={history:u.a.object,group:u.a.object,book:u.a.object,doc:u.a.object,space:u.a.object,me:u.a.object,children:u.a.node,withAside:u.a.bool,renderHeader:u.a.object,isBookOverview:u.a.bool},Nt.displayName="ReaderLayout";var xt=c.a.memo((function(e){var t=Object(A.b)().isDarkMode,r=Object(P.e)();return Object(i.useEffect)((function(){r.startRender()}),[]),c.a.createElement(Ce.a,null,c.a.createElement(x.DocStatisticProvider,null,c.a.createElement(Nt,vt({},e,{isDarkMode:t}))))})),Rt=Object(m.d)((function(e){return{group:e.group,book:e.book,doc:e.doc,space:e.space,me:e.me,organization:e.organization}}))(Object(h.withRouter)(xt));Rt.displayName="WrapperReaderLayout";t.a=Rt},5076:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(8),i=r.n(a),c=r(555),l=r(62),u=r(269),s=r(4475),d=r(447),f=r(4538);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=window.appData.isDesktopApp,y=Object(d.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(10),r.e(82)]).then(r.bind(null,5060))}),{suspense:!0}),b=Object(d.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(5),r.e(76)]).then(r.bind(null,5061))}),{suspense:!0}),v=Object(d.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(7),r.e(24),r.e(60)]).then(r.bind(null,5062))}),{suspense:!0}),g=Object(d.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(10),r.e(93)]).then(r.bind(null,5066))}),{suspense:!0}),_=Object(d.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(5),r.e(88)]).then(r.bind(null,4649))}),{suspense:!0});function j(e){var t,r,a,i,c,l,d=e.doc,m=e.book,j=e.location,w=e.isBookOverview,E=u.a.normalizeReadPageQuery(j.query),k=p(Object(n.useReducer)((function(e){return e+1}),0),2),O=(k[0],k[1]),S=Object(n.useRef)(null),C=null===(t=S.current)||void 0===t||null===(r=t.readWriteView)||void 0===r?void 0:r.getHeader();if(Object(n.useEffect)((function(){var e,t;null===(e=S.current)||void 0===e||null===(t=e.readWriteView)||void 0===t||t.renderCtx.registerRerenderHandler((function(){O()}))}),[d.id]),Object(n.useEffect)((function(){var e=setTimeout((function(){g.preload(),v.preload(),_.preload()}),8e3);return function(){clearTimeout(e)}}),[]),"Doc"===d.type&&E.inner)return o.a.createElement(y,e);if("doc_embed"===E.view&&!w)return o.a.createElement(b,{from:E.from});var T={ref:S};!u.a.isRunAtRaw(d)||Object(s.a)()||null!==(a=window.appData)&&void 0!==a&&a.sharePage?l=g:(l=_,T.key=d.id);var A=w||!("singleDoc"in j.query)&&(null===(i=m.abilities)||void 0===i?void 0:i.read),P=w||"need_verify_password"===(null==d||null===(c=d.error)||void 0===c?void 0:c.code);return h&&(P=!0,A=!1),o.a.createElement(f.a,{withAside:A,hideHeader:P,Header:w?null:null==C?void 0:C.getComponent(),HeaderProps:w||null==C?void 0:C.getProps(),isBookOverview:w},w?o.a.createElement(v,null):o.a.createElement(l,T))}j.propTypes={group:i.a.object.isRequired,book:i.a.object.isRequired,doc:i.a.object.isRequired,location:i.a.object,match:i.a.object,history:i.a.object,dispatch:i.a.func,isBookOverview:i.a.bool},j.defaultProps={isBookOverview:!1},t.default=Object(c.d)((function(e){return{group:e.group,book:e.book,doc:e.doc}}))(Object(l.withRouter)(j))},582:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(38),o={datasheetRecord:n.a.datasheetRecord,docs:{exports:n.a.docs.exports,findOne:n.a.docs.findOne,addToCatalog:n.a.docs.addToCatalog},books:{exports:n.a.books.exports},import:{getImportResult:n.a.import.getImportResult},templates:{v2:n.a.templates.v2},editor:n.a.editor}},615:function(e,t,r){"use strict";r.d(t,"c",(function(){return g})),r.d(t,"o",(function(){return I})),r.d(t,"r",(function(){return L})),r.d(t,"m",(function(){return D})),r.d(t,"d",(function(){return R})),r.d(t,"u",(function(){return M})),r.d(t,"t",(function(){return B})),r.d(t,"s",(function(){return F})),r.d(t,"j",(function(){return U})),r.d(t,"p",(function(){return G})),r.d(t,"n",(function(){return V})),r.d(t,"q",(function(){return z})),r.d(t,"e",(function(){return W})),r.d(t,"i",(function(){return H})),r.d(t,"k",(function(){return Y})),r.d(t,"b",(function(){return q})),r.d(t,"a",(function(){return K})),r.d(t,"l",(function(){return X})),r.d(t,"f",(function(){return Q})),r.d(t,"g",(function(){return J})),r.d(t,"h",(function(){return $}));var n,o,a,i,c,l,u,s,d,f,p,m,h,y,b,v,g,_=r(0),j=r(18),w=r(138),E=r(2445),k=r(75),O=r(190),S=r(596),C=r(253),T=r(137);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function P(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e[e.sharePanel=1]="sharePanel",e[e.inviteSelectorChannel=2]="inviteSelectorChannel",e[e.shareChannels=3]="shareChannels",e[e.collaboratorChannel=4]="collaboratorChannel",e[e.shareQrCodeChannel=5]="shareQrCodeChannel"}(g||(g={}));var I=(P(n={},w.a.PERSON,__("公开给互联网所有人")),P(n,w.a.ORG,__("公开给空间所有成员")),P(n,w.a.INTERNAL,__("公开给集团所有正式员工")),n),L=(P(o={},w.a.PERSON,{private:__("互联网公开"),public:__("已开启互联网公开")}),P(o,w.a.ORG,{private:__("公开分享"),public:__("已开启公开分享")}),P(o,w.a.INTERNAL,{private:__("公开分享"),public:__("已开启公开分享")}),o),D={private:__("当前小记为私密，仅自己可访问"),public:__("当前小记为公开")},N=(P(a={},w.a.PERSON,{private:__("当前知识库为私密，仅自己和协作者可访问"),public:__("当前知识库为公开，互联网所有人可访问")}),P(a,w.a.ORG,{private:__("当前知识库为私密，仅自己和协作者可访问"),intranet:__("当前知识库为公开，空间所有成员可访问"),public:__("当前知识库为公开，互联网所有人可访问")}),P(a,w.a.INTERNAL,{private:__("当前知识库为私密，仅自己和协作者可访问"),extend_private:__("当前知识库为私密，仅协作者和指定部门正式员工可访问"),intranet:__("当前知识库为公开，集团所有正式员工可访问"),public:__("当前知识库为公开，集团所有人可访问")}),a),x=(P(i={},w.a.PERSON,{private:__("当前文档为私密，仅自己和协作者可访问"),public:__("当前文档为公开，互联网所有人可访问")}),P(i,w.a.ORG,{private:__("当前文档为私密，仅自己和协作者可访问"),intranet:__("当前文档为公开，空间所有成员可访问"),public:__("当前文档为公开，互联网所有人可访问")}),P(i,w.a.INTERNAL,{private:__("当前文档为私密，仅自己和协作者可访问"),extend_private:__("当前文档为私密，仅协作者和指定部门正式员工可访问"),intranet:__("当前文档为公开，集团所有正式员工可访问"),public:__("当前文档为公开，集团所有人可访问")}),i),R=(P(c={},w.b.BOOK,N),P(c,w.b.DOC,x),c),M=(P(l={},w.a.PERSON,{private:__("开启后，互联网所有人可访问"),public:__("互联网所有人可公开访问内容")}),P(l,w.a.INTERNAL,{private:__("开启后，拿到链接的集团正式员工可访问"),public:__("拿到链接的集团正式员工可访问")}),l),B=(P(u={},w.a.PERSON,{private:__("开启后，互联网所有人可访问"),public:__("互联网所有人可公开访问内容")}),P(u,w.a.ORG,{private:__("开启后，空间内所有成员可访问"),intranet:__("空间内所有成员可公开访问内容"),public:__("互联网所有人可公开访问内容")}),P(u,w.a.INTERNAL,{private:__("开启后，拿到链接的集团正式员工可访问"),intranet:__("拿到链接的集团正式员工可访问"),public:__("拿到链接的集团所有人可访问")}),u),F=(P(s={},j.PRIVACY.private,"private"),P(s,j.PRIVACY.public,"public"),P(s,j.PRIVACY.intranet,"intranet"),s),U=function(e,t,r,n,o){var a=Object(E.d)(e,t,r,n,o).privacy;return F[a]},G=(P(d={},w.a.ORG,{desc:__("默认分享范围是空间所有成员。可以选择分享给互联网所有人，内容需符合相关法律法规及语雀 {terms} 约定。",{terms:_.createElement("a",{href:"https://www.yuque.com/terms#ubab347c6",target:"_blank"},__("服务协议"))}),action:[{label:__("空间所有成员可访问"),value:j.PRIVACY.intranet},{label:__("互联网所有人可访问"),value:j.PRIVACY.public,tip:function(e){var t,r=null==e||null===(t=e.abilities)||void 0===t?void 0:t.destroy;return k.a.isPremium(e)&&0===(null==e?void 0:e.share_to_outside_enable)?__("管理员已关闭空间外人员访问权限，请联系管理员开启。"):k.a.isFree(e)?r?_.createElement(_.Fragment,null,__("升级为专业版、旗舰版后可开启互联网公开"),_.createElement("a",{href:"/r/organizations/dashboard/cashier?action=buy",target:"_blank",style:{marginLeft:"5px"}},k.a.getPaymentActionGuide(null==e?void 0:e.payment_type))):__("联系管理员升级为专业版、旗舰版后可开启互联网公开"):k.a.isExpired(e)?_.createElement(_.Fragment,null,__("过期空间不可以设置互联网所有人可访问"),r&&_.createElement("a",{href:"/r/organizations/dashboard/cashier?action=renew",target:"_blank",style:{marginLeft:"5px"}},k.a.getPaymentActionGuide(null==e?void 0:e.payment_type))):""}}]}),P(d,w.a.INTERNAL,{desc:__("默认分享范围是集团正式员工。分享给集团所有人（含外包、未签订三方协议的实习生）需审批申请，请注意信息安全。"),action:[{label:__("集团内所有正式员工可访问"),value:j.PRIVACY.intranet},{label:__("集团内所有人可访问"),value:j.PRIVACY.public}]}),d),V=(P(f={},w.b.BOOK,__("开启后，本知识库下的所有公开内容，都需要密码访问。")),P(f,w.b.DOC,__("所属知识库已开启密码，本内容已默认继承该密码。")),f),z=(P(h={},w.b.BOOK,(P(p={},w.a.PERSON,{desc:__("开启后，互联网所有人可搜到知识库里的公开内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许语雀内公开搜索")}),P(p,w.a.ORG,{desc:__("开启后，空间成员可在空间里搜到知识库里的公开内容")+__("（如果开启了密码，则搜索设置无效）"),action:"允许空间内搜索"}),P(p,w.a.INTERNAL,{desc:__("开启后，集团所有人可搜到知识库里的公开内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许内网公开搜索")}),p)),P(h,w.b.DOC,(P(m={},w.a.PERSON,{desc:__("开启后，互联网所有人可在语雀内搜索到当前内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许语雀内公开搜索"),tip:__("所属知识库已允许语雀内公开搜索，文档无法独立设置。{terms}",{terms:_.createElement("a",{href:"https://www.yuque.com/yuque/thyzgp/lk1xr8",target:"_blank"},__("查看帮助"))})}),P(m,w.a.ORG,{desc:__("开启后，空间成员可在空间里搜索到当前内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许空间内搜索"),tip:__("所属知识库已允许空间内搜索，文档无法独立设置。{terms}",{terms:_.createElement("a",{href:"https://www.yuque.com/yuque/thyzgp/lk1xr8",target:"_blank"},__("查看帮助"))})}),P(m,w.a.INTERNAL,{desc:__("开启后，集团内所有人都可在语雀里搜到当前内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许内网公开搜索"),tip:__("所属知识库已允许内网公开搜索，文档无法独立设置。{terms}",{terms:_.createElement("a",{href:"https://yuque.antfin.com/lark/bsgp0v/wpclft",target:"_blank"},__("查看帮助"))})}),m)),h),W=(P(y={},w.b.BOOK,__("可编辑，将拥有知识库的编辑权限。可阅读，仅拥有阅读和评论权限。")),P(y,w.b.DOC,__("可编辑，将拥有文档的编辑权限。可阅读，仅拥有阅读和评论权限。")),P(y,"action",[{label:__("可阅读"),value:C.ROLE.readonly,key:"readonly"},{label:__("可编辑"),value:C.ROLE.edit,key:"edit"}]),y),H={descBookDoc:__("开启后，允许通过邀请链接快速添加空间外人员。通过此方式加入协作的人，将自动加入空间。"),descGroup:__("开启后，允许通过邀请链接快速添加空间外人员。通过此方式加入协作的人，将自动加入团队。"),action:__("邀请空间外成员"),tip:__("管理员已关闭空间外人员添加权限，请联系管理员开启。{terms}",{terms:_.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/csb5nu",target:"_blank"},__("查看帮助"))})},Y={descBookDoc:__("开启后，需经过手动审批确认，获得链接的人才能成为协作者。"),descGroup:__("开启后，需经过手动审批确认，获得链接的人才能加入团队。"),action:__("提交申请后需审批确认")},q={desc:__("成员，将拥有团队知识库的编辑权限。只读成员，仅拥有只读权限。"),action:[{label:__("成员"),value:T.ROLE.member,key:"member"},{label:__("只读成员"),value:T.ROLE.readonly,key:"readonly"}]},K=(P(b={},w.a.PERSON,{action:[{label:__("仅协作者可访问"),value:j.PRIVACY.private},{label:__("互联网所有人可访问"),value:j.PRIVACY.public}]}),P(b,w.a.ORG,{action:[{label:__("仅协作者可访问"),value:j.PRIVACY.private},{label:__("空间所有成员可访问"),value:j.PRIVACY.intranet},{label:__("互联网所有人可访问"),value:j.PRIVACY.public,tip:function(e){var t,r=null==e||null===(t=e.abilities)||void 0===t?void 0:t.destroy;return k.a.isPremium(e)&&0===(null==e?void 0:e.share_to_outside_enable)?__("管理员已关闭空间外人员访问权限，请联系管理员开启。"):k.a.isFree(e)?r?_.createElement(_.Fragment,null,__("升级为专业版、旗舰版后可开启互联网公开"),_.createElement("a",{href:"/r/organizations/dashboard/cashier?action=buy",target:"_blank",style:{marginLeft:"5px"}},k.a.getPaymentActionGuide(null==e?void 0:e.payment_type))):__("联系管理员升级为专业版、旗舰版后可开启互联网公开"):k.a.isExpired(e)?_.createElement(_.Fragment,null,__("过期空间不可以设置互联网所有人可访问"),r&&_.createElement("a",{href:"/r/organizations/dashboard/cashier?action=renew",target:"_blank",style:{marginLeft:"5px"}},k.a.getPaymentActionGuide(null==e?void 0:e.payment_type))):""}}]}),P(b,w.a.INTERNAL,{action:[{label:__("仅协作者可访问"),value:j.PRIVACY.private},{label:__("指定部门正式员工可访问"),value:j.PRIVACY.extend_private},{label:__("集团内所有正式员工可访问"),value:j.PRIVACY.intranet},{label:__("集团内所有人可访问"),value:j.PRIVACY.public}]}),b),X=(P(v={},w.a.PERSON,{action:[{label:__("仅协作者可访问"),value:j.PRIVACY.private},{label:__("互联网所有人可访问"),value:j.PRIVACY.public}]}),P(v,w.a.ORG,{action:[{label:__("仅协作者可访问"),value:j.PRIVACY.private},{label:__("空间所有成员可访问"),value:j.PRIVACY.intranet}]}),P(v,w.a.INTERNAL,{action:[{label:__("仅协作者可访问"),value:j.PRIVACY.private},{label:__("指定部门正式员工可访问"),value:j.PRIVACY.extend_private},{label:__("集团内所有正式员工可访问"),value:j.PRIVACY.intranet}]}),v),Q=function(e,t){var r=__("开启后，互联网所有获得链接的人皆可访问知识库下的全部内容。你需对其合法合规性负责，遵守相关法律法规及语雀 {terms} 约定，违规内容可能无法被查看。",{terms:_.createElement("a",{href:"https://www.yuque.com/terms#ubab347c6",target:"_blank"},__("服务协议"))}),n=__("开启后，互联网所有获得链接的人皆可访问。你需对其合法合规性负责，遵守相关法律法规及语雀 {terms} 约定，违规内容可能无法被查看。",{terms:_.createElement("a",{href:"https://www.yuque.com/terms#ubab347c6",target:"_blank"},__("服务协议"))}),o=e===w.b.BOOK?r:n;return Object(O.a)()?new Promise((function(e){t.confirm({icon:_.createElement(S.default,null),width:505,title:__("确认公开给互联网所有人"),content:_.createElement("span",null,o),okText:__("确认"),cancelText:__("取消"),onOk:function(){e(!0)},onCancel:function(){e(!1)}})})):e===w.b.NOTE?Promise.resolve(!0):new Promise((function(e){t.confirm({icon:_.createElement(S.default,null),width:505,title:__("申请开启集团所有人可访问"),content:__("设置 集团所有人可访问 需进行审批申请，主管通过后可对所有外包、未签订三方协议的实习生可见，请注意信息安全。"),okText:__("确认"),cancelText:__("取消"),onOk:function(){e(!0)},onCancel:function(){e(!1)}})}))},J=[{label:__("仅团队成员可访问"),value:j.PRIVACY.private},{label:__("空间所有成员可访问"),value:j.PRIVACY.intranet}],$=[{label:__("仅团队成员可访问"),value:j.PRIVACY.private},{label:__("指定部门正式员工可访问"),value:j.PRIVACY.extend_private},{label:__("集团内所有正式员工可访问"),value:j.PRIVACY.intranet},{label:__("集团内所有人可访问"),value:j.PRIVACY.public}]},616:function(e,t,r){"use strict";r.r(t),r.d(t,"getFileAccept",(function(){return j})),r.d(t,"getImageAccept",(function(){return w})),r.d(t,"EmbedButtonStatus",(function(){return E})),r.d(t,"getIsDiabledPreviewAndEmbed",(function(){return k})),r.d(t,"getLocalDocAcceptArr",(function(){return O})),r.d(t,"getFileAcceptArr",(function(){return S})),r.d(t,"getImageAcceptArr",(function(){return C})),r.d(t,"getVideoAcceptArr",(function(){return T})),r.d(t,"getAudioAcceptArr",(function(){return A}));var n=r(110),o=r(180),a=n.a.LOCAL_DOC_EXT,i=n.a.LOCAL_DOC_EXT_NORMAL,c=n.a.LOCAL_DOC_EXT_PAID,l=n.a.FILE_EXT,u=n.a.FILE_EXT_NORMAL,s=n.a.FILE_EXT_PAID,d=n.a.IMAGE_EXT,f=n.a.IMAGE_EXT_NORMAL,p=n.a.IMAGE_EXT_PAID,m=n.a.VIDEO_EXT,h=n.a.VIDEO_EXT_NORMAL,y=n.a.VIDEO_EXT_PAID,b=n.a.AUDIO_EXT,v=n.a.AUDIO_EXT_NORMAL,g=n.a.AUDIO_EXT_PAID,_=function(){var e="undefined"!=typeof navigator?navigator.userAgent:"";return/android/i.test(e)};function j(){return _()?"*/*":(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?s.join(","):u.join(","):l.join(",")}function w(){return _()?"image/*":(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?p.join(","):f.join(","):d.join(",")}var E={NORMAL:0,DISABLE:1,PREVENT:2};function k(){return!(window.appData||{}).isYuque||Object(o.isPaidCheckAll)()?E.NORMAL:E.PREVENT}function O(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?c:i:a}function S(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?s:u:l}function C(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?p:f:d}function T(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?y:h:m}function A(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?g:v:b}},70:function(e,t,r){"use strict";var n=r(17);t.a=n.a}}]);