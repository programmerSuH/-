/*! For license information please see c__lazyWordingCommentPanel.766488b4.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[149,24,115],{2449:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(2457),o=function(){return Promise.all([r.e(0),r.e(1),r.e(122)]).then(r.bind(null,3376)).then((function(t){return t.default}))};function i(){var t=Object(n.a)({loader:o,name:"TemplateSelector"}),e=t.loadSelector,r=t.showSelector;return{loadTemplateSelector:e,showTemplateSelector:function(t){return r(t,{width:t.isDesktop?1100:1140,maskClosable:!0,centered:!0})},contextHolder:t.contextHolder}}},2457:function(t,e,r){"use strict";r.d(e,"a",(function(){return m}));var n=r(0),o=r(433),i=r(252),a=function(t){var e=t.loader,r=n.useRef(null);return function(){return r.current?Promise.resolve(r.current):e().then((function(t){return r.current=t,r.current})).catch((function(t){return console.error(t.stack)}))}},c={modal:"styles-module_modal_8nT+9"};function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(){l=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var y={};function d(){}function h(){}function m(){}var v={};f(v,i,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==e&&r.call(b,i)&&(v=b);var w=m.prototype=d.prototype=Object.create(v);function O(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,i,a,c){var l=p(t[n],t,i);if("throw"!==l.type){var f=l.arg,s=f.value;return s&&"object"==u(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return o("throw",t,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=j(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:h,configurable:!0}),h.displayName=f(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,f(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},O(_.prototype),f(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),f(w,c,"Generator"),f(w,i,(function(){return this})),f(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),y}},t}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function m(t){var e=t.loader,r=t.name,u=d(o.a.useModal(),2),f=u[0],p=u[1],h=a({loader:e}),m=function(){var t,e=(t=l().mark((function t(e,o){var a,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:if(a=t.sent){t.next=6;break}return console.error("SelectorComponent for ".concat(r," load failed")),t.abrupt("return");case 6:return u=new Promise((function(t){var r=f.info({}),u=function(){var t,n;r.destroy(),null==e||null===(t=e.onClose)||void 0===t||t.call(e),null==o||null===(n=o.afterClose)||void 0===n||n.call(o)},l=s(s({},e),{},{onSelect:function(e){t(e),u()},onClose:function(){t(void 0),u()}});r.update(s(s({className:c.modal,icon:null,centered:!0,cancelText:""},o),{},{content:n.createElement(i.a,null,n.createElement(a,l))}))})),t.next=9,u;case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){y(i,n,o,a,c,"next",t)}function c(t){y(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}();return{loadSelector:function(){return h()},showSelector:m,contextHolder:p}}},2686:function(t,e,r){"use strict";var n=r(84),o=r.n(n),i={_bookGrayscaleConfig:null,getDefaultDocumentFormat:function(t,e,r){return e=e||"",r=r||{},o.a.DOC_DEFAULT_FORMAT[t]||o.a.FORMAT.LAKE}};e.a=i},2699:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return u}));var n=r(1735),o=r.n(n),i=(r(30),r(174));function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search;return e&&o.a.parse(e)[t]||""}var c=window.self!==window.top;function u(){var t=a("mode"),e=i.a.get("topicsPageMode");return"clean"===t?(i.a.set("topicsPageMode","clean"),"clean"):"normal"===t?(i.a.remove("topicsPageMode"),"normal"):e&&"clean"===e&&c?"clean":"normal"}},2803:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(191),o={doc:n.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_DOC_CREATION,board:n.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_BOARD_CREATION,table:n.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_TABLE_CREATION,sheet:n.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_SHEET_CREATION,repoHomePage:n.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_REPO_HOME_PAGE,teamHomePage:n.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_TEAM_HOME_PAGE,personalHomePage:n.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_GUIDE_4_PERSONAL_HOME_PAGE}},3455:function(t,e,r){"use strict";r.r(e),r.d(e,"isWebAppMiniApp",(function(){return L})),r.d(e,"isYuque",(function(){return k})),r.d(e,"isDesktopApp",(function(){return T})),r.d(e,"isYuqueMobileApp",(function(){return C})),r.d(e,"isDev",(function(){return A})),r.d(e,"isEN",(function(){return N})),r.d(e,"isWin",(function(){return R})),r.d(e,"myNotesConsts",(function(){return I})),r.d(e,"editorConsts",(function(){return D})),r.d(e,"getFilterBarConfig",(function(){return F})),r.d(e,"downloadFileHandler",(function(){return G})),r.d(e,"getLocale",(function(){return M})),r.d(e,"getNoteDetailLink",(function(){return U})),r.d(e,"getPreviewImage",(function(){return B})),r.d(e,"parseCardData",(function(){return V})),r.d(e,"getDefaultShortCutText",(function(){return q})),r.d(e,"combineNotes",(function(){return H})),r.d(e,"orderTag",(function(){return W})),r.d(e,"openDocLink",(function(){return z})),r.d(e,"getLocaleMonthName",(function(){return K})),r.d(e,"showImgBrowser",(function(){return $})),r.d(e,"hotKeys",(function(){return J})),r.d(e,"NOTE_TAG_WITH_HOTKEY_CLASS",(function(){return Q}));var n,o=r(30),i=r.n(o),a=r(343),c=r.n(a),u=r(1810),l=r(233),f=r.n(l),s=r(532);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===p(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var m=window,v=m.appData,g=m.navigator,b=m.location,w=v||{},O=w.env,_=w.me,E=void 0===_?{}:_,j=w.locale,S="note/pinned/show/".concat(E.id),x="note/order/".concat(E.id),P=["January","February","March","April","May","June","July","August","September","October","November","December"],L=window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp,k=v.isYuque,T=v.isDesktopApp,C=v.isYuqueMobileApp,A="local"===O,N="en-us"===j,R="win32"===g.platform.toLowerCase(),I={NOTE_ORDER_KEY:x,NOTE_PINNED_SHOW_KEY:S,NOTE_QUERY_STATUS_INTERVAL:6e4,NOTE_WS_RECONNECT_DEFUALT_INTERVAL:12e4,NOTE_ITEM_CONTENT_MIN_HEIGHT:214,NOTE_ALLOW_PAGEPATH_LIST:["/dashboard/notes","/desktop/notes"],NOTE_LIST_VIEW_MODES:{lite:"lite",full:"full"},COLLAPSE_BTN_CLASS:"note-item-collapse",SUBMIT_BTN_CLASS:"note-item-submit",NOTE_LIST_ITEM_CLASS:"note-list-item",NOTE_LIST_READ_TAG_ADD_CLASS:"note-list-item-read-tag-add"},D={NOTE_EDITOR_AUTO_SAVE_INTERVAL:3e4},F=function(){var t,e;return k?(h(t={},s.FILTER_TYPES.image,__("图片")),h(t,s.FILTER_TYPES.bookmark,__("书签")),h(t,s.FILTER_TYPES.attachment,__("附件")),h(t,s.FILTER_TYPES.wechatRobot,__("来自微信")),h(t,s.FILTER_TYPES.share,__("分享中")),t):(h(e={},s.FILTER_TYPES.image,__("图片")),h(e,s.FILTER_TYPES.bookmark,__("书签")),h(e,s.FILTER_TYPES.attachment,__("附件")),h(e,s.FILTER_TYPES.dingTalkRobot,__("来自钉钉")),h(e,s.FILTER_TYPES.share,__("分享中")),e)},G=function(t,e){var r=new URL(t);r.searchParams.append("yuque-desktop-download",""),e&&r.searchParams.append("filename",encodeURIComponent(e)),fetch(r.toString())},M=function(){return(new URLSearchParams(b.search).get("language")||"").startsWith("en")?"en":"zh-cn"},U=function(t){var e=t.slug,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).hostUrl,n=void 0===r?"".concat(b.protocol,"//").concat(b.host):r;return"".concat(n,"/r/note/").concat(e)},B=function(t,e){var r=e.size||80;try{var n=new URL(t);return n.search="",n.hash="",e.noResize?n.toString():(n.searchParams.append("x-oss-process","image/resize,m_fill,h_".concat(r,",w_").concat(r)),n.toString())}catch(e){return t}},Y=(h(n={},s.FILTER_TYPES.image,'card[name="image"]'),h(n,s.FILTER_TYPES.bookmark,'card[name="bookmarklink"]'),h(n,s.FILTER_TYPES.attachment,'card[name="file"],card[name="localdoc"]'),n),V=function(t,e){return[s.FILTER_TYPES.all,s.FILTER_TYPES.share,s.FILTER_TYPES.dingTalkRobot,s.FILTER_TYPES.wechatRobot].includes(e)?t:t.map((function(t){var r=t.content.source,n=Y[e];if(r){var o=(new DOMParser).parseFromString(r,"text/html").body.querySelectorAll(n),i=[];o.forEach((function(t){var e=t.getAttribute("value");if(e){var r=JSON.parse(decodeURIComponent(e).slice(5));i.push(d(d({},r),{},{uuid:f()(10)}))}})),t.cards=i.filter((function(t){return e===s.FILTER_TYPES.image||e===s.FILTER_TYPES.attachment?t.src:e===s.FILTER_TYPES.bookmark&&(t.detail||(t.detail={_serializer:"web.editor_link_detail"}),t.detail)}))}return t})).filter((function(t){return t.cards&&t.cards.length}))},q=function(){return __("按 {shortcut} 发送",{shortcut:R?"Ctrl + Enter":"⌘ Enter"})},H=function(t){var e="";return t.forEach((function(t){e+=(t||"").replace(/<!doctype\s+lake>/g,"").replace(/<meta[^>]{0,1024}?\/>/g,"")})),["<!doctype lake>",'<meta name="typography" content="classic" />',e].join("")},W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t)return[];var r=[],n=[];return t.forEach((function(t){e&&e.some((function(e){return(null==e?void 0:e.id)===t.id}))?n.push(d(d({},t),{},{selected:!0})):r.push(t)})),[].concat(r,n)},z=function(t,e){if(!T)return window.open(t);var r=new URL(b.href);r.searchParams.get("open_doc_in_desktop")||r.searchParams.get("open_in_desktop")?window.parent.postMessage({name:"openDocInDesktop",args:[t,e]},"*"):window.openExternalLink(t,!0)},K=function(t){if(i()(t).format("YYYY-MM")===i()().format("YYYY-MM"))return __("本月");var e=i()(t).format("YYYY"),r=i()(t).format("M");if(N){var n=P[parseInt(r,10)];if(n)return"".concat(n," year")}return"".concat(e," ").concat(__("年")," ").concat(r," ").concat(__("月"))},$=function(t,e){var r=t.filter((function(t){return t.src})).map((function(t){return new Promise((function(e){if(t.width||t.height)e(t);else{var r=document.querySelector("#note-image-item-".concat(t.uuid));if(r){var n=r.getAttribute("origin-width"),o=r.getAttribute("origin-height");if(n||o)e(d(d({},t),{},{width:n,height:o}));else{var i=B(t.src,{noResize:!0}),a=new Image;a.src=i,a.onload=function(){var n=a.width,o=a.height;r.setAttribute("origin-width",String(n)),r.setAttribute("origin-height",String(o)),e(d(d({},t),{},{width:n,height:o}))}}}}}))}));Promise.all(r).then((function(t){var r=t.map((function(t){return{src:t.src,msrc:t.src,w:t.width,h:t.height}}));u.a.previewImages(r,e)}))},J={openTag:{key:c.a.mac?"⌘+option+k":"ctrl+alt+k",title:c.a.mac?"⌥ ⌘ K":"Alt Ctrl K"}},Q="note-tag-with-hotkey"},3458:function(t,e,r){"use strict";var n=r(0),o=r.n(n),i=r(107),a=r.n(i),c=r(233),u=r.n(c),l=r(84),f=r.n(l),s=r(2853),p=r.n(s),y=r(3484),d=r(616),h=r(111),m=r(3481),v=r.n(m),g=r(3482),b=r.n(g),w=r(1788),O=r.n(w),_=r(3483),E=r(431),j=r(165),S=r(174),x=r(38);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==P(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===P(i)?i:String(i)),n)}var o,i}var k,T=a()("editor:cache"),C=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.key=e}var e,r,n;return e=t,(r=[{key:"retrieve",value:function(){var t={format:null,value:null};T("[retrieve]key: ",this.key);var e=S.a.get(this.key);if(!e)return null;T("[retrieve]find text: ",e);var r=p.a.guessFormat(e);return t.format=r,t.value=e,T("[retrieve]doc: ",t),t}},{key:"put",value:function(t,e){T("[put]content cached: ","".concat(this.key," -> ").concat(t)),S.a.set(this.key,t)}},{key:"clear",value:function(){S.a.remove(this.key)}}])&&L(e.prototype,r),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function N(t){return function(t){if(Array.isArray(t))return R(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function I(){I=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==A(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function D(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function F(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){D(i,n,o,a,c,"next",t)}function c(t){D(i,n,o,a,c,"throw",t)}a(void 0)}))}}function G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U(n.key),n)}}function M(t,e,r){return(e=U(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U(t){var e=function(t,e){if("object"!==A(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===A(e)?e:String(e)}var B=a()("biz:lakex_mini_editor_base"),Y=(null===(k=window.appData)||void 0===k?void 0:k.me)||{},V=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),M(this,"getDefaultSuggestions",(function(){return e.options.getDefaultSuggestions?e.options.getDefaultSuggestions():[]})),M(this,"setEngine",(function(t){e._engine=t})),M(this,"getEngine",(function(){return e._engine})),M(this,"setValue",(function(t){var r=t;t?t.startsWith("<")?(r={type:"lake",value:t},e._engine.setDocument(r)):"string"==typeof t&&(r={type:"json",value:JSON.parse(t)},e._engine.setDocument(r)):e._engine.setDocument()})),M(this,"getValue",(function(){return e._engine?e._engine.getPureContent():e.getDefaultValue()})),M(this,"isEmpty",(function(){return!e._engine||e._engine.isEmpty()})),M(this,"getSafetyValue",F(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.contentReady();case 2:return t.abrupt("return",e.getValue());case 3:case"end":return t.stop()}}),t)})))),M(this,"getHtml",(function(){return e._engine?e._engine.getPureHtml():null})),M(this,"focus",(function(t){if(!e._engine)return null;e._engine.focus(t)})),M(this,"contentReady",F(I().mark((function t(){var r,n;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._engine){t.next=2;break}return t.abrupt("return",null);case 2:return r=0,n=function t(n,o){e._engine.canGetDocument()?n():r>10?o():(r++,setTimeout((function(){t(n,o)}),1e3))},t.abrupt("return",new Promise(n));case 5:case"end":return t.stop()}}),t)})))),M(this,"saveAll",(function(){if(!e.options.disableCache){var t={format:f.a.FORMAT.LAKE,value:e.getValue(),html:e.getHtml()};e.saveToCache(t)}})),this.options=r,this.from=r.from||"reply",this.targetType=r.targetType,this.belong=r.belong,this.belongType=r.belongType,this.group=r.group,this.target=r.target,this.attachType=r.attachType,this.isEditMode=!!r.target,this.type=this.getType(),this.ctoken=Object(E.a)(window);var n=this.getCacheKey();this.cacheKeys={title:"".concat(n,"/title"),content:"".concat(n,"/content")},this.editorCache=new C(this.cacheKeys.content),this.uuid=this.getUuid(),this._engine=null,this.initialDocument=null,this.init()}var e,r,n;return e=t,r=[{key:"init",value:function(){this.initialDocument=this.getInitialDocument(),B("init use: ",this.initialDocument)}},{key:"buildOptions",value:function(t){var e={supportTranslate:b()(),supportImgOCR:O()(),hideEmbedButton:v()(),hideVipIcon:Object(_.a)(),board:{boardWebProxyParams:{webProxy:x.a,userId:null==Y?void 0:Y.id,spm:h,appData:window.appData}},image:{uploadFileURL:this.getImageUploadUrl(),accept:Object(d.getImageAcceptArr)()},file:{uploadFileURL:this.getFileUploadUrl(),accept:Object(d.getFileAcceptArr)(),localdocAccept:Object(d.getLocalDocAcceptArr)(),embedButtonStatus:Object(d.getIsDiabledPreviewAndEmbed)()},transfer:{transferFilesURL:this.getTransferUrl()},localdoc:{uploadFileURL:this.getFileUploadUrl(),accept:Object(d.getLocalDocAcceptArr)()},mention:{mentionURL:j.a.patchGroupIdToUrl(this.getMentionActionUrl()),defaultList:this.getDefaultSuggestions()},lockedtext:{action:this.getCryptoUrl()},placeholder:(null==t?void 0:t.placeholder)||this.getPlaceholder(),link:{autoCompleteLink:null==t?void 0:t.autoCompleteLink},video:{uploadAction:this.getMediaUploadUrl("video"),queryAction:"/api/video",accept:Object(d.getVideoAcceptArr)()},audio:{uploadFileURL:this.getMediaUploadUrl("audio"),queryURL:"/api/video",accept:Object(d.getAudioAcceptArr)()},vote:{allowVote:!0,queryDetailUrl:"api/votes",queryCheckUrl:"api/votes/mine",voteUrl:"api/votes"},yuque:{disableEmbedView:this.getDisableYuqueCardEmbedView()},materialLibrary:{component:o.a.createElement(y.a,{storage:S.a,webProxy:x.a})},fullscreen:{enable:this.getEnableFullEditor()}},r=[],n=this.getBlockedCards();return n&&n.length>1&&(r=Array.from(new Set([].concat(N(r),N(n))))),e.disabledPlugins=r,e}},{key:"getProps",value:function(){return{format:this.getFormat(),defaultValue:this.getDefaultValue(),autoFocus:this.getAutoFocus(),isMiniSize:this.isMiniSize()}}},{key:"getType",value:function(){return this.options.type||"unknown"}},{key:"getAutoFocus",value:function(){var t=this.options.autoFocus;return null!=t?t:!!this.options.useMiniGuide}},{key:"isMiniSize",value:function(){return!1}},{key:"getEnableFullEditor",value:function(){return!0}},{key:"getBlockedCards",value:function(){return["video","checkIn","vote","audio","premium"]}},{key:"getUuid",value:function(){var t=this.cacheKeys.uuid,e=S.a.get(t);return e||(e=u()(32)+u()(32),S.a.set(t,e)),e}},{key:"getDefaultFormat",value:function(){return f.a.FORMAT.LAKE}},{key:"getFormat",value:function(){var t=this.options.format;return t||this.initialDocument.format}},{key:"getPlaceholder",value:function(){return this.options.placeholder}},{key:"getInitialDocument",value:function(){if(this.initialDocument)return this.initialDocument;var t=this.loadFromCache();if(B("cached document:",t),this.isEditMode){var e=this.getContentObject();return B("adapted content: ",e),t&&(B("merge with cached content",t),e.format=t.format||e.format,e.title=t.title||e.title,e.value=t.value||e.value),e}if(t)return t.format=t.format||this.getDefaultFormat(),t;var r=this.loadFromUrl();return r||{format:this.getDefaultFormat(),title:null,value:null}}},{key:"getContentObject",value:function(t){return{format:(t=t||this.target||{}).format||this.getDefaultFormat(),title:t.title||t.name||"",value:t.value||t.body_asl||t.content}}},{key:"getDefaultValue",value:function(){var t=this.options.defaultValue;return t||this.initialDocument.value}},{key:"getFullUrl",value:function(t){return this.isEditMode&&!this.options.useBelongAttach?"".concat(t,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(t,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):null}},{key:"getTransferUrl",value:function(){var t="/api/upload/copy?type=attachment",e=this.getFullUrl(t);return e||(e="".concat(t,"&attachable_uuid=").concat(this.uuid,"&from=").concat(this.from)),e}},{key:"getFileUploadUrl",value:function(){var t="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.getFullUrl(t)}},{key:"getMediaUploadUrl",value:function(t){var e="/api/video?ctoken=".concat(this.ctoken,"&format=").concat(t);return this.getFullUrl(e)}},{key:"getImageUploadUrl",value:function(){var t=this.getFileUploadUrl();return t?t.replace("&type=attachment","&type=image"):null}},{key:"getMentionActionUrl",value:function(){var t="";return this.isEditMode&&!this.options.useBelongAttach?t="/api/users/complete?target_type=".concat(this.attachType,"&target_id=").concat(this.target.id):this.belong&&(t="/api/users/complete?target_type=".concat(this.attachType,"&target_id=").concat(this.belong.id)),t}},{key:"getCryptoUrl",value:function(){return"/api/services/crypto"}},{key:"getDisableYuqueCardEmbedView",value:function(){return this.options.disableYuqueCardEmbedView}},{key:"saveToCache",value:function(t){B("save to cache:",t),t.format&&(t.title&&S.a.set(this.cacheKeys.title,t.title),this.needCacheContent(t)?this.editorCache.put(t.value,t.format):B("value is empty or the same as origin, ignore cache"))}},{key:"needCacheContent",value:function(t){if(!t.value)return!1;if(p.a.isBlank(t))return this.editorCache.clear(),!1;if(!this.target)return!0;var e=this.getContentObject();return!p.a.isContentSame(t.format,e.value,t.value)}},{key:"reset",value:function(){B("reset editor"),this.clearCache(),this._engine&&this._engine.setDocument()}},{key:"isContentChanged",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!t){var e=this.loadFromCache();e&&(t=e.value)}if(!this.target)return!0;var r="<cursor />";return this.target.body_asl.trim().replace(r,"")!==t.trim().replace(r,"")}},{key:"clearCache",value:function(){var t=this;B("clear cache"),Object.keys(this.cacheKeys).forEach((function(e){S.a.remove(t.cacheKeys[e])}))}},{key:"getCacheKey",value:function(){return this.isEditMode&&this.target&&this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/").concat(this.target.id,"/edit"):this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/new"):"autosave/".concat(this.type)}},{key:"loadFromUrl",value:function(){}},{key:"loadFromCache",value:function(){var t=!1,e={format:null,title:null,value:null},r=this.editorCache.retrieve();if(r&&(t=!0,e.format=r.format,e.value=r.value),this.cacheKeys.title){var n=S.a.get(this.cacheKeys.title);n&&(t=!0,e.title=n)}return t?e:null}}],n=[{key:"getEmptyDocument",value:function(){return{format:f.a.FORMAT.LAKE,value:null}}}],r&&G(e.prototype,r),n&&G(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.a=V},3459:function(t,e,r){"use strict";var n=r(3504),o={};e.a=window.isDesktopOfflineApp?o:n.a},3462:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var a=r(3455).myNotesConsts,c=r(46),u=r(168),l=i((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)})),f=a.COLLAPSE_BTN_CLASS,s=a.SUBMIT_BTN_CLASS,p=10;function y(t){var e=document.querySelectorAll(".".concat(t));if(e&&e.length){var r=document.body.getBoundingClientRect().height;e.forEach((function(e){var n=e.getBoundingClientRect().top,o=e.closest(".note-list-item").querySelector(".right-tool-".concat(t));o&&(o.style.display=n-r>p?"flex":"none")}))}}l.scrollToTop=c((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.querySelector("#mynote-container .note-list-scroll"),r={top:0,left:0};t.silent||(r.behavior="smooth"),e.scrollTo(r)}),100),l.scrollToElem=c((function(t){var e=t.id,r=document.querySelector("#note-".concat(e));if(r){var n=r.offsetTop;document.querySelector("#mynote-container .note-list-scroll").scrollTo({top:n,left:0,behavior:"smooth"})}}),100),l.fixListContainerHeight=function(){var t=document.querySelector(".material-library-view"),e=document.querySelector(".note-list-container .note-list");if(t&&e){var r=t.getBoundingClientRect().height-82,n=document.querySelector(".note-tag-container");n&&(r-=n.getBoundingClientRect().height),e.style.height="".concat(r,"px")}},l.fixNoteViewer=c((function(t){var e=t.id,r=document.querySelector("#note-".concat(e)),n=document.querySelector("#mynote-container .note-list-scroll");if(r&&n&&r.offsetTop>=0&&r.offsetTop+10<n.scrollTop){var o=r.offsetTop;n.scrollTo({top:o,left:0,behavior:"smooth"})}}),100),l.checkSubmitBtnShow=function(){return y(s)},l.checkCollapseBtnShow=function(){return y(f)};var d=u((function(){l.checkSubmitBtnShow(),l.checkCollapseBtnShow()}),500);l.handleListScroll=function(){var t=document.querySelector("#mynote-container .note-list-scroll");t&&(t.removeEventListener("scroll",d),t.addEventListener("scroll",d))},t.exports=l},3463:function(t,e,r){"use strict";var n,o=SyntaxError,i=Function,a=TypeError,c=function(t){try{return i('"use strict"; return ('+t+").constructor;")()}catch(t){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(t){u=null}var l=function(){throw new a},f=u?function(){try{return l}catch(t){try{return u(arguments,"callee").get}catch(t){return l}}}():l,s=r(3522)(),p=Object.getPrototypeOf||function(t){return t.__proto__},y={},d="undefined"==typeof Uint8Array?n:p(Uint8Array),h={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":s?p([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":y,"%AsyncGenerator%":y,"%AsyncGeneratorFunction%":y,"%AsyncIteratorPrototype%":y,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":y,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":s?p(p([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&s?p((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&s?p((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":s?p(""[Symbol.iterator]()):n,"%Symbol%":s?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":f,"%TypedArray%":d,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};try{null.error}catch(t){var m=p(p(t));h["%Error.prototype%"]=m}var v=function t(e){var r;if("%AsyncFunction%"===e)r=c("async function () {}");else if("%GeneratorFunction%"===e)r=c("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=c("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&(r=p(o.prototype))}return h[e]=r,r},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=r(3464),w=r(3525),O=b.call(Function.call,Array.prototype.concat),_=b.call(Function.apply,Array.prototype.splice),E=b.call(Function.call,String.prototype.replace),j=b.call(Function.call,String.prototype.slice),S=b.call(Function.call,RegExp.prototype.exec),x=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P=/\\(\\)?/g,L=function(t,e){var r,n=t;if(w(g,n)&&(n="%"+(r=g[n])[0]+"%"),w(h,n)){var i=h[n];if(i===y&&(i=v(n)),void 0===i&&!e)throw new a("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new o("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new a('"allowMissing" argument must be a boolean');if(null===S(/^%?[^%]*%?$/,t))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(t){var e=j(t,0,1),r=j(t,-1);if("%"===e&&"%"!==r)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new o("invalid intrinsic syntax, expected opening `%`");var n=[];return E(t,x,(function(t,e,r,o){n[n.length]=r?E(o,P,"$1"):e||t})),n}(t),n=r.length>0?r[0]:"",i=L("%"+n+"%",e),c=i.name,l=i.value,f=!1,s=i.alias;s&&(n=s[0],_(r,O([0,1],s)));for(var p=1,y=!0;p<r.length;p+=1){var d=r[p],m=j(d,0,1),v=j(d,-1);if(('"'===m||"'"===m||"`"===m||'"'===v||"'"===v||"`"===v)&&m!==v)throw new o("property names with quotes must have matching quotes");if("constructor"!==d&&y||(f=!0),w(h,c="%"+(n+="."+d)+"%"))l=h[c];else if(null!=l){if(!(d in l)){if(!e)throw new a("base intrinsic for "+t+" exists, but the property is not available.");return}if(u&&p+1>=r.length){var g=u(l,d);l=(y=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:l[d]}else y=w(l,d),l=l[d];y&&!f&&(h[c]=l)}}return l}},3464:function(t,e,r){"use strict";var n=r(3524);t.exports=Function.prototype.bind||n},3465:function(t,e,r){"use strict";var n=String.prototype.replace,o=/%20/g,i="RFC1738",a="RFC3986";t.exports={default:a,formatters:{RFC1738:function(t){return n.call(t,o,"+")},RFC3986:function(t){return String(t)}},RFC1738:i,RFC3986:a}},3470:function(t,e,r){"use strict";t.exports={getSafeBlankLinkProps:function(t){return t?{target:"_blank",rel:"noopener noreferrer nofollow"}:{}},sanitizeUrl:function(t){return"string"!=typeof t||this._isURLProtocolValid(t)?t:""},_isURLProtocolValid:function(t){var e=t.toLowerCase();return!!["http:","https:","data:","dingtalk:"].some((function(t){return e.startsWith(t)}))||(!(!e.startsWith("./")&&!e.startsWith("/"))||-1===e.indexOf(":"))}}},3471:function(t,e,r){"use strict";var n=r(34);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,a=void 0,a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},a.apply(this,arguments)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(s,t);var e,r,o,f=u(s);function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),f.apply(this,arguments)}return e=s,(r=[{key:"buildOptions",value:function(t){var e=a(l(s.prototype),"buildOptions",this).call(this,t);return e.disabledPlugins.push("mobile"),n.ua.mobile&&e.disabledPlugins.push("placeholder","slash"),e}},{key:"getBlockedCards",value:function(){return["video","audio","premium","checkIn"]}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),s}(r(3458).a);e.a=f},3472:function(t,e,r){"use strict";r(113);var n=r(35),o=r(0),i=r.n(o),a=r(13),c=r.n(a),u=r(168),l=r.n(u),f=r(968),s=r(426),p={list:"TagList-module_list_g-vtQ",item:"TagList-module_item_bUgF8",active:"TagList-module_active_EPfJt",delete:"TagList-module_delete_NtLM0",wrapper:"TagList-module_wrapper_wAu1a",hideMore:"TagList-module_hideMore_2Kx5n",expand:"TagList-module_expand_J-EtW",addTag:"TagList-module_addTag_P9XTi",rightSide:"TagList-module_rightSide_65+zS",canSelect:"TagList-module_canSelect_XVnT1",name:"TagList-module_name_-HZCJ",highLight:"TagList-module_highLight_Fx+g3",count:"TagList-module_count_JG6aO",expandBtn:"TagList-module_expandBtn_kA52P",expanded:"TagList-module_expanded_tVFvP",icon:"TagList-module_icon_zLTbc"};function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function d(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==y(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===y(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var v=20;e.a=function(t){var e,r=t.data,a=t.onDelete,u=t.renderFirstItem,y=t.showCount,m=t.hideMore,g=t.storageKey,b=t.localStorage,w=t.currentTagId,O=t.onSelect,_=t.renderRightSide,E=t.query,j=r||[];E&&(j=j.filter((function(t){return null==t?void 0:t.name.includes(E)})));var S=!1;g&&b&&b.get(g)&&(S=!0);var x=h(Object(o.useState)(S),2),P=x[0],L=x[1],k=h(Object(o.useState)(!1),2),T=k[0],C=k[1],A=Object(o.useRef)(null),N=function(){if(m&&A&&A.current){var t=A.current.children;if(!t||t.length<=2)C(!1);else{var e=t[1],r=t[t.length-1],n=e.getBoundingClientRect().top!==r.getBoundingClientRect().top;C(n)}}};return Object(o.useEffect)((function(){N()}),[r,E]),Object(o.useEffect)((function(){b&&g&&(P?b.set(g,"true"):b.remove(g))}),[P]),Object(o.useEffect)((function(){var t=l()(N,200);return m&&window.addEventListener("resize",t,!1),function(){window.removeEventListener("resize",t,!1)}}),[]),i.a.createElement("div",{"data-testid":"note-tag-list-wrapper",className:c()(p.wrapper,(e={},d(e,p.expand,P),d(e,p.hideMore,m),e),"note-tag-list")},i.a.createElement("div",{className:p.list,ref:A},u&&i.a.createElement("div",{className:p.addTag},u()),_||T?i.a.createElement("div",{className:p.rightSide},T&&i.a.createElement("div",{className:c()(p.expandBtn,"tag-list-expand",d({},p.expanded,P)),onClick:function(t){t.stopPropagation(),L(!P)}},i.a.createElement(f.default,{className:p.icon})),!E&&_&&_()):null,j.map((function(t){var e,r=null==t?void 0:t.name;if(!r)return null;var o=r.length>v,u=o?"".concat(r.slice(0,20),"..."):r,l=w===t.id;return i.a.createElement(n.a,{title:o?r:null},i.a.createElement("div",{"data-testid":"note-tag-list-item",className:c()(p.item,(e={},d(e,p.active,l),d(e,p.canSelect,!!O),e)),key:null==t?void 0:t.name,onClick:function(){O&&O(t.id)}},function(t){if(!E)return i.a.createElement("span",{className:p.name},t);var e=t.indexOf(E);return e<0?i.a.createElement("span",{className:p.name},t):i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:p.name},t.slice(0,e)),i.a.createElement("span",{className:c()(p.name,p.highLight)},E),i.a.createElement("span",{className:p.name},t.slice(e+E.length)))}(u),function(t){return y&&void 0!==t.count?i.a.createElement("span",{className:p.count},"(",t.count,")"):null}(t),a&&i.a.createElement("span",{"data-testid":"note-tag-list-delete",className:p.delete,onClick:function(){return a(t)}},i.a.createElement(s.default,null))))}))))}},3478:function(t,e,r){"use strict";var n=r(3465),o=Object.prototype.hasOwnProperty,i=Array.isArray,a=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),c=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(r[n]=t[n]);return r};t.exports={arrayToObject:c,assign:function(t,e){return Object.keys(e).reduce((function(t,r){return t[r]=e[r],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var o=e[n],a=o.obj[o.prop],c=Object.keys(a),u=0;u<c.length;++u){var l=c[u],f=a[l];"object"==typeof f&&null!==f&&-1===r.indexOf(f)&&(e.push({obj:a,prop:l}),r.push(f))}return function(t){for(;t.length>1;){var e=t.pop(),r=e.obj[e.prop];if(i(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);e.obj[e.prop]=n}}}(e),t},decode:function(t,e,r){var n=t.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(t){return n}},encode:function(t,e,r,o,i){if(0===t.length)return t;var c=t;if("symbol"==typeof t?c=Symbol.prototype.toString.call(t):"string"!=typeof t&&(c=String(t)),"iso-8859-1"===r)return escape(c).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var u="",l=0;l<c.length;++l){var f=c.charCodeAt(l);45===f||46===f||95===f||126===f||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||i===n.RFC1738&&(40===f||41===f)?u+=c.charAt(l):f<128?u+=a[f]:f<2048?u+=a[192|f>>6]+a[128|63&f]:f<55296||f>=57344?u+=a[224|f>>12]+a[128|f>>6&63]+a[128|63&f]:(l+=1,f=65536+((1023&f)<<10|1023&c.charCodeAt(l)),u+=a[240|f>>18]+a[128|f>>12&63]+a[128|f>>6&63]+a[128|63&f])}return u},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(i(t)){for(var r=[],n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)},merge:function t(e,r,n){if(!r)return e;if("object"!=typeof r){if(i(e))e.push(r);else{if(!e||"object"!=typeof e)return[e,r];(n&&(n.plainObjects||n.allowPrototypes)||!o.call(Object.prototype,r))&&(e[r]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(r);var a=e;return i(e)&&!i(r)&&(a=c(e,n)),i(e)&&i(r)?(r.forEach((function(r,i){if(o.call(e,i)){var a=e[i];a&&"object"==typeof a&&r&&"object"==typeof r?e[i]=t(a,r,n):e.push(r)}else e[i]=r})),e):Object.keys(r).reduce((function(e,i){var a=r[i];return o.call(e,i)?e[i]=t(e[i],a,n):e[i]=a,e}),a)}}},3481:function(t,e){t.exports=function(){var t=window.appData||{},e=t.isYuque,r=t.organization,n=t.group,o=void 0===n?{}:n,i=r&&r.id;return!!e&&(!("Group"!==(null==o?void 0:o.type)||i)||!(!r||r.isPremium))}},3482:function(t,e,r){var n=r(180).isPaidCheckAll;t.exports=function(){return!(window.appData||{}).isYuque||!!n()}},3483:function(t,e,r){"use strict";var n=r(180).isPaidCheckAll;e.a=function(){if(!(window.appData||{}).isYuque)return!0;var t=window.appData,e=t.organization,r=t.group,o=void 0===r?{}:r;return!(!e||!n())||!e&&"Group"===(null==o?void 0:o.type)}},3484:function(t,e,r){"use strict";r.d(e,"a",(function(){return ft}));r(645);var n=r(214),o=r(0),i=r.n(o),a=r(8),c=r.n(a),u=(r(61),r(23)),l=(r(227),r(112)),f=r(13),s=r.n(f),p=r(355),y=r.n(p),d=r(457),h=r(3515),m=r(3472),v=r(3516),g=r(937),b="sidebar-toolbar-module_wrapper_oE4lW",w="sidebar-toolbar-module_insertBtn_RY-1c",O=s()(b,"note-list-toolbar"),_=function(t){var e=t.item,r=t.onInsertToLakeEditor;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:O,"data-testid":"note-list-toolbar"},i.a.createElement("span",{className:w,onClick:function(){return r(e)}},i.a.createElement(g.default,{width:14,height:14}),__("插入文档"))))};_.defaultProps={onInsertToLakeEditor:function(){}},_.propTypes={item:c.a.object,onInsertToLakeEditor:c.a.func};var E=_,j=r(3462),S=r(3459),x=r(3455),P=r(3512),L=r(3513);function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function T(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?T(Object(r),!0).forEach((function(e){A(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function A(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==k(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===k(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var I=function(){var t=N(Object(o.useState)(!1),2),e=t[0],r=t[1],n=N(Object(o.useState)(!0),2),i=n[0],a=n[1],c=Object(L.a)({}),l=c.state,f=l.listData,s=l.listLoading,p=l.hasMore,y=l.noteTags,d=l.noteFilterParams,h=l.pinnedListData,m=c.getListData,v=c.getNotes,g=c.getNoteTags,b=c.onChangeFilterParams,w=c.onReset,O=c.onRemoveNote,_=c.onRemoveNotes,E=Object(P.a)({listData:f,getNotes:v,isDesktopApp:x.isDesktopApp}).setLoadRef,j=Object(o.useCallback)((function(){d.search&&w()}),[d]),k=Object(o.useCallback)((function(t){t!==d.currentTagId?b({currentTagId:t}):b({currentTagId:null})}),[d]);return{state:{listData:f,pinnedListData:h,listLoading:s,orderBy:d.orderBy,hasMore:p,searchValue:d.search,searchActive:e,filterTab:d.filterTab,noteTags:y,currentTagId:d.currentTagId,noteStatus:d.status,toDocList:[],showPinned:i},getNotes:v,onLoadNote:function(t){var e=t.id,r=N(m(e),2),n=r[0],o=r[1],i=n.slice(),a=i.findIndex((function(t){return t.id===e}));return i[a].loading=!0,o(i),S.a.NoteCtlImpl.show({id:e,merge_dynamic_data:0}).then((function(t){var e=n.slice();e[a]=C(C({},t),{},{expanded_at:new Date}),o(e)})).catch((function(){var t=n.slice();i[a].loading=!1,o(t),u.a.error(__("获取内容失败，请再试一次"))}))},onCollapseNote:function(t){var e=t.id,r=N(m(e),2),n=r[0],o=r[1],i=n.slice(),a=i.findIndex((function(t){return t.id===e}));delete i[a].expanded_at,delete i[a].changed_at,delete i[a].loading,o(i)},onRemoveNote:O,onRemoveNotes:_,onSearchNote:function(t){b({search:t})},onSearchReset:j,setSearchActive:r,getNoteTags:g,onSelectTag:k,onChangeFilterParams:b,onReset:w,setLoadRef:E,setShowPinned:a}},D="index-module_wrapper_kkqhF",F="index-module_tagContainer_TFFU4",G="index-module_show_oAR0z",M="index-module_tagContainerExpand_7mxch",U="index-module_tagTipBar_g7usD",B="index-module_icon_nCjEV",Y="index-module_notesList_xu6a8",V="index-module_liteWrapper_fYo2B";function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function H(){return H=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},H.apply(this,arguments)}function W(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==q(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===q(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var $=function(t){var e,r=I(t),n=t.storage,a=z(Object(o.useState)(!1),2),c=a[0],u=a[1],f=r.state,p=f.listLoading,g=f.noteTags,b=f.currentTagId,w=r.onSelectTag,O=r.setSearchActive,_=r.onSearchReset,S=r.onSearchNote;Object(o.useEffect)((function(){Object(j.fixListContainerHeight)()}),[c]);var P=!y()(g);return i.a.createElement("div",{"data-testid":"mynote-list-container",id:"mynote-container",className:D},i.a.createElement(v.a,{searchValue:r.state.searchValue,searchActive:r.state.searchActive,setSearchActive:O,onSearchReset:_,onSearchNote:S,activeMode:!0,isDesktopApp:x.isDesktopApp,isLiteMode:!0}),i.a.createElement("div",{className:s()(F,(e={},W(e,M,c),W(e,G,P),e),"note-tag-container")},i.a.createElement("div",{onClick:function(){return u(!c)},className:U},i.a.createElement("span",null,c?__("收起所有标签"):__("展开所有标签")),i.a.createElement(d.default,{className:B,width:16})),i.a.createElement("div",{className:V},i.a.createElement(m.a,{hideMore:!1,showCount:!0,currentTagId:b,onSelect:w,localStorage:n,storageKey:"NOTE_LIST_TAG_MANAGER",data:g}))),i.a.createElement(l.a,{spinning:p},i.a.createElement("div",{className:s()(Y,"note-list-container")},i.a.createElement(h.a,H({},r,{isMobile:!0,isLiteMode:!0,renderToolBar:function(e){return i.a.createElement(E,{item:e,showFeather:!r.state.searchValue,onInsertToLakeEditor:t.onInsertToLakeEditor})}})))))};$.fetchData=function(t){return S.a.NoteCtlImpl.show({id:t.id})},$.defaultProps={onInsertToLakeEditor:function(){}},$.propTypes={webProxy:a.PropTypes.object,storage:a.PropTypes.object,onInsertToLakeEditor:a.PropTypes.func};var J=$;function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function Z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nt(n.key),n)}}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=rt(t);if(e){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return et(t)}(this,r)}}function et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rt(t){return rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rt(t)}function nt(t){var e=function(t,e){if("object"!==Q(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Q(e)?e:String(e)}var ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}(a,t);var e,r,n,o=tt(a);function a(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return t=o.call.apply(o,[this].concat(c)),e=et(t),n=function(e){J.fetchData(e).then((function(e){t.props.onInsertDocument("text/lake",e.content.source)})).catch((function(){u.a.error(__("小记插入失败"))}))},(r=nt(r="onInsertToLakeEditor"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=a,(r=[{key:"render",value:function(){var t=this.props.storage;return i.a.createElement("div",{className:"material-library-note"},i.a.createElement(J,{storage:t,onInsertToLakeEditor:this.onInsertToLakeEditor}))}}])&&Z(e.prototype,r),n&&Z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function it(){return it=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},it.apply(this,arguments)}ot.propTypes={storage:c.a.object,onInsertDocument:c.a.func};var at=n.a.TabPane,ct="storage/sidebar-tab-key",ut={note:"note"},lt=function(t){var e=t.storage;return{tabKey:e.get(ct)||ut.note,onTabChange:function(t){e.set(ct,t)}}};function ft(t){var e=lt(t),r=t.storage;return i.a.createElement("div",{className:"material-library-view"},i.a.createElement(n.a,{defaultActiveKey:e.tabKey,onChange:e.onTabChange},i.a.createElement(at,{tab:__("插入小记"),key:ut.note},i.a.createElement(ot,it({},t.note,{storage:r})))))}ft.propTypes={storage:c.a.object,webProxy:c.a.object,note:c.a.object}},3485:function(t,e,r){"use strict";var n=r(25),o=r.n(n);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){a=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var y={};function d(){}function h(){}function m(){}var v={};f(v,c,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==e&&r.call(b,c)&&(v=b);var w=m.prototype=d.prototype=Object.create(v);function O(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,a,c,u){var l=p(t[n],t,a);if("throw"!==l.type){var f=l.arg,s=f.value;return s&&"object"==i(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(s).then((function(t){f.value=t,c(f)}),(function(t){return o("throw",t,c,u)}))}u(l.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=j(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:h,configurable:!0}),h.displayName=f(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,f(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},O(_.prototype),f(_.prototype,u,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),f(w,l,"Generator"),f(w,c,(function(){return this})),f(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),y}},t}function c(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t,e,r){return(e=s(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function s(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}var p=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.doc=e,this.engine=r,this.emitter=new o.a}var e,r,n,i,s;return e=t,r=[{key:"resetDoc",value:function(t){this.doc=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t)}},{key:"init",value:function(t){t.content,t.onFocus}},{key:"initCollabDoc",value:function(t){}},{key:"setContent",value:function(t){}},{key:"appendContent",value:function(t){}},{key:"getValue",value:function(){return null}},{key:"getPureContent",value:function(){return null}},{key:"getSummaryContent",value:function(){return null}},{key:"getEditorContent",value:function(t){return{content:"",html:null,premium:null,premiumHtml:null}}},{key:"getThumbnail",value:function(){return""}},{key:"getDocMeta",value:function(t){return null}},{key:"updateDocEditorMeta",value:function(t){var e=this;["meta_draft","meta"].forEach((function(r){var n="editor_".concat(r);t[r]&&(e.doc[n]=t[r])}))}},{key:"getPremium",value:function(){return null}},{key:"getWordCount",value:function(t){return t&&t(-1),0}},{key:"getSummary",value:function(t){t({summary:null,cover:null})}},{key:"isEmpty",value:function(){return!1}},{key:"isFocus",value:function(){return!1}},{key:"hasUserChanged",value:function(){return!0}},{key:"resetUserChanged",value:function(){}},{key:"disable",value:function(){}},{key:"enable",value:function(){}},{key:"readonly",value:function(t){}},{key:"focus",value:function(t){}},{key:"focusToEnd",value:function(t){}},{key:"focusBlankDoc",value:function(){}},{key:"onBeforeSave",value:(i=a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!0);case 1:case"end":return t.stop()}}),t)})),s=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=i.apply(t,e);function a(t){c(o,r,n,a,u,"next",t)}function u(t){c(o,r,n,a,u,"throw",t)}a(void 0)}))},function(){return s.apply(this,arguments)})},{key:"isContentReady",value:function(){return!0}},{key:"reset",value:function(t){}},{key:"getOriginEngine",value:function(){return this.engine}},{key:"getCollabMembers",value:function(t){return[]}},{key:"setCollabMembers",value:function(){}},{key:"addCollabMember",value:function(){}},{key:"removeCollabMember",value:function(){}},{key:"setCurrentMember",value:function(){}},{key:"onCommandError",value:function(t){}},{key:"onCommandEnd",value:function(t){}},{key:"getReportValue",value:function(){return null}}],r&&f(e.prototype,r),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.a=p},3486:function(t,e,r){"use strict";var n=r(151),o=r.n(n),i=r(71);function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var u={adaptAbilities:function(t){var e=t.me,r=t.comment,n=t.target_type,o=t.target,i={edit:!1,delete:!1};return e&&e.id===r.user_id?(i.edit=!0,i.delete=!0):"Doc"===n&&(i.delete=o.abilities&&o.abilities.destroy_comment),i},getPostActions:function(t,e){var r=[];return r.push({cmd:"copy_link",title:__("复制链接")}),r.push({cmd:"reply",title:__("评论")}),t.edit&&r.push({cmd:"edit",title:__("编辑")}),t.delete&&r.push({cmd:"delete",title:__("删除"),confirm:!0}),e&&r.push({cmd:"content_report",title:__("举报")}),r},includesHashAnchoredComment:function(t,e){if(!e||!e.startsWith("#comment-"))return!1;var r=parseInt(e.substring("#comment-".length),10);return!!t.find((function(t){return t.id===r}))},getParticipants:function(t,e,r){var n=r.groupMembers,c=r.targetType,u=[];return"Topic"===c?u.push(t.user):"Doc"!==c&&"Resource"!==c||(t.contributors=t.contributors||[],u=a(t.contributors)),e&&e.length>0&&e.forEach((function(t){var e=u.find((function(e){return e&&t.user&&e.id===t.user.id}));t.user&&!e&&u.push(t.user)})),n&&n.length>0&&n.forEach((function(t){u.push(t.user)})),u=o()(u,"login"),window.appData.isYuque&&(u=u&&u.filter((function(t){return t.status!==i.STATUS.terminated}))),u},getAnchorId:function(t,e){return"".concat("Topic"===e?"reply-":"comment-").concat(t)},TARGET_TYPES:["Doc","DocVersion","Resource","Topic","Artboard","Note"]};e.a=u},3487:function(t,e,r){"use strict";var n,o,i,a,c=r(0),u=r.n(c),l=r(3519),f=r.n(l),s=r(3491),p=r.n(s),y=r(3481),d=r.n(y),h=r(3482),m=r.n(h),v=r(1788),g=r.n(v),b=r(3483),w=r(3454),O=r(616),_=r(3484),E=r(582),j=r(243),S=r(108),x=r(269),P=r(111),L=r(2853),k=r.n(L),T=r(3473),C=r(3485);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function N(){N=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==A(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function R(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function I(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?I(Object(r),!0).forEach((function(e){Y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function F(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,V(n.key),n)}}function G(t,e){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},G(t,e)}function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=B(t);if(e){var o=B(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return U(t)}(this,r)}}function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B(t){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},B(t)}function Y(t,e,r){return(e=V(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function V(t){var e=function(t,e){if("object"!==A(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===A(e)?e:String(e)}var q=(null===(n=window.appData)||void 0===n?void 0:n.me)||{},H=(null===(o=window.appData)||void 0===o?void 0:o.userSettings)||{},W=null===(i=window.appData)||void 0===i||null===(a=i.organization)||void 0===a?void 0:a.id;function z(t,e){return void 0===t?e:t}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G(t,e)}(i,t);var e,r,n,o=M(i);function i(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Y(U(n=o.call(this,t,e)),"setContent",(function(t){for(var e,r,o,i,a=t,c=arguments.length,u=new Array(c>1?c-1:0),l=1;l<c;l++)u[l-1]=arguments[l];if(t){if(t.startsWith("<")){var f;a={type:"lake",value:t},(f=n.engine).setDocument.apply(f,[a].concat(u))}else if("string"==typeof t){var s;a={type:"json",value:JSON.parse(t)},(s=n.engine).setDocument.apply(s,[a].concat(u))}}else n.engine.setDocument("lake",(o={showParagraphSpacing:!(null!==(e=n.engine.option.uiSwitch)&&void 0!==e&&e.default)&&"0"!==(H.docsSetting||"").split(",")[0],defaultFontSize:null!==(r=n.engine.option.uiSwitch)&&void 0!==r&&r.default?null:(H.docsSetting||"").split(",")[1]||null},i=['<!doctype lake><meta name="doc-version" content="1" /><meta name="typography" content="classic" />'],"false"!==(null==H?void 0:H.recordDocSetting)?(o.showParagraphSpacing&&i.push('<meta name="paragraphSpacing" content="relax" />'),o.defaultFontSize&&i.push('<meta name="defaultFontsize" content="'.concat(o.defaultFontSize,'" />'))):i.push('<meta name="paragraphSpacing" content="relax" />'),"".concat(i.join(""),"<p><br></p>")))})),Y(U(n),"appendContent",(function(t){})),Y(U(n),"getValue",(function(){return n.engine.getContent()})),Y(U(n),"getPureContent",(function(){return n.getValue()})),Y(U(n),"getSummaryContent",(function(){return n.engine.getSummaryContent()})),Y(U(n),"hasUserChanged",(function(){})),Y(U(n),"resetUserChange",(function(){})),Y(U(n),"insertContent",(function(t){})),Y(U(n),"getEditorContent",(function(t){t=t||{};var e,r,o,i,a=U(n).engine,c=t.fullHTML;return a.queryCommandValue("cardIsExist","premium")?(e=a.getPublicPureContent(),r=c?a.getFullPublicPureHtml():a.getPublicPureHtml(),o=a.getPureContent(),i=c?a.getFullPureHtml():a.getPureHtml()):(e=a.getPureContent(),r=c?a.getFullPureHtml():a.getPureHtml()),{content:e,html:r,premium:o,premiumHtml:i}})),Y(U(n),"getDocMeta",(function(t){var e=(t=t||{}).themeMetas||[],r=U(n).doc,o=Object(j.getDocMeta)(n.engine.getPureContent());if(!o)return null;var i={},a=r.editor_meta_draft||r.editor_meta;return a&&(i=JSON.parse(a)),["viewport","typography","paragraphSpacing","defaultFontsize"].forEach((function(t){i[t]||e.includes(t)||delete o[t]})),o})),Y(U(n),"getPremium",(function(){return n.engine.queryCommandValue("getPremium")})),Y(U(n),"getWordCount",(function(t){var e=n.engine.wordCount();if(!t)return e;t(e)})),Y(U(n),"getSummary",(function(t){var e=n.engine.getPureHtml();t({summary:p.a.extractSummary(e),cover:p.a.extractFirstImage(e)})})),Y(U(n),"isEmpty",(function(){return n.engine.isEmpty()})),Y(U(n),"onBeforeSave",(function(){var t=0;return new Promise((function e(r,o){n.engine.canGetDocument()?r():t>10?o():(t++,setTimeout((function(){e(r,o)}),1e3))}))})),Y(U(n),"reset",(function(t){n.setContent(t)})),Y(U(n),"readonly",(function(t){})),Y(U(n),"focus",(function(t){})),Y(U(n),"focusToEnd",(function(){n.engine.focus(!1)})),Y(U(n),"isFocus",(function(){return n.engine.isFocus()})),n.emitter=r,n.lakex=!0,n.reportedStacks={},n}return e=i,r=[{key:"init",value:function(t){for(var e=this,r=t.content,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];this.setContent.apply(this,[r].concat(o)),setTimeout((function(){try{T.a.letEditorFocusToReadPosition(e.doc.id)}catch(t){console.log("focus to read pos fail",t)}}),200)}},{key:"initCollabDoc",value:function(t){this.emitter&&this.emitter.emit("docReady",t,this.currentMember)}},{key:"focusBlankDoc",value:function(t){k.a.isBlank({format:this.doc.format,value:t})&&this.doc.title===x.a.getDefaultTitle(this.doc.type)||this.engine.focus()}},{key:"setCurrentMember",value:function(t){this.currentMember=t}},{key:"removeCollabMember",value:function(t){this.emitter.emit("memberLeave",t)}},{key:"isContentReady",value:function(){return this.engine.canGetDocument()}},{key:"onCommandError",value:function(t){var e=this;this.engine.on("commandExecuteError",(function(r){var n,o=null==r||null===(n=r.error)||void 0===n?void 0:n.stack;e.reportedStacks[o]||(e.reportedStacks[o]=!0,t(r))}))}},{key:"onMonitorLog",value:function(t){this.engine.on("monitorLog",(function(e){var r=e.code,n=e.data,o=e.error;t(r,n,o)}))}},{key:"onCommandEnd",value:function(t){this.engine.on("commandEnd",(function(e){var r=e.commandName,n=e.useTime;t(w.EDITOR_NAME.LAKEX,r,n)})),this.engine.on("cardCommandEnd",(function(e){var r=e.cardEditor,n=e.commandName,o=e.useTime;t(r,n,o)}))}},{key:"getReportValue",value:function(){return this.engine.getDocumentData()}}],n=[{key:"buildOptions",value:function(t){var e=i._buildBaseOptions(t);return i._repairDesktopOptions(e,t),i._repairMobileOptions(e,t),i._repairAppOptions(e,t),e}},{key:"getDataTableOptions",value:function(){return{image:{uploadConfig:x.a.imageUploadUrl,accept:Object(O.getImageAccept)()},file:{uploadConfig:x.a.fileUploadUrl,accept:Object(O.getFileAccept)()}}}},{key:"_buildBaseOptions",value:function(t){var e,r,n,o,a,c,l,s,p,y,h,v,w,j,S,x,L,k,T,C,A,N,R,I,F=t.apiHost,G=void 0===F?"":F,M=t.target_id,U=t.target_type,B=void 0===U?"Doc":U,Y=t.attachable_type,V=t.attachable_id,H="".concat(G,"/api"),K={attachable_type:Y||B,attachable_id:V||M},$={target_id:M,target_type:B},J={layout:t.layout,typography:t.typography,supportTranslate:m()(),supportImgOCR:g()(),hideEmbedButton:d()(),hideVipIcon:Object(b.a)(),image:{uploadFileURL:(null===(e=t.image)||void 0===e?void 0:e.uploadFileURL)||"".concat(H,"/upload/attach?").concat(f.a.stringify(D(D({},K),{},{type:"image"}))),onBeforeRenderImage:null===(r=t.image)||void 0===r?void 0:r.onBeforeRenderImage,accept:Object(O.getImageAcceptArr)()},file:D(D({uploadFileURL:(null===(n=t.file)||void 0===n?void 0:n.uploadFileURL)||"".concat(H,"/upload/attach?").concat(f.a.stringify(D(D({},K),{},{type:"attachment"}))),quickUploadUrl:"".concat(H,"/upload/upload_by_digset?").concat(f.a.stringify(D(D({},K),{},{type:"attachment"}))),endpointAfterUpload:(null===(o=t.file)||void 0===o?void 0:o.endpointAfterUpload)||"".concat(H,"/attachment/after_upload?").concat(f.a.stringify(D({},K)))},K),{},{useMultipart:z(null===(a=t.file)||void 0===a?void 0:a.useMultipart,!0),accept:Object(O.getFileAcceptArr)(),localdocAccept:Object(O.getLocalDocAcceptArr)(),embedButtonStatus:Object(O.getIsDiabledPreviewAndEmbed)()}),localdoc:{uploadFileURL:(null===(c=t.localdoc)||void 0===c?void 0:c.uploadFileURL)||"".concat(H,"/upload/attach?").concat(f.a.stringify(D(D({},K),{},{type:"attachment"}))),accept:Object(O.getLocalDocAcceptArr)()},audio:{uploadFileURL:(null===(l=t.audio)||void 0===l?void 0:l.uploadFileURL)||"".concat(H,"/video?").concat(f.a.stringify(D(D({},K),{},{type:"audio"}))),queryURL:"".concat(H,"/video?").concat(f.a.stringify(D(D({},K),{},{type:"audio"}))),allowAudioPlayer:z(null===(s=t.audio)||void 0===s?void 0:s.allowAudioPlayer,!0),addsOnParams:D(D({},K),{},{format:"audio"}),accept:Object(O.getAudioAcceptArr)()},video:D(D({uploadAction:(null===(p=t.video)||void 0===p?void 0:p.uploadAction)||"".concat(H,"/video?").concat(f.a.stringify(D(D({},K),{},{type:"video"}))),queryAction:"".concat(H,"/video?").concat(f.a.stringify(D(D({},K),{},{type:"video"}))),endpointAfterUpload:(null===(y=t.video)||void 0===y?void 0:y.endpointAfterUpload)||"".concat(H,"/video/after_upload?").concat(f.a.stringify(D({},K)))},K),{},{useMultipart:z(null===(h=t.video)||void 0===h?void 0:h.useMultipart,!0),accept:Object(O.getVideoAcceptArr)()}),mention:{mentionURL:(null===(v=t.mention)||void 0===v?void 0:v.mentionURL)||"".concat(H,"/users/complete?").concat(f.a.stringify(D(D({},$),{},{group_id:null===(w=t.group)||void 0===w?void 0:w.id}))),defaultList:null===(j=t.mention)||void 0===j?void 0:j.defaultList,multiTypes:null===(S=t.mention)||void 0===S?void 0:S.multiTypes,onMentionSearch:null===(x=t.mention)||void 0===x?void 0:x.onMentionSearch},lockedtext:{action:(null===(L=t.lockedtext)||void 0===L?void 0:L.action)||"".concat(H,"/services/crypto")},materialLibrary:{component:(null===(k=t.materialLibrary)||void 0===k?void 0:k.component)||u.a.createElement(_.a,{storage:null===(T=t.materialLibrary)||void 0===T?void 0:T.storage,webProxy:null===(C=t.materialLibrary)||void 0===C?void 0:C.webProxy})},vote:{isOwner:"OWNER"===t.role,queryDetailUrl:(null===(A=t.vote)||void 0===A?void 0:A.queryDetailUrl)||"".concat(H,"/votes"),queryCheckUrl:(null===(N=t.vote)||void 0===N?void 0:N.queryCheckUrl)||"".concat(H,"/votes/mine"),voteUrl:(null===(R=t.vote)||void 0===R?void 0:R.voteUrl)||"".concat(H,"/votes"),allowVote:z(null===(I=t.vote)||void 0===I?void 0:I.allowVote,!0)},transfer:{transferFilesURL:"".concat(H,"/upload/copy?").concat(f.a.stringify(D(D({},K),{},{type:"attachment"})))},markdownPasteParse:{convertURL:"".concat(H,"/docs/convert")},yuque:{linkDetailAction:"".concat(H,"/editor/link_detail"),recentAction:"".concat(H,"/editor/recent"),searchAction:"".concat(H,"/editor/search")},header:t.header||[],disabledPlugins:t.disabledPlugins||[],placeholder:t.placeholder,tileRendering:!!t.tileRendering,isDesktop:t.isDesktop,list:t.list,dynamicData:D({docId:M,docType:B,webProxy:{datasheetRecord:E.a.datasheetRecord}},t.dynamicData),bookmark:{detailAction:"".concat(H,"/editor/link_detail")},dataTable:D(D({},t.dataTable),i.getDataTableOptions()),selectAll:{global:t.globalSelectAll}};return t.board={boardWebProxyParams:{webProxy:E.a,userId:null==q?void 0:q.id,spm:P,appData:window.appData}},t.collab?(J.disabledPlugins.push("history"),J.collaboration={collab:t.collab}):J.disabledPlugins.push("collaboration"),t.premium&&(J.premium=t.premium),t.isPremiumBook||J.disabledPlugins.push("premium"),(W||t.isEnterprise)&&J.disabledPlugins.push("materialLibrary"),t.toc&&(J.toc=t.toc),t.board&&(J.board=t.board),J}},{key:"_repairMobileOptions",value:function(t,e){e.isMobile&&(t.video.useMultipart=!1,t.file.useMultipart=!1)}},{key:"_repairAppOptions",value:function(t,e){if(e.isApp){var r,n,o=(null===(r=window.nebulaMobileApp)||void 0===r||null===(n=r.envInfo)||void 0===n?void 0:n.origin)||window.location.origin;t.file.origin=o,t.file.downloadFileHandler=function(){var t,e=(t=N().mark((function t(e,r){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.downloadFile({url:e,fileName:r});case 2:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){R(i,n,o,a,c,"next",t)}function c(t){R(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}(),t.file.previewFileHandler=function(t){S.a.pushWebWindow({url:"".concat(o).concat(t)})}}}},{key:"_repairDesktopOptions",value:function(t,e){var r,n,o,i;e.isDesktop&&(t.video.downloadVideoHandler=null===(r=e.video)||void 0===r?void 0:r.downloadVideoHandler,t.video.useMultipart=!1,t.file.useMultipart=!1,t.file.downloadFileHandler=null===(n=e.file)||void 0===n?void 0:n.downloadFileHandler,t.file.previewFileHandler=null===(o=e.file)||void 0===o?void 0:o.previewFileHandler,t.file.origin=(null===(i=e.localdoc)||void 0===i?void 0:i.origin)||e.apiHost,(t.yuque||e.yuque)&&(t.yuque=D(D({},e.yuque||{}),t.yuque||{})),(t.link||e.link)&&(t.link=D(D({},e.link||{}),t.link||{})),e.envAdapter&&(t.envAdapter=e.envAdapter))}}],r&&F(e.prototype,r),n&&F(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(C.a);e.a=K},3491:function(t,e,r){t.exports=r(2853)},3501:function(t,e,r){"use strict";var n=r(0),o=r.n(n),i=r(8),a=r.n(i),c=r(156),u=r(3487),l=r(3508),f=r(84),s=r.n(f);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(){y=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function d(){}function h(){}function m(){}var v={};u(v,i,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==e&&r.call(b,i)&&(v=b);var w=m.prototype=d.prototype=Object.create(v);function O(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==p(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=j(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:h,configurable:!0}),h.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},O(_.prototype),u(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function d(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){d(i,n,o,a,c,"next",t)}function c(t){d(i,n,o,a,c,"throw",t)}a(void 0)}))}}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===p(i)?i:String(i)),n)}var o,i}function g(t,e,r){return e&&v(t.prototype,e),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=_(t);if(e){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}var E=function(t){b(i,t);var e,r,n=O(i);function i(t){var e;return m(this,i),(e=n.call(this,t)).viewerRef=o.a.createRef(),e}return g(i,[{key:"componentDidMount",value:function(){this.renderView()}},{key:"renderView",value:(r=h(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.createDocViewer();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),c.a.logViewerError(t.t0);case 8:case"end":return t.stop()}}),t,this,[[0,5]])}))),function(){return r.apply(this,arguments)})},{key:"createDocViewer",value:(e=h(y().mark((function t(){var e,r,n,o,i=this;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.time("LakexNoteViewer"),t.next=3,l.a.getLakexEditor();case 3:e=t.sent,r=e.createDocViewer,n=e.ViewerEnvAdapter,(o=r(this.viewerRef.current,this.buildOptions(n))).on("ready",(function(){console.timeEnd("LakexNoteViewer"),i.props.onReady&&i.props.onReady(i.viewerRef.current)})),o.on("dynamicDataChange",(function(t){i.props.onDynamicDataChange&&i.props.onDynamicDataChange(t)})),o.setDocument({type:"lake",value:this.props.content},{dynamicData:this.props.dynamicData});case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"buildOptions",value:function(t){var e=this,r=this.props,n=r.docId,o=u.a.buildOptions({isDesktop:window.appData.isDesktopApp,target_id:n,target_type:"Note",layout:s.a.VIEWPORT.adapt,typography:s.a.TYPOGRAPHY.traditional,file:{downloadFileHandler:r.downloadFileHandler,previewFileHandler:function(t){window.appData.isDesktopApp&&window.openExternalLink?window.openExternalLink(t,!0):window.open(t)}},list:{enableDynamic:r.enableDynamicTaskList}});return window.appData.isDesktopApp&&(o.envAdapter=new(function(t){b(r,t);var e=O(r);function r(){return m(this,r),e.apply(this,arguments)}return g(r,[{key:"openLink",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";window.openExternalLink(t,!0)}},{key:"openMentionLink",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";window.openExternalLink(t,!0)}}]),r}(t||function(){return g((function t(){m(this,t)}))}()))),o.scrollNode=function(){var t;return null===(t=e.viewerRef)||void 0===t?void 0:t.current},o}},{key:"render",value:function(){return o.a.createElement("div",{className:"yuque-doc-content","data-df":"lake",style:{position:"relative"}},o.a.createElement("div",{ref:this.viewerRef}))}}]),i}(n.PureComponent);E.defaultProps={enableDynamicTaskList:!1},E.propTypes={id:a.a.oneOfType([a.a.string,a.a.number]),content:a.a.string,onReady:a.a.func,onDynamicDataChange:a.a.func,downloadFileHandler:a.a.func,dynamicData:a.a.array,enableDynamicTaskList:a.a.bool},e.a=E},3504:function(t,e,r){"use strict";var n={};r.r(n),r.d(n,"initList",(function(){return h})),r.d(n,"syncList",(function(){return v})),r.d(n,"createMirror",(function(){return b}));var o={};r.r(o),r.d(o,"lock",(function(){return S})),r.d(o,"unlock",(function(){return P})),r.d(o,"versionList",(function(){return k})),r.d(o,"versionDetail",(function(){return C})),r.d(o,"saveVersion",(function(){return N}));var i={};r.r(i),r.d(i,"show",(function(){return M})),r.d(i,"index",(function(){return B})),r.d(i,"update",(function(){return V})),r.d(i,"status",(function(){return H})),r.d(i,"mirror",(function(){return z})),r.d(i,"create",(function(){return $}));var a={};r.r(a),r.d(a,"batchArchive",(function(){return et})),r.d(a,"batchDelete",(function(){return nt})),r.d(a,"batchPin",(function(){return it})),r.d(a,"batchUnPin",(function(){return ct})),r.d(a,"updatePublic",(function(){return lt})),r.d(a,"shareToGarden",(function(){return st}));var c={};r.r(c),r.d(c,"index",(function(){return vt})),r.d(c,"create",(function(){return bt})),r.d(c,"del",(function(){return Ot})),r.d(c,"count",(function(){return Et}));var u={};r.r(u),r.d(u,"initList",(function(){return kt})),r.d(u,"syncList",(function(){return Ct}));var l={};r.r(l),r.d(l,"index",(function(){return Ft})),r.d(l,"create",(function(){return Mt})),r.d(l,"del",(function(){return Bt})),r.d(l,"update",(function(){return Vt})),r.d(l,"pin",(function(){return Ht}));var f=r(11);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function p(){p=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var y={};function d(){}function h(){}function m(){}var v={};u(v,i,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==e&&r.call(b,i)&&(v=b);var w=m.prototype=d.prototype=Object.create(v);function O(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==s(p)&&r.call(p,"__await")?e.resolve(p.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(p).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=j(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:h,configurable:!0}),h.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},O(_.prototype),u(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),y}},t}function y(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function d(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){y(i,n,o,a,c,"next",t)}function c(t){y(i,n,o,a,c,"throw",t)}a(void 0)}))}}function h(t){return m.apply(this,arguments)}function m(){return m=d(p().mark((function t(e){var r,n=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteAppController/initList",t.abrupt("return",f.c("/api/modules/note/notes/NoteAppController/initList",e,r));case 3:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function v(t){return g.apply(this,arguments)}function g(){return g=d(p().mark((function t(e){var r,n=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteAppController/syncList",t.abrupt("return",f.c("/api/modules/note/notes/NoteAppController/syncList",e,r));case 3:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function b(t){return w.apply(this,arguments)}function w(){return w=d(p().mark((function t(e){var r,n=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteAppController/createMirror",t.abrupt("return",f.c("/api/modules/note/notes/NoteAppController/createMirror",e,r));case 3:case"end":return t.stop()}}),t)}))),w.apply(this,arguments)}function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function _(){_=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(L([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==O(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=j(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function E(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function j(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){E(i,n,o,a,c,"next",t)}function c(t){E(i,n,o,a,c,"throw",t)}a(void 0)}))}}function S(t){return x.apply(this,arguments)}function x(){return x=j(_().mark((function t(e){var r,n=arguments;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteContentController/lock",t.abrupt("return",f.f("/api/modules/note/notes/NoteContentController/lock",e,r));case 3:case"end":return t.stop()}}),t)}))),x.apply(this,arguments)}function P(t){return L.apply(this,arguments)}function L(){return L=j(_().mark((function t(e){var r,n=arguments;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteContentController/unlock",t.abrupt("return",f.b("/api/modules/note/notes/NoteContentController/unlock",e,r));case 3:case"end":return t.stop()}}),t)}))),L.apply(this,arguments)}function k(t){return T.apply(this,arguments)}function T(){return T=j(_().mark((function t(e){var r,n=arguments;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteContentController/versionList",t.abrupt("return",f.c("/api/modules/note/notes/NoteContentController/versionList",e,r));case 3:case"end":return t.stop()}}),t)}))),T.apply(this,arguments)}function C(t){return A.apply(this,arguments)}function A(){return A=j(_().mark((function t(e){var r,n=arguments;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteContentController/versionDetail",t.abrupt("return",f.c("/api/modules/note/notes/NoteContentController/versionDetail",e,r));case 3:case"end":return t.stop()}}),t)}))),A.apply(this,arguments)}function N(t){return R.apply(this,arguments)}function R(){return R=j(_().mark((function t(e){var r,n=arguments;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteContentController/saveVersion",t.abrupt("return",f.e("/api/modules/note/notes/NoteContentController/saveVersion",e,r));case 3:case"end":return t.stop()}}),t)}))),R.apply(this,arguments)}function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function D(){D=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==I(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function F(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function G(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){F(i,n,o,a,c,"next",t)}function c(t){F(i,n,o,a,c,"throw",t)}a(void 0)}))}}function M(t){return U.apply(this,arguments)}function U(){return U=G(D().mark((function t(e){var r,n=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/show",t.abrupt("return",f.c("/api/modules/note/notes/NoteController/show",e,r));case 3:case"end":return t.stop()}}),t)}))),U.apply(this,arguments)}function B(t){return Y.apply(this,arguments)}function Y(){return Y=G(D().mark((function t(e){var r,n=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/index",t.abrupt("return",f.c("/api/modules/note/notes/NoteController/index",e,r));case 3:case"end":return t.stop()}}),t)}))),Y.apply(this,arguments)}function V(t){return q.apply(this,arguments)}function q(){return q=G(D().mark((function t(e){var r,n=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/update",t.abrupt("return",f.f("/api/modules/note/notes/NoteController/update",e,r));case 3:case"end":return t.stop()}}),t)}))),q.apply(this,arguments)}function H(t){return W.apply(this,arguments)}function W(){return W=G(D().mark((function t(e){var r,n=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/status",t.abrupt("return",f.c("/api/modules/note/notes/NoteController/status",e,r));case 3:case"end":return t.stop()}}),t)}))),W.apply(this,arguments)}function z(t){return K.apply(this,arguments)}function K(){return K=G(D().mark((function t(e){var r,n=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/mirror",t.abrupt("return",f.c("/api/modules/note/notes/NoteController/mirror",e,r));case 3:case"end":return t.stop()}}),t)}))),K.apply(this,arguments)}function $(t){return J.apply(this,arguments)}function J(){return J=G(D().mark((function t(e){var r,n=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/create",t.abrupt("return",f.e("/api/modules/note/notes/NoteController/create",e,r));case 3:case"end":return t.stop()}}),t)}))),J.apply(this,arguments)}function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function Z(){Z=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Q(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function X(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function tt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){X(i,n,o,a,c,"next",t)}function c(t){X(i,n,o,a,c,"throw",t)}a(void 0)}))}}function et(t){return rt.apply(this,arguments)}function rt(){return rt=tt(Z().mark((function t(e){var r,n=arguments;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/batchArchive",t.abrupt("return",f.f("/api/modules/note/notes/NoteOperateController/batchArchive",e,r));case 3:case"end":return t.stop()}}),t)}))),rt.apply(this,arguments)}function nt(t){return ot.apply(this,arguments)}function ot(){return ot=tt(Z().mark((function t(e){var r,n=arguments;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/batchDelete",t.abrupt("return",f.b("/api/modules/note/notes/NoteOperateController/batchDelete",e,r));case 3:case"end":return t.stop()}}),t)}))),ot.apply(this,arguments)}function it(t){return at.apply(this,arguments)}function at(){return at=tt(Z().mark((function t(e){var r,n=arguments;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/batchPin",t.abrupt("return",f.f("/api/modules/note/notes/NoteOperateController/batchPin",e,r));case 3:case"end":return t.stop()}}),t)}))),at.apply(this,arguments)}function ct(t){return ut.apply(this,arguments)}function ut(){return ut=tt(Z().mark((function t(e){var r,n=arguments;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/batchUnPin",t.abrupt("return",f.f("/api/modules/note/notes/NoteOperateController/batchUnPin",e,r));case 3:case"end":return t.stop()}}),t)}))),ut.apply(this,arguments)}function lt(t){return ft.apply(this,arguments)}function ft(){return ft=tt(Z().mark((function t(e){var r,n=arguments;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/updatePublic",t.abrupt("return",f.f("/api/modules/note/notes/NoteOperateController/updatePublic",e,r));case 3:case"end":return t.stop()}}),t)}))),ft.apply(this,arguments)}function st(t){return pt.apply(this,arguments)}function pt(){return pt=tt(Z().mark((function t(e){var r,n=arguments;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/shareToGarden",t.abrupt("return",f.e("/api/modules/note/notes/NoteOperateController/shareToGarden",e,r));case 3:case"end":return t.stop()}}),t)}))),pt.apply(this,arguments)}function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function dt(){dt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==yt(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function ht(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function mt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ht(i,n,o,a,c,"next",t)}function c(t){ht(i,n,o,a,c,"throw",t)}a(void 0)}))}}function vt(t){return gt.apply(this,arguments)}function gt(){return gt=mt(dt().mark((function t(e){var r,n=arguments;return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteTagController/index",t.abrupt("return",f.c("/api/modules/note/notes/NoteTagController/index",e,r));case 3:case"end":return t.stop()}}),t)}))),gt.apply(this,arguments)}function bt(t){return wt.apply(this,arguments)}function wt(){return wt=mt(dt().mark((function t(e){var r,n=arguments;return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteTagController/create",t.abrupt("return",f.e("/api/modules/note/notes/NoteTagController/create",e,r));case 3:case"end":return t.stop()}}),t)}))),wt.apply(this,arguments)}function Ot(t){return _t.apply(this,arguments)}function _t(){return _t=mt(dt().mark((function t(e){var r,n=arguments;return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteTagController/del",t.abrupt("return",f.b("/api/modules/note/notes/NoteTagController/del",e,r));case 3:case"end":return t.stop()}}),t)}))),_t.apply(this,arguments)}function Et(t){return jt.apply(this,arguments)}function jt(){return jt=mt(dt().mark((function t(e){var r,n=arguments;return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteTagController/count",t.abrupt("return",f.c("/api/modules/note/notes/NoteTagController/count",e,r));case 3:case"end":return t.stop()}}),t)}))),jt.apply(this,arguments)}function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function xt(){xt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==St(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function Pt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Lt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Pt(i,n,o,a,c,"next",t)}function c(t){Pt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function kt(t){return Tt.apply(this,arguments)}function Tt(){return Tt=Lt(xt().mark((function t(e){var r,n=arguments;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagAppController/initList",t.abrupt("return",f.c("/api/modules/note/tags/TagAppController/initList",e,r));case 3:case"end":return t.stop()}}),t)}))),Tt.apply(this,arguments)}function Ct(t){return At.apply(this,arguments)}function At(){return At=Lt(xt().mark((function t(e){var r,n=arguments;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagAppController/syncList",t.abrupt("return",f.c("/api/modules/note/tags/TagAppController/syncList",e,r));case 3:case"end":return t.stop()}}),t)}))),At.apply(this,arguments)}function Nt(t){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nt(t)}function Rt(){Rt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Nt(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function It(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Dt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){It(i,n,o,a,c,"next",t)}function c(t){It(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Ft(t){return Gt.apply(this,arguments)}function Gt(){return Gt=Dt(Rt().mark((function t(e){var r,n=arguments;return Rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagController/index",t.abrupt("return",f.c("/api/modules/note/tags/TagController/index",e,r));case 3:case"end":return t.stop()}}),t)}))),Gt.apply(this,arguments)}function Mt(t){return Ut.apply(this,arguments)}function Ut(){return Ut=Dt(Rt().mark((function t(e){var r,n=arguments;return Rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagController/create",t.abrupt("return",f.e("/api/modules/note/tags/TagController/create",e,r));case 3:case"end":return t.stop()}}),t)}))),Ut.apply(this,arguments)}function Bt(t){return Yt.apply(this,arguments)}function Yt(){return Yt=Dt(Rt().mark((function t(e){var r,n=arguments;return Rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagController/del",t.abrupt("return",f.b("/api/modules/note/tags/TagController/del",e,r));case 3:case"end":return t.stop()}}),t)}))),Yt.apply(this,arguments)}function Vt(t){return qt.apply(this,arguments)}function qt(){return qt=Dt(Rt().mark((function t(e){var r,n=arguments;return Rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagController/update",t.abrupt("return",f.f("/api/modules/note/tags/TagController/update",e,r));case 3:case"end":return t.stop()}}),t)}))),qt.apply(this,arguments)}function Ht(t){return Wt.apply(this,arguments)}function Wt(){return Wt=Dt(Rt().mark((function t(e){var r,n=arguments;return Rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagController/pin",t.abrupt("return",f.f("/api/modules/note/tags/TagController/pin",e,r));case 3:case"end":return t.stop()}}),t)}))),Wt.apply(this,arguments)}var zt={NoteAppCtlImpl:n,NoteContentCtlImpl:o,NoteCtlImpl:i,NoteOperateCtlImpl:a,NoteTagCtlImpl:c,TagAppCtlImpl:u,TagCtlImpl:l};e.a=zt},3508:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}var a=function(){function t(){var e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,n=null,(r=i(r="_lakexDocViewer"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n}var e,n,a;return e=t,(n=[{key:"_loadLakexEditor",value:function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(10),r.e(57)]).then(r.bind(null,344))}},{key:"_isPreloadPath",value:function(){var t,e,r=null===(t=window)||void 0===t||null===(e=t.location)||void 0===e?void 0:e.pathname;return!(!r||!["/dashboard","/r/templates","/dashboard/explore"].some((function(t){return r.startsWith(t)})))}},{key:"getLakexEditor",value:function(){var t=this;return this._lakexDocViewer?this._lakexDocViewer:this._loadLakexEditor().then((function(e){return t._lakexDocViewer=e,t._lakexDocViewer}))}},{key:"smartLoadLakexEditor",value:function(t){var e=window.appData,r=e.book,n=e.doc;("Doc"===(null==n?void 0:n.type)||Array.isArray(null==r?void 0:r.toc)&&r.toc.some((function(t){return"DOC"===t.type}))&&n||t||this._isPreloadPath())&&(console.time("smartLoadLakexEditor"),this._loadLakexEditor().then((function(){console.timeEnd("smartLoadLakexEditor")})))}}])&&o(e.prototype,n),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.a=new a},3511:function(t,e,r){"use strict";var n,o,i,a;r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return o})),r.d(e,"c",(function(){return a})),function(t){t.content_updated_at="content_updated_at",t.first_published_at="first_published_at"}(n||(n={})),function(t){t.all="all",t.archive="archive",t.image="image",t.bookmark="bookmark",t.attachment="attachment",t.archived="archived",t.share="share",t.dingTalkRobot="dingTalkRobot",t.wechatRobot="wechatRobot"}(o||(o={})),function(t){t.YUQUE_DESKTOP_APP="yuque-desktop",t.WECHAT_H5="wechat-h5",t.WECHAT_ROBOT="wechat-robot",t.DINGTALK_H5="dingtalk-h5",t.DINGTALK_ROBOT="dingtalk-robot",t.ALIPAY_WEBAPP="alipay-webapp",t.TEMPLATE_NOTE="template",t.MOBILE_APP="mobile-app"}(i||(i={})),function(t){t[t.unarchived=0]="unarchived",t[t.archived=9]="archived"}(a||(a={}))},3512:function(t,e,r){"use strict";r(61);var n=r(23),o=r(0);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){a=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var y={};function d(){}function h(){}function m(){}var v={};f(v,c,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==e&&r.call(b,c)&&(v=b);var w=m.prototype=d.prototype=Object.create(v);function O(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,a,c,u){var l=p(t[n],t,a);if("throw"!==l.type){var f=l.arg,s=f.value;return s&&"object"==i(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(s).then((function(t){f.value=t,c(f)}),(function(t){return o("throw",t,c,u)}))}u(l.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=j(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:h,configurable:!0}),h.displayName=f(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,f(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},O(_.prototype),f(_.prototype,u,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),f(w,l,"Generator"),f(w,c,(function(){return this})),f(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),y}},t}function c(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t){var e,r=t.getNotes,i=t.listData,l=t.isDesktopApp,f=u(Object(o.useState)(null),2),s=f[0],p=f[1];function y(){var t;return t=a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e[0].isIntersecting&&r({noLoading:!0});case 1:case"end":return t.stop()}}),t)})),y=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){c(i,n,o,a,u,"next",t)}function u(t){c(i,n,o,a,u,"throw",t)}a(void 0)}))},y.apply(this,arguments)}return l&&n.a.config({top:80,duration:1.5}),Object(o.useEffect)((function(){var t=document.querySelector("#siteTipGuide");return t&&(t.style.display="none"),l&&n.a.config({top:80,duration:1.5}),function(){var t=document.querySelector("#siteTipGuide");t&&(t.style.display="block")}}),[]),window.IntersectionObserver&&(e=new IntersectionObserver((function(t){return y.apply(this,arguments)}),{threshold:.1})),Object(o.useEffect)((function(){if(s&&e)return e.observe(s),function(){e.unobserve(s)}}),[s,i]),{setLoadRef:p}}},3513:function(t,e,r){"use strict";r(61);var n=r(23),o=r(0),i=r(532),a=r(3455),c=r(3459),u=r(174),l=r(3511);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function s(){s=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var y={};function d(){}function h(){}function m(){}var v={};u(v,i,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==e&&r.call(b,i)&&(v=b);var w=m.prototype=d.prototype=Object.create(v);function O(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,i,a,c){var u=p(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==f(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=j(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:h,configurable:!0}),h.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},O(_.prototype),u(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),y}},t}function p(t){return function(t){if(Array.isArray(t))return w(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function d(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){y(i,n,o,a,c,"next",t)}function c(t){y(i,n,o,a,c,"throw",t)}a(void 0)}))}}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===f(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||b(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){if(t){if("string"==typeof t)return w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(t,e):void 0}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var O=a.myNotesConsts.NOTE_ORDER_KEY,_={status:i.STATUS.unarchived,filterTab:l.a.all,orderBy:l.b.content_updated_at,currentTagId:null,search:""};e.a=function(t){var e=t.currentUuid,r=t.refreshBatchProcess,a=g(Object(o.useState)([]),2),f=a[0],y=a[1],h=g(Object(o.useState)([]),2),v=h[0],b=h[1],w=g(Object(o.useState)(!1),2),E=w[0],j=w[1],S=g(Object(o.useState)(!0),2),x=S[0],P=S[1],L=g(Object(o.useState)([]),2),k=L[0],T=L[1],C=g(Object(o.useState)(m(m({},_),{},{orderBy:u.a.get(O)||l.b.content_updated_at})),2),A=C[0],N=C[1],R=Object(o.useCallback)((function(t){b([]),y([]),N(m(m({},A),t))}),[A]),I=Object(o.useCallback)((function(t){return v.find((function(e){return e.id===t}))?[v,b]:[f,y]}),[f,v]),D=Object(o.useCallback)(d(s().mark((function t(){var e,r,n,o,a,u,d=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=d.length>0&&void 0!==d[0]?d[0]:{}).noLoading||j(!0),r={offset:f.length,q:A.search,filter_type:A.filterTab,status:A.status,merge_dynamic_data:0,order:A.orderBy,with_pinned_notes:!0},A.currentTagId&&(r.tag=A.currentTagId),i.NEED_PINNED_TYPE.includes(A.filterTab)||delete r.with_pinned_notes,e.fromQuery&&(r.offset=0),r.q&&(r.order=l.b.first_published_at),i.DEFAULT_TYPE.includes(r.filter_type)||(r.include_body=!0,r.order=l.b.first_published_at),t.prev=8,t.next=11,c.a.NoteCtlImpl.index(r,{useOriginResp:!0});case 11:n=t.sent,o=n.has_more,a=n.notes,u=n.pin_notes,P(o),0===r.offset?i.NEED_PINNED_TYPE.includes(A.filterTab)?(b(u),y(a)):y(a):y([].concat(p(f),p(a)));case 17:return t.prev=17,j(!1),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[8,,17,20]])}))),[A,f]),F=Object(o.useCallback)(d(s().mark((function t(){var e,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.NoteTagCtlImpl.count({status:A.status,filter_type:A.filterTab});case 2:e=t.sent,(r=e.data)&&(T(r),A.currentTagId&&!r.some((function(t){return t.id===A.currentTagId}))&&R({currentTagId:null}));case 5:case"end":return t.stop()}}),t)}))),[A]);var G=Object(o.useCallback)((function(t){return c.a.NoteOperateCtlImpl.batchDelete({ids:t,latest_update_user_uuid:e}).then((function(){null==r||r();var e=f.slice().filter((function(e){return!t.includes(e.id)}));y(e);var o=v.slice().filter((function(e){return!t.includes(e.id)}));b(o),!e.length&&x&&D(),F(),n.a.success(__("小记已移至回收站"))})).catch((function(){n.a.error(__("删除失败"))}))}),[I,e]),M=function(){var t=d(s().mark((function t(e){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.NoteOperateCtlImpl.batchPin({ids:[e.id]});case 2:e.pinned_at=new Date,r=f.filter((function(t){return t.id!==e.id})),v.unshift(e),y(r),b(v),n.a.success(__("小记置顶成功"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),U=function(){var t=d(s().mark((function t(e){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.NoteOperateCtlImpl.batchUnPin({ids:[e.id]});case 2:e.pinned_at=null,r=v.filter((function(t){return t.id!==e.id})),f.unshift(e),y(f),b(r),n.a.success(__("取消置顶成功"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){D(),F()}),[A]),{state:{listData:f,listLoading:E,hasMore:x,noteTags:k,noteFilterParams:A,pinnedListData:v},setListData:y,getNotes:D,getNoteTags:F,onChangeFilterParams:R,onReset:function(){b([]),N(_)},onRemoveNote:function(t){var e=t.id;G([e])},setPinnedListData:b,getListData:I,pinnedNote:M,deletePinnedNote:U,onRemoveNotes:G}}},3515:function(t,e,r){"use strict";r(64);var n=r(21),o=r(355),i=r.n(o),a=r(2756),c=r.n(a),u=(r(445),r(166)),l=(r(114),r(65)),f=r(0),s=r.n(f),p=r(30),y=r.n(p),d=r(13),h=r.n(d),m=r(8),v=r.n(m),g=r(261),b=r.n(g),w=r(1421),O=r(944),_=r(939),E=r(42),j=r(170),S=r(3517),x=r(174),P=r(3470),L=r.n(P),k=r(532),T=r(3518),C=r(3455),A=r(3462),N=r(266),R=r(3501),I=r(3472),D={toolBarBtn:"index-module_toolBarBtn_kG8Cd",wrapper:"index-module_wrapper_8ethE",noteItem:"index-module_noteItem_dVp5J",note:"index-module_note_geZ56",viewBlank:"index-module_viewBlank_ecM7l",tagPinned:"index-module_tagPinned_--NI2",descMoreIcon:"index-module_descMoreIcon_wlBa3",tab:"index-module_tab_zkK5m",arrowUp:"index-module_arrowUp_lRGKc",arrowDown:"index-module_arrowDown_3-EN3",tabNote:"index-module_tabNote_8V7gj",hidden:"index-module_hidden_M8z9j",tagPinnedContainer:"index-module_tagPinnedContainer_hB8jT",selected:"index-module_selected_aA0w-",rightToolBar:"index-module_rightToolBar_e1gvN",noteItemExpand:"index-module_noteItemExpand_PjrCj",leftToolBar:"index-module_leftToolBar_JMyy5",content:"index-module_content_Yf3Cm",loading:"index-module_loading_uVMCS",mask:"index-module_mask_-nOYf",reading:"index-module_reading_dfUvx",isTemplate:"index-module_isTemplate_7o8Q-",viewMore:"index-module_viewMore_gsQbm",searchMode:"index-module_searchMode_jG3fm",meta:"index-module_meta_B+ClL",radio:"index-module_radio_2HGaM",contentExpanded:"index-module_contentExpanded_lWgEI",editing:"index-module_editing_nW8gJ",hasTag:"index-module_hasTag_wtzsZ",viewMoreShow:"index-module_viewMoreShow_pN6H7",images:"index-module_images_fAoGp",date:"index-module_date_095hy",imagesContent:"index-module_imagesContent_t0q35",item:"index-module_item_2FEiU",bookmark:"index-module_bookmark_-+dy+",title:"index-module_title_6RJyp",desc:"index-module_desc_WTwbK",belong:"index-module_belong_Csy5b",text:"index-module_text_bro5m",left:"index-module_left_s-MXM",right:"index-module_right_RJVuX",attachment:"index-module_attachment_H4LKm",file:"index-module_file_e9W5F",name:"index-module_name_fKT1c",size:"index-module_size_xQNXJ",empty:"index-module_empty_cBT2k",loadMoreBtn:"index-module_loadMoreBtn_t6j9W",theEndTips:"index-module_theEndTips_tq+NY",blank:"index-module_blank_2HJdh",desktop:"index-module_desktop_oahLD",toolbarStyle:"index-module_toolbarStyle_cNHWw",batchProcess:"index-module_batchProcess_BqhA4",checkBox:"index-module_checkBox_mz+g+",rightToolBarCollapse:"index-module_rightToolBarCollapse_cPTfb",rightToolBarSave:"index-module_rightToolBarSave_vhDcz",tagContainer:"index-module_tagContainer_nVqVt"};function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function G(){return G=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},G.apply(this,arguments)}function M(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==F(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===F(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U(){U=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==F(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function B(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=H(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Y(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function V(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Y(i,n,o,a,c,"next",t)}function c(t){Y(i,n,o,a,c,"throw",t)}a(void 0)}))}}function q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||H(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){if(t){if("string"==typeof t)return W(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(t,e):void 0}}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var z=C.myNotesConsts.COLLAPSE_BTN_CLASS,K=function(t){var e,r,n=t.note,o=t.noteTags,i=t.enableDynamicTaskList,a=t.onLoadNote,c=t.onCollapseNote,u=t.renderEditor,p=t.onChangeNote,y=t.onUpdateContentUpdatedAt,d=n.id,m=n.content,v=m.updated_at,g=m.abstract,b=m.source,w=m.doc_dynamic_data,O=n.tags,_=void 0===O?[]:O,j=q(Object(f.useState)(!b),2),S=j[0],x=j[1],P=q(Object(f.useState)(!!b),2),L=P[0],T=P[1],F=q(Object(f.useState)(!b),2),Y=F[0],H=F[1],W=q(Object(f.useState)(!!b),2),K=W[0],$=W[1],J=Object(f.useRef)(null),Q=Object(f.useRef)(null),Z=Object(f.useRef)(null),X=n.editing,tt=n.loading,et=n.expanded_at,rt=n.changed_at,nt=n.save_from,ot=null===v;if(!C.isDev&&ot)return null;var it="item-".concat(n.id,"-").concat(v),at={};C.isDesktopApp&&(at.downloadFileHandler=C.downloadFileHandler);var ct=_&&_.map((function(t){var e=o&&o.find((function(e){return e.id===t.id}));return e||null})).filter((function(t){return!!t})),ut=function(){var t=V(U().mark((function t(e){return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var r=setInterval((function(){var n=e.querySelectorAll('ne-card[data-card-name="image"] img');if(0===n.length)return clearInterval(r),t();var o,i=[],a=B(n);try{for(a.s();!(o=a.n()).done;){var c=o.value;c.complete||i.push(c)}}catch(t){a.e(t)}finally{a.f()}0===i.length&&(clearInterval(r),setTimeout((function(){t()}),100))}),10);setTimeout((function(){clearInterval(r),t()}),800)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),lt=function(){var t=V(U().mark((function t(e){var r;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=13;break}if($(!0),T(!1),Q){t.next=5;break}return t.abrupt("return");case 5:return r=Q.current,t.next=8,ut(r);case 8:x(!1),H(!1),T(!0),t.next=16;break;case 13:H(!0),x(!1),setTimeout(V(U().mark((function t(){var e,r;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=J.current){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,ut(e);case 5:x(!0),$(!0),T(!1),null==(r=document.getElementById("doclet-viewmore-".concat(d)))||r.scrollIntoView(!1);case 10:case"end":return t.stop()}}),t)}))),30);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ft=!X&&ct&&!!ct.length,st=nt&&[k.SAVE_FROM_TYPE.TEMPLATE_NOTE,k.SAVE_FROM_TYPE.TEMPLATE_TODO].includes(nt);if(n.editing)return s.a.createElement("div",{className:h()(D.content,M({},D.contentExpanded,et),D.editing)},u(n));function pt(){null==p||p(n),null==y||y(n.id)}return s.a.createElement(l.a,{className:h()(D.content,"note-item-normal",(e={},M(e,D.contentExpanded,!!st||et),M(e,D.reading,!X),M(e,D.hasTag,ft),M(e,D.isTemplate,st),e))},s.a.createElement("div",null,Y&&s.a.createElement("div",{style:{display:S?"relative":"absolute",zIndex:S?3:-1,left:0,top:0,overflow:L?"hidden":"none"},ref:J},s.a.createElement(R.a,G({docId:d,key:"".concat(it,"-description-").concat(n.updated_at),content:g,onDynamicDataChange:pt,enableDynamicTaskList:i,dynamicData:w},at))),K&&s.a.createElement("div",{style:{position:L?"relative":"absolute",zIndex:L?3:-1,left:0,top:0,overflow:L?"hidden":"none"},ref:Q},s.a.createElement(R.a,G({docId:d,key:"".concat(it,"-doclet-").concat(d,"-").concat(v),content:b,onDynamicDataChange:pt,enableDynamicTaskList:i,dynamicData:w},at)))),ft&&s.a.createElement(I.a,{data:ct}),s.a.createElement("div",{className:h()(D.viewBlank,"view-blank"),onClick:function(t){var e=t.currentTarget;e&&"pointer"===e.style.cursor&&e.nextSibling&&e.nextSibling.click()}}),s.a.createElement("div",{ref:Z,key:"doclet-viewmore-".concat(d),id:"doclet-viewmore-".concat(d),className:h()(D.viewMore,(r={},M(r,D.viewMoreShow,et),M(r,D.expanded,et),r),"view-more"),onClick:function(){var t=V(U().mark((function t(e){return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.stopPropagation(),!et){t.next=14;break}if(!rt){t.next=10;break}return t.next=5,a(n);case 5:return c(n),t.next=8,lt(!1);case 8:t.next=12;break;case 10:c(n),lt(!1);case 12:t.next=19;break;case 14:return t.next=16,a(n);case 16:return t.next=18,lt(!0);case 18:setTimeout((function(){Object(A.checkCollapseBtnShow)()}),100);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},(null==g?void 0:g.includes(k.VIEW_MORE_TAG))&&(et?s.a.createElement("span",{className:h()(z,D.descMoreIcon)},s.a.createElement(E.b,{name:"arrow-up",size:14,className:D.descMoreIcon}),__("收起")):s.a.createElement("span",{className:h()(z,D.descMoreIcon)},s.a.createElement(E.b,{name:"arrow-down",size:14,className:D.descMoreIcon}),__("展开")))),X&&s.a.createElement("div",{className:D.mask}),tt&&s.a.createElement("div",{className:D.loading},s.a.createElement(N.default,null)))},$=function(t){var e=t.data,r=t.date;return s.a.createElement("div",{className:h()(D.noteItem,D.images)},s.a.createElement("div",{className:D.date},Object(C.getLocaleMonthName)(r)),s.a.createElement("div",{className:D.imagesContent},e.map((function(t,r){return s.a.createElement("div",{onClick:function(){return Object(C.showImgBrowser)(e,r)},className:D.item,id:"note-image-item-".concat(t.uuid)},s.a.createElement("img",{src:Object(C.getPreviewImage)(L.a.sanitizeUrl(t.src),{size:160})}))}))))};function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function Q(t){return function(t){if(Array.isArray(t))return rt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||et(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function X(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(r),!0).forEach((function(e){tt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function tt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==J(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===J(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function et(t,e){if(t){if("string"==typeof t)return rt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rt(t,e):void 0}}function rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var nt=C.myNotesConsts.NOTE_PINNED_SHOW_KEY,ot=C.myNotesConsts.COLLAPSE_BTN_CLASS,it=C.myNotesConsts.SUBMIT_BTN_CLASS,at=C.myNotesConsts.NOTE_LIST_ITEM_CLASS,ct=C.myNotesConsts.NOTE_LIST_READ_TAG_ADD_CLASS,ut=function(t){var e,r=t.state,o=r.hasMore,a=r.listData,p=r.pinnedListData,d=r.listLoading,m=r.searchValue,v=r.orderBy,g=r.filterTab,P=r.currentTagId,N=r.noteTags,R=r.toDocList,I=r.batchProcess,F=r.noteStatus,G=r.showPinned,M=t.isLiteMode,U=t.getNotes,B=t.onSelectNote,Y=t.onLoadNote,V=t.onCollapseNote,q=t.onChangeNote,H=t.setLoadRef,W=t.renderToolBar,z=t.setToDocList,J=t.setBatchProcess,Z=t.isAlipayWebApp,rt=t.onUpdateContentUpdatedAt,ut=t.setShowPinned,lt=g===k.FILTER_TYPES.all,ft=Object(j.b)().isDarkMode;function st(){if(!P||m)return null;var t=N.find((function(t){var e;return(null===(e=t.tag_meta)||void 0===e?void 0:e.id)===P}));if(!t||!t.count)return null;var e=a&&a.length;p&&p.length>0&&(e+=p.length);var r=t.count-e;return!r||r<0?null:__("{num} 篇小记不包含{text}",{num:r,text:Object(C.getFilterBarConfig)()[g]})}Object(f.useEffect)((function(){if(lt){var t=document.querySelector("#mynote-container .note-list");if(t){var e=t.querySelectorAll(".yuque-doc-content");setTimeout((function(){var t,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=et(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;m?(n.searchPad||(n.searchPad=new S.a({target:n,style:{highlight:{fill:"rgba(255, 230, 0, 0.5)"},select:{fill:"rgba(255, 140, 0, 0.5)"}}})),n.searchPad.find(m.trim())):n.searchPad&&n.searchPad.clear()}}catch(t){r.e(t)}finally{r.f()}}),100),Object(A.handleListScroll)()}}}),[a]);var pt=function(e){var r,n=X(X({},t),{},{state:X(X({},t.state),{},{note:e}),mode:"list"});return null===(r=t.renderEditor)||void 0===r?void 0:r.call(t,n)},yt=function(t){var e=R.some((function(e){return e.id===t.id}));return s.a.createElement("div",{className:D.checkBox,onClick:function(){J(!0)}},s.a.createElement(u.a,{onChange:function(e){!0===e.target.checked?z([].concat(Q(R),[t])):1===R.length?(z(Q(R).filter((function(e){return e.id!==t.id}))),J(!1)):z(Q(R).filter((function(e){return e.id!==t.id})))},checked:e}))};function dt(t){return M?null:s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:h()(D.leftToolBar,tt({},D.batchProcess,I))},!t.editing&&yt(t)),s.a.createElement("div",{className:h()(D.rightToolBar,tt({},D.batchProcess,I))},!t.editing&&!M&&W(t),t.editing&&s.a.createElement("div",{onClick:function(t){var e,r,n=null==t||null===(e=t.target)||void 0===e||null===(r=e.closest(".".concat(at)))||void 0===r?void 0:r.querySelector(".".concat(it));n&&n.click()},className:h()(D.rightToolBarSave,"right-tool-".concat(it))},s.a.createElement(O.default,{width:18})),t.expanded_at&&!t.editing&&s.a.createElement("div",{className:h()(D.rightToolBarCollapse,"right-tool-".concat(ot)),onClick:function(){Object(A.scrollToElem)(t),V(t)}},s.a.createElement(_.default,{width:18}))))}var ht=function(e){var r=e.editing,n="item-".concat(e.id,"-").concat(e.content_updated_at),o={note:e,filterTab:g,noteTags:N,isAlipayWebApp:Z,orderBy:v,onSelectNote:B,renderToolBar:W,renderSideToolBar:dt,enableDynamicTaskList:t.enableDynamicTaskList,onLoadNote:Y,onCollapseNote:V,renderEditor:pt,onChangeNote:q,onUpdateContentUpdatedAt:rt};return s.a.createElement("div",{id:"note-".concat(e.id),key:n,className:h()(D.note,tt({},D.selected,r),at),onDoubleClick:function(t){var r;null!=t&&null!==(r=t.target)&&void 0!==r&&r.closest(".share-note-button")||B(e)}},s.a.createElement("div",{className:h()(D.noteItem,tt({},D.noteItemExpand,r),"note-item")},e.pinned_at&&s.a.createElement("div",{className:D.tagPinnedContainer},s.a.createElement(E.b,{name:"icon-top",size:14,className:D.tagPinned})),!e.editing&&s.a.createElement("div",{className:D.meta},s.a.createElement(T.a,{item:e,orderBy:v,isLiteViewMode:!1}),M&&W(e)),s.a.createElement(K,o),s.a.createElement("div",{className:h()(D.tagContainer,ct)})),dt(e))};return i()(null==p?void 0:p.concat(a))?s.a.createElement("div",{"data-testid":"note-list-empty",className:h()(D.wrapper,D.empty,tt({},D.desktop,C.isDesktopApp),"note-list-empty")},function(){if(d)return null;if(m)return s.a.createElement("div",{className:D.blank},__("未能找到相关{type}",{type:__("小记")}));var t=st(),e=__("灵光乍现，小记一下");return F===k.STATUS.archived&&(e=__("不再使用的小记可归档于此")),s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{src:ft?"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*HSmhT7fKgwMAAAAAAAAAAAAAARQnAQ":"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*HshzTKOlvckAAAAAAAAAAAAAARQnAQ"}),s.a.createElement("p",null,t||e))}()):s.a.createElement("div",{className:h()(D.wrapper,(e={},tt(e,D.desktop,C.isDesktopApp),tt(e,D.win,C.isWin),tt(e,D.searchMode,m),e),"note-list"),"data-testid":"note-list"},k.NEED_PINNED_TYPE.includes(g)&&p.length>0&&!M&&s.a.createElement(n.a,{type:"link",className:D.tab,onClick:function(){ut(!G),x.a.set(nt,Number(!G))}},__("置顶"),s.a.createElement(E.b,{name:"arrow-down",size:16,className:h()(D.arrowUp,tt({},D.arrowDown,!G))})),s.a.createElement("div",{className:h()(tt({},D.hidden,!G))},function(t){if(k.NEED_PINNED_TYPE.includes(g))return t.map(ht)}(Object(C.parseCardData)(p,g))),k.NEED_PINNED_TYPE.includes(g)&&G&&p.length>0&&a.length>0&&s.a.createElement("span",{className:h()(D.tab,D.tabNote)},__("小记")),function(e){if(k.NEED_PINNED_TYPE.includes(g))return e.sort((function(t,e){return new Date(e[v]).getTime()-new Date(t[v]).getTime()})).map(ht);var r,n=e.reduce((function(t,e){if(!e.cards)return t;var r=e.cards.map((function(t){return X(X({},t),{},{published_at:e.published_at,content:{updated_at:e.content.updated_at}})}));return t.concat(r||[])}),[]);if(g===k.FILTER_TYPES.image){var o=c()(n,(function(t){return y()(t.published_at).startOf("month").format()}));return Object.keys(o).sort((function(t,e){return new Date(e).getTime()-new Date(t).getTime()})).map((function(t){var e={data:o[t],date:t};return s.a.createElement($,e)}))}return g===k.FILTER_TYPES.bookmark?(r=n,s.a.createElement(s.a.Fragment,null,r.map((function(t){return s.a.createElement("div",{className:h()(D.noteItem,D.bookmark)},s.a.createElement(l.a,{className:D.item},s.a.createElement(T.a,{item:t}),s.a.createElement("a",{href:L.a.sanitizeUrl(t.detail.url),target:"_blank"},s.a.createElement("div",{className:D.left},s.a.createElement("div",{className:D.title},t.detail.title||__("无标题")),s.a.createElement("div",{className:D.desc},t.detail.desc||""),s.a.createElement("div",{className:D.belong},t.detail.icon&&s.a.createElement("img",{src:L.a.sanitizeUrl(t.detail.icon)}),s.a.createElement("span",{className:D.text},t.detail.belong||t.detail.url||""))),t.detail.image&&s.a.createElement("div",{className:D.right},s.a.createElement("img",{src:L.a.sanitizeUrl(t.detail.image)})))))})))):g===k.FILTER_TYPES.attachment?function(t,e){return s.a.createElement(s.a.Fragment,null,t.map((function(t){var r;return s.a.createElement("div",{className:h()(D.noteItem,D.attachment)},s.a.createElement(l.a,{className:D.item},s.a.createElement(T.a,{item:t}),s.a.createElement("div",{className:D.file},s.a.createElement("div",{className:D.left},null===(r=e.renderResourceIcon)||void 0===r?void 0:r.call(e,t),s.a.createElement("span",{className:D.name},t.name),t.size&&s.a.createElement("span",{className:D.size},"(",b()(t.size),")")),s.a.createElement("div",{className:D.right},s.a.createElement("a",{href:L.a.sanitizeUrl(t.src),download:t.name},s.a.createElement(w.default,null))))))})))}(n,t):null}(Object(C.parseCardData)(a,g)),function(){if(o)return s.a.createElement("div",{className:D.loadMoreBtn,onClick:U,ref:function(t){return H(t)}},__("点击加载更多"));var t=st();return t?s.a.createElement("div",{className:D.theEndTips},t):a&&a.length>9?s.a.createElement("div",{className:D.theEndTips},__("我是有底线的")):void 0}())};ut.propTypes={isAlipayWebApp:v.a.bool,setLoadRef:v.a.func,setShowRepoModal:v.a.func,state:v.a.object,getNotes:v.a.func,onLoadNote:v.a.func,onCollapseNote:v.a.func,onArchiveNotes:v.a.func,onRemoveNote:v.a.func,onPublicNote:v.a.func,onSelectNote:v.a.func,onChangeNote:v.a.func,onFinishLoadNote:v.a.func,onChangeShareStatus:v.a.func,onInsertToLakeEditor:v.a.func,renderToolBar:v.a.func,renderEditor:v.a.func,renderResourceIcon:v.a.func,enableDynamicTaskList:v.a.bool,setToDocList:v.a.func,setBatchProcess:v.a.func,onUpdateContentUpdatedAt:v.a.func};e.a=ut},3516:function(t,e,r){"use strict";r(94);var n=r(27),o=r(0),i=r.n(o),a=r(8),c=r.n(a),u=r(13),l=r.n(u),f=r(1438),s={wrapper:"search-module_wrapper_S445p",searchBar:"search-module_searchBar_x3Krl",active:"search-module_active_eYHT+",isLiteMode:"search-module_isLiteMode_C4hZN",searchMini:"search-module_searchMini_V+K7h",searchMiniShow:"search-module_searchMiniShow_xFcgm"};function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e,r){return e=function(t){var e=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===p(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var m=function(t){var e,r,a,c=t.activeMode,u=t.isDesktopApp,p=t.searchValue,h=t.searchActive,m=t.setSearchActive,v=t.isLiteMode,g=t.onSearchNote,b=t.onSearchReset,w=d(Object(o.useState)(null),2),O=w[0],_=w[1],E=Object(o.useRef)(null);Object(o.useEffect)((function(){p||(_(null),m(!1))}),[p]);var j={ref:E,value:O,prefix:i.a.createElement(f.default,null),placeholder:__("搜索"),autoComplete:"nope",allowClear:!0,onSearch:g,onBlur:function(t){t.target.value||(m(!1),b())},onChange:function(t){var e=t.target.value;_(e)},onClear:function(){_(null)}};return"dark"!==(null===(e=window.appData.themeManager)||void 0===e?void 0:e.current)&&(j.style={borderColor:"#e8e8e8"}),i.a.createElement("div",{"data-testid":"note-search",className:l()(s.wrapper,"note-search")},i.a.createElement("div",{className:l()(s.searchBar,(r={},y(r,s.active,c||h),y(r,s.isLiteMode,v),r))},i.a.createElement(n.a.Search,j)),!c&&i.a.createElement("div",{className:l()(s.searchMini,(a={},y(a,s.searchMiniShow,!h),y(a,s.desktop,u),a)),onClick:function(){m(!0),E&&E.current&&E.current.focus()}},i.a.createElement(f.default,{width:16,height:16,style:{color:"#262626"}})))};m.defaultProps={activeMode:!1,isDesktopApp:!1},m.propTypes={searchValue:c.a.string,searchActive:c.a.bool,isDesktopApp:c.a.bool,onSearchNote:c.a.func,onSearchReset:c.a.func,setSearchActive:c.a.func,activeMode:c.a.bool};e.a=m},3517:function(t,e,r){"use strict";var n=r(25),o=r.n(n),i=r(243),a={}.toString,c=function(t,e){return a.call(t)==="[object "+e+"]"};function u(t){return null==t}function l(t,e,r){try{return window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle[e]}catch(t){return u(r)?null:r}}function f(t,e){var r=[];if(t){if(e&&!e(t))return r;for(var n=t.childNodes,o=0;o<n.length;o++){var i=n[o],a=i.nodeType;3===a?r.push(i):1!==a&&9!==a&&11!==a||(r=r.concat(f(i,e)))}}return r}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return(e=m(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function m(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}function v(t,e){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},v(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}(a,t);var e,r,n,o=g(a);function a(t){var e;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e=o.call(this,t),!t.target)throw new Error("please set a dom element as target!");return e.options=y({target:null,style:{highlight:{fill:"rgba(255, 230, 0, 0.5)"},select:{fill:"rgba(255, 140, 0, 0.5)"}},filter:null},t),e.ranges=[],e._initTarget(),e._createCanvas(),e}return e=a,(r=[{key:"_initTarget",value:function(){var t=this.options.target;"static"===l(t,"position")&&(t.style.position="relative")}},{key:"_createCanvas",value:function(){var t=this.options.target,e=document.createElement("div");e.style.position="absolute",e.style.top=0,e.style.left=0,e.style["pointer-events"]="none",e.style["z-index"]=99,t.appendChild(e);var r=new i.TinyCanvas({container:e});this.container=e,this.canvas=r}},{key:"_resizeCanvas",value:function(){var t=this.options.target,e=this.canvas,r=function(t,e){var r=l(t,"width",e);return"auto"===r&&(r=t.offsetWidth),parseFloat(r)}(t),n=function(t,e){var r=l(t,"height",e);return"auto"===r&&(r=t.offsetHeight),parseFloat(r)}(t);e.resize(r,n)}},{key:"_getRelativeRect",value:function(t){var e=this.container,r=t.getBoundingClientRect(),n=e.getBoundingClientRect();return{x:r.left-n.left,y:r.top-n.top,width:r.right-r.left,height:r.bottom-r.top}}},{key:"_cacheRange",value:function(t){return{startOffset:t.startOffset,endOffset:t.endOffset,startContainer:t.startContainer,endContainer:t.endContainer,commonAncestorContainer:t.commonAncestorContainer}}},{key:"_isRangeWrap",value:function(t){var e=this._cacheRange(t);t.setEnd(e.startContainer,e.startOffset+1);var r=t.getBoundingClientRect();t.setEnd(e.startContainer,e.endOffset-1),t.setStart(e.endContainer,e.endOffset);var n=t.getBoundingClientRect();return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),r.bottom!==n.bottom}},{key:"_drawOneByOne",value:function(t,e){for(var r=this._cacheRange(t),n=this.canvas,o=r.startOffset;o<r.endOffset;){t.setStart(r.commonAncestorContainer,o),t.setEnd(r.commonAncestorContainer,o+1);var i=this._getRelativeRect(t);n.clearRect(i),n.draw("Rect",y(y({},i),e)),o++}t.setStart(r.startContainer,r.startOffset),t.setEnd(r.endContainer,r.endOffset)}},{key:"_drawRangeBackground",value:function(t,e){var r=this.canvas;if(this._isRangeWrap(t))return this._drawOneByOne(t,e);var n=this._getRelativeRect(t);r.clearRect(n),r.draw("Rect",y(y({},n),e))}},{key:"_highlightRanges",value:function(t){var e=this;t.forEach((function(t){e._highlightRange(t)}))}},{key:"_clearRange",value:function(t){var e=this.canvas,r=this._getRelativeRect(t);e.clearRect(r)}},{key:"_highlightRange",value:function(t){var e=this.options.style.highlight;this._drawRangeBackground(t,e)}},{key:"_selectRange",value:function(t){var e=this.options.style.select;this._drawRangeBackground(t,e)}},{key:"_clearCanvas",value:function(){this.canvas.clear()}},{key:"_move",value:function(t){var e=this.selectedRange,r=this.ranges;if(e){var n=r.indexOf(e),o=r[n+t];o||(o=t>0?r[t-1]:r[r.length+t]),this._highlightRange(e),this.select(o),this.scrollIntoView()}}},{key:"_replace",value:function(t,e){var r=t.commonAncestorContainer.parentNode,n=document.createTextNode(e);"A"===r.tagName&&r.getAttribute("href")===r.innerText&&r.setAttribute("href",e),t.deleteContents(),t.insertNode(n)}},{key:"replace",value:function(t){if(!u(t)){var e=this.selectedRange;if(this.ranges.length>0){var r={range:e};this.emit("before:replace",r),this._replace(e,t),this._clearRange(e),this.emit("after:replace",r)}}}},{key:"replaceAll",value:function(t){var e=this;if(!u(t)){var r=this.ranges,n={ranges:r};this.emit("before:replaceAll",n),r.forEach((function(r){e._replace(r,t)})),this.emit("after:replaceAll",n),r.forEach((function(t){e._saveCardValue(t)})),this.clear()}}},{key:"show",value:function(){this.container.style.display=""}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"find",value:function(t,e){var r=[];if(this.clear(),t&&c(t,"String")&&t.length>0){e=function(t){return c(t,"Function")}(e)?e:function(){return!0},this._resizeCanvas();var n=f(this.options.target,(function(t){return"none"!==t.style.display&&e(t)}));n.length>0&&(r=function(t,e){var r=[];return t.forEach((function(t){var n=t.nodeValue,o=e.length,i=function(t,e){for(var r=[],n=e.length,o=t.indexOf(e);o>-1;)r.push(o),o=t.indexOf(e,o+n);return r}((n||"").toLowerCase(),(e||"").toLowerCase());i.forEach((function(e){var n=document.createRange();n.setStart(t,e),n.setEnd(t,e+o),r.push(n)}))})),r}(n,t),this._highlightRanges(r),this.ranges=r,this.keyword=t)}return this.ranges=r,r}},{key:"reFind",value:function(){var t=this.selectedRangeIndex,e=this.find(this.keyword);if(e.length>0&&!u(t)){var r=e[t]?e[t]:e[0];this.select(r)}return e}},{key:"scrollIntoView",value:function(){if(this.selectedRange){var t=this.selectedRange.commonAncestorContainer.parentElement;(e=t.getBoundingClientRect()).top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)||(t.scrollIntoView({block:"center"}),document.documentElement.scrollTop=0,document.body.scrollTop=0)}var e}},{key:"select",value:function(t){if(!u(t)){var e=this.ranges,r=t;c(t,"Number")&&(r=e[t]);var n={range:r};this.emit("before:select",n),this._selectRange(r),this.selectedRange=r,this.selectedRangeIndex=e.indexOf(r),this.emit("after:select",n)}}},{key:"next",value:function(){this._move(1)}},{key:"prev",value:function(){this._move(-1)}},{key:"clear",value:function(){this._clearCanvas(),this.selectedRange=void 0,this.ranges=[],this.keyword=void 0}},{key:"count",value:function(){var t=this.ranges;if(0===t.length)return 0;var e=this.selectedRange;return[t.indexOf(e)+1,t.length]}},{key:"destroy",value:function(){var t=this.container;this.options=null,t.parentElement.removeChild(t)}}])&&h(e.prototype,r),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.a);e.a=w},3518:function(t,e,r){"use strict";var n=r(0),o=r.n(n),i=r(30),a=r.n(i),c=r(452),u=r(3455),l=r(2447),f=r(38),s="note-status-module_dev_g73YZ",p="note-status-module_publicInfo_8wLHo",y="note-status-module_text_ZLRRs";function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function h(){h=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function m(){}var v={};u(v,i,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==e&&r.call(b,i)&&(v=b);var w=m.prototype=p.prototype=Object.create(v);function O(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==d(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=j(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return y.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:y,configurable:!0}),y.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},O(_.prototype),u(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function m(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}e.a=function(t){var e=t.item,r=t.orderBy,n=t.isLiteViewMode,i=e.id,d=e.editing,v=e.public,g=e.published_at,b=e.content.updated_at,w=r===c.ORDER_BY.content_updated_at,O=w?b:g,_=n&&new Date(b).getFullYear()!==(new Date).getFullYear();function E(){return j.apply(this,arguments)}function j(){var t;return t=h().mark((function t(){var e;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.shares.findOne({target_type:"Note",target_id:i});case 2:e=t.sent,window.open("".concat(window.location.origin,"/r/notes/share/").concat(e.token));case 4:case"end":return t.stop()}}),t)})),j=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){m(i,n,o,a,c,"next",t)}function c(t){m(i,n,o,a,c,"throw",t)}a(void 0)}))},j.apply(this,arguments)}return o.a.createElement(o.a.Fragment,null,d?o.a.createElement("span",null,__("编辑中"),"..."):o.a.createElement("span",{className:y},w?__("更新于"):__("创建于")," ",l.default.format(O,{onlyDate:_,disableYear:!1}),!!v&&!n&&o.a.createElement("span",{className:p,onClick:E},__("分享中"))),function(t){if(!u.isDev)return null;var e=null===b;return o.a.createElement("span",{className:s},t.id," ",e?"mirror":""," ",a()(t.content_updated_at).format("YYYY-MM-DD HH:mm:ss"))}(e))}},3519:function(t,e,r){"use strict";var n=r(3520),o=r(3530),i=r(3465);t.exports={formats:i,parse:o,stringify:n}},3520:function(t,e,r){"use strict";var n=r(3521),o=r(3478),i=r(3465),a=Object.prototype.hasOwnProperty,c={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},u=Array.isArray,l=Array.prototype.push,f=function(t,e){l.apply(t,u(e)?e:[e])},s=Date.prototype.toISOString,p=i.default,y={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,format:p,formatter:i.formatters[p],indices:!1,serializeDate:function(t){return s.call(t)},skipNulls:!1,strictNullHandling:!1},d={},h=function t(e,r,i,a,c,l,s,p,h,m,v,g,b,w,O,_){for(var E,j=e,S=_,x=0,P=!1;void 0!==(S=S.get(d))&&!P;){var L=S.get(e);if(x+=1,void 0!==L){if(L===x)throw new RangeError("Cyclic object value");P=!0}void 0===S.get(d)&&(x=0)}if("function"==typeof p?j=p(r,j):j instanceof Date?j=v(j):"comma"===i&&u(j)&&(j=o.maybeMap(j,(function(t){return t instanceof Date?v(t):t}))),null===j){if(c)return s&&!w?s(r,y.encoder,O,"key",g):r;j=""}if("string"==typeof(E=j)||"number"==typeof E||"boolean"==typeof E||"symbol"==typeof E||"bigint"==typeof E||o.isBuffer(j))return s?[b(w?r:s(r,y.encoder,O,"key",g))+"="+b(s(j,y.encoder,O,"value",g))]:[b(r)+"="+b(String(j))];var k,T=[];if(void 0===j)return T;if("comma"===i&&u(j))w&&s&&(j=o.maybeMap(j,s)),k=[{value:j.length>0?j.join(",")||null:void 0}];else if(u(p))k=p;else{var C=Object.keys(j);k=h?C.sort(h):C}for(var A=a&&u(j)&&1===j.length?r+"[]":r,N=0;N<k.length;++N){var R=k[N],I="object"==typeof R&&void 0!==R.value?R.value:j[R];if(!l||null!==I){var D=u(j)?"function"==typeof i?i(A,R):A:A+(m?"."+R:"["+R+"]");_.set(e,x);var F=n();F.set(d,_),f(T,t(I,D,i,a,c,l,"comma"===i&&w&&u(j)?null:s,p,h,m,v,g,b,w,O,F))}}return T};t.exports=function(t,e){var r,o=t,l=function(t){if(!t)return y;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||y.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if(void 0!==t.format){if(!a.call(i.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var n=i.formatters[r],o=y.filter;return("function"==typeof t.filter||u(t.filter))&&(o=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:y.addQueryPrefix,allowDots:void 0===t.allowDots?y.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:y.charsetSentinel,delimiter:void 0===t.delimiter?y.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:y.encode,encoder:"function"==typeof t.encoder?t.encoder:y.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:y.encodeValuesOnly,filter:o,format:r,formatter:n,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:y.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:y.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:y.strictNullHandling}}(e);"function"==typeof l.filter?o=(0,l.filter)("",o):u(l.filter)&&(r=l.filter);var s,p=[];if("object"!=typeof o||null===o)return"";s=e&&e.arrayFormat in c?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var d=c[s];if(e&&"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var m="comma"===d&&e&&e.commaRoundTrip;r||(r=Object.keys(o)),l.sort&&r.sort(l.sort);for(var v=n(),g=0;g<r.length;++g){var b=r[g];l.skipNulls&&null===o[b]||f(p,h(o[b],b,d,m,l.strictNullHandling,l.skipNulls,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.format,l.formatter,l.encodeValuesOnly,l.charset,v))}var w=p.join(l.delimiter),O=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?O+="utf8=%26%2310003%3B&":O+="utf8=%E2%9C%93&"),w.length>0?O+w:""}},3521:function(t,e,r){"use strict";var n=r(3463),o=r(3526),i=r(3528),a=n("%TypeError%"),c=n("%WeakMap%",!0),u=n("%Map%",!0),l=o("WeakMap.prototype.get",!0),f=o("WeakMap.prototype.set",!0),s=o("WeakMap.prototype.has",!0),p=o("Map.prototype.get",!0),y=o("Map.prototype.set",!0),d=o("Map.prototype.has",!0),h=function(t,e){for(var r,n=t;null!==(r=n.next);n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r};t.exports=function(){var t,e,r,n={assert:function(t){if(!n.has(t))throw new a("Side channel does not contain "+i(t))},get:function(n){if(c&&n&&("object"==typeof n||"function"==typeof n)){if(t)return l(t,n)}else if(u){if(e)return p(e,n)}else if(r)return function(t,e){var r=h(t,e);return r&&r.value}(r,n)},has:function(n){if(c&&n&&("object"==typeof n||"function"==typeof n)){if(t)return s(t,n)}else if(u){if(e)return d(e,n)}else if(r)return function(t,e){return!!h(t,e)}(r,n);return!1},set:function(n,o){c&&n&&("object"==typeof n||"function"==typeof n)?(t||(t=new c),f(t,n,o)):u?(e||(e=new u),y(e,n,o)):(r||(r={key:{},next:null}),function(t,e,r){var n=h(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}}(r,n,o))}};return n}},3522:function(t,e,r){"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(3523);t.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&o())))}},3523:function(t,e,r){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},3524:function(t,e,r){"use strict";var n=Array.prototype.slice,o=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==o.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var r,i=n.call(arguments,1),a=Math.max(0,e.length-i.length),c=[],u=0;u<a;u++)c.push("$"+u);if(r=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof r){var o=e.apply(this,i.concat(n.call(arguments)));return Object(o)===o?o:this}return e.apply(t,i.concat(n.call(arguments)))})),e.prototype){var l=function(){};l.prototype=e.prototype,r.prototype=new l,l.prototype=null}return r}},3525:function(t,e,r){"use strict";var n=r(3464);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},3526:function(t,e,r){"use strict";var n=r(3463),o=r(3527),i=o(n("String.prototype.indexOf"));t.exports=function(t,e){var r=n(t,!!e);return"function"==typeof r&&i(t,".prototype.")>-1?o(r):r}},3527:function(t,e,r){"use strict";var n=r(3464),o=r(3463),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),c=o("%Reflect.apply%",!0)||n.call(a,i),u=o("%Object.getOwnPropertyDescriptor%",!0),l=o("%Object.defineProperty%",!0),f=o("%Math.max%");if(l)try{l({},"a",{value:1})}catch(t){l=null}t.exports=function(t){var e=c(n,a,arguments);u&&l&&(u(e,"length").configurable&&l(e,"length",{value:1+f(0,t.length-(arguments.length-1))}));return e};var s=function(){return c(n,i,arguments)};l?l(t.exports,"apply",{value:s}):t.exports.apply=s},3528:function(t,e,r){var n="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=n&&o&&"function"==typeof o.get?o.get:null,a=n&&Map.prototype.forEach,c="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&c?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=c&&u&&"function"==typeof u.get?u.get:null,f=c&&Set.prototype.forEach,s="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,p="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,y="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,d=Boolean.prototype.valueOf,h=Object.prototype.toString,m=Function.prototype.toString,v=String.prototype.match,g=String.prototype.slice,b=String.prototype.replace,w=String.prototype.toUpperCase,O=String.prototype.toLowerCase,_=RegExp.prototype.test,E=Array.prototype.concat,j=Array.prototype.join,S=Array.prototype.slice,x=Math.floor,P="function"==typeof BigInt?BigInt.prototype.valueOf:null,L=Object.getOwnPropertySymbols,k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,T="function"==typeof Symbol&&"object"==typeof Symbol.iterator,C="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===T||"symbol")?Symbol.toStringTag:null,A=Object.prototype.propertyIsEnumerable,N=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function R(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||_.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var n=t<0?-x(-t):x(t);if(n!==t){var o=String(n),i=g.call(e,o.length+1);return b.call(o,r,"$&_")+"."+b.call(b.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(e,r,"$&_")}var I=r(3529),D=I.custom,F=Y(D)?D:null;function G(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function M(t){return b.call(String(t),/"/g,"&quot;")}function U(t){return!("[object Array]"!==H(t)||C&&"object"==typeof t&&C in t)}function B(t){return!("[object RegExp]"!==H(t)||C&&"object"==typeof t&&C in t)}function Y(t){if(T)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!k)return!1;try{return k.call(t),!0}catch(t){}return!1}t.exports=function t(e,r,n,o){var c=r||{};if(q(c,"quoteStyle")&&"single"!==c.quoteStyle&&"double"!==c.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(q(c,"maxStringLength")&&("number"==typeof c.maxStringLength?c.maxStringLength<0&&c.maxStringLength!==1/0:null!==c.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=!q(c,"customInspect")||c.customInspect;if("boolean"!=typeof u&&"symbol"!==u)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(q(c,"indent")&&null!==c.indent&&"\t"!==c.indent&&!(parseInt(c.indent,10)===c.indent&&c.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(q(c,"numericSeparator")&&"boolean"!=typeof c.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var h=c.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return z(e,c);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var w=String(e);return h?R(e,w):w}if("bigint"==typeof e){var _=String(e)+"n";return h?R(e,_):_}var x=void 0===c.depth?5:c.depth;if(void 0===n&&(n=0),n>=x&&x>0&&"object"==typeof e)return U(e)?"[Array]":"[Object]";var L=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=j.call(Array(t.indent+1)," ")}return{base:r,prev:j.call(Array(e+1),r)}}(c,n);if(void 0===o)o=[];else if(W(o,e)>=0)return"[Circular]";function D(e,r,i){if(r&&(o=S.call(o)).push(r),i){var a={depth:c.depth};return q(c,"quoteStyle")&&(a.quoteStyle=c.quoteStyle),t(e,a,n+1,o)}return t(e,c,n+1,o)}if("function"==typeof e&&!B(e)){var V=function(t){if(t.name)return t.name;var e=v.call(m.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),K=X(e,D);return"[Function"+(V?": "+V:" (anonymous)")+"]"+(K.length>0?" { "+j.call(K,", ")+" }":"")}if(Y(e)){var tt=T?b.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):k.call(e);return"object"!=typeof e||T?tt:$(tt)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var et="<"+O.call(String(e.nodeName)),rt=e.attributes||[],nt=0;nt<rt.length;nt++)et+=" "+rt[nt].name+"="+G(M(rt[nt].value),"double",c);return et+=">",e.childNodes&&e.childNodes.length&&(et+="..."),et+="</"+O.call(String(e.nodeName))+">"}if(U(e)){if(0===e.length)return"[]";var ot=X(e,D);return L&&!function(t){for(var e=0;e<t.length;e++)if(W(t[e],"\n")>=0)return!1;return!0}(ot)?"["+Z(ot,L)+"]":"[ "+j.call(ot,", ")+" ]"}if(function(t){return!("[object Error]"!==H(t)||C&&"object"==typeof t&&C in t)}(e)){var it=X(e,D);return"cause"in Error.prototype||!("cause"in e)||A.call(e,"cause")?0===it.length?"["+String(e)+"]":"{ ["+String(e)+"] "+j.call(it,", ")+" }":"{ ["+String(e)+"] "+j.call(E.call("[cause]: "+D(e.cause),it),", ")+" }"}if("object"==typeof e&&u){if(F&&"function"==typeof e[F]&&I)return I(e,{depth:x-n});if("symbol"!==u&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!i||!t||"object"!=typeof t)return!1;try{i.call(t);try{l.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var at=[];return a&&a.call(e,(function(t,r){at.push(D(r,e,!0)+" => "+D(t,e))})),Q("Map",i.call(e),at,L)}if(function(t){if(!l||!t||"object"!=typeof t)return!1;try{l.call(t);try{i.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var ct=[];return f&&f.call(e,(function(t){ct.push(D(t,e))})),Q("Set",l.call(e),ct,L)}if(function(t){if(!s||!t||"object"!=typeof t)return!1;try{s.call(t,s);try{p.call(t,p)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return J("WeakMap");if(function(t){if(!p||!t||"object"!=typeof t)return!1;try{p.call(t,p);try{s.call(t,s)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return J("WeakSet");if(function(t){if(!y||!t||"object"!=typeof t)return!1;try{return y.call(t),!0}catch(t){}return!1}(e))return J("WeakRef");if(function(t){return!("[object Number]"!==H(t)||C&&"object"==typeof t&&C in t)}(e))return $(D(Number(e)));if(function(t){if(!t||"object"!=typeof t||!P)return!1;try{return P.call(t),!0}catch(t){}return!1}(e))return $(D(P.call(e)));if(function(t){return!("[object Boolean]"!==H(t)||C&&"object"==typeof t&&C in t)}(e))return $(d.call(e));if(function(t){return!("[object String]"!==H(t)||C&&"object"==typeof t&&C in t)}(e))return $(D(String(e)));if(!function(t){return!("[object Date]"!==H(t)||C&&"object"==typeof t&&C in t)}(e)&&!B(e)){var ut=X(e,D),lt=N?N(e)===Object.prototype:e instanceof Object||e.constructor===Object,ft=e instanceof Object?"":"null prototype",st=!lt&&C&&Object(e)===e&&C in e?g.call(H(e),8,-1):ft?"Object":"",pt=(lt||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(st||ft?"["+j.call(E.call([],st||[],ft||[]),": ")+"] ":"");return 0===ut.length?pt+"{}":L?pt+"{"+Z(ut,L)+"}":pt+"{ "+j.call(ut,", ")+" }"}return String(e)};var V=Object.prototype.hasOwnProperty||function(t){return t in this};function q(t,e){return V.call(t,e)}function H(t){return h.call(t)}function W(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function z(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return z(g.call(t,0,e.maxStringLength),e)+n}return G(b.call(b.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,K),"single",e)}function K(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+w.call(e.toString(16))}function $(t){return"Object("+t+")"}function J(t){return t+" { ? }"}function Q(t,e,r,n){return t+" ("+e+") {"+(n?Z(r,n):j.call(r,", "))+"}"}function Z(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+j.call(t,","+r)+"\n"+e.prev}function X(t,e){var r=U(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=q(t,o)?e(t[o],t):""}var i,a="function"==typeof L?L(t):[];if(T){i={};for(var c=0;c<a.length;c++)i["$"+a[c]]=a[c]}for(var u in t)q(t,u)&&(r&&String(Number(u))===u&&u<t.length||T&&i["$"+u]instanceof Symbol||(_.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if("function"==typeof L)for(var l=0;l<a.length;l++)A.call(t,a[l])&&n.push("["+e(a[l])+"]: "+e(t[a[l]],t));return n}},3529:function(t,e){},3530:function(t,e,r){"use strict";var n=r(3478),o=Object.prototype.hasOwnProperty,i=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},c=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},u=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},l=function(t,e,r,n){if(t){var i=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/g,c=r.depth>0&&/(\[[^[\]]*])/.exec(i),l=c?i.slice(0,c.index):i,f=[];if(l){if(!r.plainObjects&&o.call(Object.prototype,l)&&!r.allowPrototypes)return;f.push(l)}for(var s=0;r.depth>0&&null!==(c=a.exec(i))&&s<r.depth;){if(s+=1,!r.plainObjects&&o.call(Object.prototype,c[1].slice(1,-1))&&!r.allowPrototypes)return;f.push(c[1])}return c&&f.push("["+i.slice(c.index)+"]"),function(t,e,r,n){for(var o=n?e:u(e,r),i=t.length-1;i>=0;--i){var a,c=t[i];if("[]"===c&&r.parseArrays)a=[].concat(o);else{a=r.plainObjects?Object.create(null):{};var l="["===c.charAt(0)&&"]"===c.charAt(c.length-1)?c.slice(1,-1):c,f=parseInt(l,10);r.parseArrays||""!==l?!isNaN(f)&&c!==l&&String(f)===l&&f>=0&&r.parseArrays&&f<=r.arrayLimit?(a=[])[f]=o:"__proto__"!==l&&(a[l]=o):a={0:o}}o=a}return o}(f,e,r,n)}};t.exports=function(t,e){var r=function(t){if(!t)return a;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?a.charset:t.charset;return{allowDots:void 0===t.allowDots?a.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:a.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:a.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:a.comma,decoder:"function"==typeof t.decoder?t.decoder:a.decoder,delimiter:"string"==typeof t.delimiter||n.isRegExp(t.delimiter)?t.delimiter:a.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:a.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:a.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:a.strictNullHandling}}(e);if(""===t||null==t)return r.plainObjects?Object.create(null):{};for(var f="string"==typeof t?function(t,e){var r,l={},f=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,s=e.parameterLimit===1/0?void 0:e.parameterLimit,p=f.split(e.delimiter,s),y=-1,d=e.charset;if(e.charsetSentinel)for(r=0;r<p.length;++r)0===p[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===p[r]?d="utf-8":"utf8=%26%2310003%3B"===p[r]&&(d="iso-8859-1"),y=r,r=p.length);for(r=0;r<p.length;++r)if(r!==y){var h,m,v=p[r],g=v.indexOf("]="),b=-1===g?v.indexOf("="):g+1;-1===b?(h=e.decoder(v,a.decoder,d,"key"),m=e.strictNullHandling?null:""):(h=e.decoder(v.slice(0,b),a.decoder,d,"key"),m=n.maybeMap(u(v.slice(b+1),e),(function(t){return e.decoder(t,a.decoder,d,"value")}))),m&&e.interpretNumericEntities&&"iso-8859-1"===d&&(m=c(m)),v.indexOf("[]=")>-1&&(m=i(m)?[m]:m),o.call(l,h)?l[h]=n.combine(l[h],m):l[h]=m}return l}(t,r):t,s=r.plainObjects?Object.create(null):{},p=Object.keys(f),y=0;y<p.length;++y){var d=p[y],h=l(d,f[d],r,"string"==typeof t);s=n.merge(s,h,r)}return!0===r.allowSparse?s:n.compact(s)}},3535:function(t,e,r){"use strict";var n=r(38),o={epv:function(t){var e=t.type,r=t.id;n.a.logs.activity({type:e,action:"epv",id:r})}};e.a=o},3537:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(0),o=r.n(n),i=r(1787),a=r(180);function c(t){var e=window.appData||{},r=e.isYuque,n=e.organization,c=e.group,u=void 0===c?{}:c,l=e.me,f=void 0===l?{}:l,s=null==n?void 0:n.id;if(!r||Object(a.isPaid)())throw new Error("should not be show this");var p=!(i.a.isAlipayApp()||i.a.isAndroid()||i.a.isIOS()||i.a.isDingtalk()||i.a.getMobileAppVersion());if(s){var y,d=null==n||null===(y=n.abilities)||void 0===y?void 0:y.destroy;if(d&&p){var h="/r/organizations/dashboard/cashier?action=renew";return void t(o.a.createElement("span",{},[__("升级为付费版空间后可嵌入文件"),o.a.createElement("a",{style:{marginLeft:5},rel:"noreferrer",href:h,target:"_blank",onClick:function(t){window.openExternalLink&&(window.openExternalLink(h,!0),t.preventDefault())}},[__("立即升级")])]))}return t(d?__("升级为付费版空间后可嵌入文件"):__("联系管理员升级为付费版空间后可嵌入文件"))}if(window.appData.group&&u.id!==f.id)return t(__("联系知识库所有者开通会员后可嵌入文件"));if(p){var m="pay_source=file_embed";window.openExternalLink&&(m+="&pay_referer=desktop_app");var v="/settings/member?".concat(m,"#renew");return t(o.a.createElement("span",{},[__("开通会员后可嵌入文件"),o.a.createElement("a",{style:{marginLeft:5},rel:"noreferrer",href:v,target:"_blank",onClick:function(t){window.openExternalLink&&(window.openExternalLink(v,!0),t.preventDefault())}},[__("开通会员")])]))}return t(__("开通会员后可嵌入文件"))}},3540:function(t,e,r){"use strict";r.d(e,"c",(function(){return y})),r.d(e,"a",(function(){return w})),r.d(e,"l",(function(){return L})),r.d(e,"j",(function(){return $})),r.d(e,"h",(function(){return rt})),r.d(e,"i",(function(){return lt})),r.d(e,"k",(function(){return mt})),r.d(e,"f",(function(){return _t})),r.d(e,"d",(function(){return Lt})),r.d(e,"e",(function(){return Rt})),r.d(e,"g",(function(){return Bt})),r.d(e,"b",(function(){return Kt}));var n=r(84),o=r.n(n),i=r(2686),a=r(3458);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===c(i)?i:String(i)),n)}var o,i}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=s(t);if(e){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(c,t);var e,r,n,a=f(c);function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return e=c,n=[{key:"getEmptyDocument",value:function(){return{format:o.a.FORMAT.LAKE,value:null}}}],(r=[{key:"getType",value:function(){var t=this.options.targetType;return t?"".concat(t,"_comment").toLowerCase():"comment"}},{key:"getCacheKey",value:function(){var t=this.options.replyId;return this.isEditMode&&this.target&&this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/").concat(this.target.id,"/edit"):this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/").concat(t,"/new"):"autosave/".concat(this.type)}},{key:"isMiniSize",value:function(){return this.options.useMiniGuide||this.options.isMiniSize||window.h5}},{key:"getDefaultFormat",value:function(){return i.a.getDefaultDocumentFormat(o.a.TYPE.TOPIC)}},{key:"getEnableFullEditor",value:function(){return"Artboard"!==this.targetType}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(a.a),y=p;function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==d(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===d(i)?i:String(i)),n)}var o,i}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=g(t);if(e){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(i,t);var e,r,n,o=v(i);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.attachType="Resource",t.useBelongAttach=!0,t.from="reply",o.call(this,t)}return e=i,(r=[{key:"getType",value:function(){return"area_comment"}},{key:"getAutoFocus",value:function(){return!0}},{key:"isMiniSize",value:function(){return!0}}])&&h(e.prototype,r),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(y),w=b;function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==O(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===O(i)?i:String(i)),n)}var o,i}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},E.apply(this,arguments)}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=x(t);if(e){var o=x(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(i,t);var e,r,n,o=S(i);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.attachType="Doc",t.useBelongAttach=!0,t.from="reply",o.call(this,t)}return e=i,(r=[{key:"buildOptions",value:function(t){var e,r=E(x(i.prototype),"buildOptions",this).call(this,t);return r.image.showMiniToolbarWhen="never",null===(e=r.disabledPlugins)||void 0===e||e.push("slash"),r}},{key:"getType",value:function(){return"word_comment"}},{key:"getAutoFocus",value:function(){return!1}},{key:"isMiniSize",value:function(){return!0}},{key:"getEnableFullEditor",value:function(){return!1}}])&&_(e.prototype,r),n&&_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(y),L=P,k=r(2699),T=r(174),C=r(3471);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==A(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===A(i)?i:String(i)),n)}var o,i}function R(t,e){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},R(t,e)}function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=D(t);if(e){var o=D(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}C.a;var F=r(30),G=r.n(F);function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function B(t,e,r){return(e=V(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,V(n.key),n)}}function V(t){var e=function(t,e){if("object"!==M(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===M(e)?e:String(e)}function q(t,e){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},q(t,e)}function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=W(t);if(e){var o=W(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function W(t){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},W(t)}var z={daily:{title:"#prefix# #day# 日报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>建议 TL 每天组织日会，将一天的重点事项安排于此</p><p>每位同学下班前，在此提交日报</p><p><br /></p><p>日报不要记流水账，尽量在 200 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的日报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>'},weekly:{title:"#prefix# #day# 周报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>将一周的工作总结回复于此</p><p><br /></p><p>不要记流水账，尽量在 800 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的周报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>'},vote:{title:"一起来投票吧",content:'<!doctype lake><meta name="doc-version" content="1" /><card type="block" name="vote" value="data:%7B%22margin%22%3Atrue%2C%22id%22%3A%22jTHWG%22%2C%22type%22%3A%22single%22%7D"></card><p><br /><cursor /></p>'},default:{title:"",content:"<!doctype lake><p></p>"}},K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(i,t);var e,r,n,o=H(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,n=[{key:"getTemplate",value:function(t,e){var r=z[t];if(!r)return{title:null,content:null};var n=G()(new Date).format("YYYY-MM-DD"),o=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?U(Object(r),!0).forEach((function(e){B(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},r);return o.title=o.title.replace("#prefix#",e),o.title=o.title.replace("#day#",n),o}}],(r=[{key:"getType",value:function(){return"thread"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"getFileUploadUrl",value:function(){var t="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.isEditMode?"".concat(t,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(t,"&attachable_type=").concat(this.belongType||"Book","&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):this.group?"".concat(t,"&attachable_type=User&attachable_id=").concat(this.group.id,"&from=").concat(this.from):null}},{key:"getFileCopyUrl",value:function(){var t="/api/upload/copy?type=attachment";return this.isEditMode?"".concat(t,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):"".concat(t,"&attachable_uuid=").concat(this.uuid,"&from=").concat(this.from)}}])&&Y(e.prototype,r),n&&Y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(C.a),$=K;function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==J(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===J(i)?i:String(i)),n)}var o,i}function Z(t,e){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Z(t,e)}function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=tt(t);if(e){var o=tt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===J(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function tt(t){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tt(t)}var et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z(t,e)}(i,t);var e,r,n,o=X(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"getType",value:function(){return"thread_board"}},{key:"getAutoFocus",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"getFileUploadUrl",value:function(){var t="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.isEditMode&&!this.options.useBelongAttach?"".concat(t,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(t,"&attachable_type=").concat(this.belongType,"&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):null}}])&&Q(e.prototype,r),n&&Q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.a),rt=et;function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==nt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===nt(i)?i:String(i)),n)}var o,i}function it(t,e){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},it(t,e)}function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ct(t);if(e){var o=ct(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ct(t){return ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ct(t)}var ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(i,t);var e,r,n,o=at(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"getType",value:function(){return"thread_comment"}}])&&ot(e.prototype,r),n&&ot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(y),lt=ut;function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function st(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==ft(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===ft(i)?i:String(i)),n)}var o,i}function pt(){return pt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ht(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},pt.apply(this,arguments)}function yt(t,e){return yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yt(t,e)}function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ht(t);if(e){var o=ht(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ht(t){return ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ht(t)}var mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yt(t,e)}(i,t);var e,r,n,o=dt(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.attachType="User",t.useBelongAttach=!0,o.call(this,t)}return e=i,(r=[{key:"buildOptions",value:function(t){var e=pt(ht(i.prototype),"buildOptions",this).call(this,t);return e.typography={mustTypography:"classic",typography:"classic",paragraphSpacing:"default"},e}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}])&&st(e.prototype,r),n&&st(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.a);function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==vt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===vt(i)?i:String(i)),n)}var o,i}function bt(t,e){return bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bt(t,e)}function wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ot(t);if(e){var o=Ot(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ot(t){return Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ot(t)}var _t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bt(t,e)}(i,t);var e,r,n,o=wt(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.from="group_custom",t.attachType="User",t.useBelongAttach=!0,o.call(this,t)}return e=i,(r=[{key:"getType",value:function(){return"group_custom"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}])&&gt(e.prototype,r),n&&gt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.a);function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}function jt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Et(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Et(i)?i:String(i)),n)}var o,i}function St(t,e){return St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},St(t,e)}function xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Pt(t);if(e){var o=Pt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Et(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Pt(t){return Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pt(t)}var Lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&St(t,e)}(i,t);var e,r,n,o=xt(i);function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var e=t.feedback;return t.attachType="User",t.useBelongAttach=!0,t.from="feedback",t.placeholder={tip:e&&e.abilities.manage?"你将要代表语雀回复用户，请使用官方口吻，慎重填写":"",emptyParagraphTip:""},o.call(this,t)}return e=i,(r=[{key:"getType",value:function(){return"feedback_comment"}},{key:"getCacheKey",value:function(){var t=this.getType();if(this.target)return"autosave/".concat(t,"/").concat(this.target.id,"/edit");var e=this.options.feedback;return e?"autosave/".concat(t,"/").concat(e.id,"/new"):"autosave/".concat(t)}},{key:"getContentObject",value:function(){var t=this.target.content||{source:"",format:"lake"};return{format:t.format,value:t.source||""}}},{key:"isMiniSize",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"getAutoFocus",value:function(){return!0}}])&&jt(e.prototype,r),n&&jt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(C.a);function kt(t){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(t)}function Tt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==kt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===kt(i)?i:String(i)),n)}var o,i}function Ct(t,e){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ct(t,e)}function At(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Nt(t);if(e){var o=Nt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===kt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Nt(t){return Nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nt(t)}var Rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ct(t,e)}(i,t);var e,r,n,o=At(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.attachType="User",t.useBelongAttach=!0,t.placeholder={tip:"",emptyParagraphTip:""},t.from="feedback",o.call(this,t)}return e=i,(r=[{key:"getType",value:function(){return"feedback_remark"}},{key:"getContentObject",value:function(){return{format:"lake",value:this.target.remark||""}}},{key:"getCacheKey",value:function(){return this.target?"autosave/".concat(this.type,"/").concat(this.target.id):"autosave/".concat(this.type)}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"getAutoFocus",value:function(){return!0}},{key:"isMiniSize",value:function(){return!0}}])&&Tt(e.prototype,r),n&&Tt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(C.a);function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Dt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==It(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==It(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===It(i)?i:String(i)),n)}var o,i}function Ft(){return Ft="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ut(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ft.apply(this,arguments)}function Gt(t,e){return Gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gt(t,e)}function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ut(t);if(e){var o=Ut(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===It(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ut(t){return Ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ut(t)}var Bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gt(t,e)}(i,t);var e,r,n,o=Mt(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.target&&(t.attachType="Doclet"),o.call(this,t)}return e=i,(r=[{key:"getCards",value:function(){return this.options.target?Ft(Ut(i.prototype),"getCards",this).call(this):["label"]}},{key:"getFullCards",value:function(){return this.options.target?Ft(Ut(i.prototype),"getFullCards",this).call(this):["label"]}},{key:"getAutoFocus",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"isMiniSize",value:function(){return!1}}])&&Dt(e.prototype,r),n&&Dt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.a);function Yt(t){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(t)}function Vt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Yt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Yt(i)?i:String(i)),n)}var o,i}function qt(){return qt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},qt.apply(this,arguments)}function Ht(t,e){return Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ht(t,e)}function Wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=zt(t);if(e){var o=zt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Yt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function zt(t){return zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zt(t)}var Kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ht(t,e)}(i,t);var e,r,n,o=Wt(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.attachType="Doclet",o.call(this,t)}return e=i,(r=[{key:"buildOptions",value:function(t){var e=qt(zt(i.prototype),"buildOptions",this).call(this,t);return e.typography={typography:"classic",paragraphSpacing:"relax"},e}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}])&&Vt(e.prototype,r),n&&Vt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.a)},3542:function(t,e,r){"use strict";r.r(e);r(61);var n=r(23),o=r(0),i=r.n(o),a=r(8),c=r.n(a),u=r(3535),l=r(1809),f=r(3537),s=r(3631),p=r(1767),y=r(334),d=r(111),h=r(2712),m=(r(227),r(112)),v=r(107),g=r.n(v),b=r(3488),w=r.n(b),O=r(84),_=r.n(O),E=r(344),j=r(38);function S(t){return[_.a.FORMAT.MARKDOWN,_.a.FORMAT.ASL].includes(t)}var x={init:"EditorBase-module_init_eZbjJ",editor:"EditorBase-module_editor_zrggr"};function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function L(){L=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==P(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function k(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function T(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var A=g()("editor:lakex_mini");function N(t){var e=t.editor,r=t.onChange,n=t.onSubmit,a=t.onLoad,c=e.getProps(),u=c.format,l=c.autoFocus,f=c.isMiniSize,s=c.defaultValue,p=T(Object(o.useState)(S(u)),2),y=p[0],d=p[1],h=T(Object(o.useState)(s),2),v=h[0],g=h[1],b=T(Object(o.useState)(!1),2),O=b[0],P=b[1],C=Object(o.useMemo)((function(){return i.a.createRef()}),[y]),N=i.a.createRef();Object(o.useEffect)((function(){if(S(u)){if(A("convert: ".concat(u," -> lake")),!s)return d(!1),void g("");j.a.docs.convertContent({from:u,to:_.a.FORMAT.LAKE,content:s}).then((function(t){A("convert done:",t),d(!1),g(t.content),P(!0)})).catch((function(t){A("convert fail:",t.message),d(!1)}))}}),[]),Object(o.useEffect)((function(){var t="⌘+enter, ctrl+enter";return w()(t,(function(t){N.current&&N.current.isFocus&&n&&n(t)})),function(){w.a.unbind(t)}}),[]);var R=function(){var n,o=(n=L().mark((function n(){var o,i,c;return L().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(C.current){n.next=2;break}return n.abrupt("return");case 2:if(C.current){n.next=4;break}return n.abrupt("return");case 4:o=f?E.createMicroEditor:E.createMinorEditor,i=e.buildOptions(t),c=o(C.current,i),window.__miniEngine=c,N.current=c,e.setEngine(c),e.setValue(v),c.on("fullscreenStatusChange",(function(t){var e=new CustomEvent("neEditorFullscreenStatusChange",{detail:{isFullscreen:t,engine:c,editorNode:c.editorNode}});window.dispatchEvent(e)})),c.on("change",(function(){r&&r(),e.saveAll()})),a&&a(c),l&&c.focus(!1);case 15:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){k(i,r,o,a,c,"next",t)}function c(t){k(i,r,o,a,c,"throw",t)}a(void 0)}))});return function(){return o.apply(this,arguments)}}();Object(o.useEffect)((function(){R()}),[y,O]);return y?i.a.createElement("div",{id:"larkx-mini-editor",className:x.init},i.a.createElement(m.a,null)):u===_.a.FORMAT.LAKE||O?i.a.createElement("div",{id:"lark-mini-editor",className:x.editor,ref:C}):i.a.createElement("div",{id:"lark-mini-editor",className:x.init},i.a.createElement("h4",null,__("内容格式异常，暂无法编辑")),i.a.createElement("pre",null,t.defaultValue))}N.propTypes={editor:c.a.object,onChange:c.a.func,onLoad:c.a.func,onSubmit:c.a.func};var R=N,I={lakeCreateGuide:"index-module_lakeCreateGuide_VutDm"};function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function F(){F=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==D(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function G(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function M(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){G(i,n,o,a,c,"next",t)}function c(t){G(i,n,o,a,c,"throw",t)}a(void 0)}))}}function U(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return B(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Y=!1;function V(t){var e=Object(o.useRef)(),r=U(Object(o.useState)(!1),2),a=r[0],c=r[1],m=Object(o.useRef)(!1),v=function(){var t=e.current.isEmpty();m.current!==t&&(c(t),m.current=t)},g=Object(o.useCallback)(function(){var t=M(F().mark((function t(e){var r;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.k)(e.id);case 2:if((r=t.sent).format!==y.FORMAT.LAKETABLE&&!/<card.*name=\"dataTable\"/.test(r.doclet.body_asl)){t.next=5;break}return t.abrupt("return",{content:""});case 5:return Object(d.spmClick)(h.a.TEMPLATE_USAGE,{id:r.id,type:r.type,format:r.format,name:r.name,platform:"pc"}),t.abrupt("return",{content:r.format===y.TYPE_FORMAT_MAP.Doc?r.doclet.body_asl:r.doclet.body});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[]),b=Object(o.useCallback)(function(){var r=M(F().mark((function r(n){var o;return F().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g(n);case 2:if(null!=(o=r.sent)&&o.content){r.next=5;break}return r.abrupt("return");case 5:e.current.setDocument("lake",o.content),c(!1),m.current=!1,t.onChange();case 9:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}(),[g,t.onChange]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(R,{autoFocus:!0,editor:t.editor,autoCompleteLinks:t.autoCompleteLinks,onChange:function(){t.onChange(),v(),Y||(Y=!0,u.a.epv({type:"LakexMiniEditor"}))},onLoad:function(r){e.current=r,t.onLoad(r),v(),r.on("unSupportFileUpload",(function(t){var e;n.a.warning(Object(l.a)(null==t||null===(e=t.extName)||void 0===e?void 0:e.toLowerCase()))})),r.on("clickEmbedButton",(function(){Object(f.a)(n.a.warning.bind(n.a))}))},onSubmit:t.onSubmit,isMiniSize:t.isMiniSize,placeholder:t.placeholder}),t.needCreateGuide&&a?i.a.createElement("div",{className:I.lakeCreateGuide},i.a.createElement(s.default,{doc:t.tplDoc,showRecent:!1,needMore:!1,isFullWidth:!0,visible:!0,includePersonal:!1,onUseTemplate:b})):null)}V.defaultProps={onLoad:function(){},onChange:function(){}},V.propTypes={editor:c.a.object.isRequired,tplDoc:c.a.object,onChange:c.a.func,onSubmit:c.a.func,onLoad:c.a.func,autoCompleteLinks:c.a.bool,isMiniSize:c.a.bool,placeholder:c.a.object,needCreateGuide:c.a.bool};e.default=V},3618:function(t,e,r){"use strict";var n,o=[{id:1,title:__("加油")},{id:2,title:__("开心")},{id:3,title:__("很忙")},{id:4,title:__("想哭")},{id:5,title:__("生气")}],i=(n={},o.forEach((function(t){n[t.id]=t})),n),a=[{id:"thumbs_up",title:__("支持"),icon:"https://gw.alipayobjects.com/zos/basement_prod/40dd7f62-e6ad-48c6-b2c1-aeed729ff753.svg"},{id:"thumbs_down",title:__("反对"),icon:"https://gw.alipayobjects.com/zos/basement_prod/49753f89-a52b-47f8-8dff-ca2b7d5ab29e.svg"},{id:"applause",title:__("喝彩"),icon:"https://gw.alipayobjects.com/zos/basement_prod/39b96288-777c-4ad9-8065-fe27ee2366d5.svg"},{id:"momo",title:__("摸摸"),icon:"https://gw.alipayobjects.com/zos/basement_prod/486defba-93e3-4151-8b23-6fb09dfb7f97.svg"},{id:"+1",title:__("+1"),icon:"https://gw.alipayobjects.com/zos/bmw-prod/cd3682d7-3cc9-44a1-87d3-1feb83baee73.svg"},{id:"OK",title:"OK",icon:"https://gw.alipayobjects.com/zos/bmw-prod/70ec25dc-2ad6-42f3-b802-76ba015becde.svg"}],c=function(){var t={};return a.forEach((function(e){t[e.id]=e})),t}(),u={REACTIONS:a,getMoodTitleById:function(t){return(i[t]||{}).title||""},getPostUrl:function(t){var e=window.location.hash||"",r=window.location.href;return r=r.substring(0,r.length-e.length),"".concat(r,"#comment-").concat(t)},classifyReactions:function(t){var e=Object.keys(c),r={};return e.forEach((function(t){r[t]={count:0,user_ids:[]}})),t.forEach((function(t){t.action_option.split(",").forEach((function(e){r[e]&&(r[e].count++,r[e].user_ids.push(t.user_id))}))})),r},getReactionById:function(t){return c[t]}};e.a=u},3623:function(t,e,r){var n=r(2607)("toLowerCase");t.exports=n},3631:function(t,e,r){"use strict";r.r(e),r.d(e,"DocCreationGuide",(function(){return T})),r.d(e,"default",(function(){return C}));var n=r(3623),o=r.n(n),i=r(0),a=r(302),c=r(582),u=r(191),l=r(1767),f=r(3620),s=r(3632),p=r(2803),y=r(539);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function h(){h=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function m(){}var v={};u(v,i,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==e&&r.call(b,i)&&(v=b);var w=m.prototype=p.prototype=Object.create(v);function O(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==d(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=j(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return y.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:y,configurable:!0}),y.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},O(_.prototype),u(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function m(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var v=new(r.n(y).a)(5);function g(t,e){return b.apply(this,arguments)}function b(){var t;return t=h().mark((function t(e,r){var n,o,i,a=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>2&&void 0!==a[2]?a[2]:5e3,!(o=v.get(e))){t.next=4;break}return t.abrupt("return",Promise.resolve(o));case 4:return t.next=6,r();case 6:return i=t.sent,v.set(e,i,{maxAge:n}),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})),b=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){m(i,n,o,a,c,"next",t)}function c(t){m(i,n,o,a,c,"throw",t)}a(void 0)}))},b.apply(this,arguments)}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}var O=["group","book","onUseTemplate","height","doc","isFullWidth","showRecent","needMore"],_=["visible","className","style"];function E(){return E=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},E.apply(this,arguments)}function j(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){P(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function P(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==w(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===w(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var T=function(t){var e=t.group,r=t.book,n=t.onUseTemplate,y=t.height,d=(t.doc,t.isFullWidth),h=void 0===d||d,m=t.showRecent,v=void 0===m||m,b=t.needMore,w=void 0===b||b,_=j(t,O),S=function(t){var e=t.book,r=t.group,n=t.doc,a=t.showRecent,f=void 0===a||a,s=t.includePersonal,y=void 0===s||s,d=L(i.useState([]),2),h=d[0],m=d[1],v=L(i.useState({data:[],meta:{}}),2),b=v[0],w=v[1],O=(null==n?void 0:n.type)||"Doc";return i.useEffect((function(){var t;if(f){var r=function(){return c.a.editor.recentlyUpdatedDocs({book_id:e.id,type:O})};null!=e&&e.id&&null!=e&&null!==(t=e.abilities)&&void 0!==t&&t.create_doc?g("getRecentDocs-".concat(e.id,"-").concat(O),r,5e3).then((function(t){m(t)})):r().then((function(t){return m(t)}))}}),[e,f]),i.useEffect((function(){var t=p.a[o()(O)];g("getAllTemplates-".concat((null==e?void 0:e.id)||"","-").concat((null==r?void 0:r.id)||"","-").concat((null==e?void 0:e.organization_id)||"","-").concat(O||"","-").concat(t||""),(function(){return Object(l.i)(x(x({},Object(l.l)(e,r,y)),{},{official_channel:t,limit:5,format:u.TYPE_FORMAT_MAP[O]}))}),5e3).then((function(t){w(t)}))}),[e,O]),{recentDocs:h,templateConfig:b}}(t),P=S.recentDocs,k=S.templateConfig,T=L(i.useState(0),2),C=T[0],A=T[1],N=h?{}:{maxWidth:"890px",marginLeft:"auto",marginRight:"auto",paddingLeft:"70px",paddingRight:"70px"};return i.createElement("div",E({},_,{style:N}),i.createElement(a.a,{onResize:function(t){t.height&&A(t.height)}},i.createElement(f.c,{templateConfig:k,book:r,group:e,needMore:w,onUseTemplate:n})),v&&i.createElement(s.b,{height:y-C,recentDocs:P,book:r,group:e,onUseTemplate:n}))};function C(t){var e=t.visible,r=t.className,n=t.style,o=j(t,_);return e?i.createElement(T,E({},o,{className:r,style:n})):null}},3659:function(t,e,r){},3704:function(t,e,r){"use strict";r.r(e);r(61);var n=r(23),o=(r(64),r(21)),i=(r(258),r(69)),a=(r(94),r(27)),c=r(0),u=r.n(c),l=r(8),f=r.n(l),s=r(555),p=r(1735),y=r.n(p),d=r(203),h="ReportForm-module_container_CFFvb",m="ReportForm-module_title_NFreI",v="ReportForm-module_subtitle_iS17z",g="ReportForm-module_reportType_F9Aq+",b="ReportForm-module_reportTypeItem_fcNpj",w="ReportForm-module_btns_P3Kpd",O="ReportForm-module_reportReason_Ll05f",_="ReportForm-module_backBtn_Epa1y";function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function j(){j=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(L([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==E(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function S(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function x(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R(n.key),n)}}function k(t,e){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k(t,e)}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=A(t);if(e){var o=A(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return C(t)}(this,r)}}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}function N(t,e,r){return(e=R(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R(t){var e=function(t,e){if("object"!==E(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===E(e)?e:String(e)}var I=[{name:__("含有广告等引导性内容"),type:"normal",code:d.REPORT_TYPE.ad},{name:__("含有辱骂等不友善内容"),type:"normal",code:d.REPORT_TYPE.abuse},{name:__("含有色情、淫秽内容"),type:"normal",code:d.REPORT_TYPE.vulgar},{name:__("含有反社会、血腥暴力等内容"),type:"normal",code:d.REPORT_TYPE.political},{name:__("“清朗”系列专项举报"),type:"normal",code:d.REPORT_TYPE.clearnet},{name:__("传播不实信息（政治类、财经类、疫情类等）"),type:"normal",code:d.REPORT_TYPE.infact},{name:__("国家企业敏感信息泄露"),type:"normal",code:d.REPORT_TYPE.sensitive},{name:__("其他违法犯罪（如毒品、枪支、违规借贷等）"),type:"normal",code:d.REPORT_TYPE.illegal},{name:__("侵犯知识产权"),type:"tort"}],D=[{name:__("个人侵权"),type:"tort",code:d.REPORT_TYPE.personal_tort},{name:__("企业侵权"),type:"tort",code:d.REPORT_TYPE.enterprise_tort}],F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}(l,t);var e,r,n,c=T(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return N(C(t=c.call.apply(c,[this].concat(r))),"handleSubmit",(function(e){e.preventDefault();var r=t.props,n=r.onOk;(0,r.form.validateFields)((function(t,e){t||n(e)}))})),t}return e=l,(r=[{key:"render",value:function(){var t=this.props.form.getFieldDecorator;return u.a.createElement(i.a,null,u.a.createElement("div",{className:v},__("具体说明")),u.a.createElement(i.a.Item,{required:!1},t("reason",{validateFirst:!0,rules:[{required:!0,max:500,message:__("请输入举报原因（字数不多于500）")}]})(u.a.createElement(a.a.TextArea,{className:O,rows:5,maxLength:500,placeholder:__("举报原因（字数不多于 500）")}))),u.a.createElement("div",{className:w},u.a.createElement(o.a,{block:!0,onClick:this.props.onCancel},__("返回")),u.a.createElement(o.a,{block:!0,type:"primary",htmlType:"submit",onClick:this.handleSubmit},__("提交"))))}}])&&L(e.prototype,r),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}(u.a.PureComponent);N(F,"propTypes",{onOk:f.a.func.isRequired,onCancel:f.a.func.isRequired,form:f.a.object.isRequired});var G=i.a.create()(F),M=function(t){var e=t.onCancel,r=t.onOk;return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:v},window.h5?__("侵权类举报请到 PC 端完成"):__("请选择类型")),!window.h5&&u.a.createElement("ul",{className:g},D.map((function(t,e){return u.a.createElement("li",{key:t.code||e,className:b,onClick:function(){return function(t){r(t)}(t)}},t.name)}))),u.a.createElement(o.a,{block:!0,className:_,onClick:function(){e()}},__("返回")))};M.propTypes={onOk:f.a.func.isRequired,onCancel:f.a.func.isRequired};var U=function(t){var e=x(Object(c.useState)(),2),r=e[0],o=e[1];function i(t,e){e.preventDefault(),o(t)}var a=function(e){return function(){var r,o=(r=j().mark((function r(o){var i,a;return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=window.appData.sharePage&&window.appData.share.token,"tort"!==e.type){r.next=6;break}return t.onClose(),a=y.a.stringify({report_type:o.code,target_id:t.targetId,target_type:t.targetType,token:i}),window.open("/r/content_reports?".concat(a)),r.abrupt("return");case 6:return r.next=8,t.dispatch({type:"proxy.web/contentReport.create",payload:{data:{report_type:e.code,target_id:t.targetId,target_type:t.targetType,token:i,meta:{reason:o.reason,referer_url:window.location.href}}}});case 8:t.onClose(),n.a.success(__("已收到你的举报，感谢反馈"));case 10:case"end":return r.stop()}}),r)})),function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){S(i,n,o,a,c,"next",t)}function c(t){S(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return o.apply(this,arguments)}}()};function l(){o(null)}return r?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:m},r.name),"tort"===r.type?u.a.createElement(M,{onOk:a(r),onCancel:l}):u.a.createElement(G,{onOk:a(r),onCancel:l})):u.a.createElement("div",{className:h},u.a.createElement("div",{className:m},__("举报")),u.a.createElement("div",{className:v},__("请选举报原因")),u.a.createElement("ul",{className:g},I.map((function(t,e){return u.a.createElement("li",{key:t.code||e,onClick:i.bind(null,t)},u.a.createElement("div",{className:b},t.name))}))))};U.propTypes={targetId:f.a.number.isRequired,targetType:f.a.oneOf(["Doc"]).isRequired,onClose:f.a.func.isRequired};e.default=Object(s.d)()(U)},3706:function(t,e,r){"use strict";r(95);var n=r(49),o=r(0),i=r.n(o),a=r(8),c=r.n(a),u=r(167),l=r.n(u),f=r(555),s=r(3704);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}var y=["children"];function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===p(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(){v=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function y(){}function d(){}function h(){}var m={};u(m,i,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==e&&r.call(b,i)&&(m=b);var w=h.prototype=y.prototype=Object.create(m);function O(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==p(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=j(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=h,n(w,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=u(h,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},O(_.prototype),u(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function g(){return g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},g.apply(this,arguments)}function b(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function w(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var E=function(t){var e=O(Object(o.useState)(!1),2),r=e[0],a=e[1];function c(){a(!1)}function u(){var e;return e=v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dispatch({type:"proxy.web/contentReport.check",payload:{data:{target_id:t.targetId,target_type:t.targetType,token:window.appData.sharePage&&window.appData.share.token}}});case 2:a(!0);case 3:case"end":return e.stop()}}),e)})),u=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){w(i,n,o,a,c,"next",t)}function c(t){w(i,n,o,a,c,"throw",t)}a(void 0)}))},u.apply(this,arguments)}var l=t.children,f=b(t,y);return i.a.createElement(i.a.Fragment,null,l({onShowPanel:function(){return u.apply(this,arguments)}}),i.a.createElement(n.a,{destroyOnClose:!0,title:null,footer:null,visible:r,onCancel:c},i.a.createElement(s.default,g({},f,{onClose:c}))))};E.propTypes=h(h({},l()(s.default.propTypes,["targetId","targetType"])),{},{token:c.a.string,children:c.a.func.isRequired}),e.a=Object(f.d)()(E)},3724:function(t,e,r){"use strict";r.d(e,"b",(function(){return l})),r.d(e,"a",(function(){return u}));var n=r(0),o=r.n(n),i=r(8),a=r(165),c={bookTips:"index-module_bookTips_cZ25F",groupTips:"index-module_groupTips_znta0",commentTips:"index-module_commentTips_eS4uK"};function u(t){var e=t.targetType,r=o.a.createElement("a",{href:"https://www.yuque.com/yuque/cdgcvd/zsw0w0",className:"wording-comment-link",target:"_blank",style:{marginLeft:"8px"}},__("了解更多"));switch(e){case"Book":return o.a.createElement("span",{className:c.bookTips,"data-testid":"forbid-tip"},__("注册 7 天后可设置为互联网可见 {learnMoreLink}",{learnMoreLink:r}));case"Group":return o.a.createElement("div",{className:c.groupTips,"data-testid":"forbid-tip"},__("注册 7 天后，即可创建知识小组 {learnMoreLink}",{learnMoreLink:r}));default:return o.a.createElement("span",{className:c.commentTips,"data-testid":"forbid-tip"},__("注册 7 天后即可参与{action} {learnMoreLink}",{action:"Topic"===e?__("讨论"):__("评论"),learnMoreLink:r}))}}function l(t,e){var r,n=window.appData,o=n.settings,i=void 0===o?{}:o,c=n.organization,u=n.isPublicCloud,l=e||{},f=l.me,s=void 0===f?window.appData.me||{}:f,p=l.group,y=void 0===p?window.appData.group:p,d=c&&c.id;y&&a.a.isGroupOrPublication(y)&&(r=y.abilities&&y.abilities.read_private);var h=t&&t.abilities&&t.abilities.update;return!!(u&&!d&&i.enable_new_user_public_ability_forbid&&s.isNewbie&&!r&&!h)}u.propTypes={targetType:i.PropTypes.string}},3748:function(t,e,r){"use strict";r(267);var n=r(127),o=r(0),i=r.n(o),a=r(8),c=r.n(a),u=r(13),l=r.n(u);r(3659);function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t){var e=t.reaction,r=t.users,a=t.myReaction,c=f(Object(o.useState)(!1),2),u=c[0],s=c[1];return i.a.createElement(n.a,{className:"post-reaction-detail",overlayClassName:"post-reaction-detail-popover",getPopupContainer:function(t){return t.parentNode},mouseEnterDelay:.618,trigger:["hover"],placement:"bottomLeft",onVisibleChange:function(r){s(r),!1===r?t.reset(e.id):t.loadUsers(e.id)},visible:u,content:i.a.createElement("ul",{className:"post-reaction-users"},r.map((function(t){return i.a.createElement("li",{key:t.id},i.a.createElement("a",{href:"/".concat(t.login),target:"_blank"},t.name))})))},i.a.createElement("div",{onClick:t.onReactionClick,className:l()({"post-reaction-detail-type":!0,"post-reaction-detail-active":a&&a.reaction_types&&a.reaction_types.includes(e.id)})},i.a.createElement("img",{className:"post-interaction-icon",src:e.icon,height:20}),i.a.createElement("span",{className:"post-interaction-num"},t.total)))}p.defaultProps={onReactionClick:function(){}},p.propTypes={myReaction:c.a.object,users:c.a.array.isRequired,total:c.a.number.isRequired,reaction:c.a.object.isRequired,loadUsers:c.a.func.isRequired,reset:c.a.func.isRequired,onReactionClick:c.a.func},e.a=p},3749:function(t,e,r){"use strict";r(267);var n=r(127),o=r(0),i=r.n(o),a=r(8),c=r.n(a),u=r(3618),l=r(42);r(3659);function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p=u.a.REACTIONS;function y(t){var e=t.active,r=t.totalReaction,a=t.reactionIcon,c=f(Object(o.useState)(!1),2),u=c[0],s=c[1];return i.a.createElement("div",{className:"post-reaction"},i.a.createElement(n.a,{getPopupContainer:function(t){return t.parentNode},trigger:window.h5?["click"]:["hover"],placement:t.placement,autoAdjustOverflow:!1,visible:u,arrowPointAtCenter:!0,onVisibleChange:function(t){s(t)},content:i.a.createElement("div",null,i.a.createElement("ul",{className:"post-reaction-items"},p.map((function(r){return i.a.createElement("li",{className:e.includes(r.id)?"post-reaction-active":"",key:r.id},i.a.createElement("img",{src:r.icon,onClick:function(){var n;n=r,e.includes(n.id)?t.onCancelReaction(n.id):t.onReaction(n.id),t.onReactionUpdate(n),s(!1)}}))}))))},i.a.createElement("div",null,i.a.createElement("span",{className:"post-reaction-entry"},a||i.a.createElement(l.b,{name:"comment-reaction",width:20,height:20})),r>0&&i.a.createElement("span",{className:"post-interaction-action-total"},r))))}y.defaultProps={onReactionUpdate:function(){}},y.propTypes={active:c.a.array,onReaction:c.a.func.isRequired,onCancelReaction:c.a.func.isRequired,onReactionUpdate:c.a.func,totalReaction:c.a.number,reactionIcon:c.a.element,placement:c.a.string},e.a=y},3750:function(t,e,r){"use strict";var n=r(0),o=r(107),i=r.n(o),a=r(126);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var d=new i.a("thread:post.port");e.a=function(t){var e=t.me,r=t.comment,o=t.onReactionUpdate,i=s(Object(n.useState)(r.reactions||[]),2),c=i[0],p=i[1],y=s(Object(n.useState)({}),2),h=y[0],m=y[1],v=s(Object(n.useState)(!1),2),g=v[0],b=v[1],w="Comment";Object(n.useEffect)((function(){p(r.reactions||[])}),[r]);var O=function(){var t=null;return e&&e.id&&(t=c.find((function(t){return t.user_id===e.id})))&&(t.reaction_types=t.action_option.split(",")),t},_=function(t){return a.webProxy.actions.create({target_id:r.id,target_type:w,action_type:"reaction",action_option:t}).then((function(r){d("success",r);var n=c.filter((function(t){return t.user_id!==e.id}));n.push({user_id:e.id,action_type:"reaction",action_option:t}),p(n),o&&o(n,{actionType:"create",userId:e.id,actionOption:t})}))};return{state:{reactions:c,reactionUserMap:h},reaction:function(t){d("reaction",t);var e=t,r=O();if(r){var n=f(r.reaction_types);if(n.includes(t))return Promise.resolve({});n.push(t),e=n.join(",")}return _(e)},cancelReaction:function(t){d("cancel reaction:",t);var n=O();if(!n)return Promise.resolve({});var i=n.reaction_types.filter((function(e){return e!==t}));if(i.length>0){var u=i.join(",");return d("update action_option",i.join(",")),_(u)}return a.webProxy.actions.destroy({target_id:r.id,target_type:w,action_type:"reaction"}).then((function(){var r=c.filter((function(t){return t.user_id!==e.id}));p(r),o&&o(r,{actionType:"delete",userId:e.id,reactionType:t})}))},loadReactionUser:function(t){d("load users for reaction",t),g||(b(!0),a.webProxy.actions.users({target_id:r.id,target_type:w,action_type:"reaction",action_option:"".concat(t),limit:30}).then((function(e){var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},h);r[t]=e,b(!1),m(r)})))},resetReactionUser:function(t){m({})},getMyReaction:O}}},3780:function(t,e,r){"use strict";r.d(e,"b",(function(){return p})),r.d(e,"a",(function(){return l}));var n=r(25);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,a=void 0,a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}var l={SCROLL:"SCROLL"},f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,t);var e,r,n,o=c(u);function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),o.apply(this,arguments)}return e=u,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(r.n(n).a),s=new f;function p(){return s}},452:function(t,e,r){t.exports=r(532)},5083:function(t,e,r){"use strict";r.r(e);var n=r(0),o=r.n(n),i=r(31),a=r.n(i),c=r(555),u=r(13),l=r.n(u),f=r(42),s=(r(61),r(23)),p=r(8),y=r.n(p),d=r(46),h=r.n(d),m=r(3780),v=(r(64),r(21)),g=r(168),b=r.n(g),w=r(84),O=r.n(w),_=r(453),E=r.n(_),j=r(3540),S=r(3542),x=r(3724),P={createContainer:"Creator-module_createContainer_E9WwG",createBox:"Creator-module_createBox_YJGH6",editorContainer:"Creator-module_editorContainer_N1BzF",actions:"Creator-module_actions_CFe4H",actionItem:"Creator-module_actionItem_NsFQU",cancel:"Creator-module_cancel_G++6L"};function L(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var T={};function C(t){var e=T.useViewModel(t),r=e.state,n=Object(x.b)(t.doc);return o.a.createElement("div",{ref:r.creatorRef,className:P.createContainer,"data-testid":"comment-creator",style:{position:"absolute",top:"".concat(r.offsetTop,"px")}},o.a.createElement("div",{className:P.createBox},o.a.createElement("div",{className:P.editorContainer},o.a.createElement(S.default,{editor:e.editor,onChange:e.onContentChange,onSubmit:e.createReply,onLoad:e.onLoad})),o.a.createElement("div",{className:P.actions},o.a.createElement("div",{className:P.actionItem},o.a.createElement(v.a,{type:"primary",disabled:r.isEmpty||r.loading||n,onClick:e.createReply},__("评论"))),o.a.createElement("div",{className:P.actionItem},o.a.createElement(v.a,{className:P.cancel,onClick:e.cancelComment},__("取消")))),n&&o.a.createElement(x.a,null)))}T.useViewModel=function(t){var e=t.doc,r=t.selectedInfo,o=t.groupPosition,i=t.createComment,a=t.cancelComment,c=t.updateGroupPosition,u=t.getDefaultGroupArr,l=t.getDefaultPosition,f=t.getOffsetTop,s=t.transformAllGroup,p=t.clearAllGroupTransform,y=Object(n.useRef)(null),d=L(Object(n.useState)(!0),2),h=d[0],m=d[1],v=L(Object(n.useState)(!1),2),g=v[0],w=v[1],_=Object(n.useMemo)((function(){return new j.l({belong:e,placeholder:__("请添加评论...")})}),[e.id]),S=r.drawRanges[0],x=S.commentId,P=u(o),k=f(P,x);return Object(n.useEffect)((function(){var t=new ResizeObserver(b()((function(){var t=l(S),e=t.x,r=t.y;c({id:x,left:e,top:r,height:y.current.getBoundingClientRect().height});var n=u(o),i=f(n,x);i!==r?s(r-i):p()}),50));return t.observe(y.current),function(){t.disconnect()}}),[r]),Object(n.useEffect)((function(){setTimeout((function(){_.focus(!1)}),500)}),[r]),{state:{creatorRef:y,doc:e,isEmpty:h,loading:g,offsetTop:k},onContentChange:function(){m(_.isEmpty())},onLoad:function(){m(_.isEmpty())},createReply:function(){w(!0),_.contentReady().then((function(){_.isEmpty()||(i({commentable_type:"Doc",commentable_id:e.id,type:E.a.TYPE.WORDING_COMMENT,body_asl:_.getValue(),body:_.getHtml(),format:O.a.FORMAT.LAKE,selection:{paragraph_id:r.paragraphId,text_offset:r.textOffset,text:r.text,selection_range:{start:r.start,end:r.end}}}),_.reset(),w(!1))}))},cancelComment:a,editor:_}},C.propTypes={doc:y.a.object,selectedInfo:y.a.object,groupPosition:y.a.object,createComment:y.a.func,cancelComment:y.a.func,updateGroupPosition:y.a.func,getDefaultGroupArr:y.a.func,getDefaultPosition:y.a.func,getOffsetTop:y.a.func,transformAllGroup:y.a.func,clearAllGroupTransform:y.a.func};var A=C,N=r(3707),R=r(242),I=r(38),D=function(t,e){var r=t.doc_id,n=t.selection_id,o=Object(R.a)(I.a.docSelections.updateVisible).request;return{openSelection:function(t){return o({doc_id:r,selection_id:n,visible:!0}).then((function(){e({type:"litecomment/openSelectionById",payload:{selection_id:n,doc_id:r}}),t&&t()}))},closeSelection:function(t,i){return o({doc_id:r,selection_id:n,visible:!1}).then((function(){e({type:"litecomment/closeSelectionById",payload:{selection_id:n,doc_id:r}}),i&&i()}))}}};function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function G(){G=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==F(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function M(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var U=function(t){var e=Object(n.useContext)(N.a),r=function(){var r,n=(r=G().mark((function r(n){var o;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t({type:"proxy.web/comments.create",payload:{data:n}});case 2:if((o=r.sent).id){r.next=5;break}return r.abrupt("return");case 5:return r.next=7,t({type:"litecomment/create",payload:{data:o,showEditorAtBottom:!0,commentListStyle:"floor"}});case 7:return null==e||e.createComment(o),t({type:"doc/addCommentCount"}),r.abrupt("return",o);case 10:case"end":return r.stop()}}),r)})),function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){M(i,n,o,a,c,"next",t)}function c(t){M(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return n.apply(this,arguments)}}();return{createComment:r,updateComment:function(r,n){return t({type:"proxy.web/comments.update",payload:{data:r}}).then((function(){n&&n(),t({type:"litecomment/updateOne",payload:r}),null==e||e.updateComment(r)}))},deleteComment:function(r,n){return t({type:"proxy.web/comments.destroy",payload:{data:{id:r},reducer:"litecomment/remove"}}).then((function(){t({type:"doc/reduceCommentCount"}),n&&n(),null==e||e.destroyComment({id:r})}))}}},B=(r(113),r(35)),Y=(r(267),r(127)),V=(r(207),r(91)),q=(r(197),r(36)),H=r(229),W=r.n(H),z=r(3750),K=r(3618),$=r(3749),J=r(3486),Q=r(3617),Z=r(1816),X=r(300),tt=r(3706),et=r(342),rt=r(3748),nt=K.a.REACTIONS;function ot(t){var e=t.comment,r=t.onReactionUpdate,n=t.reactionMap,i=t.reactions,a=t.myReaction,c=t.reactionViewModel,u=t.reactionUserMap;return i.length>0?o.a.createElement("div",{className:"post-interaction",style:{marginTop:12}},o.a.createElement("div",{className:"post-interaction-reaction-summary"},o.a.createElement("ul",null,nt.map((function(t){var i=n[t.id].count;return 0===i?null:o.a.createElement("li",{key:t.id},o.a.createElement(rt.a,{myReaction:a,reaction:t,users:u[t.id]||[],total:i,loadUsers:function(){c.loadReactionUser(t.id)},reset:function(){c.resetReactionUser(t.id)},onReactionClick:function(){(a&&a.action_option.includes(t.id)?c.cancelReaction(t.id):c.reaction(t.id)).then((function(){c.loadReactionUser(t.id),r(t,e)}))}}))}))))):null}ot.defaultProps={onReactionUpdate:function(){}},ot.propTypes={comment:y.a.object.isRequired,onReactionUpdate:y.a.func,reactionMap:y.a.object.isRequired,reactions:y.a.array.isRequired,myReaction:y.a.object.isRequired,reactionViewModel:y.a.object.isRequired,reactionUserMap:y.a.object.isRequired};var it=ot,at={editorViewContainer:"EditView-module_editorViewContainer_tCK3o",actions:"EditView-module_actions_TAmbV",actionItem:"EditView-module_actionItem_wxvcy",cancel:"EditView-module_cancel_i+xST"};function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function ut(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function lt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(r),!0).forEach((function(e){ft(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ft(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==ct(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ct(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function st(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return pt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var yt={};function dt(t){var e=yt.useViewModel(t),r=e.state;return o.a.createElement("div",{className:at.editorViewContainer},o.a.createElement("div",{className:at.editorWrapper},o.a.createElement(S.default,{editor:e.editor,onChange:e.onContentChange,onSubmit:e.update})),o.a.createElement("div",{className:at.actions},o.a.createElement("div",{className:at.actionItem},o.a.createElement(v.a,{type:"primary","data-testid":"comment-edit-submit",disabled:r.isEmpty||r.loading,onClick:e.update},__("确定"))),o.a.createElement("div",{className:at.actionItem},o.a.createElement(v.a,{className:at.cancel,onClick:e.cancelEdit},__("取消")))))}yt.useViewModel=function(t){var e=t.comment,r=t.cancelEdit,o=t.updateComment,i=t.doc,a=st(Object(n.useState)(!1),2),c=a[0],u=a[1],l=st(Object(n.useState)(!1),2),f=l[0],s=l[1],p=Object(n.useMemo)((function(){return new j.l({target:e,belong:i})}),[i.id]);return{state:{doc:i,comment:e,isEmpty:c,loading:f},update:function(){s(!0),p.contentReady().then((function(){o(lt(lt({},e),{},{body_asl:p.getValue(),body:p.getHtml(),format:O.a.FORMAT.LAKE}))}))},onContentChange:function(){u(p.isEmpty())},cancelEdit:r,editor:p}},dt.propTypes={comment:y.a.object,cancelEdit:y.a.func,updateComment:y.a.func};var ht=dt,mt={groupItemContainer:"CommentGroupItem-module_groupItemContainer_hcFs5",avatar:"CommentGroupItem-module_avatar_sZcW2",main:"CommentGroupItem-module_main_LL-Xw",name:"CommentGroupItem-module_name_9c70h",arrow:"CommentGroupItem-module_arrow_u0PYm",time:"CommentGroupItem-module_time_KbowO",content:"CommentGroupItem-module_content_KAu25",actions:"CommentGroupItem-module_actions_eyLP8",moreAction:"CommentGroupItem-module_moreAction_l2lcj",actionItem:"CommentGroupItem-module_actionItem_C4Epa",withoutMarginRight:"CommentGroupItem-module_withoutMarginRight_Z0YBO",replyContainer:"CommentGroupItem-module_replyContainer_R7zLP",editContainer:"CommentGroupItem-module_editContainer_qHYQX"};function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function gt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function bt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gt(Object(r),!0).forEach((function(e){wt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function wt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==vt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===vt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ot(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return _t(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _t(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Et={useViewModel:function(t){var e=t.comment,r=t.deleteComment,o=t.updateComment,i=t.me,a=t.doc,c=t.visibility,u=t.index,l=t.reply,f=t.dispatch,p=Object(n.useContext)(N.a),y=Ot(Object(n.useState)("view"),2),d=y[0],h=y[1],m=Ot(Object(n.useState)(!0),2),v=m[0],g=m[1],b=Object(z.a)({me:i,comment:e,onReactionUpdate:function(t,r){var n=bt(bt({},e),{},{reactions:t});f({type:"litecomment/updateOne",payload:n}),null==p||p.updateReaction(null,n,r)}}),w=b.state,O=w.reactions,E=w.reactionUserMap,j=Object(n.useMemo)((function(){var t={reactionMap:K.a.classifyReactions(O),myReaction:b.getMyReaction(),totalReaction:0};return Object.keys(t.reactionMap).forEach((function(e){t.totalReaction+=t.reactionMap[e].count})),t}),[O]),S=j.reactionMap,x=j.myReaction,P=void 0===x?{}:x,L=!(!i||!i.id);return Object(n.useEffect)((function(){c&&g(!1)}),[c]),{state:{doc:a,me:i,comment:e,loading:v,mode:d,hasLogin:L,index:u,reactionMap:S,myReaction:P,reactions:O,reactionUserMap:E},reactionViewModel:b,deleteComment:function(){r(e.id)},update:function(t){o(t),h("view")},edit:function(){h("edit")},cancelEdit:function(){h("view")},replyTo:function(){return l(e)},canDelete:function(){return!!i&&(i.id===e.user_id||a.abilities&&a.abilities.destroy_comment)},canEdit:function(){return i&&i.id===e.user_id},canReport:function(){if(!window.appData.isPublicCloud)return!1;var t=Object(Q.a)()||Object(Q.b)();return e.status===_.STATUS.normal&&t&&i&&i.id!==e.user_id},copyLink:function(t){try{W()(t),s.a.success(__("评论链接已复制"))}catch(t){}},onReactionUpdate:function(){}}}},jt=function(t){var e=t.state.comment,r=J.a.getAnchorId(e.id,"Doc"),n=window.location,i=n.protocol,a=n.host,c=n.pathname,u="".concat(i,"//").concat(a).concat(c,"#").concat(r);return o.a.createElement(q.a,null,o.a.createElement(q.a.Item,{key:"copy"},o.a.createElement("span",{onClick:function(){t.copyLink(u)}},__("复制评论链接"))),t.canReport()&&o.a.createElement(q.a.Item,{key:"report"},o.a.createElement(tt.a,{targetId:e.id,targetType:"Comment"},(function(t){return o.a.createElement("span",{className:"action-link",onClick:t.onShowPanel},__("举报"))}))))},St=function(t){var e=Et.useViewModel(t),r=e.reactionViewModel,n=e.onReactionUpdate,i=e.state,a=i.index,c=i.comment,u=i.loading,s=i.mode,p=i.hasLogin,y=i.doc,d=i.reactionMap,h=i.myReaction,m=i.reactions,v=i.reactionUserMap,g=c.user,b=c.to_user,w=o.a.createRef();if("view"===s){var O=l()("comment-item-".concat(a),mt.groupItemContainer);return o.a.createElement(o.a.Fragment,null,c&&null===c.deleted_at&&o.a.createElement("div",{className:O,"data-testid":"comment-item",ref:w},o.a.createElement("div",{className:mt.avatar},o.a.createElement(et.a,{src:g&&g.avatar_url,size:24,name:g.name})),o.a.createElement("div",{className:mt.main},o.a.createElement("div",{className:mt.info},o.a.createElement("div",{className:mt.name},o.a.createElement("span",null,g.name),b&&o.a.createElement(o.a.Fragment,null,o.a.createElement(f.b,{className:mt.arrow,name:"review-arrow-right",size:16}),o.a.createElement("span",null,b.name))),o.a.createElement("div",{className:mt.time},o.a.createElement(X.a,{time:c.created_at}))),o.a.createElement("div",{className:mt.content},!u&&o.a.createElement(Z.default,{id:c.id,content:c.body_asl,genOutline:!1,genAnchor:!1,simpleUI:!0})),p&&o.a.createElement(it,{comment:c,onReactionUpdate:n,reactionViewModel:r,myReaction:h,reactionMap:d,reactions:m,reactionUserMap:v}),p&&o.a.createElement("div",{className:mt.actions},o.a.createElement("span",{className:mt.actionItem,onClick:e.replyTo},o.a.createElement(f.b,{name:"comment-bubble",color:"#8C8C8C",width:16,height:16})),o.a.createElement($.a,{reactionIcon:o.a.createElement("span",{className:l()(mt.actionItem,mt.withoutMarginRight)},o.a.createElement(f.b,{className:mt.action,name:"comment-reaction",color:"#8C8C8C",width:16,height:16})),active:(null==h?void 0:h.reaction_types)||[],onReaction:r.reaction,onCancelReaction:r.cancelReaction,onReactionUpdate:function(t){return n(t,c)}}),o.a.createElement("span",{className:mt.moreAction},e.canEdit()&&o.a.createElement("span",{className:mt.actionItem,onClick:e.edit},o.a.createElement(f.b,{name:"edit-border",color:"#8C8C8C",width:16,height:16})),e.canDelete()&&o.a.createElement(V.a,{title:__("确认删除该评论么？"),placement:"bottom",onConfirm:e.deleteComment},o.a.createElement("span",{className:mt.actionItem},o.a.createElement(f.b,{name:"icon-delete",color:"#8C8C8C",width:16,height:16}))),o.a.createElement(Y.a,{type:"menu",getPopupContainer:function(t){return t.parentNode},placement:"bottomRight",arrowPointAtCenter:!0,trigger:["hover"],content:jt(e)},o.a.createElement("span",{className:mt.actionItem},o.a.createElement(f.b,{name:"comment-more",color:"#8C8C8C",width:16,height:16}))))))))}return o.a.createElement("div",{style:{paddingLeft:16,paddingRight:16}},o.a.createElement(ht,{doc:y,comment:c,cancelEdit:e.cancelEdit,updateComment:e.update}))};St.propTypes={index:y.a.number,comment:y.a.object,me:y.a.object,doc:y.a.object,rootComment:y.a.object,deleteComment:y.a.func,updateComment:y.a.func,highlight:y.a.func,reply:y.a.func,dispatch:y.a.func};var xt=St,Pt={replyCreatorContainer:"ReplyCreator-module_replyCreatorContainer_NQ4sK",editorContainer:"ReplyCreator-module_editorContainer_Tvxsn",actions:"ReplyCreator-module_actions_pnqDv",actionItem:"ReplyCreator-module_actionItem_UHAql",cancel:"ReplyCreator-module_cancel_ARRnU",replyingInfo:"ReplyCreator-module_replyingInfo_RH86T",wrapper:"ReplyCreator-module_wrapper_uNAur",name:"ReplyCreator-module_name_Pay8V"};function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function kt(){kt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Lt(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function Tt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ct(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return At(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return At(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Nt(t){var e=t.doc,r=t.createComment,o=t.replyingTo,i=t.parent_id,a=t.root_id,c=t.cancelReply,u=Ct(Object(n.useState)(!0),2),l=u[0],f=u[1],s=Ct(Object(n.useState)(!1),2),p=s[0],y=s[1],d=Object(n.useMemo)((function(){return new j.l({belong:e,placeholder:__("请添加评论...")})}),[e.id]),h=function(){var t,n=(t=kt().mark((function t(){return kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y(!0),t.next=3,d.contentReady();case 3:if(!d.isEmpty()){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,r({commentable_type:"Doc",commentable_id:e.id,type:E.a.TYPE.WORDING_COMMENT,body_asl:d.getValue(),body:d.getHtml(),format:O.a.FORMAT.LAKE,parent_id:i,root_id:a,to_user_id:o.id});case 7:d.clearCache();case 8:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Tt(i,n,o,a,c,"next",t)}function c(t){Tt(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();return{state:{doc:e,isEmpty:l,replyingTo:o,loading:p},onContentChange:function(){f(d.isEmpty())},createReply:h,editorOnload:function(){d.focus(!0)},cancelReply:c,editor:d}}function Rt(t){var e=Nt(t),r=e.state,n=Object(x.b)(t.doc);return o.a.createElement("div",{className:Pt.replyCreatorContainer,"data-testid":"select-word-comment"},o.a.createElement("div",{className:Pt.editorContainer},o.a.createElement(S.default,{editor:e.editor,onChange:e.onContentChange,onSubmit:e.createReply,onLoad:e.editorOnload})),o.a.createElement("div",{className:Pt.actions},o.a.createElement("div",{className:Pt.actionItem},o.a.createElement(v.a,{type:"primary",disabled:r.isEmpty||r.loading||n,onClick:e.createReply},__("回复"))),o.a.createElement("div",{className:Pt.actionItem},o.a.createElement(v.a,{className:Pt.cancel,onClick:e.cancelReply},__("取消"))),o.a.createElement("div",{className:Pt.replyingInfo},o.a.createElement("div",{className:Pt.wrapper},o.a.createElement("span",null,__("回复")," "),o.a.createElement("span",{className:Pt.name},"@",r.replyingTo&&r.replyingTo.name)))),n&&o.a.createElement(x.a,null))}Rt.propTypes={doc:y.a.object,selectedInfo:y.a.object,createComment:y.a.func,replyingTo:y.a.object,parent_id:y.a.number,root_id:y.a.number,cancelReply:y.a.func};var It=Rt,Dt="CommentGroup-module_groupContainer_KczOF",Ft="CommentGroup-module_groupBox_Rwdmw",Gt="CommentGroup-module_header_fIsOp",Mt="CommentGroup-module_title_ptcf0",Ut="CommentGroup-module_actionsBtnGroup_r9Otd",Bt="CommentGroup-module_actionBtn_eImZP",Yt="CommentGroup-module_close_oU6Vu",Vt="CommentGroup-module_action_wOOTd",qt="CommentGroup-module_disable_Il+lS",Ht="CommentGroup-module_active_htoNq",Wt="CommentGroup-module_visible_+GH4-";function zt(t){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zt(t)}function Kt(){Kt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==zt(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function $t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Jt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$t(Object(r),!0).forEach((function(e){Qt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Qt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==zt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===zt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Xt(t){return function(t){if(Array.isArray(t))return re(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ee(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||ee(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(t,e){if(t){if("string"==typeof t)return re(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(t,e):void 0}}function re(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ne(t){var e=t.doc,r=t.me,o=t.visibility,i=t.comment,a=t.groupArr,c=t.deleteComment,u=t.updateComment,l=t.createReply,f=t.closeSelection,s=t.activeSelectionId,p=t.offsetTop,y=t.focusGroup,d=t.focusPrevGroup,h=t.focusNextGroup,m=te(Object(n.useState)(null),2),v=m[0],g=m[1],b=e&&e.abilities&&e.abilities.update,w=i.id,O=i.selection_id,_=Xt(i.sub_comments).sort((function(t,e){return new Date(t.created_at)-new Date(e.created_at)}))||[],E=[i].concat(Xt(_)),j=a.findIndex((function(t){return t.id===w})),S=0===j,x=j===a.length-1,P=function(){g(null)},L=function(){var t,e=(t=Kt().mark((function t(e){var r;return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v){t.next=2;break}return t.abrupt("return");case 2:return r=v.selection,t.next=5,l(Jt(Jt({},e),{},{selection:{paragraph_id:r.paragraph_id,range_rect:r.range_rect,text_offset:r.text_offset,text:r.text,selection_range:r.selection_range}}));case 5:P();case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Zt(i,n,o,a,c,"next",t)}function c(t){Zt(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();return{state:{doc:e,me:r,visibility:o,canUpdate:b,id:w,selection_id:O,comment:i,comments:E,deleteComment:c,updateComment:u,createReply:l,closeSelection:f,activeSelectionId:s,offsetTop:p,focusGroup:y,focusPrevGroup:d,focusNextGroup:h,replyingComment:v,isFirstGroup:S,isLastGroup:x},reply:function(t){g(t)},cancelReply:P,createComment:L}}var oe=o.a.forwardRef((function(t,e){var r=ne(t),n=r.state,i=r.reply,a=r.cancelReply,c=r.createComment,u=n.canUpdate,s=n.id,p=n.visibility,y=n.selection_id,d=n.comment,h=n.comments,m=n.deleteComment,v=n.updateComment,g=n.closeSelection,b=n.activeSelectionId,w=n.doc,O=n.me,_=n.offsetTop,E=n.focusGroup,j=n.focusPrevGroup,S=n.focusNextGroup,x=n.replyingComment,P=n.isFirstGroup,L=n.isLastGroup,k=l()(Dt,y===b?Ht:"",p?Wt:"");return o.a.createElement("div",{className:k,ref:e,"data-comment-group-id":s,style:{position:"absolute",top:"".concat(_,"px")}},o.a.createElement("div",{className:Ft,onClick:function(){E(s,y)}},o.a.createElement("div",{className:Gt},o.a.createElement("div",{className:Mt},__("{count} 条评论",{count:h.filter((function(t){return null===t.deleted_at})).length})),y===b&&o.a.createElement("div",{className:Ut},o.a.createElement("div",{className:Bt},P?o.a.createElement("div",{className:l()(Vt,qt),onClick:function(){j()}},o.a.createElement(f.b,{name:"arrow-up",width:16,height:16})):o.a.createElement(B.a,{title:__("上一条"),placement:"topLeft",arrowPointAtCenter:!0},o.a.createElement("div",{className:l()(Vt),onClick:function(){j()}},o.a.createElement(f.b,{name:"arrow-up",width:16,height:16})))),o.a.createElement("div",{className:Bt},L?o.a.createElement("div",{className:l()(Vt,qt),onClick:function(){S()}},o.a.createElement(f.b,{name:"arrow-down",width:16,height:16})):o.a.createElement(B.a,{title:__("下一条"),placement:"top",arrowPointAtCenter:!0},o.a.createElement("div",{className:l()(Vt),onClick:function(){S()}},o.a.createElement(f.b,{name:"arrow-down",width:16,height:16})))),u&&o.a.createElement("div",{className:l()(Bt,Yt)},o.a.createElement(B.a,{title:__("标记为隐藏"),placement:"topRight",arrowPointAtCenter:!0},o.a.createElement("div",{className:Vt,onClick:function(){g(y)}},o.a.createElement(f.b,{name:"comment-hide",width:16,height:16})))))),h.map((function(e,r){return o.a.createElement(xt,{doc:w,me:O,key:e.id,visibility:p,comment:e,rootComment:d,deleteComment:m,updateComment:v,index:r,reply:i,dispatch:t.dispatch})})),x&&o.a.createElement(It,{doc:w,me:O,replyingTo:x.user,createComment:c,parent_id:x.id,root_id:s,cancelReply:a})))}));oe.propTypes={doc:y.a.object,me:y.a.object,visibility:y.a.bool,comment:y.a.object,groupArr:y.a.array,deleteComment:y.a.func,updateComment:y.a.func,createReply:y.a.func,closeSelection:y.a.func,activeSelectionId:y.a.number,offsetTop:y.a.number,focusGroup:y.a.func,focusPrevGroup:y.a.func,focusNextGroup:y.a.func,dispatch:y.a.func};var ie=oe,ae={selectionInfo:"SideCommentItem-module_selectionInfo_EkyqK",text:"SideCommentItem-module_text_8tA08",action:"SideCommentItem-module_action_xPcKj"};function ce(t){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce(t)}function ue(){ue=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==ce(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function le(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function fe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function se(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?fe(Object(r),!0).forEach((function(e){pe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pe(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==ce(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ce(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ye(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return de(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return de(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function he(t){var e,r=t.doc,i=t.me,a=t.comment,c=t.engine,u=t.activeSelectionId,l=t.groupArr,f=t.dispatch,p=t.getDrawRange,y=t.getDefaultPosition,d=t.updateGroupPosition,h=t.deteleGroupPosition,m=t.focusGroup,v=t.focusPrevGroup,g=t.focusNextGroup,w=a.id,O=a.selection_id,_=Object(n.useContext)(N.a),E=Object(n.useRef)(null),j=ye(Object(n.useState)(null),2),S=j[0],x=j[1],P=ye(Object(n.useState)(!window.IntersectionObserver),2),L=P[0],k=P[1],T=U(f),C=T.createComment,A=T.updateComment,R=T.deleteComment,I=D({doc_id:r.id,selection_id:O},f),F=I.openSelection,G=I.closeSelection,M=function(){return F((function(){x(!0),s.a.destroy(),null==_||_.updateComment(se(se({},a),{},{closed_at:null}))}))},B=function(){var t=p(w);t&&c._iViewer.selectWording([t.viewRange],w,O)};Object(n.useEffect)((function(){if(window.ResizeObserver&&E.current){var t=new ResizeObserver(b()((function(){var t=p(w),e=y(t),r=e.x,n=e.y;E.current&&d({id:w,left:r,top:n,height:E.current.getBoundingClientRect().height})}),50));return t.observe(E.current),function(){t.disconnect()}}}),[]),Object(n.useEffect)((function(){if(window.IntersectionObserver&&E.current){var t=new IntersectionObserver(b()((function(t,e){t.forEach((function(t){t.isIntersecting?k(!0):k(!1)}))}),50));return t.observe(E.current),function(){t.disconnect()}}}),[S]);var Y,V,q=(null===(e=l.find((function(t){return t.id===w})))||void 0===e?void 0:e.top)||0;return{state:{doc:r,me:i,activeSelectionId:u,visible:S,visibility:L,groupRef:E,comment:a,groupArr:l,offsetTop:q},createComment:(Y=ue().mark((function t(e){return ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(e);case 2:x(!0),B();case 4:case"end":return t.stop()}}),t)})),V=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=Y.apply(t,e);function i(t){le(o,r,n,i,a,"next",t)}function a(t){le(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return V.apply(this,arguments)}),updateComment:function(t){return A(t,(function(){B()}))},deleteComment:function(t){return R(t,(function(){h({id:t}),B(),s.a.success(__("操作成功"),3)}))},closeSelection:function(t){return G(t,(function(){x(!1),s.a.warn(o.a.createElement("div",{className:ae.selectionInfo},o.a.createElement("span",{className:ae.text},__("不再显示此处的划词评论，但仍将在下方评论处展示")),o.a.createElement("span",{onClick:M,className:ae.action},__("撤销"))),3),null==_||_.updateComment(se(se({},a),{},{closed_at:(new Date).toISOString()}))}))},focusGroup:m,focusPrevGroup:v,focusNextGroup:g}}var me=o.a.memo((function(t){var e=he(t),r=e.state,n=r.comment;return(null!==r.visible?!r.visible:n&&n.selection&&n.selection.closed_at)?null:o.a.createElement(ie,{ref:r.groupRef,doc:r.doc,me:r.me,visibility:r.visibility,comment:n,groupArr:r.groupArr,deleteComment:e.deleteComment,updateComment:e.updateComment,createReply:e.createComment,closeSelection:e.closeSelection,activeSelectionId:r.activeSelectionId,offsetTop:r.offsetTop,focusGroup:e.focusGroup,focusPrevGroup:e.focusPrevGroup,focusNextGroup:e.focusNextGroup,dispatch:t.dispatch})}));me.propTypes={doc:y.a.object,me:y.a.object,activeSelectionId:y.a.number,dispatch:y.a.func,comment:y.a.object,engine:y.a.object,groupArr:y.a.array,getDrawRange:y.a.func,getDefaultPosition:y.a.func,updateGroupPosition:y.a.func,deteleGroupPosition:y.a.func,focusGroup:y.a.func,focusPrevGroup:y.a.func,focusNextGroup:y.a.func};var ve=me;function ge(t){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ge(t)}function be(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return we(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return we(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Oe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _e(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Oe(Object(r),!0).forEach((function(e){Ee(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ee(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==ge(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ge(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var je=function(t,e){var r=e.type,n=e.payload;switch(r){case"select":return _e(_e({},t),n);case"reset":return{text:"",paragraphId:null,textOffset:null,start:null,end:null,drawRanges:[]}}},Se=function(){var t=be(Object(n.useReducer)(je,{text:"",paragraphId:null,textOffset:null,start:null,end:null,drawRanges:[]}),2);return{selectedInfo:t[0],dispatch:t[1]}};function xe(t){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(t)}function Pe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Le(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Le(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ke(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Te(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ke(Object(r),!0).forEach((function(e){Ce(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ce(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==xe(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===xe(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ae=function(t,e){var r=e.type,n=e.payload,o=n.id,i=n.top,a=n.left,c=n.height;switch(r){case"update":return t[o]={top:i,left:a,height:c},Te({},t);case"delete":var u=Te({},t);return delete u[o],u;case"reset":return{}}},Ne=function(){var t=Pe(Object(n.useReducer)(Ae,{}),2);return{groupPosition:t[0],dispatch:t[1]}},Re="SideCommentList-module_commentListWrapper_fE+ZY";function Ie(t){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(t)}function De(){De=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var s={};function p(){}function y(){}function d(){}var h={};u(h,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Ie(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function Fe(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ge(t){return function(t){if(Array.isArray(t))return Me(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Me(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Me(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ue(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Be(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Ie(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ie(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ye(t){var e,r,o=t.getEngine,i=t.doc,a=t.me,c=t.wordingComments,u=t.wordingList,l=t.flattenFloorComments,f=t.dispatch,p=t.sideCommentState,y=t.dispatchSideComment,d=U(f).createComment,v=Se(),g=v.selectedInfo,b=v.dispatch,w=Ne(),O=w.groupPosition,_=w.dispatch,E=p.creatorVisible,j=p.activeCommentId,S=p.activeSelectionId,x=Object(n.useRef)(null),P=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},L=function(t){var e=Object.entries(t).sort((function(t,e){return t[1].top<e[1].top?-1:t[1].top>e[1].top?1:t[1].left-e[1].left})).map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ue(Object(r),!0).forEach((function(e){Be(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({id:+t[0]},t[1])}));return e},k=function(t,e){for(var r=0,n=0;n<t.length;n++){var o=t[n];if(o.id===e){o.top>r&&(r=o.top);break}r=o.top>=r?o.top+o.height+20:r+o.height+20}return r},T=function(t){return o()._iViewer.getAllDrawRanges().find((function(e){return e.commentId===t}))},C=function(t){if(!t)return{x:0,y:0};var e=t.rects.filter((function(t){return!(0===t.width&&t.x<0)})).reduce((function(t,e){return t.concat(e.y)}),[]);if(0===e.length){var r=o()._iViewer.getRootCollapsedDOMNode(t.viewRange.start.node);e=r?[r.getBoundingClientRect().y]:[0]}return{x:t.rects[0].x,y:Math.min.apply(Math,Ge(e))}},A=function(t){y({type:"transform",payload:{translateY:t}})},N=function(){y({type:"resetTransform"})},R=function(t){var e=t.paragraphId,r=t.text,n=t.textOffset,o=t.start,i=t.end,a=t.drawRanges;y({type:"showCreator",payload:{selectionId:a[0].selectionId,commentId:a[0].commentId}}),b({type:"select",payload:{paragraphId:e,text:r,textOffset:n,start:o,end:i,drawRanges:a}})},I=function(){y({type:"hideCreator"}),_({type:"delete",payload:{id:0}}),b({type:"reset"})},D=function(){I(),o()._iViewer.clearHighlightWording()},F=function(t){var e=t.commentId,r=t.selectionId;I(),y({type:"focusComment",payload:{selectionId:r,commentId:e}})},G=function(){j&&S&&y({type:"unfocusComment"})},M=h()((function(t){document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&(0===P()&&N())}),50),B=function(t){var e=P()+o()._iViewer.domRootNode.getBoundingClientRect().top,r=C(t).y+e-120;window.scrollTo({top:r,left:0,behavior:"smooth"})},Y=function(t,e){var r;if(j!==t||S!==e||arguments.length>2&&void 0!==arguments[2]&&arguments[2]){var n=l.find((function(e){return e.id===t})),i=null==n||null===(r=n.selection)||void 0===r?void 0:r.paragraph_id,a=o();a&&i&&(a.execCommand("tryUnfold",i),a.execCommand("tryUnfoldCollapse",i),a._iViewer.recomputeDrawRanges());var c=T(t);c?a._iViewer.selectWordingComment(t,e,(function(){B(c)})):function(t,e,r){var n=t&&document.getElementById(t);if(n){var i=P()+n.getBoundingClientRect().top-120;window.scrollTo({top:i,left:0,behavior:"smooth"}),o()._iViewer.selectWordingComment(e,r,(function(){var t=T(e);t&&B(t)}))}}(i,t,e)}},V=Object(n.useMemo)((function(){return function(t){var e=L(t);return e.map((function(t){var r=t.id;return{id:r,top:k(e,r)}}))}(O)}),[O]);return Object(n.useEffect)((function(){var t=o();return t.on("creatingComment",R),t.on("cancelCreatingComment",D),t.on("focusComment",F),t.on("unfocusComment",G),window.addEventListener("scroll",M),function(){t.off("creatingComment",R),t.off("cancelCreatingComment",D),t.off("focusComment",F),t.off("unfocusComment",G),window.removeEventListener("scroll",M)}}),[c,j]),Object(n.useEffect)((function(){if(j){var t=function(t,e){var r=T(e);if(!r)return 0;var n=C(r).y,o=L(t);return n-k(o,e)}(O,j);A(t)}}),[j,O]),Object(n.useEffect)((function(){return x.current=Object(m.b)(),x.current.on(m.a.SCROLL,(function(t){var e=t.comment_id,r=t.id;u.find((function(t){return t.commentId===e}))?Y(e,r,!0):s.a.warn(__("内容有更新，选区已丢失"))})),function(){x.current&&x.current.removeAllListeners()}}),[u]),{state:{selectedInfo:g,activeSelectionId:S,creatorVisible:E,translateY:p.translateY,doc:i,me:a,groupPosition:O,wordingComments:c,groupArr:V},dispatch:f,getEngine:o,getScrollTop:P,getOffsetTop:k,getDrawRange:T,getDefaultGroupArr:L,getDefaultPosition:C,createComment:(e=De().mark((function t(e){var r;return De().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(e);case 2:r=t.sent,I(),r&&o()._iViewer.selectWordingComment(r.id,r.selection.id);case 5:case"end":return t.stop()}}),t)})),r=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){Fe(i,n,o,a,c,"next",t)}function c(t){Fe(i,n,o,a,c,"throw",t)}a(void 0)}))},function(t){return r.apply(this,arguments)}),cancelComment:function(){D()},updateGroupPosition:function(t){_({type:"update",payload:t})},deteleGroupPosition:function(t){_({type:"delete",payload:t})},focusGroup:Y,focusPrevGroup:function(){var t,e,r=V.findIndex((function(t){return t.id===j})),n=null===(t=V[r-1])||void 0===t?void 0:t.id,o=null===(e=c.find((function(t){return t.id===n})))||void 0===e?void 0:e.selection_id;n&&o&&Y(n,o)},focusNextGroup:function(){var t,e,r=V.findIndex((function(t){return t.id===j})),n=null===(t=V[r+1])||void 0===t?void 0:t.id,o=null===(e=c.find((function(t){return t.id===n})))||void 0===e?void 0:e.selection_id;n&&o&&Y(n,o)},transformAllGroup:A,clearAllGroupTransform:N}}var Ve=function(t){var e=Ye(t),r=e.state,n=e.dispatch,i=e.getEngine,a=e.createComment,c=e.cancelComment,u=e.updateGroupPosition,l=e.deteleGroupPosition,f=e.getScrollTop,s=e.getOffsetTop,p=e.getDrawRange,y=e.getDefaultGroupArr,d=e.getDefaultPosition,h=e.focusGroup,m=e.focusPrevGroup,v=e.focusNextGroup,g=e.transformAllGroup,b=e.clearAllGroupTransform,w=i(),O=f()+w._iViewer.domRootNode.getBoundingClientRect().top-60;return o.a.createElement("div",{className:Re,style:{marginTop:"".concat(O,"px"),transform:"translateY(".concat(r.translateY,"px)")}},r.wordingComments.map((function(t){return o.a.createElement(ve,{key:t.id,doc:r.doc,me:r.me,comment:t,engine:w,activeSelectionId:r.activeSelectionId,groupArr:r.groupArr,dispatch:n,getDrawRange:p,getDefaultPosition:d,updateGroupPosition:u,deteleGroupPosition:l,focusGroup:h,focusPrevGroup:m,focusNextGroup:v})})),r.creatorVisible&&o.a.createElement(A,{doc:r.doc,selectedInfo:r.selectedInfo,groupPosition:r.groupPosition,createComment:a,cancelComment:c,getDefaultGroupArr:y,getDefaultPosition:d,getOffsetTop:s,updateGroupPosition:u,transformAllGroup:g,clearAllGroupTransform:b}))};Ve.propTypes={doc:y.a.object,me:y.a.object,dispatch:y.a.func,getEngine:y.a.func,wordingComments:y.a.array,flattenFloorComments:y.a.array,sideCommentState:y.a.object,dispatchSideComment:y.a.func};var qe=Ve;function He(t){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(t)}function We(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ze(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ze(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ke(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $e(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ke(Object(r),!0).forEach((function(e){Je(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Je(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==He(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===He(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qe(t,e){var r=e.type,n=e.payload,o=void 0===n?{}:n,i=o.commentId,a=o.selectionId,c=o.translateY;switch(r){case"hideCreator":return $e($e({},t),{},{commentsVisible:!0,creatorVisible:!1});case"showCreator":return $e($e({},t),{},{commentsVisible:!0,creatorVisible:!0,activeSelectionId:a,activeCommentId:i});case"focusComment":return $e($e({},t),{},{creatorVisible:0===a,commentsVisible:!0,activeSelectionId:a,activeCommentId:i});case"unfocusComment":return $e($e({},{commentsVisible:null,creatorVisible:!1,activeSelectionId:0,activeCommentId:0,translateY:0}),{},{commentsVisible:t.commentsVisible,translateY:t.translateY});case"transform":return $e($e({},t),{},{translateY:c});case"resetTransform":return $e($e({},t),{},{translateY:0});case"hideComments":return $e($e({},{commentsVisible:null,creatorVisible:!1,activeSelectionId:0,activeCommentId:0,translateY:0}),{},{commentsVisible:!1});case"showComments":return $e($e({},t),{},{commentsVisible:!0})}}var Ze=function(){var t=We(Object(n.useReducer)(Qe,{commentsVisible:null,creatorVisible:!1,activeSelectionId:0,activeCommentId:0,translateY:0}),2);return{sideCommentState:t[0],dispatch:t[1]}};function Xe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return tr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var er=function(t){var e=t.doc,r=t.me,o=t.getEngine,i=t.litecomment,a=t.getContainer,c=t.dispatch,u=t.sidePanelManager,l=Xe(Object(n.useState)(!1),2),f=l[0],s=l[1],p=Xe(Object(n.useState)([]),2),y=p[0],d=p[1],h=Xe(Object(n.useState)([]),2),m=h[0],v=h[1],g=Xe(Object(n.useState)(0),2),b=g[0],w=g[1],O=Xe(Object(n.useState)(!1),2),_=O[0],j=O[1],S=Ze(),x=S.sideCommentState,P=S.dispatch,L=e&&"lake"===e.format,k=!!new URL(document.location).searchParams.get("translate"),T=x.commentsVisible,C=Object(n.useMemo)((function(){return i.comments.filter((function(t){var e=t.type,r=t.selection;return e===E.a.TYPE.WORDING_COMMENT&&null===r.closed_at}))}),[i.comments]),A=Object(n.useMemo)((function(){return C.reduce((function(t,e){var r;return t.push(e),null===(r=e.sub_comments)||void 0===r||r.forEach((function(e){t.push(e)})),t}),[])}),[C]);return Object(n.useEffect)((function(){s(!0)}),[e.id]),Object(n.useEffect)((function(){var t=o(),e=function(e){e.renderList;var r=t._iViewer.getAllDrawRanges().map((function(t){return t.commentId}));d(C.filter((function(t){return r.indexOf(t.id)>=0})))};return t.on("tileRendered",e),function(){t.off("tileRendered",e)}}),[C]),Object(n.useEffect)((function(){var t=o(),e=C.map((function(t){var e=t.id,r=t.selection,n=t.sub_comments,o=void 0===n?[]:n,i=t.deleted_at;return{selection:r,commentId:e,commentsCount:o.filter((function(t){return null===t.deleted_at})).length+(null===i?1:0)}}));if(t&&e){var r=t._iViewer.getWordingList(e);w(r.map((function(t){return t.commentsCount})).reduce((function(t,e){return t+e}),0)),v(r),f?(t._iViewer.tileRenderWording(r),s(!1)):t._iViewer.tileRenderWording(r,{clearCache:!1})}}),[C]),Object(n.useEffect)((function(){var t;T||o()._iViewer.clearHighlightWording();_||null===T||(t=new CustomEvent("contentSidebarVisibleChange",{detail:{visible:T,type:"wordingComment"}}),window.dispatchEvent(t)),j(!1),u&&T&&u.show("WordingComment")}),[T]),{state:{panelVisible:T,sideCommentState:x,isTranslating:k,isLake:L,doc:e,me:r,wordingComments:y,wordingList:m,wordingSelectionsCount:b,flattenFloorComments:A},dispatch:c,getEngine:o,getContainer:a,dispatchSideComment:P,onClose:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u&&u.hide("WordingComment"),j(t),P({type:"hideComments"})}}},rr="index-module_commentPanel_rHJ+M",nr="index-module_toolbar_WR5Oc",or="index-module_toolbarContent_wiz0k",ir="index-module_text_Mbvbt",ar="index-module_closeBtn_wG-wO",cr="index-module_closeIcon_BZ+U-",ur="index-module_visible_Rew5O",lr="index-module_hidden_QeAYC",fr=Object(n.forwardRef)((function(t,e){var r=er(t),i=r.state,c=r.getContainer,u=r.getEngine,s=r.dispatch,p=r.dispatchSideComment,y=r.onClose,d=c(),h="";h=null===i.panelVisible?"":i.panelVisible?ur:lr;var m=l()(rr,h);function v(t){var e=t.onLayout;return Object(n.useEffect)((function(){return p({type:"showComments"}),e({width:305}),function(){p({type:"hideComments"})}}),[]),o.a.createElement(o.a.Fragment,null)}return Object(n.useImperativeHandle)(e,(function(){return{onClose:y}})),Object(n.useEffect)((function(){t.sidePanelManager&&d&&(window.sidePanelManager=t.sidePanelManager,t.sidePanelManager.registerContent("WordingComment",v))}),[d]),i.isLake&&!i.isTranslating&&d?a.a.createPortal(o.a.createElement("div",{className:m},o.a.createElement("div",{className:nr},o.a.createElement("div",{className:or},o.a.createElement("div",{className:ir},__("划词评论（{count}）",{count:i.wordingSelectionsCount})),o.a.createElement("div",{className:ar,onClick:function(){y(!1)}},o.a.createElement(f.b,{name:"close",className:cr})))),o.a.createElement(qe,{doc:i.doc,me:i.me,getEngine:u,wordingComments:i.wordingComments,wordingList:i.wordingList,flattenFloorComments:i.flattenFloorComments,sideCommentState:i.sideCommentState,dispatch:s,dispatchSideComment:p})),d):null}));e.default=Object(c.d)((function(t){return{me:t.me,doc:t.doc,book:t.book,litecomment:t.litecomment}}),null,null,{forwardRef:!0})(fr)}}]);