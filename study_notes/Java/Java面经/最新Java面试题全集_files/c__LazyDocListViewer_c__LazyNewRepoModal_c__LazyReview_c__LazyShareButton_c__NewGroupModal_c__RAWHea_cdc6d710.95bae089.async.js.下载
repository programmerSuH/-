/*! For license information please see c__LazyDocListViewer~c__LazyNewRepoModal~c__LazyReview~c__LazyShareButton~c__NewGroupModal~c__RAWHea~cdc6d710.95bae089.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1847:function(e,t,r){"use strict";r(3146);var n=r(1992);r(2442);t.a=n.a},1850:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return a}));var n=r(2019);function o(e,t){return!(!e||!t)&&(e.uid&&t.uid?e.uid===t.uid:e.login&&t.login?e.login===t.login:!(!t.provider_userid||!e.provider_userid)&&(e.provider_userid===t.provider_userid&&e.provider_type===t.provider_type))}function a(e){var t=e.members||e.collaborators||e.collaborations;return t?Object(n.format)(t.map((function(e){return e.user}))):[]}},1976:function(e,t,r){"use strict";var n=r(105),o=r(253),a=r(38),i=r(75),c=r(530),u=r.n(c),l=r(528),s=r(137);var f=r(1850),p=r(270);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(){v=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:S(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function p(){}function d(){}function y(){}var m={};u(m,a,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==t&&r.call(b,a)&&(m=b);var w=y.prototype=p.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==h(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function S(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return T()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=y,n(w,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=u(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=L,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:L(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=b(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function b(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function O(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){_(a,n,o,i,c,"next",e)}function c(e){_(a,n,o,i,c,"throw",e)}i(void 0)}))}}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T(n.key),n)}}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var o=x(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}(this,r)}}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function L(e,t,r){return(t=T(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}var P=p.memberSelectorType.GROUP,N=p.memberSelectorType.BOOK,D=p.memberSelectorType.DOC,C=p.memberSelectorType.SIMPLE_WITH_ROLE,A=p.memberSelectorType.LIST,I=p.memberSelectorType.SIMPLE,R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(p,e);var t,r,c,l=k(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),L(j(t=l.call(this,e)),"_getSubmitBaseParams",(function(){return t.type===P?{group_id:t.target_id}:t.type===N||t.type===D?{target_id:t.target_id,target_type:t.target_type,status:o.STATUS.joined}:t.type===A?{list_id:t.target_id}:{}})),L(j(t),"getRealUsers",function(){var e=O(v().mark((function e(r){var n,o,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dataSourceServices){e.next=2;break}return e.abrupt("return",r);case 2:n=g(t.dataSourceServices),e.prev=3,n.s();case 5:if((o=n.n()).done){e.next=13;break}if(!(a=o.value).getRealUsers){e.next=11;break}return e.next=10,a.getRealUsers(r);case 10:r=e.sent;case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()),L(j(t),"getUserCount",(function(e){var r;if(t.dataSourceServices){var n,o=g(t.dataSourceServices);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.getUserCount){r=a.getUserCount(e);break}}}catch(e){o.e(e)}finally{o.f()}}return void 0===r&&null!=e&&e.length?e.length:r||0})),L(j(t),"submit",function(){var e=O(v().mark((function e(r,n,o){var a,i,c,l;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,window.appData.isYuque||(i=r.find(t.isDepartment))&&(r=r.filter((function(e){return!t.isDepartment(e)}))),e.next=4,t.getRealUsers(r);case 4:return r=e.sent,c=u()(m(m({},t._getSubmitBaseParams()),{},{users:t.serializeUserPostBody(r),department_id:null===(a=i)||void 0===a?void 0:a.id,onlyStaff:o})),n&&(c.role=n.value),e.next=9,t.createProxy(c);case 9:if(!((l=e.sent).success_count<=0&&l.errors&&l.errors.length>0)){e.next=12;break}return e.abrupt("return",{status:"error",message:__("[ {members} ] 添加失败; 错误原因: {message}",{members:l.errors.map((function(e){return e.name})).join(", "),message:l.message}),data:l});case 12:if(0!==l.success_count&&0!==l.length){e.next=14;break}return e.abrupt("return",{status:"warn",message:__("选择的成员已被添加")});case 14:return e.abrupt("return",{status:"success",message:__("成功添加了 {count} 位成员",{count:l.success_count||l.length}),data:l});case 15:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),L(j(t),"checkValid",(function(e){return t.isMember(e)?{status:"error",message:__("成员已存在")}:{status:"success",message:"ok"}})),L(j(t),"searchUser",function(){var e=O(v().mark((function e(r){var n,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={q:r}).include_unconfirmed_corp_account=!0,window.appData.organization&&(n.optional_properties="profile"),e.next=5,a.a.users.complete(n);case 5:return o=e.sent,e.abrupt("return",t.dealUsers(o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L(j(t),"searchUsersByIds",function(){var e=O(v().mark((function e(r){var n,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={ids:r},e.next=3,a.a.users.listByIds(n);case 3:return o=e.sent,e.abrupt("return",t.dealUsers(o));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L(j(t),"dealUsers",(function(e){return e=e.map((function(e){return t.setUid(e),e.type="User",e.profile&&e.profile.status===n.STATUS.joined&&(e.dep=e.profile.department||i.a.getMemberRoleName(e.profile.role),e.avatar_url=e.profile.orgAvatar||e.avatar||e.avatar_url),e}))})),t.dataSourceServices=e.dataSourceServices,t}return t=p,c=[{key:"create",value:function(e){var t=new p(e);return t.init(),t}}],(r=[{key:"init",value:function(){var e;this.type===P?(this.group.members&&(this.members=Object(f.a)(this.group)),this.target_id=this.group.id,this.target_type="Group",this.abilities=this.group.abilities,this.createProxy=a.a.groupUsers.create):this.type===N?(this.book.collaborators&&(this.members=Object(f.a)(this.book)),this.target_id=this.book.id,this.target_type="Book",this.abilities=this.book.abilities,this.createProxy=a.a.collaborations.create):this.type===D?(this.doc.collaborations&&(this.members=Object(f.a)(this.doc)),this.target_id=this.doc.id,this.target_type="Doc",this.createProxy=a.a.collaborations.create,this.abilities=this.doc.abilities):[C,I].includes(this.type)&&(this.members=[].concat(d(this.members),[this.me])),this.status="organization"===(e=this.type)?n.default.STATUS:"group"===e?s.default.STATUS:"book"===e||"doc"===e?o.default.STATUS:void 0}},{key:"isOwner",value:function(){return this.abilities.manage}},{key:"isMember",value:function(e){return!(!this.members||0===this.members.length)&&this.members.some((function(t){return Object(f.b)(t,e)}))}}])&&S(t.prototype,r),c&&S(t,c),Object.defineProperty(t,"prototype",{writable:!1}),p}(l.a);L(R,"id","search"),L(R,"title",__("搜索添加"));t.a=R},2019:function(e,t){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){u=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.formatOne=function(e){if(!e)return e;var t=e;return t.user&&(t=i(i({},e),e.user)),t.uid||(t.work_id?e.uid="".concat(t.work_id):t.id?e.uid="".concat(t.id):t.provider_type&&t.provider_userid&&(e.uid="".concat(t.provider_type,"_").concat(t.provider_userid))),e},t.format=function(e){var r,o=n(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;t.formatOne(a)}}catch(e){o.e(e)}finally{o.f()}return e}},2022:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"c",(function(){return p})),r.d(t,"b",(function(){return h}));var n=r(105),o=r(137),a=r(253),i=r(1739),c=r.n(i);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s={organization:n.default.ROLE,group:o.default.ROLE,book:a.default.ROLE,doc:a.default.ROLE,list:c.a.ROLE};function f(e){var t=s[e],r={};return"organization"===e?r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"owner"===r&&(n.label=__("管理员")),"member"===r&&(n.label=__("成员")),"outsourcer"===r&&(n.label=__("外部联系人")),e[r]=n,e}),{}):"group"===e?r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"owner"===r&&(n.label=__("管理员")),"member"===r&&(n.label=__("成员")),"readonly"===r&&(n.label=__("只读成员")),e[r]=n,e}),{}):"book"===e||"doc"===e?r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"readonly"===r&&(n.label=__("可阅读"),e[r]=n),"edit"===r&&(n.label=__("可编辑"),e[r]=n),e}),{}):"list"===e&&(r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"owner"===r&&(n.label=__("管理员")),"member"===r&&(n.label=__("成员")),e[r]=n,e}),{})),r}function p(e){var t=f(e);return["owner","member","edit","readonly","outsourcer"].map((function(e){return t[e]})).filter((function(e){return!!e}))}function h(e,t){var r,n=f(e),o=u(Object.keys(n).map((function(e){return n[e]})));try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.value===t)return a}}catch(e){o.e(e)}finally{o.f()}return{}}},2050:function(e,t,r){"use strict";var n=r(38),o=r(75),a=r(259),i=r(105),c=r(253);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(){l=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function f(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:S(e,r,c)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var h={};function d(){}function y(){}function m(){}var v={};s(v,a,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==t&&r.call(b,a)&&(v=b);var w=m.prototype=d.prototype=Object.create(v);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var l=p(e[n],e,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==u(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function S(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return T()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=p(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:y,configurable:!0}),y.displayName=s(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,s(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),s(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(f(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),s(w,c,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=L,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:L(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function s(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}(this,r)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function m(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(b,e);var t,r,u,y,v,g=h(b);function b(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(d(e=g.call.apply(g,[this].concat(r))),"getUrl",(function(t,r){if(e.joinToken=t||e.joinToken,e.joinToken){if("doc"===e.type){var n="".concat(window.location.origin,"/g/").concat(e.group.login,"/").concat(e.book.slug,"/").concat(e.doc.slug,"/collaborator/join?token=").concat(t.token),o="/".concat(e.group.login,"/").concat(e.book.slug,"/").concat(e.doc.slug,"/edit");return r&&t.role===c.ROLE.edit?"".concat(n,"&goto=").concat(encodeURIComponent(o)):n}return"book"===e.type?"".concat(window.location.origin,"/g/").concat(e.group.login,"/").concat(e.book.slug,"/collaborator/join?token=").concat(t.token):"group"===e.type?"".concat(window.location.origin,"/groups/").concat(e.group.login,"/join?token=").concat(t.token):"organization"===e.type?"".concat(window.location.origin,"/r/organizations/").concat(e.organization.login,"/join?token=").concat(t.token):"list"===e.type?"".concat(window.location.origin,"/r/list/").concat(e.list.id,"/join?token=").concat(t.token):null}})),m(d(e),"getCopyText",(function(t,r){return r===c.ROLE.edit?__("{url}# 邀请你共同编辑{typeName}《{targetName}》",{targetName:e.target.name||e.target.title,typeName:e.typeName,url:t}):__("{url}# 《{targetName}》",{targetName:e.target.name||e.target.title,url:t})})),m(d(e),"getOrgTipText",(function(){return e.organization?e.canPublic?"book"===e.type?__("获得链接的所有人（含空间外人员）可获得{type}的权限，空间外人员将自动成为{memberType}。",{type:e.typeName,memberType:o.a.isYuqueAddressBook()?__("空间成员"):__("空间外部联系人")}):__("获得链接的所有人（含空间外人员）可加入{type}，空间外人员将自动成为{memberType}。",{type:e.typeName,memberType:o.a.isYuqueAddressBook()?__("空间成员"):__("空间外部联系人")}):"book"===e.type?__("仅获得链接的空间成员可获得{type}的权限。",{type:e.typeName}):__("仅获得链接的空间成员可加入{type}。",{type:e.typeName}):""})),m(d(e),"getMoreSettingOptions",(function(){return e.organization&&e.organization.id?e.organization.isPremium&&o.a.isYuqueAddressBook()?[{value:i.ROLE.member,label:__("空间成员")},{value:i.ROLE.outsourcer,label:__("外部联系人")}]:e.organization.isPremium&&!o.a.isYuqueAddressBook()?[{value:i.ROLE.outsourcer,label:__("外部联系人")}]:[{value:i.ROLE.member,label:__("空间成员")}]:null})),m(d(e),"getToken",(function(t){var r=t.approve,n=t.force,o=t.role,c=t.allow_outsider,u=void 0===c?a.ALLOW_OUTSIDER.NORMAL:c,l=t.organization_user_role,s=void 0===l?i.ROLE.member:l;if(e.proxy){var f={id:e.target.id,allow_outsider:u,organization_user_role:s};return null!=r&&(f.approve=r),null!=n&&(f.force=n),null!=o&&(f.role=o),e.proxy.token(f).then((function(t){return e.joinToken=t,t}))}})),m(d(e),"updateToken",(function(t){var r=t.approve,n=t.role,o=t.allow_outsider,c=void 0===o?a.ALLOW_OUTSIDER.NORMAL:o,u=t.organization_user_role,l=void 0===u?i.ROLE.member:u;if(e.proxy){var s={id:e.target.id,allow_outsider:c,organization_user_role:l};return null!=r&&(s.approve=r),null!=n&&(s.role=n),e.proxy.updateToken(s).then((function(t){return e.joinToken=t,t}))}})),m(d(e),"deleteTokens",(function(){if(e.proxy)return e.proxy.deleteTokens({id:e.target.id}).then((function(e){return e}))})),e}return t=b,r=[{key:"init",value:function(){this.target&&(this.joinToken=this.target.joinToken),"organization"===this.type?this.proxy=n.a.organizations:"group"===this.type?this.proxy=n.a.groups:"book"===this.type?this.proxy=n.a.books:"doc"===this.type&&(this.proxy=n.a.docs)}},{key:"check",value:function(){this.target||(this.enable=!1)}},{key:"orgDataReady",value:(y=l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.organization){e.next=4;break}return e.next=3,o.a.canIndirectAddOrgMember(this.organization);case 3:this.canPublic=e.sent;case 4:case"end":return e.stop()}}),e,this)})),v=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=y.apply(e,t);function a(e){s(o,r,n,a,i,"next",e)}function i(e){s(o,r,n,a,i,"throw",e)}a(void 0)}))},function(){return v.apply(this,arguments)})}],u=[{key:"create",value:function(e){var t=new b(e);return t.check(),t.enable&&t.init(),t}}],r&&f(t.prototype,r),u&&f(t,u),Object.defineProperty(t,"prototype",{writable:!1}),b}(r(528).a);m(g,"id","invite"),m(g,"title",__("邀请添加")),t.a=g},209:function(e,t,r){"use strict";t.a={shareChannels:"ShareChannels-module_shareChannels_Fj7uz",shareDetailSettingPanel:"ShareChannels-module_shareDetailSettingPanel_Tb1-J",collaborator:"ShareChannels-module_collaborator_zwUr+",inviteSelector:"ShareChannels-module_inviteSelector_MLpeR",bookPublicSetting:"ShareChannels-module_bookPublicSetting_g9ss9",bookPublicTitle:"ShareChannels-module_bookPublicTitle_ibP+w",title:"ShareChannels-module_title_XlZJC",backIcon:"ShareChannels-module_backIcon_83Ws3",titleDesc:"ShareChannels-module_titleDesc_qZGRV",bookPublicSet:"ShareChannels-module_bookPublicSet_nx19k",contentArea:"ShareChannels-module_contentArea_Z-Tnr",copyLinkWrapper:"ShareChannels-module_copyLinkWrapper_Q2A7Y",linkTitleDesc:"ShareChannels-module_linkTitleDesc_FeSu0",linkContentArea:"ShareChannels-module_linkContentArea_GKWjT",copyLink:"ShareChannels-module_copyLink_IlZgW",inviteCopyBtn:"ShareChannels-module_inviteCopyBtn_epAMy",moreConfigSettings:"ShareChannels-module_moreConfigSettings_JKYYT",moreConfigToggler:"ShareChannels-module_moreConfigToggler_mqaMJ",moreConfigsTip:"ShareChannels-module_moreConfigsTip_jTlCz",expandIcon:"ShareChannels-module_expandIcon_bV3yc",pwdBlock:"ShareChannels-module_pwdBlock_KfYSH",pwdLink:"ShareChannels-module_pwdLink_SegcP",pwdBtn:"ShareChannels-module_pwdBtn_gg7wH",passwordText:"ShareChannels-module_passwordText_n3Bh0",resetBtn:"ShareChannels-module_resetBtn_nZPwm",resetIcon:"ShareChannels-module_resetIcon_3V6MB",selectorItem:"ShareChannels-module_selectorItem_r0I84",selectorIcon:"ShareChannels-module_selectorIcon_vvFr+",disabledItem:"ShareChannels-module_disabledItem_A7eGW",switchTitle:"ShareChannels-module_switchTitle_+qovl",selectOption:"ShareChannels-module_selectOption_vwHzR",collaboratorContent:"ShareChannels-module_collaboratorContent_sFMAJ",shareQrCodeContent:"ShareChannels-module_shareQrCodeContent_1az6h",shareQrCodeArea:"ShareChannels-module_shareQrCodeArea_fIAQp",shareQrCodeButton:"ShareChannels-module_shareQrCodeButton_Gq3TN"}},2469:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(8),i=r.n(a),c=(r(95),r(49)),u=(r(197),r(36));function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e){return"larkui-member-selector-container".concat(e?"-".concat(e):"")},p=o.a.forwardRef((function(e,t){var r=e.selectors,a=l(Object(n.useState)(!0),2),i=a[0],s=a[1],p=l(Object(n.useState)(e.defaultTabKey),2),h=p[0],d=p[1],y=l(Object(n.useState)(460),2),m=y[0],v=y[1],g=function(e){d(e.key)};Object(n.useEffect)((function(){v(e.getWidth(h)||460)}),[h]),o.a.useImperativeHandle(t,(function(){return{toggleTitle:function(e){s(e)}}}));return o.a.createElement(c.a,{wrapClassName:f(),visible:e.visible,width:m,title:o.a.createElement(o.a.Fragment,null,i?o.a.createElement("div",{className:f("select-by")},o.a.createElement(u.a,{onSelect:g,selectedKeys:[h],mode:"horizontal"},r.map((function(e){return o.a.createElement(u.a.Item,{key:e.props.id},__("{title}",{title:e.props.title}))})))):null),footer:null,maskClosable:!1,onCancel:e.onCancel,onClose:e.onClose,destroyOnClose:!0},r.filter((function(e){return e.props.id===h}))[0])}));p.defaultProps={selectors:[],getWidth:function(){},onCancel:function(){},onClose:function(){}},p.propTypes={selectors:i.a.arrayOf(i.a.node),getWidth:i.a.func,defaultTabKey:i.a.string,onCancel:i.a.func,onClose:i.a.func,visible:i.a.bool};var h=p,d=(r(204),r(76)),y=(r(218),r(55)),m=(r(64),r(21)),v=(r(113),r(35)),g=(r(2442),r(1847)),b=r(695),w=r(42),_=(r(640),r(327)),O=(r(240),r(52)),S=r(457),E=r(232);function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x=function(e){return"larkui-member-selector-role"+(e?"-".concat(e):"")};function L(e){var t=e.roles,r=e.onChange,a=e.defaultRole||t&&t[0],i=k(Object(n.useState)(a),2),c=i[0],l=i[1];if(c){var s=function(e){l(e),r(e)};return"radio"===e.type?o.a.createElement("div",{className:x("role-select")},o.a.createElement(O.a,{size:"large",defaultValue:c.unique,onChange:function(e){var r=t.find((function(t){return t.unique===e}));s(r)}},null==t?void 0:t.map((function(e){return o.a.createElement(Option,{value:e.unique,disabled:e.disabled},o.a.createElement(v.a,{title:e.disabled?e.disabled_text:null,placement:"top",color:E.themeToken["@white"],overlayInnerStyle:{width:240,color:E.themeToken["@black"]}},o.a.createElement("span",{className:x("role-tip")},e.roleTip),o.a.createElement("span",{className:x("role-label")},e.label)))})))):o.a.createElement(_.a,{trigger:["click"],overlayClassName:x(),overlay:o.a.createElement(u.a,{selectedKeys:["".concat(c.key)]},null==t?void 0:t.map((function(e){return o.a.createElement(u.a.Item,{key:e.key,onClick:function(){s(e)}},o.a.createElement("span",null,o.a.createElement("span",null,e.label)))})))},o.a.createElement("span",null,c.label," ",o.a.createElement(S.default,null)))}}L.propTypes={type:i.a.oneOf(["dropdown","radio"]),defaultRole:i.a.object,roles:i.a.array.isRequired,onChange:i.a.func.isRequired};var T=L,P=(r(581),r(208)),N=r(805),D=r(46),C=r.n(D),A=r(2582),I=r(292);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z=function(e){var t=e.user,r=Object(n.useRef)(null);return o.a.createElement(A.a,{textRef:r,title:t.dep,placement:"bottom"},o.a.createElement("span",{className:"ellipsis-wrapper"},o.a.createElement("span",{ref:r,className:"ellipsis-text"},t.dep)))},F=function(e){return"larkui-member-selector-user-search".concat(e?"-".concat(e):"")},G=O.a.Option;var M=o.a.createElement("div",{className:F("notfound")},o.a.createElement(N.default,null),o.a.createElement("p",null,__("未搜索到相关结果"))),B=function(e){return e.department||"Department"===e.type},q=function(e){return B(e)?I.avatar.department:e.avatar_url||"//gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png?x-oss-process=image%2Fresize%2Cm_fill%2Cw_64%2Ch_64%2Fformat%2Cpng"};function Y(e){var t,r=e.users,a=e.selectedUsers,i=function(e){var t=R(Object(n.useState)(!1),2),r=t[0],o=t[1],a=R(Object(n.useState)(!1),2),i=a[0],c=a[1],u=e.getUsers,l=e.onChange,s=Object(n.useRef)(null),f=C()((function(e){return o(!0),c(!1),u(e).then((function(t){if(o(!1),e&&!(t&&t.length>0))return c(!0),clearTimeout(s.current),s.current=setTimeout((function(){c(!1)}),3e3),t})).catch((function(){o(!1)}))}),300);return{state:{loading:r,fetchEnd:i},handleChange:function(e){l(e)},handleSearch:function(e){f(e)}}}(e),c=i.state,u=i.handleChange,l=i.handleSearch,s=Object(n.useRef)(null),f=e.notFoundContent||M;return Object(n.useEffect)((function(){e.getRef&&e.getRef(s)}),[]),o.a.createElement("div",{className:F()},o.a.createElement(O.a,{ref:s,className:"normal"===e.userClassType?F("container-normal"):F("container"),value:e.value,showSearch:!0,autoFocus:!0,mode:"multiple",placeholder:e.placeholder,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,notFoundContent:!c.loading&&c.fetchEnd?f:null,onSearch:l,onChange:u,getPopupContainer:function(e){return e.parentNode},loading:c.loading,tagRender:e.isLiteSearchSelector?function(e){var t=e.value,r=e.closable,n=e.onClose,i=a.find((function(e){return B(e)?e.uid===t:e.id===t||e.uid===t}));return i?o.a.createElement(P.a,{icon:B(i)?o.a.createElement("div",{className:"larkicon larkicon-organization ".concat(F("tag-icon"))}):null,onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},closable:r,onClose:n},i.name):null}:function(e){var t=Object(n.useRef)(null),r=(e.label,e.value),i=e.closable,c=e.onClose,u=a.find((function(e){return B(e)?e.uid===r:e.id===r||e.uid===r}));if(!u)return null;return o.a.createElement(P.a,{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},closable:i,onClose:c,className:F("user-selector-tag"),closeIcon:o.a.createElement("span",{className:F("user-selector-tag-close-avatar-wrapper")},o.a.createElement(w.b,{name:"close",size:12,className:F("user-selector-tag-close-avatar")}))},o.a.createElement(g.a,{src:q(u),size:24,className:F("user-selector-tag-avatar")}),o.a.createElement("span",{className:F("user-selector-tag-label")},o.a.createElement(A.a,{textRef:t,title:u.name,placement:"bottom"},o.a.createElement("span",{className:"ellipsis-wrapper"},o.a.createElement("span",{ref:t,className:"ellipsis-text"},u.name)))))}},(t=window.appData.isYuque,null==r?void 0:r.map((function(r){var n=r.dep?F("isdep"):null;return o.a.createElement(G,{key:r.id||r.uid,value:r[e.keyField],label:r.name,className:F("menu-item")},o.a.createElement("span",{className:"".concat(F("user")," ").concat(n)},o.a.createElement(g.a,{className:F("icon"),src:q(r),name:r.name,size:32}),o.a.createElement("span",{className:F("title-wrap")},o.a.createElement("span",{className:F("title")},o.a.createElement("span",{className:F("name")},r.name),t&&r.login&&o.a.createElement("span",{className:F("login")},"(",r.login,")"),!t&&r.lastName&&o.a.createElement("span",{className:F("login")},"(",r.lastName,")")),r.dep&&o.a.createElement("span",{className:F("dep")},o.a.createElement(z,{user:r})))))})))))}Y.defaultProps={keyField:"login"},Y.propTypes={keyField:i.a.string,value:i.a.array.isRequired,users:i.a.array.isRequired,selectedUsers:i.a.array.isRequired,getUsers:i.a.func.isRequired,onChange:i.a.func.isRequired,getRef:i.a.func,placeholder:i.a.string,notFoundContent:i.a.node};var V=Y,W=(r(61),r(23));function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function Q(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ee(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function H(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(){J=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function p(){}function h(){}function d(){}var y={};u(y,a,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(j([])));v&&v!==t&&r.call(v,a)&&(y=v);var g=d.prototype=p.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==K(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return x()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function $(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Z(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){$(a,n,o,i,c,"next",e)}function c(e){$(a,n,o,i,c,"throw",e)}i(void 0)}))}}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var re=function(){setTimeout((function(){window.location.reload()}),2e3)};function ne(e){var t=e.roles,r=e.searchUser,o=e.checkValid,a=e.getUserCount,i=e.disableMeta,c=e.onSubmit,u=e.afterSubmit,l=void 0===u?re:u,s=e.initialValues,f=e.onChange,p=e.getDefaultUsers,h=X(Object(n.useState)([]),2),d=h[0],y=h[1],m=X(Object(n.useState)([]),2),v=m[0],g=m[1],b=X(Object(n.useState)(0),2),w=b[0],_=b[1],O=X(Object(n.useState)(!0),2),S=O[0],E=O[1],k=Object(n.useRef)(t&&t[0]),j=Object(n.useRef)(null),x=Object(n.useRef)([]),L=function(e,t){return!(!e||!t)&&(e.uid&&t.uid?e.uid===t.uid:e.login&&t.login?e.login===t.login:!(!t.provider_userid||!e.provider_userid)&&(e.provider_userid===t.provider_userid&&e.provider_type===t.provider_type))},T=function(){var e=Z(J().mark((function e(t){var r,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y([]),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,p(t);case 5:return n=e.sent,n=null===(r=n)||void 0===r?void 0:r.filter((function(e){return!v.some((function(t){return L(t,e)}))})),y(n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Z(J().mark((function e(t){var n,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y([]),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,r(t);case 5:return o=e.sent,o=null===(n=o)||void 0===n?void 0:n.filter((function(e){return!v.some((function(t){return L(t,e)}))})),y(o),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){return null==e?void 0:e.map((function(e){return[].concat(H(d),H(v)).find((function(t){return t.uid===e}))}))},D=function(e){return null==e?void 0:e.filter((function(e){return e._valid}))},A=Object(n.useCallback)(C()((function(e){var t=e.status;t&&W.a[t]?W.a[t](e.message):W.a.warn(e.message)}),300),[]),I=function(e){return null==e?void 0:e.map((function(e){if("_valid"in e)return e;var t=o(e);return t&&"success"===t.status?e._valid=!0:(e._valid=!1,A(t)),e}))};Object(n.useEffect)((function(){function e(){return(e=Z(J().mark((function e(){var t,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(s);case 2:t=e.sent,r=null==(n=t)?void 0:n.map((function(e){return"_valid"in e||(e._valid=!0),e})),g(r),a&&_(a(D(r)));case 6:case"end":return e.stop()}var n}),e)})))).apply(this,arguments)}!s||null!=v&&v.length||function(){e.apply(this,arguments)}()}),[s]);var R=function(e){var t=I(e);g(t),i||_(a(D(t)))},U=function(){var e=Z(J().mark((function e(t){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(D(t));case 3:(r=e.sent)&&("success"===r.status?(A(r),setTimeout((function(){window.location.reload()}),2e3)):A(r)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),W.a.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Z(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(D(v),k.current,S);case 2:(t=e.sent)&&("success"===t.status?(A(t),l(t)):A(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{state:{users:d,selected:v,userCount:w,onlyStaff:S},getUsers:P,getRef:function(e){j.current=e.current},disableSubmit:function(){return 0===v.length},handleSelect:function(e){if(j.current){Array.isArray(e)||(e=[e]);var t,r=H(x.current),n=H(v),o=Q(e);try{var a=function(){var e=t.value;r.every((function(t){return t.uid!==e.uid}))&&r.push(e),n.every((function(t){return t.uid!==e.uid}))&&n.push(e)};for(o.s();!(t=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}y(r),x.current=r,R(n)}},handleDeselect:function(e){if(j.current){Array.isArray(e)||(e=[e]);var t,r=H(v),n=Q(e);try{var o=function(){var e=t.value,n=r.findIndex((function(t){return t.uid===e.uid}));n>-1&&r.splice(n,1)};for(n.s();!(t=n.n()).done;)o()}catch(e){n.e(e)}finally{n.f()}R(r)}},handleChange:function(e){var t=I(N(e)),r=null==t?void 0:t.filter((function(e){return e._valid}));r.length===t.length?(g(t),i||_(a(D(t))),setTimeout((function(){y([])}),300)):g(r)},handleRoleChange:function(e){k.current=e},handleSubmit:z,handleFocus:function(){j.current.focus()},userHandleChange:function(e){var t=I(N(e)),r=null==t?void 0:t.filter((function(e){return e._valid}));(null==r?void 0:r.length)===(null==t?void 0:t.length)?(g(t),setTimeout((function(){y([])}),300),U(t)):g(r)},setOnlyStaff:E}}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ie=function(e){return"larkui-member-selector-search".concat(e?"-".concat(e):"")};function ce(e){return o.a.createElement("span",{className:e.className},__("已选择 {count} 人",{count:e.userCount}))}function ue(e){var t;if(e.roles&&1===e.roles.length)t=o.a.createElement("span",{className:ie("role-text")},e.roles[0].label);else{var r=e.roleSelector;t=r?o.a.createElement(r,{roles:e.roles,defaultRole:e.defaultRole,onChange:e.onRoleChange}):o.a.createElement(T,{roles:e.roles,defaultRole:e.defaultRole,onChange:e.onRoleChange})}return o.a.createElement("span",{className:e.className},o.a.createElement("span",null,e.actionTipText||__("添加为：")),t)}function le(e){var t,r,a=e.selectors,i=1===a.length,c=i?0:null,u=oe(Object(n.useState)(c),2),l=u[0],s=u[1],f=function(e){i||s(e)};return o.a.createElement("div",{className:ie("quick-selector-container")},null!=l||i?(t=a[l],r=o.a.cloneElement(t,{className:ie("quick-selector-main-list"),selected:e.selected,onSelect:e.onSelect,onDeselect:e.onDeselect,setOnlyStaff:e.setOnlyStaff,onlyStaff:e.onlyStaff}),o.a.createElement("div",null,o.a.createElement("h2",{className:ie("quick-selector-subtitle")},!i&&o.a.createElement("span",{className:ie("quick-selector-subicon"),onClick:function(){return f(null)}},o.a.createElement(b.default,null)),o.a.createElement("span",{onClick:function(){return f(null)}},__("从{title}添加",{title:t.props.title}))),o.a.createElement("div",{className:ie("quick-selector-main")},r))):o.a.createElement("div",{className:ie("quick-selector-choose")},o.a.createElement("h2",{className:ie("quick-selector-title")},__("快捷添加")),o.a.createElement("div",{className:ie("quick-selector-list")},a.map((function(e,t){return o.a.createElement("div",{key:e.props.id,type:"flex",justify:"start",align:"middle",className:ie("quick-selector-item"),onClick:function(){return f(t)}},o.a.createElement(v.a,{placement:"top",title:"outsourcer"===e.props.id&&o.a.createElement("div",null,__("外部联系人用于外部合作场景，管理员可将外部客户或合作伙伴添加为外部联系人。"),o.a.createElement("a",{className:ie("outsourcer-tip-link"),href:"https://www.yuque.com/yuque/rvzzxz/uan0vd",target:"_blank"},__("查看详细介绍")))},e.props.iconName&&o.a.createElement(w.b,{className:ie("selector-icon"),name:e.props.iconName,size:16}),!e.props.iconName&&e.props.getIconUrl&&o.a.createElement(g.a,{className:ie("quick-selector-icon"),src:e.props.getIconUrl(),size:18}),o.a.createElement("span",{className:ie("quick-selector-text")},__("从{title}添加",{title:e.props.title}))),o.a.createElement("div",null,o.a.createElement(w.b,{name:"arrow-right",size:16})))})))))}function se(e){var t=ne(e),r=t.state,n=t.getRef,a=t.getUsers,i=t.disableSubmit,c=t.handleSelect,u=t.handleDeselect,l=t.handleChange,s=t.handleRoleChange,f=t.handleSubmit,p=t.handleFocus,h=t.setOnlyStaff;return o.a.createElement("div",{className:ie()},o.a.createElement(d.a,null,o.a.createElement(y.a,{span:e.quickSelectors&&e.quickSelectors.length>0?12:24,className:ie("selector"),onClick:p},o.a.createElement("div",{className:ie("content")},o.a.createElement(V,{keyField:"uid",getRef:n,value:r.selected.filter((function(e){return e._valid})).map((function(e){return e.uid})),users:r.users,selectedUsers:r.selected,getUsers:a,onChange:l,notFoundContent:e.notFoundContent,placeholder:__("输入人员名字搜索添加，可搜空间成员或外部联系人")})),o.a.createElement("div",{className:ie("footer")},e.disableMeta?null:o.a.createElement(ce,{className:ie("meta"),userCount:r.userCount}),e.roles&&e.roles.length>0?o.a.createElement(ue,{className:ie("role"),defaultRole:e.roles[0],roles:e.roles,onRoleChange:s,actionTipText:e.actionTipText,roleSelector:e.roleSelector}):null,o.a.createElement("div",{className:ie("footer-btn")},o.a.createElement(m.a,{type:"primary",onClick:f,disabled:i()},__("添加"))))),e.quickSelectors&&e.quickSelectors.length>0?o.a.createElement(y.a,{span:12},o.a.createElement(le,{selectors:e.quickSelectors,selected:r.selected,onSelect:c,onDeselect:u,setOnlyStaff:h,onlyStaff:r.onlyStaff})):null))}se.defaultProps={id:"search",title:"搜索",onSubmit:function(){},getDefaultUsers:function(){}},se.propTypes={id:i.a.string,title:i.a.string,getDefaultUsers:i.a.func,searchUser:i.a.func.isRequired,notFoundContent:i.a.node,onSubmit:i.a.func,actionTipText:i.a.oneOfType([i.a.string,i.a.node]),roleSelector:i.a.element};var fe=se,pe=r(2715),he=(r(529),r(306)),de=(r(2015),r(1731)),ye=(r(445),r(166)),me=(r(227),r(112)),ve=(r(2697),r(2470)),ge=r(13),be=r.n(ge);function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function _e(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(){Oe=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function p(){}function h(){}function d(){}var y={};u(y,a,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(j([])));v&&v!==t&&r.call(v,a)&&(y=v);var g=d.prototype=p.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==we(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return x()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function Se(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Ee(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Se(a,n,o,i,c,"next",e)}function c(e){Se(a,n,o,i,c,"throw",e)}i(void 0)}))}}function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==we(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===we(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||Te(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){if(e){if("string"==typeof e)return Pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pe(e,t):void 0}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ne=function(e){return"larkui-member-selector-list".concat(e?"-".concat(e):"")};function De(e){return o.a.createElement("div",{className:Ne("breadcrumb")},o.a.createElement(ve.a,null,!e.disableNavTop&&o.a.createElement(ve.a.Item,{onClick:function(t){e.disabled||e.getData({getTop:!0})}},"全部"),e.navs&&e.navs.map((function(t,r){return o.a.createElement(ve.a.Item,{key:t.id,onClick:function(r){return function(t,r){e.disabled||e.getData(r)}(0,t)},disabled:e.disabled},t.name)}))))}function Ce(e){return o.a.createElement("span",{className:"".concat(Ne("item-icon")," icon-organization"),onClick:function(t){e.disabled||e.getData(e.sub)}},o.a.createElement("span",{className:"".concat(Ne("item-larkicon"))},o.a.createElement(w.b,{name:"lower-level",size:16})),o.a.createElement("span",null,__("下级")))}function Ae(e){var t=e.item,r=window.appData.isYuque;return t.isTop?o.a.createElement("div",{className:Ne("item"),onClick:function(){return e.getData(t)}},o.a.createElement(w.b,{name:"group-type-department",className:"".concat(Ne("larkicon")),size:16}),o.a.createElement("span",{className:Ne("item-name")},t.name)):o.a.createElement("div",{className:Ne("item")},o.a.createElement(ye.a,{className:Ne("checked"),value:t.uid,checked:t.checked||e.disabled,onChange:function(r){r.target.checked?e.onSelect(r,t):e.onDeselect(t)},disabled:t.disabled||e.disabled},t.loading?o.a.createElement(me.a,null):o.a.createElement("span",{className:Ne("user")},t.avatar_url&&o.a.createElement(g.a,{className:Ne("icon"),src:t.avatar_url,size:24}),o.a.createElement("span",null,o.a.createElement("span",{className:Ne("title")},o.a.createElement("span",{className:Ne("name")},t.name),r&&t.login&&o.a.createElement("span",{className:Ne("login")},!t.sub&&o.a.createElement(o.a.Fragment,null,"("),t.login,!t.sub&&o.a.createElement(o.a.Fragment,null,")")),!r&&t.lastName&&o.a.createElement("span",{className:Ne("login")},!t.sub&&o.a.createElement(o.a.Fragment,null,"("),t.lastName,!t.sub&&o.a.createElement(o.a.Fragment,null,")")))))),t.sub&&o.a.createElement("div",{className:Ne("item-action")},o.a.createElement(Ce,{sub:t.sub,getData:e.getData,disabled:e.disabledSub})))}function Ie(e){var t=Le(Object(n.useState)(!1),2),r=t[0],o=t[1],a=Le(Object(n.useState)([]),2),i=a[0],c=a[1],u=Le(Object(n.useState)(!1),2),l=u[0],s=u[1],f=Le(Object(n.useState)(e.enableSelectNav),1)[0],p=Le(Object(n.useState)(!1),2),h=p[0],d=p[1],y=Le(Object(n.useState)([]),2),m=y[0],v=y[1],g=e.onlyStaff,b=function(t){var r,n,o=t;return g&&null!==(r=o)&&void 0!==r&&r.length&&(o=o.filter((function(e){var t=e.work_id||e.workid;return!t||!t.startsWith("WB")}))),(null===(n=o)||void 0===n?void 0:n.map((function(t){var r=e.checkValid(t);return je(je({},t),{},{_valid:r&&"success"===r.status})})))||[]},w=function(t,r,n){var o=t.reduce((function(e,t){return e[t.uid]=t,e}),{});if(e.enableDepthAll&&n){var a,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Te(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(n);try{for(i.s();!(a=i.n()).done;){if(o[a.value.uid])return b(r).map((function(e){return je(je({},e),{},{checked:!0,disabled:!0})}))}}catch(e){i.e(e)}finally{i.f()}}return b(r).map((function(e){var r=t.find((function(t){return t.uid===e.uid}));return je(je({},e),{},{checked:r&&e._valid})}))}(e.selected,m,i),_=function(e){var t=e.some((function(e){return e.checked})),r=!e.some((function(e){return!(e.checked||h||!1===e._valid)}));return{allChecked:r,allDisabled:e.every((function(e){return e.disabled})),allIndeterminate:!r&&t}}(w),O=_.allChecked,S=_.allDisabled,E=_.allIndeterminate,k=function(e){return Ee(Oe().mark((function t(){var r,n,a,i,u,l=arguments;return Oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o(!0),n=l.length,a=new Array(n),i=0;i<n;i++)a[i]=l[i];return t.next=4,e.apply(void 0,a);case 4:u=t.sent,a&&a[0]&&a[0].getTop?s(!1):(null===(r=u.users)||void 0===r?void 0:r.length)>0?s(!0):s(!1),c(u.navs),v(u.users),o(!1);case 9:case"end":return t.stop()}}),t)})))},j=k(e.getData),x=k(e.getInitData);Object(n.useEffect)((function(){x()}),[]);return{state:{list:w,navs:i,showAll:l,showNavSelect:f,loading:r,allChecked:O,allIndeterminate:E,allDisabled:S,navSelectChecked:h,enableMemberTypeSwitch:e.enableMemberTypeSwitch,onlyStaff:e.onlyStaff},getData:j,handleSelect:function(t,r){t.target.checked&&e.enableDepthAll&&r.sub?(v(_e(m).map((function(e){return e.id===r.id?e.loading=!0:e.loading=!1,e}))),e.getData(r.sub).then((function(t){v(_e(m).map((function(e){return e.loading=!1,e}))),r.name=t.name,e.onSelect(r)}))):e.onSelect(r)},handleAllSelect:function(t){t.target.checked?e.onSelect(w):e.onDeselect(w)},handleRoleChange:function(e){j({role:e.value})},handleNavSelect:function(t,r){t.target.checked?(d(!0),e.onSelect(r)):(d(!1),e.onDeselect(r))},handleMemberTypeChange:function(t){var r;null===(r=e.setOnlyStaff)||void 0===r||r.call(e,t)}}}function Re(e){var t=Ie(e),r=t.state,n=t.handleAllSelect,a=t.handleSelect,i=t.handleNavSelect,c=t.handleRoleChange,u=t.getData,l=t.handleMemberTypeChange,s=e.getFilterRoles&&e.getFilterRoles(),f=r.navs&&r.navs[r.navs.length-1];return o.a.createElement("div",{className:be()("".concat(e.className," ").concat(Ne()),xe({},Ne("member-switch"),r.enableMemberTypeSwitch))},o.a.createElement("div",{className:be()(xe({},Ne("member-switch-inner"),r.enableMemberTypeSwitch))},s&&o.a.createElement("div",{className:Ne("role-filter")},o.a.createElement(T,{roles:s,onChange:c})),r.navs&&r.navs.length?o.a.createElement(De,{getData:u,navs:r.navs,disabled:r.navSelectChecked,disableNavTop:e.disableNavTop}):null,r.showNavSelect&&f&&o.a.createElement("div",{className:Ne("select-dep")},o.a.createElement(ye.a,{onChange:function(e){return i(e,f)}},o.a.createElement("span",{className:Ne("select-dep-name")},__("选择{dep}所有成员",{dep:f.name})))),r.showAll&&!r.loading?o.a.createElement("div",{className:Ne("select-all")},o.a.createElement(ye.a,{onChange:function(e){return n(e)},indeterminate:r.allIndeterminate,checked:r.allChecked||r.navSelectChecked,disabled:r.allDisabled||r.navSelectChecked},__("全选"))):null,o.a.createElement(de.a,{className:Ne("list"),justify:"block",dataSource:r.list,loading:r.loading,locale:{emptyText:"outsourcer"===e.id?o.a.createElement("div",{className:Ne("empty-view")},o.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*lzOXRp21hVEAAAAAAAAAAAAAARQnAQ"}),o.a.createElement("p",null,__("暂无外部联系人"))):o.a.createElement("div",null,__("暂无数据"))},renderItem:function(t){return o.a.createElement(Ae,{onSelect:a,onDeselect:e.onDeselect,item:t,getData:u,disabled:r.navSelectChecked||!1===t._valid,disabledSub:r.navSelectChecked})}})),r.enableMemberTypeSwitch&&o.a.createElement("div",{className:Ne("member-type-switch-container")},o.a.createElement(he.a,{checked:r.onlyStaff,disabled:r.loading,size:"small",onChange:l})," ",o.a.createElement("span",null,__("仅添加集团正式员工"))))}Re.defaultProps={disableNavTop:!1,enableDepthAll:!1,enableSelectNav:!1},Re.propTypes={id:i.a.number,getData:i.a.func,onSelect:i.a.func,onDeselect:i.a.func,checkValid:i.a.func,disableNavTop:i.a.bool,enableDepthAll:i.a.bool,enableSelectNav:i.a.bool};var Ue=Re,ze=(r(1733),r(356)),Fe=r(572),Ge=function(e){return"larkui-member-selector-import"+(e?"-".concat(e):"")};function Me(e){var t=e.getUploadProps(),r=e.getBtnText();return o.a.createElement("div",{className:Ge()},o.a.createElement("p",{className:Ge("desc")},o.a.createElement("span",null,o.a.createElement("a",{href:e.templateUrl},__("下载模板文件（import_users.txt）")),__("填写人员信息，")),o.a.createElement("span",null,r)),o.a.createElement("div",null,o.a.createElement(ze.a,t,o.a.createElement(m.a,null,o.a.createElement(Fe.default,null)," ",__("选择文件并提交")))))}Me.defaultProps={templateUrl:"https://cdn.nlark.com/import_users.txt"},Me.propTypes={role:i.a.number.isRequired,getUploadProps:i.a.func.isRequired,getBtnText:i.a.func.isRequired,templateUrl:i.a.string};var Be=Me;function qe(e){var t,r=ne(e),n=r.state,a=r.getRef,i=r.getUsers,c=r.userHandleChange;return o.a.createElement("div",null,o.a.createElement(V,{userClassType:e.userClassType,isLiteSearchSelector:e.isLiteSearchSelector,keyField:"uid",getRef:a,selectedUsers:n.selected,value:null===(t=n.selected)||void 0===t?void 0:t.filter((function(e){return e._valid})).map((function(e){return e.uid})),users:n.users,getUsers:i,onChange:c,notFoundContent:e.notFoundContent,placeholder:__("输入成员名字搜索添加")}))}qe.defaultProps={onChange:function(){}},qe.propTypes={userClassType:i.a.string,searchUser:i.a.func.isRequired,notFoundContent:i.a.node,onChange:i.a.func};var Ye=qe;function Ve(e){return o.a.createElement(h,{ref:e.titleRef,selectors:e.selectors,getWidth:e.getWidth,defaultTabKey:e.defaultTabKey,onCancel:e.onCancel,onClose:e.onClose,visible:e.visible})}Ve.ListSelector=Ue,Ve.SearchSelector=fe,Ve.InviteSelector=pe.a,Ve.ImportSelector=Be,Ve.LiteSearchSelector=Ye,Ve.propTypes={titleRef:i.a.object,selectors:i.a.array,defaultTabKey:i.a.string,getWidth:i.a.func,onCancel:i.a.func,onClose:i.a.func,visible:i.a.bool};t.a=Ve},2470:function(e,t,r){"use strict";r(3145);var n=r(1819),o=r(0),a=r.n(o),i=r(8),c=r.n(i),u=r(13),l=r.n(u),s=r(90),f=r.n(s);r(2697);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var h=["className"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(this,arguments)}function g(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var b=a.a.forwardRef((function(e,t){var r=e.className,o=g(e,h);return a.a.createElement(n.a,v({className:l()("larkui-breadcrumb",r),ref:t},o))}));b.propTypes=y(y({},n.a.BreadcrumbProps),{},{className:c.a.string}),f()(b,n.a),t.a=b},2474:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(0),o=r(42),a=r(13),i=r.n(a),c="index-module_actions_vhNlZ",u="index-module_actionItem_gm0UP",l="index-module_actionTitle_N9iRs",s="index-module_actionTitleLast_KuIDA",f="index-module_actionMore_8wkrV",p="index-module_actionMoreIcon_5FA3+",h="index-module_actionTitleIcon_XFMgq",d="index-module_actionTitleIconLast_2BO7h";function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){var t=e.settings,r=e.onClick;return n.createElement("div",{className:c},t.map((function(e){return!e.hidden&&n.createElement("div",{className:u,key:e.type,onClick:function(){r(e.type,e.title)}},n.createElement("span",{className:e.noDetail?s:l},n.createElement(o.b,{name:e.icon,className:i()(h,m({},d,e.noDetail)),width:16}),e.title),!e.noDetail&&n.createElement("span",{className:f},e.defaultValue,n.createElement(o.b,{name:"arrow-down",className:p,width:16})))})))}},2688:function(e,t,r){"use strict";r(61);var n=r(23),o=r(0),a=r.n(o),i=r(8),c=r.n(i),u=r(555),l=r(2469),s=r(1976),f=r(2050),p=r(175),h=r.n(p),d=r(2446),y=r.n(d),m=r(38),v=r(75),g=r(528);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(){O=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:S(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function p(){}function h(){}function d(){}var y={};u(y,a,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(L([])));v&&v!==t&&r.call(v,a)&&(y=v);var g=d.prototype=p.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==b(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function S(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return T()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},w(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=L,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:L(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function S(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function E(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){S(a,n,o,i,c,"next",e)}function c(e){S(a,n,o,i,c,"throw",e)}i(void 0)}))}}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,N(n.key),n)}}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var o=T(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}(this,r)}}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function P(e,t,r){return(t=N(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===b(t)?t:String(t)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(a,e);var t,r,n,o=x(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),P(L(t=o.call(this,e)),"enableDepthAll",(function(){return!1})),P(L(t),"getIconUrl",(function(){var e=window.appData,t=e.isYuque,r=e.corp,n=e.organization,o={buc:"https://gw.alipayobjects.com/zos/bmw-prod/8d7f7670-2c26-4ba5-bb0f-fb124e7f9fc8.svg",dingtalk:"https://gw.alipayobjects.com/zos/bmw-prod/4c033358-95df-4e2a-b468-89fe697fc03d.svg",wechat:"https://gw.alipayobjects.com/zos/bmw-prod/8f2f3dae-cc7c-455c-9579-ed042085da7d.svg"};return t?r?o[r.type]:n&&n.logo:o.buc})),P(L(t),"getInitData",E(O().mark((function e(){var r,n;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.mine.department({self:!0});case 2:if((n=e.sent)&&0!==n.length){e.next=9;break}return e.next=6,t.getTopData();case 6:r=e.sent,e.next=10;break;case 9:r=t.getData(n[n.length-1]);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})))),P(L(t),"fetchCache",function(){var e=E(O().mark((function e(r,n){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.cacheFetch[r]){e.next=5;break}return e.next=4,n();case 4:t.cacheFetch[r]=e.sent;case 5:return e.abrupt("return",h()(t.cacheFetch[r]));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),P(L(t),"getData",E(O().mark((function e(){var r,n,o,a,i,c,u,l=arguments;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},o=(r=l.length>0&&void 0!==l[0]?l[0]:{}).id,!r.getTop){e.next=9;break}return e.next=6,t.getTopData();case 6:return a=e.sent,n.users=t.adpatUIListData(a),e.abrupt("return",n);case 9:if(!(t.enableDepthAll()&&t.isDepartment(r))&&!t.cacheDepthRes[o]){e.next=15;break}return e.next=13,t.getDataWithDepth(r);case 13:return i=e.sent,e.abrupt("return",i);case 15:return c={id:o},e.next=18,t.fetchCache(o,E(O().mark((function e(){var t;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.users.department(c);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))));case 18:return(u=e.sent).parents&&u.parents.forEach((function(e){e&&(t.cacheParent[e.id]=e)})),n=t.serialize(u),t.cacheDeps[o]=n,e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))),P(L(t),"getDataWithDepth",E(O().mark((function e(){var r,n,o,a,i,c,u,l=arguments;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(r=l.length>0&&void 0!==l[0]?l[0]:{}).id,o={id:n,depth:"all"},a=h()(t.cacheDepthRes),a[n]){e.next=12;break}return e.next=8,m.a.users.department(o);case 8:i=e.sent,t.cacheDepthRes=h()(_(_({},t.cacheDepthRes),i)),e.next=13;break;case 12:i=h()(a);case 13:return t.includeUserCount(i),(c=Object.keys(i)).forEach((function(e){var r=i[e].parent;r&&(t.cacheParent[e]=r)})),c.forEach((function(e){var r=i[e];r.parent=t.cacheParent[e],t.cacheDeps[e]=t.serialize(r)})),u=t.cacheDeps[n],r.name&&(u._name=r._name||r.name,u.name="".concat(u._name," (").concat(u.user_count,")")),e.abrupt("return",u);case 20:case"end":return e.stop()}}),e)})))),P(L(t),"adpatUIListData",(function(e){return e.map((function(e){var r=t.cacheDeps[e.id];t.setUid(e);var n={uid:e.uid,id:e.id,avatar_url:e.avatar_url,name:e.name,_name:e._name||e.name,user_id:e.user_id,work_id:e.work_id,login:e.login,type:e.type||"User",provider_type:e.provider_type,provider_userid:e.provider_userid,iconName:e.iconName,isTop:e.isTop,lastName:e.lastName};return r&&"user_count"in r&&(n.user_count=r.user_count,n.name="".concat(n._name," (").concat(n.user_count,")")),!e.isTop&&t.isDepartment(e)?n.sub=e:e.manageDepartment&&(n.sub=e.manageDepartment),n}))})),P(L(t),"adpatUINavData",(function(e){if(e){var r=[];if(Array.isArray(e))r=e;else{r.push(e);!function e(n){if(n.parentDepId){var o=t.cacheParent[n.parentDepId];if(!o)return;Array.isArray(o)?r=o.concat(r):(r.unshift(o),e(o))}}(e)}return r.map((function(e){return e.manageDepartment?{uid:"nav_".concat(e.manageDepartment.id),id:e.manageDepartment.id,name:e.manageDepartment.name,type:"Department"}:{uid:"nav_".concat(e.id),id:e.id,name:e.name,type:"Department"}}))}})),P(L(t),"getTopData",E(O().mark((function e(){var t,r,n,o,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.mine.department({self:!0});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return t=e.t0,window.appData.isYuque||(o=[],0===(null===(r=window.appData.me)||void 0===r?void 0:r.zone_id)&&(o=[{id:"12503",name:__("阿里巴巴"),iconName:"organization",type:"Department"}]),1===(null===(n=window.appData.me)||void 0===n?void 0:n.zone_id)&&(o=[{id:"8430",name:__("蚂蚁金服"),iconName:"organization",type:"Department"},{id:"134318",name:__("网商银行"),iconName:"organization",type:"Department"}]),(a=t[0])&&(a.iconName="department",a.type="Department",o.push(a)),t=o),t=t.map((function(e){return e.isTop=!0,e.type="Department",e})),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))),P(L(t),"getAllDepUsers",function(){var e=E(O().mark((function e(r){var n,o,a,i,c,u,l;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.id,!(o=t.cacheDeps[n])){e.next=4;break}return e.abrupt("return",o);case 4:return e.next=6,m.a.user.searchAllDepUsers({id:n});case 6:for(a=e.sent,i=Object.keys(a.data),c=0,u=i;c<u.length;c++)l=u[c],t.cacheDeps[l]=a.data[l];return e.abrupt("return",a.data);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P(L(t),"getDepUsers",function(){var e=E(O().mark((function e(r){var n,o,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.id,!(o=t.cacheDeps[n])){e.next=4;break}return e.abrupt("return",o);case 4:return e.next=6,m.a.user.userServices.searchDepUsers({id:n});case 6:return a=e.sent,t.cacheDeps[n]=a.data,e.abrupt("return",a.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P(L(t),"getRealUsers",(function(e){return y()(e,"uid")})),t.cacheDeps={},t.cacheParent={},t.cacheFetch={},t.cacheDepthRes={},t.enable=!1,t}return t=a,r=[{key:"check",value:function(){v.a.enableAddressbook()&&!v.a.enableContacts()&&(this.enable=!0)}},{key:"includeUserCount",value:function(e){var t=this;Object.keys(this.cacheDeps).forEach((function(e){t.cacheDeps[e].user_count=0})),Object.keys(e).forEach((function(r){var n=e[r];if(!Array.isArray(n)){if(n.user_count=(n.user_count||0)+function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.users.filter((function(e){return"user"===e.type}));if(!e.depthUsers||!e.depthUsers.length)return t.length;var r=e.depthUsers.reduce((function(e,t){return e[t.uid]=t,e}),{});return t.filter((function(e){return!r[e.uid]})).length}(n),n.parent){var o=e[n.parent.parentDepId]||t.cacheDeps[n.parent.parentDepId];o&&(o.user_count=(o.user_count||0)+n.user_count,o.depthUsers=(o.depthUsers||[]).concat(n.users.filter((function(e){return t.isUser(e)}))),e[n.parent.parentDepId]=o,t.cacheDeps[n.parent.parentDepId]=o)}t.cacheDeps[r]=n}}))}}],n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],r&&k(t.prototype,r),n&&k(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g.a);P(D,"id","addrbook"),P(D,"title",__("组织架构")),P(D,"iconName","architecture");var C=D;function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function I(){I=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function p(){}function h(){}function d(){}var y={};u(y,a,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(j([])));v&&v!==t&&r.call(v,a)&&(y=v);var g=d.prototype=p.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==A(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return x()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function R(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function U(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){R(a,n,o,i,c,"next",e)}function c(e){R(a,n,o,i,c,"throw",e)}i(void 0)}))}}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y(n.key),n)}}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=B(e);if(t){var o=B(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return M(e)}(this,r)}}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}function q(e,t,r){return(t=Y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(a,e);var t,r,n,o=G(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),q(M(e=o.call(this,t)),"getIconUrl",(function(){return e.organization.logo})),q(M(e),"getInitData",U(I().mark((function t(){var r;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),q(M(e),"getData",U(I().mark((function t(){var r,n;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.cache){t.next=2;break}return t.abrupt("return",e.cache);case 2:return t.next=4,m.a.organizationUsers.find({organization_id:e.organization.id,user_role:2,status:1,offset:0,limit:500});case 4:return r=t.sent,n=e.serialize({users:r}),e.cache=n,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))),q(M(e),"adpatUIListData",(function(t){return t.map((function(t){var r=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:r.avatar_url,name:r.name,user_id:r.id,work_id:r.work_id,login:r.login,type:r.type,provider_type:r.provider_type,provider_userid:r.provider_userid}}))})),e.organization=t.organization||window.appData.organization,e}return t=a,n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],(r=[{key:"check",value:function(){this.organization&&this.organization.abilities&&this.organization.abilities.read||(this.enable=!1)}}])&&z(t.prototype,r),n&&z(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g.a);q(V,"id","outsourcer"),q(V,"title",__("外部联系人")),q(V,"iconName","external-contacts");var W=V;function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function Q(){Q=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function p(){}function h(){}function d(){}var y={};u(y,a,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(j([])));v&&v!==t&&r.call(v,a)&&(y=v);var g=d.prototype=p.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==K(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return x()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function H(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function J(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){H(a,n,o,i,c,"next",e)}function c(e){H(a,n,o,i,c,"throw",e)}i(void 0)}))}}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ne(n.key),n)}}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=te(e);if(t){var o=te(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ee(e)}(this,r)}}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}function re(e,t,r){return(t=ne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e){var t=function(e,t){if("object"!==K(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===K(t)?t:String(t)}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(a,e);var t,r,n,o=X(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),re(ee(e=o.call(this,t)),"getIconUrl",(function(){return e.organization.logo})),re(ee(e),"getInitData",J(Q().mark((function t(){var r;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),re(ee(e),"getData",J(Q().mark((function t(){var r,n;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.cache){t.next=2;break}return t.abrupt("return",e.cache);case 2:return t.next=4,m.a.organizationUsers.find({organization_id:e.organization.id,user_role:"0,1",status:1,offset:0,limit:500});case 4:return r=t.sent,n=e.serialize({users:r}),e.cache=n,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))),re(ee(e),"adpatUIListData",(function(t){return t.map((function(t){var r=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:r.avatar_url,name:r.name,user_id:r.id,work_id:r.work_id,login:r.login,type:r.type,provider_type:r.provider_type,provider_userid:r.provider_userid}}))})),e.organization=t.organization||window.appData.organization,e.cache=null,e}return t=a,n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],(r=[{key:"check",value:function(){this.organization&&this.organization.abilities&&this.organization.abilities.read&&!v.a.enableContacts()||(this.enable=!1)}}])&&$(t.prototype,r),n&&$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g.a);re(oe,"id","orgMember"),re(oe,"title",__("空间成员"));var ae=oe,ie=r(165),ce=r(2022),ue=r(270);function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function se(){se=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function p(){}function h(){}function d(){}var y={};u(y,a,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(j([])));v&&v!==t&&r.call(v,a)&&(y=v);var g=d.prototype=p.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==le(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return x()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function fe(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function pe(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){fe(a,n,o,i,c,"next",e)}function c(e){fe(a,n,o,i,c,"throw",e)}i(void 0)}))}}function he(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,be(n.key),n)}}function de(e,t){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},de(e,t)}function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ve(e);if(t){var o=ve(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return me(e)}(this,r)}}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ve(e)}function ge(e,t,r){return(t=be(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e){var t=function(e,t){if("object"!==le(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===le(t)?t:String(t)}var we=ue.memberSelectorType.SIMPLE_WITH_ROLE,_e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&de(e,t)}(a,e);var t,r,n,o=ye(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),ge(me(e=o.call(this,t)),"getIconUrl",(function(){return e.group.avatar_url})),ge(me(e),"getIconName",(function(){return e.group.name})),ge(me(e),"getFilterRoles",(function(){var t=Object(ce.c)("group");return t.unshift(e.allRoleObj),t})),ge(me(e),"getInitData",pe(se().mark((function t(){var r;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),ge(me(e),"getData",pe(se().mark((function t(){var r,n,o,a,i,c=arguments;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="role_".concat((r=c.length>0&&void 0!==c[0]?c[0]:{}).role),!e.cache[n]){t.next=4;break}return t.abrupt("return",e.cache[n]);case 4:return o={id:e.group.id,offset:0,limit:500},"role"in r&&(o.role=r.role),t.next=8,m.a.groups.users(o);case 8:return a=t.sent,i=e.serialize({users:a}),e.cache[n]=i,t.abrupt("return",i);case 12:case"end":return t.stop()}}),t)})))),ge(me(e),"adpatUIListData",(function(t){return t.map((function(t){var r=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:r.avatar_url,name:r.name,user_id:r.id,work_id:r.work_id,login:r.login,type:r.type,provider_type:r.provider_type,provider_userid:r.provider_userid}}))})),e.group=t.group||window.appData.group,e.cache={},e.allRoleObj={key:-1,label:__("全部")},e}return t=a,n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],(r=[{key:"check",value:function(){this.group&&this.group.abilities&&this.group.abilities.read&&this.type!==we||(this.enable=!1)}}])&&he(t.prototype,r),n&&he(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g.a);ge(_e,"id","groupuser"),ge(_e,"title",ie.a.isPublication(window.appData.group)?__("知识小组成员"):__("团队成员")),ge(_e,"iconName","nav-team1");var Oe=_e,Se=r(105),Ee=r(431);function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Le(n.key),n)}}function xe(e,t,r){return(t=Le(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Le(e){var t=function(e,t){if("object"!==ke(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ke(t)?t:String(t)}var Te=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xe(this,"getUploadProps",(function(){return{name:"file",action:r.action,headers:{"x-csrf-token":Object(Ee.a)(window,!0)},onChange:function(e){var t=this;if("done"===e.file.status){var r=e.file.response.data;n.a.success(__("通过 {mobiles} 手机号码成功邀请 {members} 位注册用户，还有 {temp_members} 位用户没有注册语雀",{mobiles:r.mobiles,members:r.members,temp_members:r.temp_members})),setTimeout((function(){window.location.href=t.goto}),3e3)}else"error"===e.file.status&&n.a.error(e.file.response.message||"".concat(e.file.name," file upload failed."))}}})),xe(this,"getBtnText",(function(){return r.btnText})),this.options=t,this.type=t.type,this.organization=t.organization,this.role=t.supportRoles&&t.supportRoles[0],this.target=t[this.type],this.enable=!1}var t,r,o;return t=e,o=[{key:"create",value:function(t){var r=new e(t);return r.check(),r.enable&&r.init(),r}}],(r=[{key:"init",value:function(){if("organization"===this.type){this.action="/api/organization_users/import?role=".concat(this.role,"&organization_id=").concat(this.organization.id);var e=this.role===Se.default.ROLE.outsourcer?"external":"all";this.goto="/r/organizations/dashboard/members?role=".concat(e),this.btnText=this.role===Se.default.ROLE.outsourcer?__("批量导入外部联系人"):__("批量导入空间成员")}}},{key:"check",value:function(){this.target&&this.target.enableAdvancedFeature&&(this.enable=!0)}}])&&je(t.prototype,r),o&&je(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();xe(Te,"id","import"),xe(Te,"title",__("导入"));var Pe=Te,Ne=r(292);function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Ce(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){Ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ue(){Ue=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function p(){}function h(){}function d(){}var y={};u(y,a,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(j([])));v&&v!==t&&r.call(v,a)&&(y=v);var g=d.prototype=p.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==De(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return x()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function ze(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Fe(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ze(a,n,o,i,c,"next",e)}function c(e){ze(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,We(n.key),n)}}function Me(e,t){return Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Me(e,t)}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ye(e);if(t){var o=Ye(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===De(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qe(e)}(this,r)}}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ye(e)}function Ve(e,t,r){return(t=We(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function We(e){var t=function(e,t){if("object"!==De(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==De(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===De(t)?t:String(t)}var Ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Me(e,t)}(a,e);var t,r,n,o=Be(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Ve(qe(t=o.call(this,e)),"getIconUrl",(function(){var e=window.appData.organization;return e&&e.logo})),Ve(qe(t),"enableDepthAll",(function(){return!0})),Ve(qe(t),"getInitData",Fe(Ue().mark((function e(){var r,n,o,a,i,c,u,l,s,f,p;return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.appData.organization,e.next=3,m.a.mine.department({self:!0},{useOriginResp:!0});case 3:if(n=e.sent,o={id:0,name:r.name,type:"Department",parents:[],getTop:!0},n.length)for(o=n[0],null!==(a=n[0])&&void 0!==a&&a.dept_full_path&&(o.parents=null===(c=n[0])||void 0===c?void 0:c.dept_full_path),u=null===(i=o)||void 0===i?void 0:i.parents.findIndex((function(e){return e.id===o.id})),u>=0&&o.parents.splice(u,1),l=0;l<(null===(s=o)||void 0===s||null===(f=s.parents)||void 0===f?void 0:f.length);l++)o.parents[l].parents=o.parents.slice(0,l);return e.next=8,t.getData(o);case 8:return p=e.sent,e.abrupt("return",p);case 10:case"end":return e.stop()}}),e)})))),Ve(qe(t),"fetchCache",function(){var e=Fe(Ue().mark((function e(r,n){return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.cacheFetch[r]){e.next=5;break}return e.next=4,n();case 4:t.cacheFetch[r]=e.sent;case 5:return e.abrupt("return",h()(t.cacheFetch[r]));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Ve(qe(t),"getDepUsers",function(){var e=Fe(Ue().mark((function e(r){var n,o,a,i;return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.id,o=r.organization_id,!(a=t.cacheDeps[n])){e.next=4;break}return e.abrupt("return",a);case 4:return e.next=6,m.a.departmentUser.find({department_id:n,organization_id:o,onlyMember:1});case 6:return i=e.sent,t.cacheDeps[n]=i.data,e.abrupt("return",i.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ve(qe(t),"getData",Fe(Ue().mark((function e(){var r,n,o,a,i,c,u,l,s,f=arguments;return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Re({},r=f.length>0&&void 0!==f[0]?f[0]:{}),r){e.next=4;break}return e.abrupt("return",[]);case 4:if(o=r.id,r.getTop&&(o=0),!t.cacheDeps[o]){e.next=8;break}return e.abrupt("return",t.cacheDeps[o]);case 8:return a=window.appData.organization,i=void 0===a?{}:a,e.next=11,m.a.departments.find({parent_id:o,depth:1,withMemberCount:1});case 11:if(c=e.sent,u=r.users){e.next=17;break}return e.next=16,m.a.departmentUser.find({department_id:o,organization_id:i.id,onlyMember:1});case 16:u=e.sent;case 17:return e.next=19,Promise.all(c.map(function(){var e=Fe(Ue().mark((function e(t){return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.type="Department",t.parents=r.parents.concat(r),void 0!==t.member_count&&(t._name=t.name,t.name="".concat(t.name),t.login="(".concat(__("{num} 人",{num:t.member_count}),")"));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 19:l=Ce(u);try{for(l.s();!(s=l.n()).done;)s.value.type="User"}catch(e){l.e(e)}finally{l.f()}return n.users=c.concat(u),n.parents=r.parents.concat(r),n._name||void 0===n.member_count||(n._name=n.name,n.name="".concat(n.name,"(").concat(__("{num} 人",{num:n.member_count}),")")),((n=t.serialize(n)).member_count||0===o)&&(t.cacheDeps[o]=n),e.abrupt("return",n);case 27:case"end":return e.stop()}}),e)})))),Ve(qe(t),"adpatUIListData",(function(e){return e.map((function(e){t.setUid(e);var r=t.isUser(e)&&void 0!==e.status&&e.status!==Se.STATUS.joined;t.disableDepSelect&&t.isDepartment(e)&&(r=!0);var n={uid:t.isDepartment(e)?"nav_".concat(e.id):e.uid,id:e.id,avatar_url:t.isUser(e)?e.avatar||"//gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png?x-oss-process=image%2Fresize%2Cm_fill%2Cw_64%2Ch_64%2Fformat%2Cpng":Ne.avatar.department,name:e.name,_name:e._name,user_id:e.user_id,login:e.login,type:e.type||"User",iconName:e.iconName,isTop:e.isTop,disabled:r,parents:e.parents,_login:e.login,users:e.users,organization_id:e.organization_id,member_count:e.member_count};return!e.isTop&&t.isDepartment(e)?n.sub=e:e.manageDepartment&&(n.sub=e.manageDepartment),n}))})),Ve(qe(t),"adpatUINavData",(function(e){if(e){var r=[];if(Array.isArray(e))r=e;else{r.push(e);!function e(n){if(n.parentDepId){var o=t.cacheParent[n.parentDepId];if(!o)return;Array.isArray(o)?r=o.concat(r):(r.unshift(o),e(o))}}(e)}return r.map((function(e){return{uid:"nav_".concat(e.id),id:e.id,name:e._name||e.name,type:"Department",parents:e.parents}}))}})),Ve(qe(t),"getUserCount",(function(e){var r,n=0,o=Ce(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;t.isDepartment(a)?a.member_count&&(n+=a.member_count):n+=1}}catch(e){o.e(e)}finally{o.f()}return n})),Ve(qe(t),"getRealUsers",function(){var e=Fe(Ue().mark((function e(r){var n,o,a,i,c,u,l;return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],o=Ce(r),e.prev=2,o.s();case 4:if((a=o.n()).done){e.next=22;break}if(i=a.value,!t.isDepartment(i)){e.next=19;break}if(!i.depthUsers&&!i.users){e.next=11;break}n=n.concat(i.depthUsers||i.users),e.next=17;break;case 11:return c=i.id,u=i.organization_id,e.next=14,m.a.departmentUser.getAllSubDepartmentUsers({department_id:c,organization_id:u});case 14:l=e.sent,t.setUid(l),n=n.concat(l);case 17:e.next=20;break;case 19:n.push(i);case 20:e.next=4;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),o.e(e.t0);case 27:return e.prev=27,o.f(),e.finish(27);case 30:return e.abrupt("return",y()(n,"uid"));case 31:case"end":return e.stop()}}),e,null,[[2,24,27,30]])})));return function(t){return e.apply(this,arguments)}}()),t.cacheDeps={},t.cacheParent={},t.cacheFetch={},t.cacheDepthRes={},t.enable=!1,t.disableDepSelect=e.disableDepSelect,t}return t=a,n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],(r=[{key:"check",value:function(){v.a.enableContacts()&&(this.enable=!0)}}])&&Ge(t.prototype,r),n&&Ge(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g.a);Ve(Ke,"id","yuque_contacts"),Ve(Ke,"title",__("组织架构")),Ve(Ke,"iconName","architecture");var Qe=Ke,He=r(190),Je=r(2694);function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(r),!0).forEach((function(t){et(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function et(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==$e(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==$e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===$e(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var nt=ue.memberSelectorType.ORGANIZATION,ot=ue.memberSelectorType.GROUP,at=ue.memberSelectorType.BOOK,it=ue.memberSelectorType.DOC,ct=ue.memberSelectorType.SIMPLE_WITH_ROLE,ut=ue.memberSelectorType.LIST,lt=ue.memberSelectorType.SIMPLE;var st=a.a.forwardRef((function(e,t){var r=a.a.useRef(null),i=function(e,t){var r,i={type:e.type};e.organization&&(i.organization=e.organization),e.group&&(i.group=e.group),e.book&&(i.book=e.book),e.doc&&(i.doc=e.doc),e.list&&(i.list=e.list),e.role&&(i.supportRoles=[e.role]),e.members&&(i.members=e.members),e.disableDepSelect&&(i.disableDepSelect=e.disableDepSelect);var c,u=tt(Object(o.useState)(null),2),l=u[0],p=u[1],h=tt(Object(o.useState)(null),2),d=h[0],y=h[1],m=e.group&&"User"===e.group.type,v=Object(o.useMemo)((function(){return e.type===nt?null:C.create(i)}),[i]),g=Object(o.useMemo)((function(){return e.type===nt?null:Qe.create(i)}),[i]),b=Object(o.useMemo)((function(){var t=Xe(Xe({},i),{},{dataSourceServices:[]});return v&&v.enable&&t.dataSourceServices.push(v),g&&g.enable&&t.dataSourceServices.push(g),e.type===ct&&(t.me=e.me),s.a.create(t)}),[i]),w=Object(o.useMemo)((function(){return f.a.create(i)}),[i]),_=Object(o.useMemo)((function(){return e.type===nt?null:W.create(i)}),[i]),O=Object(o.useMemo)((function(){return e.type===nt?null:ae.create(i)}),[i]),S=Object(o.useMemo)((function(){return e.type===ot||e.type===nt?null:Oe.create(i)}),[i]),E=Object(o.useMemo)((function(){return e.type!==nt?null:Pe.create(i)}),[i]),k=[],j=[];if(v&&v.enable&&(!e.disableSelectors||!e.disableSelectors.includes("addrbook"))){var x=null!=e.enableDepSelect?e.enableDepSelect:v.enableDepSelect();v.componentType="ListSelector",v.componentProps={id:C.id,title:C.title,iconName:C.iconName,getData:v.getData,getInitData:v.getInitData,getIconUrl:v.getIconUrl,getIconName:v.getIconName,enableDepthAll:v.enableDepthAll(),enableSelectNav:x,checkValid:b.checkValid,enableMemberTypeSwitch:!window.appData.isYuque},j.push(v)}if(!g||!g.enable||e.disableSelectors&&e.disableSelectors.includes("yuque_contacts_selector")||(g.componentType="ListSelector",g.componentProps={id:Qe.id,title:Qe.title,iconName:Qe.iconName,getData:g.getData,getInitData:g.getInitData,getIconUrl:g.getIconUrl,getIconName:g.getIconName,enableDepthAll:g.enableDepthAll(),checkValid:b.checkValid,disableNavTop:!0},j.push(g)),O&&O.enable&&(O.componentType="ListSelector",O.componentProps={id:ae.id,title:ae.title,getData:O.getData,getInitData:O.getInitData,getIconUrl:O.getIconUrl,getIconName:O.getIconName,checkValid:b.checkValid},j.push(O)),_&&_.enable&&(_.componentType="ListSelector",_.componentProps={id:W.id,title:W.title,iconName:W.iconName,getData:_.getData,getInitData:_.getInitData,getIconUrl:_.getIconUrl,getIconName:_.getIconName,checkValid:b.checkValid},j.push(_)),S&&S.enable&&!m&&(S.componentType="ListSelector",S.componentProps={id:Oe.id,title:Oe.title,iconName:Oe.iconName,getData:S.getData,getInitData:S.getInitData,getIconUrl:S.getIconUrl,getIconName:S.getIconName,getFilterRoles:S.getFilterRoles,checkValid:b.checkValid},j.push(S)),w&&w.enable&&(w.componentType="InviteSelector",w.componentProps={id:f.a.id,title:f.a.title,inviteSelectorType:e.type,inviteTarget:e[e.type],group:e.group,organization:e.organization,roleSelectorType:"radio",getJoinUrl:w.getUrl,getToken:w.getToken,updateToken:w.updateToken,deleteTokens:w.deleteTokens,roles:w.validRoles,inviteRoles:d,getCopyText:w.getCopyText,tipContent:l,actionTipText:"book"===e.type?__("访问链接即可获得权限："):null,moreSettingOptions:w.getMoreSettingOptions(),toggleTitle:function(e){t&&t.current&&t.current.toggleTitle(e)}},k.push(w)),b&&b.enable){var L;window.appData.organization&&(L=a.a.createElement(Je.a,null));var T=e.roleSelector;b.componentType="SearchSelector",b.componentProps={id:s.a.id,title:s.a.title,searchUser:b.searchUser,getUserCount:b.getUserCount,checkValid:b.checkValid,onSubmit:b.submit,roles:b.validRoles,inviteRoles:d,quickSelectors:j,notFoundContent:L,actionTipText:"book"===e.type?__("权限："):null,roleSelector:T,getDefaultUsers:e.getDefaultUsers||b.searchUsersByIds,afterSubmit:e.afterSubmit},e.type===lt&&(b.componentProps.disableMeta=v.enableDepSelect(),b.componentProps.onSubmit=e.onSubmit),window.appData.isYuque||(b.componentProps.disableMeta=v.enableDepSelect()),e.type===ct&&(b.componentProps.title=e.title,b.componentProps.roles=e.roles,b.componentProps.onSubmit=e.onSubmit,e.initialValues&&(b.componentProps.initialValues=e.initialValues)),k.push(b)}return E&&E.enable&&(E.componentType="ImportSelector",E.componentProps={id:Pe.id,title:Pe.title,role:E.role,getUploadProps:E.getUploadProps,getBtnText:E.getBtnText},k.push(E)),Object(o.useEffect)((function(){w&&w.enable&&(window.appData.organization&&[ot,at,it].includes(e.type)&&w.orgDataReady().then((function(){p(a.a.createElement("div",null,a.a.createElement("span",null,w.getOrgTipText()),a.a.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/csb5nu",target:"_blank"},w.canPublic?__("关闭邀请空间外人员?"):__("邀请空间外成员?"))))})),w.getInviteAddRoles().then((function(e){y(e)})).catch((function(e){n.a.error(e.message)})))}),[]),null!==(r=e.organization)&&void 0!==r&&r.id||!Object(He.a)()||[lt,ct,ot].includes(e.type)?c=s.a.id:[at,it,nt,ut].includes(e.type)&&(c=f.a.id),{selectors:k,quickSelectors:j,defaultTabKey:c,wideTabKey:s.a.id,addrbookSelectorBiz:v,searchSelectorBiz:b,inviteSelectorBiz:w,outsourcerSelectorBiz:_,orgMemberSelectorBiz:O,groupUserSelectorBiz:S,importSelectorBiz:E,yuqueContactsSelectorBiz:g}}(e,r),c=i.selectors,u=i.quickSelectors,p=i.defaultTabKey,h=i.wideTabKey,d=i.searchSelectorBiz;if(a.a.useImperativeHandle(t,(function(){return{searchSelectorBiz:d}}),[]),!c.length)return null;var y=c.map((function(e){var t=l.a[e.componentType];return t?(e.componentProps.quickSelectors&&(e.componentProps.quickSelectors=e.componentProps.quickSelectors.map((function(e){var t=l.a[e.componentType];return t?a.a.createElement(t,e.componentProps):null})).filter((function(e){return!!e}))),a.a.createElement(t,e.componentProps)):null})).filter((function(e){return!!e}));return a.a.createElement(l.a,{titleRef:r,selectors:y,getWidth:function(e){return e===h&&u&&u.length>0?720:420},defaultTabKey:p,onCancel:e.onCancel,onClose:e.onClose,visible:e.visible})}));st.defaultProps={disableSelectors:[]},st.propTypes={type:c.a.string,organization:c.a.object,role:c.a.oneOf([0,1,2]),onCancel:c.a.func,onClose:c.a.func,visible:c.a.bool,disableSelectors:c.a.array,disableDepSelect:c.a.bool};t.a=Object(u.d)((function(e){return{organization:e.organization,group:e.group,book:e.book,doc:e.doc,me:e.me}}),null,null,{forwardRef:!0})(st)},2694:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(42),i={container:"OrgSearchNotFound-module_container_MlZtJ",icon:"OrgSearchNotFound-module_icon_oJoZx",content:"OrgSearchNotFound-module_content_CgmVs",goToContacts:"OrgSearchNotFound-module_goToContacts_mFsnK"};t.a=function(e){var t,r=window.appData.organization;return o.a.createElement("div",{className:i.container},o.a.createElement("div",{className:i.icon},o.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*lzOXRp21hVEAAAAAAAAAAAAAARQnAQ",width:80})),o.a.createElement("p",{className:i.content},__("空间内无相关搜索结果")),(null==r||null===(t=r.abilities)||void 0===t?void 0:t.destroy)&&o.a.createElement("a",{className:i.goToContacts,target:"_blank",href:"/r/organizations/dashboard/contacts"},__("管理空间通讯录"),o.a.createElement(a.b,{name:"arrow-right",size:16})))}},270:function(e,t){e.exports={memberSelectorType:{GROUP:"group",BOOK:"book",DOC:"doc",SIMPLE_WITH_ROLE:"simpleWithRole",SIMPLE:"simple",LIST:"list"}}},2715:function(e,t,r){"use strict";r(227);var n=r(112),o=(r(64),r(21)),a=(r(94),r(27)),i=(r(2015),r(1731)),c=(r(61),r(23)),u=r(0),l=r.n(u),s=r(8),f=r.n(s),p=r(13),h=r.n(p),d=r(42),y=r(167),m=r.n(y),v=r(2095),g=r.n(v),b=r(174),w=r(190),_=r(154),O=r(2474),S=(r(113),r(35)),E=(r(529),r(306)),k=(r(240),r(52)),j=r(38),x=r(615),L=r(259),T=r(209);function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var D=function(e){var t=e.organization,r=e.panelType,n=e.panelTitle,o=e.state,a=e.moreSettingOptions,i=e.handleRoleTypeChange,c=e.handleMemberTypeChange,l=e.handleAllowOutsiderChange,s=e.handleCheckChange,f=e.onBack,p=P(u.useState(!1),2),y=p[0],m=p[1];u.useEffect((function(){!(!t||null==t||!t.id)&&j.a.organizations.getPermissions({id:t.id}).then((function(e){m(e.indirect_add_org_member)}))}),[t]);var v;return u.createElement("div",{className:T.a.shareDetailSettingPanel},u.createElement("div",{className:T.a.title,onClick:f},u.createElement(d.b,{className:T.a.backIcon,name:"arrow-down",width:20}),(v=n,"needCheckSet"===r?__("审批确认"):v)),function(e){switch(e){case"groupMemberSet":return r=x.b.action,n=x.b.desc,u.createElement(u.Fragment,null,u.createElement("p",{className:T.a.titleDesc},n),r.map((function(e){return u.createElement("div",{className:h()(T.a.contentArea,T.a.selectorItem),key:e.key,onClick:function(){i(e.value)}},u.createElement("span",null,e.label),o.roleType===e.value&&u.createElement(d.b,{className:T.a.selectorIcon,name:"check",width:16}))})));case"collaborationSet":return function(){var e=x.e.action,t=x.e[o.targetType.toUpperCase()];return u.createElement(u.Fragment,null,u.createElement("p",{className:T.a.titleDesc},t),e.map((function(e){return u.createElement("div",{className:h()(T.a.contentArea,T.a.selectorItem),key:e.key,onClick:function(){i(e.value)}},u.createElement("span",null,e.label),o.roleType===e.value&&u.createElement(d.b,{className:T.a.selectorIcon,name:"check",width:16}))})))}();case"allowOutsiderSet":return function(){var e,t=["Book","Doc"].includes(o.targetType)?x.i.descBookDoc:x.i.descGroup,r=k.a.Option;1===(null==a?void 0:a.length)?e=u.createElement("span",null,a[0].label):(null==a?void 0:a.length)>1&&(e=u.createElement(k.a,{defaultValue:o.memberType,bordered:!1,onChange:c},null==a?void 0:a.map((function(e){return u.createElement(r,{value:e.value},e.label)}))));var n=u.createElement("div",{className:T.a.contentArea},u.createElement("span",{className:T.a.switchTitle},x.i.action),u.createElement(E.a,{disabled:!y,onChange:l,checked:o.allowOutsider===L.ALLOW_OUTSIDER.ALLOW}));return u.createElement(u.Fragment,null,u.createElement("p",{className:T.a.titleDesc},t),u.createElement(S.a,{title:y?"":x.i.tip,placement:"bottomRight",autoAdjustOverflow:!0},n),(null==a?void 0:a.length)&&o.allowOutsider===L.ALLOW_OUTSIDER.ALLOW&&u.createElement("div",{className:T.a.selectOption},__("空间外人员将自动成为"),e))}();case"needCheckSet":return t=["Book","Doc"].includes(o.targetType)?x.k.descBookDoc:x.k.descGroup,u.createElement(u.Fragment,null,u.createElement("p",{className:T.a.titleDesc},t),u.createElement("div",{className:T.a.contentArea},u.createElement("span",{className:T.a.switchTitle},x.k.action),u.createElement(E.a,{onChange:s,checked:o.approve===L.APPROVE.need})));default:return null}var t,r,n}(r))},C=r(617),A=r(138),I=r(229),R=r.n(I),U=r(253),z=r(137),F=r(105),G=r(270);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function B(){B=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function p(){}function h(){}function d(){}var y={};u(y,a,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(j([])));v&&v!==t&&r.call(v,a)&&(y=v);var g=d.prototype=p.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==M(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return x()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function q(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function W(e,t,r,n,o){if("get"===e)try{return JSON.parse(b.a.get("joinToken"))["".concat(t,"-").concat(r,"-").concat(n)]}catch(e){return null}if("save"===e){var a=JSON.parse(b.a.get("joinToken"))||{},i=Object.keys(a);20!==i.length||"".concat(t,"-").concat(r,"-").concat(n)in a||delete a[i[0]],a["".concat(t,"-").concat(r,"-").concat(n)]=m()(o,["role","approve","allow_outsider","organization_user_role"]),b.a.set("joinToken",JSON.stringify(a))}}function K(e){var t,r,n=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.isEditing;if(t)return e.getJoinUrl(t,r)},o=g()(e.inviteSelectorType),a=null===(t=e.inviteTarget)||void 0===t?void 0:t.id,i=W("get",o,a,e.inviteModalContent);r=e.inviteSelectorType===G.memberSelectorType.GROUP?z.ROLE.member:e.isEditing||"inviteModal"===e.inviteModalContent?U.ROLE.edit:U.ROLE.readonly;var u=Y(l.a.useState(i?i.role:r),2),s=u[0],f=u[1],p=Y(l.a.useState(i?i.allow_outsider:L.ALLOW_OUTSIDER.NORMAL),2),h=p[0],d=p[1],y=L.APPROVE.noneed,m=Y(l.a.useState(i?i.approve:y),2),v=m[0],b=m[1],w=Y(l.a.useState(),2),_=w[0],O=w[1],S=Y(l.a.useState(!1),2),E=S[0],k=S[1],j=Y(l.a.useState(i?i.organization_user_role:F.ROLE.member),2),x=j[0],T=j[1],P=l.a.useRef(!1),N=function(t){return k(!0),e.getToken({approve:v,force:t,role:s,allow_outsider:h,organization_user_role:x}).then((function(t){return b(t.approve),f(t.role),d(t.allow_outsider),T(t.organization_user_role),O(n(t)),W("save",o,a,e.inviteModalContent,t),k(!1),t})).catch((function(e){k(!1),c.a.error(e.message)}))};l.a.useEffect((function(){N()}),[]);var D=function(){var t,r=(t=B().mark((function t(){return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k(!0),t.next=3,e.deleteTokens();case 3:return t.abrupt("return",N(!0).then((function(){setTimeout((function(){k(!1),c.a.success(__("重置邀请链接成功"))}),500)})).catch((function(){k(!1)})));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){q(a,n,o,i,c,"next",e)}function c(e){q(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return{state:{joinUrl:_,loading:E,targetType:o,roleType:s,allowOutsider:h,approve:v,memberType:x},onCopyUrl:function(t){var r=e.getCopyText(_,s);t.currentTarget&&t.currentTarget.setAttribute("data-url",r),R()(r,{format:"text/plain"}),c.a.success(__("链接已复制"))},onRefreshLink:D,onCheckChange:function(t){var r=t?L.APPROVE.need:L.APPROVE.noneed;e.updateToken({approve:r,role:s,allow_outsider:h,organization_user_role:x}).then((function(){b(r),W("save",o,a,e.inviteModalContent,{allow_outsider:h,approve:r,organization_user_role:x,role:s}),P.current=!0})).catch((function(e){c.a.error(e.message)}))},onAllowOutsiderChange:function(t){var r=t?L.ALLOW_OUTSIDER.ALLOW:L.ALLOW_OUTSIDER.NORMAL;e.getToken({approve:v,role:s,allow_outsider:r,organization_user_role:x}).then((function(t){d(t.allow_outsider),O(n(t)),W("save",o,a,e.inviteModalContent,t),P.current=!0})).catch((function(e){c.a.error(e.message)}))},onMemberTypeChange:function(t){e.getToken({approve:v,role:s,allow_outsider:h,organization_user_role:t}).then((function(t){T(t.organization_user_role),O(n(t)),W("save",o,a,e.inviteModalContent,t),P.current=!0})).catch((function(e){c.a.error(e.message)}))},onRoleTypeChange:function(t){e.getToken({approve:v,role:t,allow_outsider:h,organization_user_role:x}).then((function(t){f(t.role),O(n(t)),W("save",o,a,e.inviteModalContent,t),P.current=!0})).catch((function(e){c.a.error(e.message)}))},triggerFakeLoading:function(){P.current&&(k(!0),setTimeout((function(){k(!1)}),500),P.current=!1)}}}function Q(e){var t,r,c,u,s=e.moreSettingOptions,f=e.inviteModalContent,p=e.onBackShare,y=e.toggleTitle,m=e.toggleCollaboratorList,v=e.organization,g=e.group,b=e.inviteSelectorType,S=K(e),E=S.state,k=S.onCopyUrl,j=S.onRefreshLink,x=S.onCheckChange,P=S.onAllowOutsiderChange,N=S.onMemberTypeChange,I=S.onRoleTypeChange,R=S.triggerFakeLoading,F=Y(l.a.useState(!1),2),M=F[0],B=F[1],q=Y(l.a.useState(""),2),V=q[0],W=q[1],Q=Y(l.a.useState(""),2),H=Q[0],J=Q[1],$=Y(l.a.useState(!1),2),Z=$[0],X=$[1],ee=l.a.useMemo((function(){var e=null!=v&&v.id?A.a.ORG:A.a.PERSON;return Object(w.a)()?e:A.a.INTERNAL}),[v]),te=[{type:"collaborationSet",title:__("协作权限"),defaultValue:E.roleType===U.ROLE.edit?__("可编辑"):__("可阅读"),icon:"icon-limits"},{type:"allowOutsiderSet",title:__("邀请空间外人员"),hidden:!(ee===A.a.ORG&&b===G.memberSelectorType.BOOK),defaultValue:E.allowOutsider===L.ALLOW_OUTSIDER.NORMAL?__("关闭"):__("已开启"),icon:"icon-range"},{type:"needCheckSet",title:__("需要审批确认加入"),defaultValue:E.approve===L.APPROVE.need?__("已开启"):__("关闭"),icon:"icon-verify"},{type:"resetLinkSet",title:__("重置邀请链接"),noDetail:!0,icon:"antd-sync"}],re=[{type:"groupMemberSet",title:__("人员角色"),defaultValue:E.roleType===z.ROLE.member?__("成员"):__("只读成员"),icon:"icon-limits"},{type:"allowOutsiderSet",title:__("邀请空间外人员"),hidden:Object(_.f)(g,v)||ee===A.a.INTERNAL,defaultValue:E.allowOutsider===L.ALLOW_OUTSIDER.NORMAL?__("关闭"):__("已开启"),icon:"icon-range"},{type:"needCheckSet",title:__("需要审批确认加入"),defaultValue:E.approve===L.APPROVE.need?__("已开启"):__("关闭"),icon:"icon-approval"},{type:"resetLinkSet",title:__("重置邀请链接"),noDetail:!0,icon:"antd-sync"}],ne=function(e,t){"inviteModal"===f&&y(!1),"collaboratorPanel"===f&&m(!1),B(!0),W(e),J(t)};return l.a.createElement("div",{className:C.a.sharePanel},M?l.a.createElement(D,{organization:v,panelType:V,panelTitle:H,state:E,moreSettingOptions:s,handleRoleTypeChange:I,handleMemberTypeChange:N,handleAllowOutsiderChange:P,handleCheckChange:x,onBack:function(){"inviteModal"===f&&y(!0),"collaboratorPanel"===f&&m(!0),B(!1),R()}}):l.a.createElement(l.a.Fragment,null,"inviteModal"===f&&(r=b===G.memberSelectorType.GROUP,c=r?__("通过链接邀请添加成员"):__("通过链接邀请参与协作"),u=r?__("拿到链接的人可成为团队成员、只读成员"):__("拿到链接的人可获得编辑、阅读等权限"),l.a.createElement("div",{className:C.a.main},l.a.createElement("div",{className:C.a.mainIntro},l.a.createElement(i.a.Item,{className:C.a.inviteItem},l.a.createElement(i.a.Item.Meta,{avatar:l.a.createElement(d.b,{className:h()(C.a.itemIcon,C.a.appointIcon),name:"nav-invite",width:40}),title:c,description:u}))),l.a.createElement("div",{className:C.a.moreConfigs},l.a.createElement(n.a,{spinning:E.loading,delay:150},l.a.createElement("div",{className:C.a.shareLinkSet},l.a.createElement(a.a,{className:C.a.shareLinkShow,disabled:!0,placeholder:E.joinUrl}),l.a.createElement(o.a,{className:C.a.shareButton,onClick:function(e){E.loading||k(e)}},__("复制链接")))),l.a.createElement(O.a,{settings:r?re:te,onClick:function(e,t){"resetLinkSet"===e?j():ne(e,t)}})))),"inviteSharePanel"===f&&(t=__("拿到链接的人可获得{linkAbility}权限",{linkAbility:E.roleType===U.ROLE.edit?__("编辑"):__("阅读")}),l.a.createElement("div",{className:T.a.shareDetailSettingPanel},l.a.createElement("div",{className:T.a.title,onClick:function(){return p()}},l.a.createElement(d.b,{className:T.a.backIcon,name:"arrow-down",width:20}),__("链接添加协作者")),l.a.createElement("p",{className:T.a.linkTitleDesc},t),l.a.createElement(n.a,{spinning:E.loading,delay:150},l.a.createElement("div",{className:T.a.linkContentArea},l.a.createElement(a.a,{className:T.a.copyLink,disabled:!0,placeholder:E.joinUrl}),l.a.createElement(o.a,{className:T.a.inviteCopyBtn,size:"large",type:"primary",onClick:function(e){E.loading||k(e)}},__("复制链接")))),l.a.createElement("div",{className:T.a.moreConfigSettings},l.a.createElement(O.a,{settings:te,onClick:function(e,t){"resetLinkSet"===e?j():ne(e,t)}})))),"collaboratorPanel"===f&&function(){var e=__("拿到链接的人可获得{linkAbility}权限",{linkAbility:E.roleType===U.ROLE.edit?__("编辑"):__("阅读")});return l.a.createElement("div",{className:h()(T.a.shareDetailSettingPanel,C.a.inviteSelector)},l.a.createElement("p",{className:T.a.linkTitleDesc,style:{marginTop:0}},e),l.a.createElement(n.a,{spinning:E.loading,delay:150},l.a.createElement("div",{className:T.a.linkContentArea},l.a.createElement(a.a,{className:T.a.copyLink,disabled:!0,placeholder:E.joinUrl}),l.a.createElement(o.a,{className:T.a.inviteCopyBtn,size:"large",type:"primary",onClick:function(e){E.loading||k(e)}},__("复制链接")))),l.a.createElement("div",{className:T.a.moreConfigToggler},l.a.createElement("span",{className:T.a.moreConfigsTip,onClick:function(){return X((function(e){return!e}))}},__("高级设置"),l.a.createElement(d.b,{name:"arrow-down",className:T.a.expandIcon,"data-activated":Z,size:16}))),Z&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:T.a.moreConfigSettings},l.a.createElement(O.a,{settings:te,onClick:function(e,t){"resetLinkSet"===e?j():ne(e,t)}}))))}()))}Q.propTypes={getJoinUrl:f.a.func,getToken:f.a.func,updateToken:f.a.func,deleteTokens:f.a.func,getCopyText:f.a.func,inviteSelectorType:f.a.string,inviteModalContent:f.a.oneOf(["inviteModal","inviteSharePanel","collaboratorPanel"]),onBackShare:f.a.func,toggleCollaboratorList:f.a.func,toggleTitle:f.a.func,moreSettingOptions:f.a.array,organization:f.a.object,group:f.a.object,isEditing:f.a.bool,inviteTarget:f.a.object},Q.defaultProps={inviteModalContent:"inviteModal"};t.a=Q},2723:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){return e?(e=e.toLowerCase(),{organization:__("空间"),group:__("团队"),book:__("知识库"),doc:__("文档"),thread:__("话题"),sheet:__("表格"),resource:__("资源知识库"),design:__("图集"),column:__("专栏")}[e]||__("文档")):""}},528:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(167),i=r.n(a),c=r(2723),u=r(2019),l=r(165),s=r(75),f=r(259),p=r(2022),h=r(1850),d=r(270);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(){g=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:S(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function p(){}function h(){}function d(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(L([])));b&&b!==t&&r.call(b,a)&&(m=b);var w=d.prototype=p.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==y(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function S(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return T()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=L,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:L(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function b(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){b(a,n,o,i,c,"next",e)}function c(e){b(a,n,o,i,c,"throw",e)}i(void 0)}))}}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function O(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y(t)?t:String(t)}var E=d.memberSelectorType.GROUP,k=d.memberSelectorType.BOOK,j=d.memberSelectorType.SIMPLE_WITH_ROLE,x=d.memberSelectorType.SIMPLE,L=d.memberSelectorType.DOC,T=d.memberSelectorType.LIST,P=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),O(this,"serializeUserPostBody",(function(t){return e.serializeUserPostBody(t)})),O(this,"enableDepthAll",(function(){return!1})),O(this,"enableDepSelect",(function(){var e=window.appData.isYuque;return t.type===x||!e&&[E,k,j].includes(t.type)})),O(this,"adpatUIListData",function(){var e=w(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O(this,"adpatUINavData",function(){var e=w(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O(this,"getRoles",(function(e){return Object(p.c)(e)})),O(this,"isDepartment",(function(t){return e.isDepartment(t)})),O(this,"isUser",(function(t){return e.isUser(t)})),O(this,"getRealUsers",(function(e){return e})),O(this,"getAddRoles",(function(){var e=t.getRoles(t.type),r=t.getSupportRoles();return e.filter((function(e){return r.includes(e.value)}))})),O(this,"getInviteAddRoles",w(g().mark((function e(){var r,n,a,i,c,u;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.appData.isYuque,a=t.getRoles(t.type),i=t.getSupportRoles(),c=a.filter((function(e){return i.includes(e.value)})),!t.organization||!t.organization.id){e.next=8;break}return e.next=7,s.a.canIndirectAddOrgMember(t.organization);case 7:u=e.sent;case 8:return c=n&&null!==(r=t.organization)&&void 0!==r&&r.id?(c=c.map((function(e){return v(v({},e),{},{roleTip:t.type===k?__("仅空间内获得链接的人可获得权限"):__("仅空间内获得链接的人可成为"),allow_outsider:f.ALLOW_OUTSIDER.NORMAL,disabled:!1,unique:"".concat(e.key,"-NOT-ALLOW_OUTSIDER")})}))).concat(c.map((function(e){return v(v({},e),{},{roleTip:t.type===k?__("所有获得链接的人可获得权限"):__("所有获得链接的人可成为"),allow_outsider:f.ALLOW_OUTSIDER.ALLOW,disabled:!u,disabled_text:o.a.createElement(o.a.Fragment,null,__("管理员已关闭空间外人员添加权限，请联系管理员开启。"),o.a.createElement("a",{target:"_blank",href:"https://www.yuque.com/yuque/rvzzxz/csb5nu"},__("查看帮助"))),unique:"".concat(e.key,"-ALLOW_OUTSIDER")})}))):c.map((function(e){return v(v({},e),{},{roleTip:t.type===k?__("访问链接即可获得权限"):__("通过链接邀请成为"),allow_outsider:f.ALLOW_OUTSIDER.NORMAL,disabled:!1,unique:"".concat(e.key,"-NOT-ALLOW_OUTSIDER")})})),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))),O(this,"getUserCount",(function(e){var t=0;return e.forEach((function(e){e.user_count?t+=e.user_count:t+=1})),t})),this.options=r,this.type=r.type,this.list=r.list,this.doc=r.doc,this.book=r.book,this.group=r.group,this.organization=r.organization,this.target=r[this.type],this.typeName=Object(c.a)(this.target?this.target.type:this.type),this.type===E&&this.target&&l.a.isPublication(this.target)&&(this.typeName=__("知识小组")),r.members&&r.members.length&&this.setUid(r.members),this.members=r.members||[],[j,x].includes(this.type)&&(this.me=r.me),this.selected=[],this.enable=!0,this.validRoles=this.getAddRoles(),this.inviteValidRoles=this.getInviteAddRoles()}var t,r,n,a;return t=e,r=[{key:"check",value:(a=w(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.warn("not implement");case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"getIconUrl",value:function(){return null}},{key:"getIconName",value:function(){return null}},{key:"setUid",value:function(e){if(e)return Array.isArray(e)?Object(u.format)(e):Object(u.formatOne)(e)}},{key:"serialize",value:function(e){var t=v(v({},e),{},{users:this.adpatUIListData(this.setUid(e.users)),navs:this.adpatUINavData(this.setUid(e.parent||e.parents))});return this.enableDepthAll()&&(void 0!==e.user_count&&(t.user_count=e.user_count),e.depthUsers&&(t.depthUsers=this.adpatUIListData(this.setUid(e.depthUsers)))),t}},{key:"getSupportRoles",value:function(){var e=[],t=p.a[this.type];return this.type===E?e=[t.member,t.readonly]:this.type===k||this.type===L?e=[t.edit,t.readonly]:this.type===T&&(e=[t.member]),this.options.supportRoles||e}},{key:"getMembers",value:function(e){return e?this.members.filter((function(t){return t.role===e})):this.members}},{key:"getMemberByUser",value:function(e){return this.members?this.members.find((function(t){return Object(h.b)(t.user,e)})):null}},{key:"isOwner",value:function(){return!1}},{key:"isMember",value:function(){return!1}},{key:"isMemberOwner",value:function(){return!1}}],n=[{key:"serializeUserPostBody",value:function(e){var t=["id","user_id","role","login","workid","work_id","name","provider_type","provider_userid"];if(Array.isArray(e))return e.map((function(e){return i()(e,t)})).map((function(e){return e.workid=e.workid||e.work_id,e}));var r=i()(e,t);return r.workid=e.workid||e.work_id,r}}],r&&_(t.prototype,r),n&&_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();O(P,"isDepartment",(function(e){return e.type&&"department"===e.type.toLowerCase()})),O(P,"isUser",(function(e){return!e.type||"user"===e.type.toLowerCase()})),t.a=P},617:function(e,t,r){"use strict";t.a={sharePanel:"styles-module_sharePanel_s5kBA",main:"styles-module_main_TU-q3",mainIntro:"styles-module_mainIntro_ZLSq3",firstItem:"styles-module_firstItem_PMwrF",inviteItem:"styles-module_inviteItem_bvtuN",shareDescText:"styles-module_shareDescText_djXr6",itemTitle:"styles-module_itemTitle_L8kbw",memberBadge:"styles-module_memberBadge_VNook",memberAbleIcon:"styles-module_memberAbleIcon_xgapq",itemIcon:"styles-module_itemIcon_QRd1N",appointIcon:"styles-module_appointIcon_FKaJv",publicIcon:"styles-module_publicIcon_93Lmu",inviteIconLi:"styles-module_inviteIconLi_Yti7e",dot:"styles-module_dot_mUU81",inviteIcon:"styles-module_inviteIcon_0m0Q-",shareLinkSet:"styles-module_shareLinkSet_gw+kY",description:"styles-module_description_mY+Fb",shareLinkShow:"styles-module_shareLinkShow_yHgY+",qrCode:"styles-module_qrCode_S96ih",shareButton:"styles-module_shareButton_9iiSX",sharePublic:"styles-module_sharePublic_NAGqa",shareQrCode:"styles-module_shareQrCode_klQhV",shareQrCodeIcon:"styles-module_shareQrCodeIcon_yeZKy",moreConfigs:"styles-module_moreConfigs_HY+LU",popover:"styles-module_popover_RNBo9"}}}]);