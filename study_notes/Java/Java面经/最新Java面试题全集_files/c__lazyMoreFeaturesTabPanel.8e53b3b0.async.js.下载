/*! For license information please see c__lazyMoreFeaturesTabPanel.8e53b3b0.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[140,9,14,27,86,97,146],{1718:function(e,t){e.exports=function(e){return null==e}},1731:function(e,t,r){"use strict";r(3139);var n=r(1852),o=r(0),a=r.n(o),i=r(8),c=r.n(i),u=r(13),l=r.n(u),s=r(90),f=r.n(s),d=r(2696),p=r(533),h=r(112);r(2015);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}var y=["className","emptyView","onLoadMore","dataSource","renderItem","loading","showLoadingMore","pagination","children","justify","customItem","loadOnScroll","listContainer"];function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}function w(){w=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var y={};u(y,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==t&&r.call(g,a)&&(y=g);var b=h.prototype=d.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==m(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},_(j.prototype),u(j.prototype,i,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function j(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function E(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){j(a,n,o,i,c,"next",e)}function c(e){j(a,n,o,i,c,"throw",e)}i(void 0)}))}}function O(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var S=a.a.forwardRef((function(e,t){var r=e.className,o=e.emptyView,i=e.onLoadMore,c=e.dataSource,u=e.renderItem,s=e.loading,f=e.showLoadingMore,m=e.pagination,v=e.children,b=e.justify,j=e.customItem,S=e.loadOnScroll,x=e.listContainer,k=O(e,y),T=e.loadMoreText,C=void 0===T?Object(p.a)("查看更多"):T,P=s;"boolean"==typeof P&&(P={spinning:P});var L=P&&P.spinning,I=Object(d.useInifiniteScroll)(E(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S||!i){e.next=3;break}return e.next=3,i();case 3:case"end":return e.stop()}}),e)}))),{root:x}),A=I.loading,N=I.refCallback;S&&(C=Object(p.a)("到底了"));var D=c.length&&f?a.a.createElement("div",{className:"larkui-list-block-more"},L&&a.a.createElement(h.a,_({justify:"block"},P)),!L&&a.a.createElement("a",{className:"larkui-list-block-more-btn",ref:N,onClick:function(e){e.preventDefault(),i&&i()}},A?Object(p.a)("加载中"):C)):null;if(L&&!D)return a.a.createElement("div",{className:l()("larkui-list","larkui-list-loading")},a.a.createElement(h.a,_({justify:"block"},P)));var R=m;return R&&(R=m.total<=m.pageSize?null:g({showSizeChanger:!1},R)),a.a.createElement(n.b,_({ref:t,className:l()(r,"larkui-list",{"larkui-list-justify-block":"block"===b}),loading:!1,loadMore:D,pagination:R,dataSource:c.length>0?c:e.emptyView?["empty"]:[],renderItem:function(e,t){if("empty"===e)return a.a.createElement("div",{className:"blankslate"},o);var r=u(e,t);return r?j?r:a.a.createElement(n.b.Item,{key:e.id},r):a.a.createElement("div",null)}},k),v)}));S.defaultProps={dataSource:[],loading:!1,showLoadingMore:!1,justify:"flex"},S.propTypes=g(g({},n.b.ListProps),{},{className:c.a.string,emptyView:c.a.node,onLoadMore:c.a.func,dataSource:c.a.array,renderItem:c.a.func,loading:c.a.oneOfType([c.a.bool,c.a.object]),showLoadingMore:c.a.bool,pagination:c.a.object,children:c.a.node,justify:c.a.oneOf(["block","flex"]),customItem:c.a.bool,loadOnScroll:c.a.bool,listContainer:c.a.node}),f()(S,n.b),t.a=S},1779:function(e,t,r){var n=r(399),o=r(155);e.exports=function(e,t){var r=-1,a=o(e)?Array(e.length):[];return n(e,(function(e,n,o){a[++r]=t(e,n,o)})),a}},1847:function(e,t,r){"use strict";r(3146);var n=r(1992);r(2442);t.a=n.a},1850:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return a}));var n=r(2019);function o(e,t){return!(!e||!t)&&(e.uid&&t.uid?e.uid===t.uid:e.login&&t.login?e.login===t.login:!(!t.provider_userid||!e.provider_userid)&&(e.provider_userid===t.provider_userid&&e.provider_type===t.provider_type))}function a(e){var t=e.members||e.collaborators||e.collaborations;return t?Object(n.format)(t.map((function(e){return e.user}))):[]}},1972:function(e,t,r){var n=r(155),o=r(103);e.exports=function(e){return o(e)&&n(e)}},1976:function(e,t,r){"use strict";var n=r(105),o=r(253),a=r(38),i=r(75),c=r(530),u=r.n(c),l=r(528),s=r(137);var f=r(1850),d=r(270);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(){v=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function h(){}function m(){}var y={};u(y,a,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(T([])));b&&b!==t&&r.call(b,a)&&(y=b);var _=m.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==p(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=m,n(_,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:h,configurable:!0}),h.displayName=u(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(j.prototype),u(j.prototype,i,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(_),u(_,c,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=b(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function b(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function j(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){w(a,n,o,i,c,"next",e)}function c(e){w(a,n,o,i,c,"throw",e)}i(void 0)}))}}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var o=k(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}(this,r)}}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function T(e,t,r){return(t=C(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}var P=d.memberSelectorType.GROUP,L=d.memberSelectorType.BOOK,I=d.memberSelectorType.DOC,A=d.memberSelectorType.SIMPLE_WITH_ROLE,N=d.memberSelectorType.LIST,D=d.memberSelectorType.SIMPLE,R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(d,e);var t,r,c,l=S(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),T(x(t=l.call(this,e)),"_getSubmitBaseParams",(function(){return t.type===P?{group_id:t.target_id}:t.type===L||t.type===I?{target_id:t.target_id,target_type:t.target_type,status:o.STATUS.joined}:t.type===N?{list_id:t.target_id}:{}})),T(x(t),"getRealUsers",function(){var e=j(v().mark((function e(r){var n,o,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dataSourceServices){e.next=2;break}return e.abrupt("return",r);case 2:n=g(t.dataSourceServices),e.prev=3,n.s();case 5:if((o=n.n()).done){e.next=13;break}if(!(a=o.value).getRealUsers){e.next=11;break}return e.next=10,a.getRealUsers(r);case 10:r=e.sent;case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()),T(x(t),"getUserCount",(function(e){var r;if(t.dataSourceServices){var n,o=g(t.dataSourceServices);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.getUserCount){r=a.getUserCount(e);break}}}catch(e){o.e(e)}finally{o.f()}}return void 0===r&&null!=e&&e.length?e.length:r||0})),T(x(t),"submit",function(){var e=j(v().mark((function e(r,n,o){var a,i,c,l;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,window.appData.isYuque||(i=r.find(t.isDepartment))&&(r=r.filter((function(e){return!t.isDepartment(e)}))),e.next=4,t.getRealUsers(r);case 4:return r=e.sent,c=u()(y(y({},t._getSubmitBaseParams()),{},{users:t.serializeUserPostBody(r),department_id:null===(a=i)||void 0===a?void 0:a.id,onlyStaff:o})),n&&(c.role=n.value),e.next=9,t.createProxy(c);case 9:if(!((l=e.sent).success_count<=0&&l.errors&&l.errors.length>0)){e.next=12;break}return e.abrupt("return",{status:"error",message:__("[ {members} ] 添加失败; 错误原因: {message}",{members:l.errors.map((function(e){return e.name})).join(", "),message:l.message}),data:l});case 12:if(0!==l.success_count&&0!==l.length){e.next=14;break}return e.abrupt("return",{status:"warn",message:__("选择的成员已被添加")});case 14:return e.abrupt("return",{status:"success",message:__("成功添加了 {count} 位成员",{count:l.success_count||l.length}),data:l});case 15:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),T(x(t),"checkValid",(function(e){return t.isMember(e)?{status:"error",message:__("成员已存在")}:{status:"success",message:"ok"}})),T(x(t),"searchUser",function(){var e=j(v().mark((function e(r){var n,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={q:r}).include_unconfirmed_corp_account=!0,window.appData.organization&&(n.optional_properties="profile"),e.next=5,a.a.users.complete(n);case 5:return o=e.sent,e.abrupt("return",t.dealUsers(o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T(x(t),"searchUsersByIds",function(){var e=j(v().mark((function e(r){var n,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={ids:r},e.next=3,a.a.users.listByIds(n);case 3:return o=e.sent,e.abrupt("return",t.dealUsers(o));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T(x(t),"dealUsers",(function(e){return e=e.map((function(e){return t.setUid(e),e.type="User",e.profile&&e.profile.status===n.STATUS.joined&&(e.dep=e.profile.department||i.a.getMemberRoleName(e.profile.role),e.avatar_url=e.profile.orgAvatar||e.avatar||e.avatar_url),e}))})),t.dataSourceServices=e.dataSourceServices,t}return t=d,c=[{key:"create",value:function(e){var t=new d(e);return t.init(),t}}],(r=[{key:"init",value:function(){var e;this.type===P?(this.group.members&&(this.members=Object(f.a)(this.group)),this.target_id=this.group.id,this.target_type="Group",this.abilities=this.group.abilities,this.createProxy=a.a.groupUsers.create):this.type===L?(this.book.collaborators&&(this.members=Object(f.a)(this.book)),this.target_id=this.book.id,this.target_type="Book",this.abilities=this.book.abilities,this.createProxy=a.a.collaborations.create):this.type===I?(this.doc.collaborations&&(this.members=Object(f.a)(this.doc)),this.target_id=this.doc.id,this.target_type="Doc",this.createProxy=a.a.collaborations.create,this.abilities=this.doc.abilities):[A,D].includes(this.type)&&(this.members=[].concat(h(this.members),[this.me])),this.status="organization"===(e=this.type)?n.default.STATUS:"group"===e?s.default.STATUS:"book"===e||"doc"===e?o.default.STATUS:void 0}},{key:"isOwner",value:function(){return this.abilities.manage}},{key:"isMember",value:function(e){return!(!this.members||0===this.members.length)&&this.members.some((function(t){return Object(f.b)(t,e)}))}}])&&E(t.prototype,r),c&&E(t,c),Object.defineProperty(t,"prototype",{writable:!1}),d}(l.a);T(R,"id","search"),T(R,"title",__("搜索添加"));t.a=R},2019:function(e,t){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){u=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.formatOne=function(e){if(!e)return e;var t=e;return t.user&&(t=i(i({},e),e.user)),t.uid||(t.work_id?e.uid="".concat(t.work_id):t.id?e.uid="".concat(t.id):t.provider_type&&t.provider_userid&&(e.uid="".concat(t.provider_type,"_").concat(t.provider_userid))),e},t.format=function(e){var r,o=n(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;t.formatOne(a)}}catch(e){o.e(e)}finally{o.f()}return e}},2022:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"c",(function(){return d})),r.d(t,"b",(function(){return p}));var n=r(105),o=r(137),a=r(253),i=r(1739),c=r.n(i);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s={organization:n.default.ROLE,group:o.default.ROLE,book:a.default.ROLE,doc:a.default.ROLE,list:c.a.ROLE};function f(e){var t=s[e],r={};return"organization"===e?r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"owner"===r&&(n.label=__("管理员")),"member"===r&&(n.label=__("成员")),"outsourcer"===r&&(n.label=__("外部联系人")),e[r]=n,e}),{}):"group"===e?r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"owner"===r&&(n.label=__("管理员")),"member"===r&&(n.label=__("成员")),"readonly"===r&&(n.label=__("只读成员")),e[r]=n,e}),{}):"book"===e||"doc"===e?r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"readonly"===r&&(n.label=__("可阅读"),e[r]=n),"edit"===r&&(n.label=__("可编辑"),e[r]=n),e}),{}):"list"===e&&(r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"owner"===r&&(n.label=__("管理员")),"member"===r&&(n.label=__("成员")),e[r]=n,e}),{})),r}function d(e){var t=f(e);return["owner","member","edit","readonly","outsourcer"].map((function(e){return t[e]})).filter((function(e){return!!e}))}function p(e,t){var r,n=f(e),o=u(Object.keys(n).map((function(e){return n[e]})));try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.value===t)return a}}catch(e){o.e(e)}finally{o.f()}return{}}},2050:function(e,t,r){"use strict";var n=r(38),o=r(75),a=r(259),i=r(105),c=r(253);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(){l=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function f(e,t,r,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function m(){}function y(){}var v={};s(v,a,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(T([])));b&&b!==t&&r.call(b,a)&&(v=b);var _=y.prototype=h.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function o(n,a,i,c){var l=d(e[n],e,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==u(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=d(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=y,n(_,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:m,configurable:!0}),m.displayName=s(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(j.prototype),s(j.prototype,i,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(f(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(_),s(_,c,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function s(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,r)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function y(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(b,e);var t,r,u,m,v,g=p(b);function b(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return y(h(e=g.call.apply(g,[this].concat(r))),"getUrl",(function(t,r){if(e.joinToken=t||e.joinToken,e.joinToken){if("doc"===e.type){var n="".concat(window.location.origin,"/g/").concat(e.group.login,"/").concat(e.book.slug,"/").concat(e.doc.slug,"/collaborator/join?token=").concat(t.token),o="/".concat(e.group.login,"/").concat(e.book.slug,"/").concat(e.doc.slug,"/edit");return r&&t.role===c.ROLE.edit?"".concat(n,"&goto=").concat(encodeURIComponent(o)):n}return"book"===e.type?"".concat(window.location.origin,"/g/").concat(e.group.login,"/").concat(e.book.slug,"/collaborator/join?token=").concat(t.token):"group"===e.type?"".concat(window.location.origin,"/groups/").concat(e.group.login,"/join?token=").concat(t.token):"organization"===e.type?"".concat(window.location.origin,"/r/organizations/").concat(e.organization.login,"/join?token=").concat(t.token):"list"===e.type?"".concat(window.location.origin,"/r/list/").concat(e.list.id,"/join?token=").concat(t.token):null}})),y(h(e),"getCopyText",(function(t,r){return r===c.ROLE.edit?__("{url}# 邀请你共同编辑{typeName}《{targetName}》",{targetName:e.target.name||e.target.title,typeName:e.typeName,url:t}):__("{url}# 《{targetName}》",{targetName:e.target.name||e.target.title,url:t})})),y(h(e),"getOrgTipText",(function(){return e.organization?e.canPublic?"book"===e.type?__("获得链接的所有人（含空间外人员）可获得{type}的权限，空间外人员将自动成为{memberType}。",{type:e.typeName,memberType:o.a.isYuqueAddressBook()?__("空间成员"):__("空间外部联系人")}):__("获得链接的所有人（含空间外人员）可加入{type}，空间外人员将自动成为{memberType}。",{type:e.typeName,memberType:o.a.isYuqueAddressBook()?__("空间成员"):__("空间外部联系人")}):"book"===e.type?__("仅获得链接的空间成员可获得{type}的权限。",{type:e.typeName}):__("仅获得链接的空间成员可加入{type}。",{type:e.typeName}):""})),y(h(e),"getMoreSettingOptions",(function(){return e.organization&&e.organization.id?e.organization.isPremium&&o.a.isYuqueAddressBook()?[{value:i.ROLE.member,label:__("空间成员")},{value:i.ROLE.outsourcer,label:__("外部联系人")}]:e.organization.isPremium&&!o.a.isYuqueAddressBook()?[{value:i.ROLE.outsourcer,label:__("外部联系人")}]:[{value:i.ROLE.member,label:__("空间成员")}]:null})),y(h(e),"getToken",(function(t){var r=t.approve,n=t.force,o=t.role,c=t.allow_outsider,u=void 0===c?a.ALLOW_OUTSIDER.NORMAL:c,l=t.organization_user_role,s=void 0===l?i.ROLE.member:l;if(e.proxy){var f={id:e.target.id,allow_outsider:u,organization_user_role:s};return null!=r&&(f.approve=r),null!=n&&(f.force=n),null!=o&&(f.role=o),e.proxy.token(f).then((function(t){return e.joinToken=t,t}))}})),y(h(e),"updateToken",(function(t){var r=t.approve,n=t.role,o=t.allow_outsider,c=void 0===o?a.ALLOW_OUTSIDER.NORMAL:o,u=t.organization_user_role,l=void 0===u?i.ROLE.member:u;if(e.proxy){var s={id:e.target.id,allow_outsider:c,organization_user_role:l};return null!=r&&(s.approve=r),null!=n&&(s.role=n),e.proxy.updateToken(s).then((function(t){return e.joinToken=t,t}))}})),y(h(e),"deleteTokens",(function(){if(e.proxy)return e.proxy.deleteTokens({id:e.target.id}).then((function(e){return e}))})),e}return t=b,r=[{key:"init",value:function(){this.target&&(this.joinToken=this.target.joinToken),"organization"===this.type?this.proxy=n.a.organizations:"group"===this.type?this.proxy=n.a.groups:"book"===this.type?this.proxy=n.a.books:"doc"===this.type&&(this.proxy=n.a.docs)}},{key:"check",value:function(){this.target||(this.enable=!1)}},{key:"orgDataReady",value:(m=l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.organization){e.next=4;break}return e.next=3,o.a.canIndirectAddOrgMember(this.organization);case 3:this.canPublic=e.sent;case 4:case"end":return e.stop()}}),e,this)})),v=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=m.apply(e,t);function a(e){s(o,r,n,a,i,"next",e)}function i(e){s(o,r,n,a,i,"throw",e)}a(void 0)}))},function(){return v.apply(this,arguments)})}],u=[{key:"create",value:function(e){var t=new b(e);return t.check(),t.enable&&t.init(),t}}],r&&f(t.prototype,r),u&&f(t,u),Object.defineProperty(t,"prototype",{writable:!1}),b}(r(528).a);y(g,"id","invite"),y(g,"title",__("邀请添加")),t.a=g},2054:function(e,t,r){"use strict";var n={FEATURES:[{area:"GROUP_PAGE",enable:!0,type:"custom",tip_id:"feature_group_introduce",tip:__("功能说明"),createdAt:"2022-09-20"},{area:"WIKI_PAGE",enable:!0,type:"custom",tip_id:"feature_org_wiki_introduce",tip:__("功能说明"),createdAt:"2022-09-20"},{area:"GROUP_PAGE",enable:!0,type:"custom",tip_id:"feature_group_introduce",tip:__("功能说明"),createdAt:"2022-10-27"},{area:"GARDEN_PAGE",enable:!0,type:"custom",tip_id:"feature_garden_introduce",tip:__("功能说明"),createdAt:"2022-11-17"}]},o=r(38),a=r(177),i=n.FEATURES,c={readLiteFeatureGuide:function(e){if("function"==typeof navigator.sendBeacon){var t=new URLSearchParams;t.set("ctoken",Object(a.a)(window)),t.set("type",e.tip_id),navigator.sendBeacon("/api/mine/read_guide?".concat(t.toString()))}else o.a.mine.readGuide({type:e.tip_id});var r=e.containerSelector&&document.querySelector(e.containerSelector);if(r){var n=r.querySelector(".larkui-feature-guide");if(!n)return;n.style.display="none"}},readMiniFeatureGuide:function(e,t){var r=e.tip_id;o.a.mine.readGuide({type:r}),t({type:"guide/readFeatureGuide",payload:{tip_id:r}})},findFeatureGuide:function(e){var t=e.tip_id,r=e.type;return i.find((function(e){return e.tip_id===t&&e.type===r}))},needDisplayGuide:function(e){if("#guide"===window.location.hash)return!0;var t=window.appData.readTip;return!t||!t[e]}};c.FEATURES=i;t.a=c},2055:function(e,t,r){var n=r(271),o=r(206),a=r(1779),i=r(79);e.exports=function(e,t){return(i(e)?n:a)(e,o(t,3))}},2057:function(e,t,r){var n=r(206),o=r(155),a=r(142);e.exports=function(e){return function(t,r,i){var c=Object(t);if(!o(t)){var u=n(r,3);t=a(t),r=function(e){return u(c[e],e,c)}}var l=e(t,r,i);return l>-1?c[u?t[l]:l]:void 0}}},209:function(e,t,r){"use strict";t.a={shareChannels:"ShareChannels-module_shareChannels_Fj7uz",shareDetailSettingPanel:"ShareChannels-module_shareDetailSettingPanel_Tb1-J",collaborator:"ShareChannels-module_collaborator_zwUr+",inviteSelector:"ShareChannels-module_inviteSelector_MLpeR",bookPublicSetting:"ShareChannels-module_bookPublicSetting_g9ss9",bookPublicTitle:"ShareChannels-module_bookPublicTitle_ibP+w",title:"ShareChannels-module_title_XlZJC",backIcon:"ShareChannels-module_backIcon_83Ws3",titleDesc:"ShareChannels-module_titleDesc_qZGRV",bookPublicSet:"ShareChannels-module_bookPublicSet_nx19k",contentArea:"ShareChannels-module_contentArea_Z-Tnr",copyLinkWrapper:"ShareChannels-module_copyLinkWrapper_Q2A7Y",linkTitleDesc:"ShareChannels-module_linkTitleDesc_FeSu0",linkContentArea:"ShareChannels-module_linkContentArea_GKWjT",copyLink:"ShareChannels-module_copyLink_IlZgW",inviteCopyBtn:"ShareChannels-module_inviteCopyBtn_epAMy",moreConfigSettings:"ShareChannels-module_moreConfigSettings_JKYYT",moreConfigToggler:"ShareChannels-module_moreConfigToggler_mqaMJ",moreConfigsTip:"ShareChannels-module_moreConfigsTip_jTlCz",expandIcon:"ShareChannels-module_expandIcon_bV3yc",pwdBlock:"ShareChannels-module_pwdBlock_KfYSH",pwdLink:"ShareChannels-module_pwdLink_SegcP",pwdBtn:"ShareChannels-module_pwdBtn_gg7wH",passwordText:"ShareChannels-module_passwordText_n3Bh0",resetBtn:"ShareChannels-module_resetBtn_nZPwm",resetIcon:"ShareChannels-module_resetIcon_3V6MB",selectorItem:"ShareChannels-module_selectorItem_r0I84",selectorIcon:"ShareChannels-module_selectorIcon_vvFr+",disabledItem:"ShareChannels-module_disabledItem_A7eGW",switchTitle:"ShareChannels-module_switchTitle_+qovl",selectOption:"ShareChannels-module_selectOption_vwHzR",collaboratorContent:"ShareChannels-module_collaboratorContent_sFMAJ",shareQrCodeContent:"ShareChannels-module_shareQrCodeContent_1az6h",shareQrCodeArea:"ShareChannels-module_shareQrCodeArea_fIAQp",shareQrCodeButton:"ShareChannels-module_shareQrCodeButton_Gq3TN"}},2096:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(a=o.key,i=void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===n(i)?i:String(i)),o)}var a,i}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}e.exports=function(e){for(var t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(u,e);var t,r,n,c=i(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),c.apply(this,arguments)}return t=u,r&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e),r=arguments.length,n=new Array(r>1?r-1:0),c=1;c<r;c++)n[c-1]=arguments[c];return n.forEach((function(e){!function(e,t){Object.getOwnPropertyNames(t).forEach((function(r){if("constructor"!==r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n)}}))}(t.prototype,e.prototype)})),t}},2446:function(e,t,r){var n=r(391),o=r(206),a=r(448),i=r(357),c=r(1972),u=r(2681),l=a((function(e){var t=u(e);return c(t)&&(t=void 0),i(n(e,1,c,!0),o(t,2))}));e.exports=l},2449:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(2457),o=function(){return Promise.all([r.e(0),r.e(1),r.e(122)]).then(r.bind(null,3376)).then((function(e){return e.default}))};function a(){var e=Object(n.a)({loader:o,name:"TemplateSelector"}),t=e.loadSelector,r=e.showSelector;return{loadTemplateSelector:t,showTemplateSelector:function(e){return r(e,{width:e.isDesktop?1100:1140,maskClosable:!0,centered:!0})},contextHolder:e.contextHolder}}},2457:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(0),o=r(433),a=r(252),i=function(e){var t=e.loader,r=n.useRef(null);return function(){return r.current?Promise.resolve(r.current):t().then((function(e){return r.current=e,r.current})).catch((function(e){return console.error(e.stack)}))}},c={modal:"styles-module_modal_8nT+9"};function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(){l=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function f(e,t,r,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function m(){}function y(){}var v={};s(v,a,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(T([])));b&&b!==t&&r.call(b,a)&&(v=b);var _=y.prototype=h.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function o(n,a,i,c){var l=d(e[n],e,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==u(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=d(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=y,n(_,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:m,configurable:!0}),m.displayName=s(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(j.prototype),s(j.prototype,i,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(f(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(_),s(_,c,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e){var t=e.loader,r=e.name,u=h(o.a.useModal(),2),s=u[0],d=u[1],m=i({loader:t}),y=function(){var e,t=(e=l().mark((function e(t,o){var i,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:if(i=e.sent){e.next=6;break}return console.error("SelectorComponent for ".concat(r," load failed")),e.abrupt("return");case 6:return u=new Promise((function(e){var r=s.info({}),u=function(){var e,n;r.destroy(),null==t||null===(e=t.onClose)||void 0===e||e.call(t),null==o||null===(n=o.afterClose)||void 0===n||n.call(o)},l=f(f({},t),{},{onSelect:function(t){e(t),u()},onClose:function(){e(void 0),u()}});r.update(f(f({className:c.modal,icon:null,centered:!0,cancelText:""},o),{},{content:n.createElement(a.a,null,n.createElement(i,l))}))})),e.next=9,u;case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){p(a,n,o,i,c,"next",e)}function c(e){p(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();return{loadSelector:function(){return m()},showSelector:y,contextHolder:d}}},2469:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(8),i=r.n(a),c=(r(95),r(49)),u=(r(197),r(36));function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e){return"larkui-member-selector-container".concat(e?"-".concat(e):"")},d=o.a.forwardRef((function(e,t){var r=e.selectors,a=l(Object(n.useState)(!0),2),i=a[0],s=a[1],d=l(Object(n.useState)(e.defaultTabKey),2),p=d[0],h=d[1],m=l(Object(n.useState)(460),2),y=m[0],v=m[1],g=function(e){h(e.key)};Object(n.useEffect)((function(){v(e.getWidth(p)||460)}),[p]),o.a.useImperativeHandle(t,(function(){return{toggleTitle:function(e){s(e)}}}));return o.a.createElement(c.a,{wrapClassName:f(),visible:e.visible,width:y,title:o.a.createElement(o.a.Fragment,null,i?o.a.createElement("div",{className:f("select-by")},o.a.createElement(u.a,{onSelect:g,selectedKeys:[p],mode:"horizontal"},r.map((function(e){return o.a.createElement(u.a.Item,{key:e.props.id},__("{title}",{title:e.props.title}))})))):null),footer:null,maskClosable:!1,onCancel:e.onCancel,onClose:e.onClose,destroyOnClose:!0},r.filter((function(e){return e.props.id===p}))[0])}));d.defaultProps={selectors:[],getWidth:function(){},onCancel:function(){},onClose:function(){}},d.propTypes={selectors:i.a.arrayOf(i.a.node),getWidth:i.a.func,defaultTabKey:i.a.string,onCancel:i.a.func,onClose:i.a.func,visible:i.a.bool};var p=d,h=(r(204),r(76)),m=(r(218),r(55)),y=(r(64),r(21)),v=(r(113),r(35)),g=(r(2442),r(1847)),b=r(695),_=r(42),w=(r(640),r(327)),j=(r(240),r(52)),E=r(457),O=r(232);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){return"larkui-member-selector-role"+(e?"-".concat(e):"")};function T(e){var t=e.roles,r=e.onChange,a=e.defaultRole||t&&t[0],i=S(Object(n.useState)(a),2),c=i[0],l=i[1];if(c){var s=function(e){l(e),r(e)};return"radio"===e.type?o.a.createElement("div",{className:k("role-select")},o.a.createElement(j.a,{size:"large",defaultValue:c.unique,onChange:function(e){var r=t.find((function(t){return t.unique===e}));s(r)}},null==t?void 0:t.map((function(e){return o.a.createElement(Option,{value:e.unique,disabled:e.disabled},o.a.createElement(v.a,{title:e.disabled?e.disabled_text:null,placement:"top",color:O.themeToken["@white"],overlayInnerStyle:{width:240,color:O.themeToken["@black"]}},o.a.createElement("span",{className:k("role-tip")},e.roleTip),o.a.createElement("span",{className:k("role-label")},e.label)))})))):o.a.createElement(w.a,{trigger:["click"],overlayClassName:k(),overlay:o.a.createElement(u.a,{selectedKeys:["".concat(c.key)]},null==t?void 0:t.map((function(e){return o.a.createElement(u.a.Item,{key:e.key,onClick:function(){s(e)}},o.a.createElement("span",null,o.a.createElement("span",null,e.label)))})))},o.a.createElement("span",null,c.label," ",o.a.createElement(E.default,null)))}}T.propTypes={type:i.a.oneOf(["dropdown","radio"]),defaultRole:i.a.object,roles:i.a.array.isRequired,onChange:i.a.func.isRequired};var C=T,P=(r(581),r(208)),L=r(805),I=r(46),A=r.n(I),N=r(2582),D=r(292);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var F=function(e){var t=e.user,r=Object(n.useRef)(null);return o.a.createElement(N.a,{textRef:r,title:t.dep,placement:"bottom"},o.a.createElement("span",{className:"ellipsis-wrapper"},o.a.createElement("span",{ref:r,className:"ellipsis-text"},t.dep)))},G=function(e){return"larkui-member-selector-user-search".concat(e?"-".concat(e):"")},U=j.a.Option;var B=o.a.createElement("div",{className:G("notfound")},o.a.createElement(L.default,null),o.a.createElement("p",null,__("未搜索到相关结果"))),z=function(e){return e.department||"Department"===e.type},W=function(e){return z(e)?D.avatar.department:e.avatar_url||"//gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png?x-oss-process=image%2Fresize%2Cm_fill%2Cw_64%2Ch_64%2Fformat%2Cpng"};function V(e){var t,r=e.users,a=e.selectedUsers,i=function(e){var t=R(Object(n.useState)(!1),2),r=t[0],o=t[1],a=R(Object(n.useState)(!1),2),i=a[0],c=a[1],u=e.getUsers,l=e.onChange,s=Object(n.useRef)(null),f=A()((function(e){return o(!0),c(!1),u(e).then((function(t){if(o(!1),e&&!(t&&t.length>0))return c(!0),clearTimeout(s.current),s.current=setTimeout((function(){c(!1)}),3e3),t})).catch((function(){o(!1)}))}),300);return{state:{loading:r,fetchEnd:i},handleChange:function(e){l(e)},handleSearch:function(e){f(e)}}}(e),c=i.state,u=i.handleChange,l=i.handleSearch,s=Object(n.useRef)(null),f=e.notFoundContent||B;return Object(n.useEffect)((function(){e.getRef&&e.getRef(s)}),[]),o.a.createElement("div",{className:G()},o.a.createElement(j.a,{ref:s,className:"normal"===e.userClassType?G("container-normal"):G("container"),value:e.value,showSearch:!0,autoFocus:!0,mode:"multiple",placeholder:e.placeholder,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,notFoundContent:!c.loading&&c.fetchEnd?f:null,onSearch:l,onChange:u,getPopupContainer:function(e){return e.parentNode},loading:c.loading,tagRender:e.isLiteSearchSelector?function(e){var t=e.value,r=e.closable,n=e.onClose,i=a.find((function(e){return z(e)?e.uid===t:e.id===t||e.uid===t}));return i?o.a.createElement(P.a,{icon:z(i)?o.a.createElement("div",{className:"larkicon larkicon-organization ".concat(G("tag-icon"))}):null,onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},closable:r,onClose:n},i.name):null}:function(e){var t=Object(n.useRef)(null),r=(e.label,e.value),i=e.closable,c=e.onClose,u=a.find((function(e){return z(e)?e.uid===r:e.id===r||e.uid===r}));if(!u)return null;return o.a.createElement(P.a,{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},closable:i,onClose:c,className:G("user-selector-tag"),closeIcon:o.a.createElement("span",{className:G("user-selector-tag-close-avatar-wrapper")},o.a.createElement(_.b,{name:"close",size:12,className:G("user-selector-tag-close-avatar")}))},o.a.createElement(g.a,{src:W(u),size:24,className:G("user-selector-tag-avatar")}),o.a.createElement("span",{className:G("user-selector-tag-label")},o.a.createElement(N.a,{textRef:t,title:u.name,placement:"bottom"},o.a.createElement("span",{className:"ellipsis-wrapper"},o.a.createElement("span",{ref:t,className:"ellipsis-text"},u.name)))))}},(t=window.appData.isYuque,null==r?void 0:r.map((function(r){var n=r.dep?G("isdep"):null;return o.a.createElement(U,{key:r.id||r.uid,value:r[e.keyField],label:r.name,className:G("menu-item")},o.a.createElement("span",{className:"".concat(G("user")," ").concat(n)},o.a.createElement(g.a,{className:G("icon"),src:W(r),name:r.name,size:32}),o.a.createElement("span",{className:G("title-wrap")},o.a.createElement("span",{className:G("title")},o.a.createElement("span",{className:G("name")},r.name),t&&r.login&&o.a.createElement("span",{className:G("login")},"(",r.login,")"),!t&&r.lastName&&o.a.createElement("span",{className:G("login")},"(",r.lastName,")")),r.dep&&o.a.createElement("span",{className:G("dep")},o.a.createElement(F,{user:r})))))})))))}V.defaultProps={keyField:"login"},V.propTypes={keyField:i.a.string,value:i.a.array.isRequired,users:i.a.array.isRequired,selectedUsers:i.a.array.isRequired,getUsers:i.a.func.isRequired,onChange:i.a.func.isRequired,getRef:i.a.func,placeholder:i.a.string,notFoundContent:i.a.node};var q=V,K=(r(61),r(23));function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function H(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ee(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function Y(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(){Z=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==$(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function X(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Q(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){X(a,n,o,i,c,"next",e)}function c(e){X(a,n,o,i,c,"throw",e)}i(void 0)}))}}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var re=function(){setTimeout((function(){window.location.reload()}),2e3)};function ne(e){var t=e.roles,r=e.searchUser,o=e.checkValid,a=e.getUserCount,i=e.disableMeta,c=e.onSubmit,u=e.afterSubmit,l=void 0===u?re:u,s=e.initialValues,f=e.onChange,d=e.getDefaultUsers,p=J(Object(n.useState)([]),2),h=p[0],m=p[1],y=J(Object(n.useState)([]),2),v=y[0],g=y[1],b=J(Object(n.useState)(0),2),_=b[0],w=b[1],j=J(Object(n.useState)(!0),2),E=j[0],O=j[1],S=Object(n.useRef)(t&&t[0]),x=Object(n.useRef)(null),k=Object(n.useRef)([]),T=function(e,t){return!(!e||!t)&&(e.uid&&t.uid?e.uid===t.uid:e.login&&t.login?e.login===t.login:!(!t.provider_userid||!e.provider_userid)&&(e.provider_userid===t.provider_userid&&e.provider_type===t.provider_type))},C=function(){var e=Q(Z().mark((function e(t){var r,n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m([]),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,d(t);case 5:return n=e.sent,n=null===(r=n)||void 0===r?void 0:r.filter((function(e){return!v.some((function(t){return T(t,e)}))})),m(n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Q(Z().mark((function e(t){var n,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m([]),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,r(t);case 5:return o=e.sent,o=null===(n=o)||void 0===n?void 0:n.filter((function(e){return!v.some((function(t){return T(t,e)}))})),m(o),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){return null==e?void 0:e.map((function(e){return[].concat(Y(h),Y(v)).find((function(t){return t.uid===e}))}))},I=function(e){return null==e?void 0:e.filter((function(e){return e._valid}))},N=Object(n.useCallback)(A()((function(e){var t=e.status;t&&K.a[t]?K.a[t](e.message):K.a.warn(e.message)}),300),[]),D=function(e){return null==e?void 0:e.map((function(e){if("_valid"in e)return e;var t=o(e);return t&&"success"===t.status?e._valid=!0:(e._valid=!1,N(t)),e}))};Object(n.useEffect)((function(){function e(){return(e=Q(Z().mark((function e(){var t,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(s);case 2:t=e.sent,r=null==(n=t)?void 0:n.map((function(e){return"_valid"in e||(e._valid=!0),e})),g(r),a&&w(a(I(r)));case 6:case"end":return e.stop()}var n}),e)})))).apply(this,arguments)}!s||null!=v&&v.length||function(){e.apply(this,arguments)}()}),[s]);var R=function(e){var t=D(e);g(t),i||w(a(I(t)))},M=function(){var e=Q(Z().mark((function e(t){var r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(I(t));case 3:(r=e.sent)&&("success"===r.status?(N(r),setTimeout((function(){window.location.reload()}),2e3)):N(r)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),K.a.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Q(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(I(v),S.current,E);case 2:(t=e.sent)&&("success"===t.status?(N(t),l(t)):N(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{state:{users:h,selected:v,userCount:_,onlyStaff:E},getUsers:P,getRef:function(e){x.current=e.current},disableSubmit:function(){return 0===v.length},handleSelect:function(e){if(x.current){Array.isArray(e)||(e=[e]);var t,r=Y(k.current),n=Y(v),o=H(e);try{var a=function(){var e=t.value;r.every((function(t){return t.uid!==e.uid}))&&r.push(e),n.every((function(t){return t.uid!==e.uid}))&&n.push(e)};for(o.s();!(t=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}m(r),k.current=r,R(n)}},handleDeselect:function(e){if(x.current){Array.isArray(e)||(e=[e]);var t,r=Y(v),n=H(e);try{var o=function(){var e=t.value,n=r.findIndex((function(t){return t.uid===e.uid}));n>-1&&r.splice(n,1)};for(n.s();!(t=n.n()).done;)o()}catch(e){n.e(e)}finally{n.f()}R(r)}},handleChange:function(e){var t=D(L(e)),r=null==t?void 0:t.filter((function(e){return e._valid}));r.length===t.length?(g(t),i||w(a(I(t))),setTimeout((function(){m([])}),300)):g(r)},handleRoleChange:function(e){S.current=e},handleSubmit:F,handleFocus:function(){x.current.focus()},userHandleChange:function(e){var t=D(L(e)),r=null==t?void 0:t.filter((function(e){return e._valid}));(null==r?void 0:r.length)===(null==t?void 0:t.length)?(g(t),setTimeout((function(){m([])}),300),M(t)):g(r)},setOnlyStaff:O}}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ie=function(e){return"larkui-member-selector-search".concat(e?"-".concat(e):"")};function ce(e){return o.a.createElement("span",{className:e.className},__("已选择 {count} 人",{count:e.userCount}))}function ue(e){var t;if(e.roles&&1===e.roles.length)t=o.a.createElement("span",{className:ie("role-text")},e.roles[0].label);else{var r=e.roleSelector;t=r?o.a.createElement(r,{roles:e.roles,defaultRole:e.defaultRole,onChange:e.onRoleChange}):o.a.createElement(C,{roles:e.roles,defaultRole:e.defaultRole,onChange:e.onRoleChange})}return o.a.createElement("span",{className:e.className},o.a.createElement("span",null,e.actionTipText||__("添加为：")),t)}function le(e){var t,r,a=e.selectors,i=1===a.length,c=i?0:null,u=oe(Object(n.useState)(c),2),l=u[0],s=u[1],f=function(e){i||s(e)};return o.a.createElement("div",{className:ie("quick-selector-container")},null!=l||i?(t=a[l],r=o.a.cloneElement(t,{className:ie("quick-selector-main-list"),selected:e.selected,onSelect:e.onSelect,onDeselect:e.onDeselect,setOnlyStaff:e.setOnlyStaff,onlyStaff:e.onlyStaff}),o.a.createElement("div",null,o.a.createElement("h2",{className:ie("quick-selector-subtitle")},!i&&o.a.createElement("span",{className:ie("quick-selector-subicon"),onClick:function(){return f(null)}},o.a.createElement(b.default,null)),o.a.createElement("span",{onClick:function(){return f(null)}},__("从{title}添加",{title:t.props.title}))),o.a.createElement("div",{className:ie("quick-selector-main")},r))):o.a.createElement("div",{className:ie("quick-selector-choose")},o.a.createElement("h2",{className:ie("quick-selector-title")},__("快捷添加")),o.a.createElement("div",{className:ie("quick-selector-list")},a.map((function(e,t){return o.a.createElement("div",{key:e.props.id,type:"flex",justify:"start",align:"middle",className:ie("quick-selector-item"),onClick:function(){return f(t)}},o.a.createElement(v.a,{placement:"top",title:"outsourcer"===e.props.id&&o.a.createElement("div",null,__("外部联系人用于外部合作场景，管理员可将外部客户或合作伙伴添加为外部联系人。"),o.a.createElement("a",{className:ie("outsourcer-tip-link"),href:"https://www.yuque.com/yuque/rvzzxz/uan0vd",target:"_blank"},__("查看详细介绍")))},e.props.iconName&&o.a.createElement(_.b,{className:ie("selector-icon"),name:e.props.iconName,size:16}),!e.props.iconName&&e.props.getIconUrl&&o.a.createElement(g.a,{className:ie("quick-selector-icon"),src:e.props.getIconUrl(),size:18}),o.a.createElement("span",{className:ie("quick-selector-text")},__("从{title}添加",{title:e.props.title}))),o.a.createElement("div",null,o.a.createElement(_.b,{name:"arrow-right",size:16})))})))))}function se(e){var t=ne(e),r=t.state,n=t.getRef,a=t.getUsers,i=t.disableSubmit,c=t.handleSelect,u=t.handleDeselect,l=t.handleChange,s=t.handleRoleChange,f=t.handleSubmit,d=t.handleFocus,p=t.setOnlyStaff;return o.a.createElement("div",{className:ie()},o.a.createElement(h.a,null,o.a.createElement(m.a,{span:e.quickSelectors&&e.quickSelectors.length>0?12:24,className:ie("selector"),onClick:d},o.a.createElement("div",{className:ie("content")},o.a.createElement(q,{keyField:"uid",getRef:n,value:r.selected.filter((function(e){return e._valid})).map((function(e){return e.uid})),users:r.users,selectedUsers:r.selected,getUsers:a,onChange:l,notFoundContent:e.notFoundContent,placeholder:__("输入人员名字搜索添加，可搜空间成员或外部联系人")})),o.a.createElement("div",{className:ie("footer")},e.disableMeta?null:o.a.createElement(ce,{className:ie("meta"),userCount:r.userCount}),e.roles&&e.roles.length>0?o.a.createElement(ue,{className:ie("role"),defaultRole:e.roles[0],roles:e.roles,onRoleChange:s,actionTipText:e.actionTipText,roleSelector:e.roleSelector}):null,o.a.createElement("div",{className:ie("footer-btn")},o.a.createElement(y.a,{type:"primary",onClick:f,disabled:i()},__("添加"))))),e.quickSelectors&&e.quickSelectors.length>0?o.a.createElement(m.a,{span:12},o.a.createElement(le,{selectors:e.quickSelectors,selected:r.selected,onSelect:c,onDeselect:u,setOnlyStaff:p,onlyStaff:r.onlyStaff})):null))}se.defaultProps={id:"search",title:"搜索",onSubmit:function(){},getDefaultUsers:function(){}},se.propTypes={id:i.a.string,title:i.a.string,getDefaultUsers:i.a.func,searchUser:i.a.func.isRequired,notFoundContent:i.a.node,onSubmit:i.a.func,actionTipText:i.a.oneOfType([i.a.string,i.a.node]),roleSelector:i.a.element};var fe=se,de=r(2715),pe=(r(529),r(306)),he=(r(2015),r(1731)),me=(r(445),r(166)),ye=(r(227),r(112)),ve=(r(2697),r(2470)),ge=r(13),be=r.n(ge);function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function we(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ce(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(){je=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==_e(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function Ee(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Oe(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ee(a,n,o,i,c,"next",e)}function c(e){Ee(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){ke(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ke(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==_e(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_e(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||Ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){if(e){if("string"==typeof e)return Pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pe(e,t):void 0}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Le=function(e){return"larkui-member-selector-list".concat(e?"-".concat(e):"")};function Ie(e){return o.a.createElement("div",{className:Le("breadcrumb")},o.a.createElement(ve.a,null,!e.disableNavTop&&o.a.createElement(ve.a.Item,{onClick:function(t){e.disabled||e.getData({getTop:!0})}},"全部"),e.navs&&e.navs.map((function(t,r){return o.a.createElement(ve.a.Item,{key:t.id,onClick:function(r){return function(t,r){e.disabled||e.getData(r)}(0,t)},disabled:e.disabled},t.name)}))))}function Ae(e){return o.a.createElement("span",{className:"".concat(Le("item-icon")," icon-organization"),onClick:function(t){e.disabled||e.getData(e.sub)}},o.a.createElement("span",{className:"".concat(Le("item-larkicon"))},o.a.createElement(_.b,{name:"lower-level",size:16})),o.a.createElement("span",null,__("下级")))}function Ne(e){var t=e.item,r=window.appData.isYuque;return t.isTop?o.a.createElement("div",{className:Le("item"),onClick:function(){return e.getData(t)}},o.a.createElement(_.b,{name:"group-type-department",className:"".concat(Le("larkicon")),size:16}),o.a.createElement("span",{className:Le("item-name")},t.name)):o.a.createElement("div",{className:Le("item")},o.a.createElement(me.a,{className:Le("checked"),value:t.uid,checked:t.checked||e.disabled,onChange:function(r){r.target.checked?e.onSelect(r,t):e.onDeselect(t)},disabled:t.disabled||e.disabled},t.loading?o.a.createElement(ye.a,null):o.a.createElement("span",{className:Le("user")},t.avatar_url&&o.a.createElement(g.a,{className:Le("icon"),src:t.avatar_url,size:24}),o.a.createElement("span",null,o.a.createElement("span",{className:Le("title")},o.a.createElement("span",{className:Le("name")},t.name),r&&t.login&&o.a.createElement("span",{className:Le("login")},!t.sub&&o.a.createElement(o.a.Fragment,null,"("),t.login,!t.sub&&o.a.createElement(o.a.Fragment,null,")")),!r&&t.lastName&&o.a.createElement("span",{className:Le("login")},!t.sub&&o.a.createElement(o.a.Fragment,null,"("),t.lastName,!t.sub&&o.a.createElement(o.a.Fragment,null,")")))))),t.sub&&o.a.createElement("div",{className:Le("item-action")},o.a.createElement(Ae,{sub:t.sub,getData:e.getData,disabled:e.disabledSub})))}function De(e){var t=Te(Object(n.useState)(!1),2),r=t[0],o=t[1],a=Te(Object(n.useState)([]),2),i=a[0],c=a[1],u=Te(Object(n.useState)(!1),2),l=u[0],s=u[1],f=Te(Object(n.useState)(e.enableSelectNav),1)[0],d=Te(Object(n.useState)(!1),2),p=d[0],h=d[1],m=Te(Object(n.useState)([]),2),y=m[0],v=m[1],g=e.onlyStaff,b=function(t){var r,n,o=t;return g&&null!==(r=o)&&void 0!==r&&r.length&&(o=o.filter((function(e){var t=e.work_id||e.workid;return!t||!t.startsWith("WB")}))),(null===(n=o)||void 0===n?void 0:n.map((function(t){var r=e.checkValid(t);return xe(xe({},t),{},{_valid:r&&"success"===r.status})})))||[]},_=function(t,r,n){var o=t.reduce((function(e,t){return e[t.uid]=t,e}),{});if(e.enableDepthAll&&n){var a,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Ce(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(n);try{for(i.s();!(a=i.n()).done;){if(o[a.value.uid])return b(r).map((function(e){return xe(xe({},e),{},{checked:!0,disabled:!0})}))}}catch(e){i.e(e)}finally{i.f()}}return b(r).map((function(e){var r=t.find((function(t){return t.uid===e.uid}));return xe(xe({},e),{},{checked:r&&e._valid})}))}(e.selected,y,i),w=function(e){var t=e.some((function(e){return e.checked})),r=!e.some((function(e){return!(e.checked||p||!1===e._valid)}));return{allChecked:r,allDisabled:e.every((function(e){return e.disabled})),allIndeterminate:!r&&t}}(_),j=w.allChecked,E=w.allDisabled,O=w.allIndeterminate,S=function(e){return Oe(je().mark((function t(){var r,n,a,i,u,l=arguments;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o(!0),n=l.length,a=new Array(n),i=0;i<n;i++)a[i]=l[i];return t.next=4,e.apply(void 0,a);case 4:u=t.sent,a&&a[0]&&a[0].getTop?s(!1):(null===(r=u.users)||void 0===r?void 0:r.length)>0?s(!0):s(!1),c(u.navs),v(u.users),o(!1);case 9:case"end":return t.stop()}}),t)})))},x=S(e.getData),k=S(e.getInitData);Object(n.useEffect)((function(){k()}),[]);return{state:{list:_,navs:i,showAll:l,showNavSelect:f,loading:r,allChecked:j,allIndeterminate:O,allDisabled:E,navSelectChecked:p,enableMemberTypeSwitch:e.enableMemberTypeSwitch,onlyStaff:e.onlyStaff},getData:x,handleSelect:function(t,r){t.target.checked&&e.enableDepthAll&&r.sub?(v(we(y).map((function(e){return e.id===r.id?e.loading=!0:e.loading=!1,e}))),e.getData(r.sub).then((function(t){v(we(y).map((function(e){return e.loading=!1,e}))),r.name=t.name,e.onSelect(r)}))):e.onSelect(r)},handleAllSelect:function(t){t.target.checked?e.onSelect(_):e.onDeselect(_)},handleRoleChange:function(e){x({role:e.value})},handleNavSelect:function(t,r){t.target.checked?(h(!0),e.onSelect(r)):(h(!1),e.onDeselect(r))},handleMemberTypeChange:function(t){var r;null===(r=e.setOnlyStaff)||void 0===r||r.call(e,t)}}}function Re(e){var t=De(e),r=t.state,n=t.handleAllSelect,a=t.handleSelect,i=t.handleNavSelect,c=t.handleRoleChange,u=t.getData,l=t.handleMemberTypeChange,s=e.getFilterRoles&&e.getFilterRoles(),f=r.navs&&r.navs[r.navs.length-1];return o.a.createElement("div",{className:be()("".concat(e.className," ").concat(Le()),ke({},Le("member-switch"),r.enableMemberTypeSwitch))},o.a.createElement("div",{className:be()(ke({},Le("member-switch-inner"),r.enableMemberTypeSwitch))},s&&o.a.createElement("div",{className:Le("role-filter")},o.a.createElement(C,{roles:s,onChange:c})),r.navs&&r.navs.length?o.a.createElement(Ie,{getData:u,navs:r.navs,disabled:r.navSelectChecked,disableNavTop:e.disableNavTop}):null,r.showNavSelect&&f&&o.a.createElement("div",{className:Le("select-dep")},o.a.createElement(me.a,{onChange:function(e){return i(e,f)}},o.a.createElement("span",{className:Le("select-dep-name")},__("选择{dep}所有成员",{dep:f.name})))),r.showAll&&!r.loading?o.a.createElement("div",{className:Le("select-all")},o.a.createElement(me.a,{onChange:function(e){return n(e)},indeterminate:r.allIndeterminate,checked:r.allChecked||r.navSelectChecked,disabled:r.allDisabled||r.navSelectChecked},__("全选"))):null,o.a.createElement(he.a,{className:Le("list"),justify:"block",dataSource:r.list,loading:r.loading,locale:{emptyText:"outsourcer"===e.id?o.a.createElement("div",{className:Le("empty-view")},o.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*lzOXRp21hVEAAAAAAAAAAAAAARQnAQ"}),o.a.createElement("p",null,__("暂无外部联系人"))):o.a.createElement("div",null,__("暂无数据"))},renderItem:function(t){return o.a.createElement(Ne,{onSelect:a,onDeselect:e.onDeselect,item:t,getData:u,disabled:r.navSelectChecked||!1===t._valid,disabledSub:r.navSelectChecked})}})),r.enableMemberTypeSwitch&&o.a.createElement("div",{className:Le("member-type-switch-container")},o.a.createElement(pe.a,{checked:r.onlyStaff,disabled:r.loading,size:"small",onChange:l})," ",o.a.createElement("span",null,__("仅添加集团正式员工"))))}Re.defaultProps={disableNavTop:!1,enableDepthAll:!1,enableSelectNav:!1},Re.propTypes={id:i.a.number,getData:i.a.func,onSelect:i.a.func,onDeselect:i.a.func,checkValid:i.a.func,disableNavTop:i.a.bool,enableDepthAll:i.a.bool,enableSelectNav:i.a.bool};var Me=Re,Fe=(r(1733),r(356)),Ge=r(572),Ue=function(e){return"larkui-member-selector-import"+(e?"-".concat(e):"")};function Be(e){var t=e.getUploadProps(),r=e.getBtnText();return o.a.createElement("div",{className:Ue()},o.a.createElement("p",{className:Ue("desc")},o.a.createElement("span",null,o.a.createElement("a",{href:e.templateUrl},__("下载模板文件（import_users.txt）")),__("填写人员信息，")),o.a.createElement("span",null,r)),o.a.createElement("div",null,o.a.createElement(Fe.a,t,o.a.createElement(y.a,null,o.a.createElement(Ge.default,null)," ",__("选择文件并提交")))))}Be.defaultProps={templateUrl:"https://cdn.nlark.com/import_users.txt"},Be.propTypes={role:i.a.number.isRequired,getUploadProps:i.a.func.isRequired,getBtnText:i.a.func.isRequired,templateUrl:i.a.string};var ze=Be;function We(e){var t,r=ne(e),n=r.state,a=r.getRef,i=r.getUsers,c=r.userHandleChange;return o.a.createElement("div",null,o.a.createElement(q,{userClassType:e.userClassType,isLiteSearchSelector:e.isLiteSearchSelector,keyField:"uid",getRef:a,selectedUsers:n.selected,value:null===(t=n.selected)||void 0===t?void 0:t.filter((function(e){return e._valid})).map((function(e){return e.uid})),users:n.users,getUsers:i,onChange:c,notFoundContent:e.notFoundContent,placeholder:__("输入成员名字搜索添加")}))}We.defaultProps={onChange:function(){}},We.propTypes={userClassType:i.a.string,searchUser:i.a.func.isRequired,notFoundContent:i.a.node,onChange:i.a.func};var Ve=We;function qe(e){return o.a.createElement(p,{ref:e.titleRef,selectors:e.selectors,getWidth:e.getWidth,defaultTabKey:e.defaultTabKey,onCancel:e.onCancel,onClose:e.onClose,visible:e.visible})}qe.ListSelector=Me,qe.SearchSelector=fe,qe.InviteSelector=de.a,qe.ImportSelector=ze,qe.LiteSearchSelector=Ve,qe.propTypes={titleRef:i.a.object,selectors:i.a.array,defaultTabKey:i.a.string,getWidth:i.a.func,onCancel:i.a.func,onClose:i.a.func,visible:i.a.bool};t.a=qe},2470:function(e,t,r){"use strict";r(3145);var n=r(1819),o=r(0),a=r.n(o),i=r(8),c=r.n(i),u=r(13),l=r.n(u),s=r(90),f=r.n(s);r(2697);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var p=["className"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(this,arguments)}function g(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var b=a.a.forwardRef((function(e,t){var r=e.className,o=g(e,p);return a.a.createElement(n.a,v({className:l()("larkui-breadcrumb",r),ref:t},o))}));b.propTypes=m(m({},n.a.BreadcrumbProps),{},{className:c.a.string}),f()(b,n.a),t.a=b},2474:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(0),o=r(42),a=r(13),i=r.n(a),c="index-module_actions_vhNlZ",u="index-module_actionItem_gm0UP",l="index-module_actionTitle_N9iRs",s="index-module_actionTitleLast_KuIDA",f="index-module_actionMore_8wkrV",d="index-module_actionMoreIcon_5FA3+",p="index-module_actionTitleIcon_XFMgq",h="index-module_actionTitleIconLast_2BO7h";function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){var t=e.settings,r=e.onClick;return n.createElement("div",{className:c},t.map((function(e){return!e.hidden&&n.createElement("div",{className:u,key:e.type,onClick:function(){r(e.type,e.title)}},n.createElement("span",{className:e.noDetail?s:l},n.createElement(o.b,{name:e.icon,className:i()(p,y({},h,e.noDetail)),width:16}),e.title),!e.noDetail&&n.createElement("span",{className:f},e.defaultValue,n.createElement(o.b,{name:"arrow-down",className:d,width:16})))})))}},2497:function(e,t,r){e.exports=r(2447)},2501:function(e,t,r){"use strict";r(640);var n=r(327),o=(r(94),r(27)),a=(r(197),r(36)),i=r(0),c=r.n(i),u=r(8),l=r.n(u),s=r(594),f=r(631),d=r(595),p=r(593),h=r(457),m=r(154);r(2600);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e){var t,r,u=e.isOfficial,l=e.isDesktop,v=e.newTemplateName,g=e.onSetNewTemplateName,b=e.onSetSelectedScope,_=e.group,w=e.organization,j=l?_&&Object(m.e)(_):_&&Object(m.e)(_)&&(null===(t=_.abilities)||void 0===t?void 0:t.read_private),E=!!w,O=y(Object(i.useState)(j||E||u?0:1),2),S=O[0],x=O[1];r=j?[{header:__("本知识库可用"),icon:c.a.createElement(s.default,{width:20,height:20}),desc:__("仅在本知识库中可以使用"),type:0},{header:__("本团队可用"),icon:c.a.createElement(f.default,{width:20,height:20}),desc:__("成员在团队中新建文档时均可使用"),type:2},{header:__("仅自己可用"),icon:c.a.createElement(d.default,{width:20,height:20}),desc:__("可以在你参与的所有知识库中使用"),type:3}]:[{header:__("本知识库可用"),icon:c.a.createElement(s.default,{width:20,height:20}),desc:__("仅在本知识库中可以使用"),type:0},{header:__("仅自己可用"),icon:c.a.createElement(d.default,{width:20,height:20}),desc:__("可以在你参与的所有知识库中使用"),type:3}];var k=[{header:__("官方模板"),icon:c.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*KnODQ5KXlh4AAAAAAAAAAABjAQAAAQ/original",alt:"语雀logo",height:20}),desc:__("所有知识库中都可以使用"),type:1}];u&&(r=k);var T=r[S];Object(i.useEffect)((function(){return b(r[S].type)}),[]);var C=c.a.createElement(a.a,null,r.map((function(e,t){var n=c.a.createElement("div",{"data-testid":"dropdown-item-".concat(e.type),className:"template-scope-menu-item"},c.a.createElement("div",{className:"template-scope-icon"},e.icon),c.a.createElement("div",{className:"template-scope-text"},c.a.createElement("h4",null,e.header),c.a.createElement("p",null,e.desc)),t===S&&c.a.createElement("div",{className:"template-scope-more-icon"},c.a.createElement(p.default,{width:20})));return c.a.createElement(a.a.Item,{key:e.header,onClick:function(){x(t),b(r[t].type)}},n)})));return c.a.createElement("div",{"data-testid":"creator-view",className:"template-creator-content"},c.a.createElement("p",null,__("模板名称")),c.a.createElement(o.a,{value:v||"",onChange:function(e){return g(e.target.value)},onFocus:function(e){return e.target.setSelectionRange(0,e.target.value.length)}}),c.a.createElement("p",null,__("可用范围")),c.a.createElement(n.a,{trigger:["click"],overlay:C},c.a.createElement("div",{"data-testid":"dropdown-trigger",className:"template-scope"},c.a.createElement("div",{className:"template-scope-icon"},T.icon),c.a.createElement("div",{className:"template-scope-text"},c.a.createElement("h4",null,T.header),c.a.createElement("p",null,T.desc)),c.a.createElement("div",{className:"template-scope-more-icon"},c.a.createElement(h.default,null)))))}g.defaultProps={isOfficial:!1},g.propTypes={newTemplateName:l.a.string,onSetNewTemplateName:l.a.func,onSetSelectedScope:l.a.func,isOfficial:l.a.bool,isDesktop:l.a.bool,group:l.a.object,organization:l.a.object},t.a=g},2588:function(e,t,r){!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},r=e.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,o=function(){for(var e,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,o=r.length,a={};n<o;n++)if((e=r[n])&&e[1]in t){for(n=0;n<e.length;n++)a[r[0][n]]=e[n];return a}return!1}(),a={change:o.fullscreenchange,error:o.fullscreenerror},i={request:function(e){var r=o.requestFullscreen;e=e||t.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[r]():e[r](n?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){t[o.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,r){var n=a[e];n&&t.addEventListener(n,r,!1)},off:function(e,r){var n=a[e];n&&t.removeEventListener(n,r,!1)},raw:o};o?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[o.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[o.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[o.fullscreenEnabled])}}}),r?e.exports=i:window.screenfull=i):r?e.exports=!1:window.screenfull=!1}()},2598:function(e,t,r){"use strict";r(3155);var n=r(2502);r(2802);t.a=n.a},2600:function(e,t,r){},2679:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(13),i=r.n(a),c=r(384),u=r(290),l=r(1730),s=r(184);t.a=function(e){var t=window.appData.isPublicCloud,r=e.group,n=e.size,a=e.showOrgLabel,f=void 0!==a&&a,d=e.iconSize,p=e.radius,h=e.className,m=null==r?void 0:r.organization,y=l.b.getName("User",r)||s.d[0];return o.a.createElement("div",{className:i()("group-avatar",h),style:{width:"".concat(n,"px"),height:"".concat(n,"px")}},t&&f&&m&&o.a.createElement("span",{className:"lock"},o.a.createElement(u.c,{src:m.logo,size:n>32?20:13,radius:100})),r?o.a.createElement(c.a,{src:r.avatar||r.avatar_url||r.avatarUrl,size:n,className:i()({"group-type-default":y}),name:r.name,icon:y,iconSize:d||Math.floor(.9*n),radius:p}):o.a.createElement("span",{className:"default-group-avatar"},o.a.createElement("span",{className:"larkicon larkicon-group-avatar"})))}},2680:function(e,t,r){"use strict";r(95);var n=r(49),o=(r(61),r(23)),a=r(0),i=r.n(a),c=r(107),u=r.n(c),l=r(2588),s=r.n(l),f=r(84),d=r.n(f),p=r(59),h=r(46),m=r.n(h),y=r(2686),v=r(70),g=r(269),b=r(1767),_=r(2449),w=r(108);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function E(){E=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(T([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==j(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==j(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===j(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function T(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){k(a,n,o,i,c,"next",e)}function c(e){k(a,n,o,i,c,"throw",e)}i(void 0)}))}}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var L=u()("doc:useDocAction"),I=window.appData,A=I.isYuqueMobileApp,N=I.userSettings,D=function(e,t,r){if(window.__engine&&window.__engine.execCommand)return window.__engine[e](t,r)},R=m()((function(e){D("execCommand","defaultFontsize",e),D("execCommand","clearDefaultFontsize")}),200),M=m()((function(e){D("execCommand","paragraphSpacing",e)}));t.a=function(e){var t=e.book,r=e.doc,c=e.commandParams,u=e.dispatch,l=e.onCommandsExecuted,f=e.onSelectTemplate,h=e.onCreateDoc,j=C(Object(a.useState)(null),2),O=j[0],x=j[1],k=C(Object(a.useState)(!1),2),P=k[0],I=k[1],F=C(Object(a.useState)(!1),2),G=F[0],U=F[1],B=C(Object(a.useState)("false"!==(null==N?void 0:N.recordDocSetting)),2),z=B[0],W=B[1],V=function(){return D("queryCommandValue","defaultFontsize",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},q=C(Object(a.useState)(D("queryCommandValue","typography")),2),K=q[0],$=q[1],H=C(Object(a.useState)(V(!1)),2),Y=H[0],Z=H[1],X=C(Object(a.useState)(D("queryCommandValue","paragraphSpacing")),2),Q=X[0],J=X[1],ee=Object(a.useCallback)(m()((function(e,t,r){if(!e)return!1;var n=["default"===t?0:1];15!==r&&n.push(r),u({type:"proxy.web/mine.updateUserSettings",payload:{data:{key:"docsSetting",value:n.join(",")}}})}),500),[]),te=Object(a.useCallback)(m()((function(e,t,r){u({type:"proxy.web/mine.updateUserSettings",payload:{data:{key:"recordDocSetting",value:e}}}).then((function(){ee(e,t,r)}))}),500),[]),re=Object(a.useCallback)((function(e){Z(e),R(e),ee(z,Q,e)}),[z,Q,Y]),ne=Object(a.useCallback)((function(e){J(e),M(e),ee(z,e,Y)}),[z,Q,Y]),oe=Object(a.useCallback)((function(e){W(e),te(e,Q,Y)}),[z,Q,Y]),ae=function(){x(null)},ie=function(){var e=T(E().mark((function e(){var r,n,a,i,u,l,s=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=S(S({},r=s.length>0&&void 0!==s[0]?s[0]:{}),c),n=r.slug||g.a.createSlug(),r.slug=n,r.book_id=t.id,r.format||(r.format=y.a.getDefaultDocumentFormat(r.type)),a=null,e.prev=7,e.next=10,g.a.createDoc(r);case 10:if(i=e.sent,L("doc created",{cmd:O,doc:i}),u="/".concat(t.namespace,"/").concat(i.slug,"/edit"),l=new URL(u,window.location.origin),a=a||window,"doc_toc"===r.create_from&&l.searchParams.set("toc_node_uuid",r.toc_node_uuid),ae(),!h){e.next=20;break}return h(i),e.abrupt("return");case 20:a.location.href=l.href,e.next=26;break;case 23:e.prev=23,e.t0=e.catch(7),"limit_exceeded"===e.t0.code?o.a.error(e.t0.message):e.t0.code!==p.LIMIT_RULE_CODE.max_doc_note_number&&a&&a.close();case 26:return e.prev=26,a=null,e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[7,23,26,29]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=__("确认删除 {title}？",{title:r.title});n.a.confirm({title:e,content:__(""),onOk:function(){u({type:"proxy.web/docs.destroy",payload:{data:{id:r.id}}}).then((function(e){l({cmd:v.a.DOC.delete.cmd,result:e})}))}})},ue=Object(_.a)(),le=ue.loadTemplateSelector,se=ue.showTemplateSelector,fe=ue.contextHolder,de=function(){var e=T(E().mark((function e(){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se({book:t});case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",ae());case 5:return e.abrupt("return",Object(b.d)(t,r,c));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(n,a){var i=c;switch(L("exec",{cmd:n,params:i}),x(n),n){case v.a.DOC.delete.cmd:ce();break;case v.a.DOC.print.cmd:window.print();break;case v.a.DOC.fullscreen.cmd:case v.a.DOC.exit_fullscreen.cmd:s.a.enabled?s.a.toggle():o.a.error(__("你的浏览器不支持全屏功能"));break;case v.a.DOC.raw.cmd:window.location.href="".concat(window.location.pathname.replace(/\/+$/,""),"/html");break;case v.a.DOC.view_markdown.cmd:window.location.href="".concat(window.location.pathname.replace(/\/+$/,""),"/markdown");break;case v.a.DOC.presentation.cmd:window.open("".concat(window.location.pathname.replace(/\/+$/,""),"/present"));break;case v.a.DOC.create_doc.cmd:ie({type:"Doc",format:d.a.FORMAT.LAKE,title:i.title,slug:i.slug});break;case v.a.DOC.create_doc_template.cmd:ie({title:__("自定义模板"),type:d.a.TYPE.DOC,format:d.a.FORMAT.LAKE,tag:"YUQUE_TEMPLATE"});break;case v.a.DOC.create_from_template.cmd:f&&f(),de();break;case v.a.DOC.create_markdown.cmd:ie({type:"Doc",format:d.a.FORMAT.MARKDOWN,title:i.title,slug:i.slug});break;case v.a.DOC.create_sheet.cmd:ie({type:"Sheet",title:i.title,slug:i.slug});break;case v.a.DOC.create_mind.cmd:case v.a.DOC.create_board.cmd:ie({type:"Board",title:i.title,slug:i.slug});break;case v.a.DOC.create_table.cmd:ie({type:"Table",title:i.title,slug:i.slug});break;case v.a.DOC.create_thread.cmd:window.location.href="/".concat(t.namespace,"/new");break;case v.a.DOC.edit.cmd:var p="/".concat(t.namespace,"/").concat(r.slug,"/edit");A?w.a.pushWebWindow({url:"".concat(window.location.origin).concat(p)}):window.location.href=p;break;case v.a.DOC.manage_table.cmd:case v.a.DOC.manage_doc.cmd:window.location.href="/r/".concat(t.namespace,"/docs");break;case v.a.DOC.modify_toc.cmd:window.location.href="/r/".concat(t.namespace,"/toc?from=").concat(r.slug);break;case v.a.DOC.exit.cmd:window.location.href="/dashboard";break;case v.a.DOC.archive.cmd:u({type:"proxy.web/docs.archive",payload:{data:{id:r.id}}}).then((function(e){o.a.success(__("话题已归档")),l({cmd:v.a.DOC.archive.cmd,result:e})}));break;case v.a.DOC.unarchive.cmd:u({type:"proxy.web/docs.unarchive",payload:{data:{id:r.id}}}).then((function(e){o.a.success(__("已取消归档")),l({cmd:v.a.DOC.unarchive.cmd,result:e})}));break;case v.a.DOC.pin.cmd:u({type:"proxy.web/docs.pin",payload:{data:{id:r.id}}}).then((function(e){o.a.success(__("置顶成功")),l({cmd:v.a.DOC.pin.cmd,result:e})}));break;case v.a.DOC.unpin.cmd:u({type:"proxy.web/docs.unpin",payload:{data:{id:r.id}}}).then((function(e){o.a.success(__("已取消置顶")),l({cmd:v.a.DOC.unpin.cmd,result:e})}));break;case v.a.DOC.send_mail.cmd:I(!0);break;case v.a.DOC.document_layout_select.cmd:case v.a.DOC.document_layout.cmd:!function(e){D("execCommand","layout",e)}(a);break;case v.a.DOC.document_typography.cmd:!function(e){$(e),D("execCommand","typography",e),V()||Z(V(!1))}(a);break;case v.a.DOC.document_fontsize.cmd:re(a);break;case v.a.DOC.document_paragraph_spacing.cmd:ne(a);break;case v.a.DOC.document_record_setting.cmd:oe(a);break;default:e.onCommandsExecuted({cmd:n})}};return i.a.useEffect((function(){O&&(null==O?void 0:O.cmd)===v.a.DOC.create_from_template.cmd&&le()}),[O]),i.a.useEffect((function(){window.__execAction=function(t,r){[v.a.DOC.history.cmd,v.a.DOC.save_published_as_version.cmd,v.a.DOC.save_editing_as_version.cmd].includes(t)&&(pe(t,r),e.onSelect({key:t}))}}),[]),{cmd:O,sendAlimail:P,mailSending:G,typography:K,defaultFontSize:Y,recordDocSetting:z,paragraphSpacing:Q,reset:ae,doAction:pe,setSendAlimail:I,setMailSending:U,getEditorLayout:function(){return D("queryCommandValue","layout")},getWordCount:function(){return D("queryCommandValue","wordCount")},contextHolder:fe}}},2681:function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},2684:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));r(113);var n=r(35),o=r(0),a=r.n(o),i=r(18),c=r(42),u=r(198),l=r(154),s=r(252),f=r(190),d=["group","size","placement","getPopupContainer"];function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(this,arguments)}function h(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var m=function(e){var t,r=e.group,o=e.size,s=e.placement,m=e.getPopupContainer,y=h(e,d);s=s||"top",o=o||14;var v=Object(u.c)({type:"group",target:r,group:r}),g=Object(u.d)({privacy:v,type:"group",organization:window.appData.organization,group:r});return a.a.createElement(n.a,{title:a.a.createElement("span",null,g,!Object(l.f)(r)&&(null===(t=r.abilities)||void 0===t?void 0:t.manage)&&a.a.createElement("a",{onClick:function(e){e.stopPropagation(),f.b.windowOpen("/".concat(r.login,"/settings/permission"))},style:{marginLeft:12}},__("切换公开性"))),getPopupContainer:m,placement:s},a.a.createElement(c.b,p({},y,{className:"name-lock",name:v!==i.PRIVACY.private?"icon-public":(null==r||r.extend_private,i.EXTEND_PRIVATE.BIND_DEPARTMENTS,"permission-private"),width:o})))},y=function(e){return a.a.createElement(s.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.a.createElement("span",{"data-test-id":"group-access-scope"})}},a.a.createElement(m,e))}},2686:function(e,t,r){"use strict";var n=r(84),o=r.n(n),a={_bookGrayscaleConfig:null,getDefaultDocumentFormat:function(e,t,r){return t=t||"",r=r||{},o.a.DOC_DEFAULT_FORMAT[e]||o.a.FORMAT.LAKE}};t.a=a},2688:function(e,t,r){"use strict";r(61);var n=r(23),o=r(0),a=r.n(o),i=r(8),c=r.n(i),u=r(555),l=r(2469),s=r(1976),f=r(2050),d=r(175),p=r.n(d),h=r(2446),m=r.n(h),y=r(38),v=r(75),g=r(528);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(){j=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(T([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==b(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function E(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function O(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){E(a,n,o,i,c,"next",e)}function c(e){E(a,n,o,i,c,"throw",e)}i(void 0)}))}}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L(n.key),n)}}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C(e);if(t){var o=C(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}(this,r)}}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function P(e,t,r){return(t=L(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===b(t)?t:String(t)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(a,e);var t,r,n,o=k(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),P(T(t=o.call(this,e)),"enableDepthAll",(function(){return!1})),P(T(t),"getIconUrl",(function(){var e=window.appData,t=e.isYuque,r=e.corp,n=e.organization,o={buc:"https://gw.alipayobjects.com/zos/bmw-prod/8d7f7670-2c26-4ba5-bb0f-fb124e7f9fc8.svg",dingtalk:"https://gw.alipayobjects.com/zos/bmw-prod/4c033358-95df-4e2a-b468-89fe697fc03d.svg",wechat:"https://gw.alipayobjects.com/zos/bmw-prod/8f2f3dae-cc7c-455c-9579-ed042085da7d.svg"};return t?r?o[r.type]:n&&n.logo:o.buc})),P(T(t),"getInitData",O(j().mark((function e(){var r,n;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.mine.department({self:!0});case 2:if((n=e.sent)&&0!==n.length){e.next=9;break}return e.next=6,t.getTopData();case 6:r=e.sent,e.next=10;break;case 9:r=t.getData(n[n.length-1]);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})))),P(T(t),"fetchCache",function(){var e=O(j().mark((function e(r,n){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.cacheFetch[r]){e.next=5;break}return e.next=4,n();case 4:t.cacheFetch[r]=e.sent;case 5:return e.abrupt("return",p()(t.cacheFetch[r]));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),P(T(t),"getData",O(j().mark((function e(){var r,n,o,a,i,c,u,l=arguments;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},o=(r=l.length>0&&void 0!==l[0]?l[0]:{}).id,!r.getTop){e.next=9;break}return e.next=6,t.getTopData();case 6:return a=e.sent,n.users=t.adpatUIListData(a),e.abrupt("return",n);case 9:if(!(t.enableDepthAll()&&t.isDepartment(r))&&!t.cacheDepthRes[o]){e.next=15;break}return e.next=13,t.getDataWithDepth(r);case 13:return i=e.sent,e.abrupt("return",i);case 15:return c={id:o},e.next=18,t.fetchCache(o,O(j().mark((function e(){var t;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.users.department(c);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))));case 18:return(u=e.sent).parents&&u.parents.forEach((function(e){e&&(t.cacheParent[e.id]=e)})),n=t.serialize(u),t.cacheDeps[o]=n,e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))),P(T(t),"getDataWithDepth",O(j().mark((function e(){var r,n,o,a,i,c,u,l=arguments;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(r=l.length>0&&void 0!==l[0]?l[0]:{}).id,o={id:n,depth:"all"},a=p()(t.cacheDepthRes),a[n]){e.next=12;break}return e.next=8,y.a.users.department(o);case 8:i=e.sent,t.cacheDepthRes=p()(w(w({},t.cacheDepthRes),i)),e.next=13;break;case 12:i=p()(a);case 13:return t.includeUserCount(i),(c=Object.keys(i)).forEach((function(e){var r=i[e].parent;r&&(t.cacheParent[e]=r)})),c.forEach((function(e){var r=i[e];r.parent=t.cacheParent[e],t.cacheDeps[e]=t.serialize(r)})),u=t.cacheDeps[n],r.name&&(u._name=r._name||r.name,u.name="".concat(u._name," (").concat(u.user_count,")")),e.abrupt("return",u);case 20:case"end":return e.stop()}}),e)})))),P(T(t),"adpatUIListData",(function(e){return e.map((function(e){var r=t.cacheDeps[e.id];t.setUid(e);var n={uid:e.uid,id:e.id,avatar_url:e.avatar_url,name:e.name,_name:e._name||e.name,user_id:e.user_id,work_id:e.work_id,login:e.login,type:e.type||"User",provider_type:e.provider_type,provider_userid:e.provider_userid,iconName:e.iconName,isTop:e.isTop,lastName:e.lastName};return r&&"user_count"in r&&(n.user_count=r.user_count,n.name="".concat(n._name," (").concat(n.user_count,")")),!e.isTop&&t.isDepartment(e)?n.sub=e:e.manageDepartment&&(n.sub=e.manageDepartment),n}))})),P(T(t),"adpatUINavData",(function(e){if(e){var r=[];if(Array.isArray(e))r=e;else{r.push(e);!function e(n){if(n.parentDepId){var o=t.cacheParent[n.parentDepId];if(!o)return;Array.isArray(o)?r=o.concat(r):(r.unshift(o),e(o))}}(e)}return r.map((function(e){return e.manageDepartment?{uid:"nav_".concat(e.manageDepartment.id),id:e.manageDepartment.id,name:e.manageDepartment.name,type:"Department"}:{uid:"nav_".concat(e.id),id:e.id,name:e.name,type:"Department"}}))}})),P(T(t),"getTopData",O(j().mark((function e(){var t,r,n,o,a;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.mine.department({self:!0});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return t=e.t0,window.appData.isYuque||(o=[],0===(null===(r=window.appData.me)||void 0===r?void 0:r.zone_id)&&(o=[{id:"12503",name:__("阿里巴巴"),iconName:"organization",type:"Department"}]),1===(null===(n=window.appData.me)||void 0===n?void 0:n.zone_id)&&(o=[{id:"8430",name:__("蚂蚁金服"),iconName:"organization",type:"Department"},{id:"134318",name:__("网商银行"),iconName:"organization",type:"Department"}]),(a=t[0])&&(a.iconName="department",a.type="Department",o.push(a)),t=o),t=t.map((function(e){return e.isTop=!0,e.type="Department",e})),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))),P(T(t),"getAllDepUsers",function(){var e=O(j().mark((function e(r){var n,o,a,i,c,u,l;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.id,!(o=t.cacheDeps[n])){e.next=4;break}return e.abrupt("return",o);case 4:return e.next=6,y.a.user.searchAllDepUsers({id:n});case 6:for(a=e.sent,i=Object.keys(a.data),c=0,u=i;c<u.length;c++)l=u[c],t.cacheDeps[l]=a.data[l];return e.abrupt("return",a.data);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P(T(t),"getDepUsers",function(){var e=O(j().mark((function e(r){var n,o,a;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.id,!(o=t.cacheDeps[n])){e.next=4;break}return e.abrupt("return",o);case 4:return e.next=6,y.a.user.userServices.searchDepUsers({id:n});case 6:return a=e.sent,t.cacheDeps[n]=a.data,e.abrupt("return",a.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P(T(t),"getRealUsers",(function(e){return m()(e,"uid")})),t.cacheDeps={},t.cacheParent={},t.cacheFetch={},t.cacheDepthRes={},t.enable=!1,t}return t=a,r=[{key:"check",value:function(){v.a.enableAddressbook()&&!v.a.enableContacts()&&(this.enable=!0)}},{key:"includeUserCount",value:function(e){var t=this;Object.keys(this.cacheDeps).forEach((function(e){t.cacheDeps[e].user_count=0})),Object.keys(e).forEach((function(r){var n=e[r];if(!Array.isArray(n)){if(n.user_count=(n.user_count||0)+function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.users.filter((function(e){return"user"===e.type}));if(!e.depthUsers||!e.depthUsers.length)return t.length;var r=e.depthUsers.reduce((function(e,t){return e[t.uid]=t,e}),{});return t.filter((function(e){return!r[e.uid]})).length}(n),n.parent){var o=e[n.parent.parentDepId]||t.cacheDeps[n.parent.parentDepId];o&&(o.user_count=(o.user_count||0)+n.user_count,o.depthUsers=(o.depthUsers||[]).concat(n.users.filter((function(e){return t.isUser(e)}))),e[n.parent.parentDepId]=o,t.cacheDeps[n.parent.parentDepId]=o)}t.cacheDeps[r]=n}}))}}],n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],r&&S(t.prototype,r),n&&S(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g.a);P(I,"id","addrbook"),P(I,"title",__("组织架构")),P(I,"iconName","architecture");var A=I;function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function D(){D=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==N(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function R(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function M(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){R(a,n,o,i,c,"next",e)}function c(e){R(a,n,o,i,c,"throw",e)}i(void 0)}))}}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V(n.key),n)}}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var o=z(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}(this,r)}}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}function W(e,t,r){return(t=V(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e){var t=function(e,t){if("object"!==N(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===N(t)?t:String(t)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(a,e);var t,r,n,o=U(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),W(B(e=o.call(this,t)),"getIconUrl",(function(){return e.organization.logo})),W(B(e),"getInitData",M(D().mark((function t(){var r;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),W(B(e),"getData",M(D().mark((function t(){var r,n;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.cache){t.next=2;break}return t.abrupt("return",e.cache);case 2:return t.next=4,y.a.organizationUsers.find({organization_id:e.organization.id,user_role:2,status:1,offset:0,limit:500});case 4:return r=t.sent,n=e.serialize({users:r}),e.cache=n,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))),W(B(e),"adpatUIListData",(function(t){return t.map((function(t){var r=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:r.avatar_url,name:r.name,user_id:r.id,work_id:r.work_id,login:r.login,type:r.type,provider_type:r.provider_type,provider_userid:r.provider_userid}}))})),e.organization=t.organization||window.appData.organization,e}return t=a,n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],(r=[{key:"check",value:function(){this.organization&&this.organization.abilities&&this.organization.abilities.read||(this.enable=!1)}}])&&F(t.prototype,r),n&&F(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g.a);W(q,"id","outsourcer"),W(q,"title",__("外部联系人")),W(q,"iconName","external-contacts");var K=q;function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function H(){H=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==$(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function Y(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Z(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Y(a,n,o,i,c,"next",e)}function c(e){Y(a,n,o,i,c,"throw",e)}i(void 0)}))}}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ne(n.key),n)}}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=te(e);if(t){var o=te(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ee(e)}(this,r)}}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}function re(e,t,r){return(t=ne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e){var t=function(e,t){if("object"!==$(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===$(t)?t:String(t)}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(a,e);var t,r,n,o=J(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),re(ee(e=o.call(this,t)),"getIconUrl",(function(){return e.organization.logo})),re(ee(e),"getInitData",Z(H().mark((function t(){var r;return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),re(ee(e),"getData",Z(H().mark((function t(){var r,n;return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.cache){t.next=2;break}return t.abrupt("return",e.cache);case 2:return t.next=4,y.a.organizationUsers.find({organization_id:e.organization.id,user_role:"0,1",status:1,offset:0,limit:500});case 4:return r=t.sent,n=e.serialize({users:r}),e.cache=n,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))),re(ee(e),"adpatUIListData",(function(t){return t.map((function(t){var r=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:r.avatar_url,name:r.name,user_id:r.id,work_id:r.work_id,login:r.login,type:r.type,provider_type:r.provider_type,provider_userid:r.provider_userid}}))})),e.organization=t.organization||window.appData.organization,e.cache=null,e}return t=a,n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],(r=[{key:"check",value:function(){this.organization&&this.organization.abilities&&this.organization.abilities.read&&!v.a.enableContacts()||(this.enable=!1)}}])&&X(t.prototype,r),n&&X(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g.a);re(oe,"id","orgMember"),re(oe,"title",__("空间成员"));var ae=oe,ie=r(165),ce=r(2022),ue=r(270);function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function se(){se=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==le(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function fe(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function de(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){fe(a,n,o,i,c,"next",e)}function c(e){fe(a,n,o,i,c,"throw",e)}i(void 0)}))}}function pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,be(n.key),n)}}function he(e,t){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},he(e,t)}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ve(e);if(t){var o=ve(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ye(e)}(this,r)}}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ve(e)}function ge(e,t,r){return(t=be(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e){var t=function(e,t){if("object"!==le(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===le(t)?t:String(t)}var _e=ue.memberSelectorType.SIMPLE_WITH_ROLE,we=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(a,e);var t,r,n,o=me(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),ge(ye(e=o.call(this,t)),"getIconUrl",(function(){return e.group.avatar_url})),ge(ye(e),"getIconName",(function(){return e.group.name})),ge(ye(e),"getFilterRoles",(function(){var t=Object(ce.c)("group");return t.unshift(e.allRoleObj),t})),ge(ye(e),"getInitData",de(se().mark((function t(){var r;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),ge(ye(e),"getData",de(se().mark((function t(){var r,n,o,a,i,c=arguments;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="role_".concat((r=c.length>0&&void 0!==c[0]?c[0]:{}).role),!e.cache[n]){t.next=4;break}return t.abrupt("return",e.cache[n]);case 4:return o={id:e.group.id,offset:0,limit:500},"role"in r&&(o.role=r.role),t.next=8,y.a.groups.users(o);case 8:return a=t.sent,i=e.serialize({users:a}),e.cache[n]=i,t.abrupt("return",i);case 12:case"end":return t.stop()}}),t)})))),ge(ye(e),"adpatUIListData",(function(t){return t.map((function(t){var r=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:r.avatar_url,name:r.name,user_id:r.id,work_id:r.work_id,login:r.login,type:r.type,provider_type:r.provider_type,provider_userid:r.provider_userid}}))})),e.group=t.group||window.appData.group,e.cache={},e.allRoleObj={key:-1,label:__("全部")},e}return t=a,n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],(r=[{key:"check",value:function(){this.group&&this.group.abilities&&this.group.abilities.read&&this.type!==_e||(this.enable=!1)}}])&&pe(t.prototype,r),n&&pe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g.a);ge(we,"id","groupuser"),ge(we,"title",ie.a.isPublication(window.appData.group)?__("知识小组成员"):__("团队成员")),ge(we,"iconName","nav-team1");var je=we,Ee=r(105),Oe=r(431);function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Te(n.key),n)}}function ke(e,t,r){return(t=Te(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(e){var t=function(e,t){if("object"!==Se(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Se(t)?t:String(t)}var Ce=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ke(this,"getUploadProps",(function(){return{name:"file",action:r.action,headers:{"x-csrf-token":Object(Oe.a)(window,!0)},onChange:function(e){var t=this;if("done"===e.file.status){var r=e.file.response.data;n.a.success(__("通过 {mobiles} 手机号码成功邀请 {members} 位注册用户，还有 {temp_members} 位用户没有注册语雀",{mobiles:r.mobiles,members:r.members,temp_members:r.temp_members})),setTimeout((function(){window.location.href=t.goto}),3e3)}else"error"===e.file.status&&n.a.error(e.file.response.message||"".concat(e.file.name," file upload failed."))}}})),ke(this,"getBtnText",(function(){return r.btnText})),this.options=t,this.type=t.type,this.organization=t.organization,this.role=t.supportRoles&&t.supportRoles[0],this.target=t[this.type],this.enable=!1}var t,r,o;return t=e,o=[{key:"create",value:function(t){var r=new e(t);return r.check(),r.enable&&r.init(),r}}],(r=[{key:"init",value:function(){if("organization"===this.type){this.action="/api/organization_users/import?role=".concat(this.role,"&organization_id=").concat(this.organization.id);var e=this.role===Ee.default.ROLE.outsourcer?"external":"all";this.goto="/r/organizations/dashboard/members?role=".concat(e),this.btnText=this.role===Ee.default.ROLE.outsourcer?__("批量导入外部联系人"):__("批量导入空间成员")}}},{key:"check",value:function(){this.target&&this.target.enableAdvancedFeature&&(this.enable=!0)}}])&&xe(t.prototype,r),o&&xe(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();ke(Ce,"id","import"),ke(Ce,"title",__("导入"));var Pe=Ce,Le=r(292);function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Ae(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ne(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach((function(t){qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Me(){Me=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ie(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function Fe(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Ge(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Fe(a,n,o,i,c,"next",e)}function c(e){Fe(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ke(n.key),n)}}function Be(e,t){return Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Be(e,t)}function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ve(e);if(t){var o=Ve(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return We(e)}(this,r)}}function We(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(e){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ve(e)}function qe(e,t,r){return(t=Ke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ke(e){var t=function(e,t){if("object"!==Ie(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ie(t)?t:String(t)}var $e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t)}(a,e);var t,r,n,o=ze(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),qe(We(t=o.call(this,e)),"getIconUrl",(function(){var e=window.appData.organization;return e&&e.logo})),qe(We(t),"enableDepthAll",(function(){return!0})),qe(We(t),"getInitData",Ge(Me().mark((function e(){var r,n,o,a,i,c,u,l,s,f,d;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.appData.organization,e.next=3,y.a.mine.department({self:!0},{useOriginResp:!0});case 3:if(n=e.sent,o={id:0,name:r.name,type:"Department",parents:[],getTop:!0},n.length)for(o=n[0],null!==(a=n[0])&&void 0!==a&&a.dept_full_path&&(o.parents=null===(c=n[0])||void 0===c?void 0:c.dept_full_path),u=null===(i=o)||void 0===i?void 0:i.parents.findIndex((function(e){return e.id===o.id})),u>=0&&o.parents.splice(u,1),l=0;l<(null===(s=o)||void 0===s||null===(f=s.parents)||void 0===f?void 0:f.length);l++)o.parents[l].parents=o.parents.slice(0,l);return e.next=8,t.getData(o);case 8:return d=e.sent,e.abrupt("return",d);case 10:case"end":return e.stop()}}),e)})))),qe(We(t),"fetchCache",function(){var e=Ge(Me().mark((function e(r,n){return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.cacheFetch[r]){e.next=5;break}return e.next=4,n();case 4:t.cacheFetch[r]=e.sent;case 5:return e.abrupt("return",p()(t.cacheFetch[r]));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),qe(We(t),"getDepUsers",function(){var e=Ge(Me().mark((function e(r){var n,o,a,i;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.id,o=r.organization_id,!(a=t.cacheDeps[n])){e.next=4;break}return e.abrupt("return",a);case 4:return e.next=6,y.a.departmentUser.find({department_id:n,organization_id:o,onlyMember:1});case 6:return i=e.sent,t.cacheDeps[n]=i.data,e.abrupt("return",i.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),qe(We(t),"getData",Ge(Me().mark((function e(){var r,n,o,a,i,c,u,l,s,f=arguments;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Re({},r=f.length>0&&void 0!==f[0]?f[0]:{}),r){e.next=4;break}return e.abrupt("return",[]);case 4:if(o=r.id,r.getTop&&(o=0),!t.cacheDeps[o]){e.next=8;break}return e.abrupt("return",t.cacheDeps[o]);case 8:return a=window.appData.organization,i=void 0===a?{}:a,e.next=11,y.a.departments.find({parent_id:o,depth:1,withMemberCount:1});case 11:if(c=e.sent,u=r.users){e.next=17;break}return e.next=16,y.a.departmentUser.find({department_id:o,organization_id:i.id,onlyMember:1});case 16:u=e.sent;case 17:return e.next=19,Promise.all(c.map(function(){var e=Ge(Me().mark((function e(t){return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.type="Department",t.parents=r.parents.concat(r),void 0!==t.member_count&&(t._name=t.name,t.name="".concat(t.name),t.login="(".concat(__("{num} 人",{num:t.member_count}),")"));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 19:l=Ae(u);try{for(l.s();!(s=l.n()).done;)s.value.type="User"}catch(e){l.e(e)}finally{l.f()}return n.users=c.concat(u),n.parents=r.parents.concat(r),n._name||void 0===n.member_count||(n._name=n.name,n.name="".concat(n.name,"(").concat(__("{num} 人",{num:n.member_count}),")")),((n=t.serialize(n)).member_count||0===o)&&(t.cacheDeps[o]=n),e.abrupt("return",n);case 27:case"end":return e.stop()}}),e)})))),qe(We(t),"adpatUIListData",(function(e){return e.map((function(e){t.setUid(e);var r=t.isUser(e)&&void 0!==e.status&&e.status!==Ee.STATUS.joined;t.disableDepSelect&&t.isDepartment(e)&&(r=!0);var n={uid:t.isDepartment(e)?"nav_".concat(e.id):e.uid,id:e.id,avatar_url:t.isUser(e)?e.avatar||"//gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png?x-oss-process=image%2Fresize%2Cm_fill%2Cw_64%2Ch_64%2Fformat%2Cpng":Le.avatar.department,name:e.name,_name:e._name,user_id:e.user_id,login:e.login,type:e.type||"User",iconName:e.iconName,isTop:e.isTop,disabled:r,parents:e.parents,_login:e.login,users:e.users,organization_id:e.organization_id,member_count:e.member_count};return!e.isTop&&t.isDepartment(e)?n.sub=e:e.manageDepartment&&(n.sub=e.manageDepartment),n}))})),qe(We(t),"adpatUINavData",(function(e){if(e){var r=[];if(Array.isArray(e))r=e;else{r.push(e);!function e(n){if(n.parentDepId){var o=t.cacheParent[n.parentDepId];if(!o)return;Array.isArray(o)?r=o.concat(r):(r.unshift(o),e(o))}}(e)}return r.map((function(e){return{uid:"nav_".concat(e.id),id:e.id,name:e._name||e.name,type:"Department",parents:e.parents}}))}})),qe(We(t),"getUserCount",(function(e){var r,n=0,o=Ae(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;t.isDepartment(a)?a.member_count&&(n+=a.member_count):n+=1}}catch(e){o.e(e)}finally{o.f()}return n})),qe(We(t),"getRealUsers",function(){var e=Ge(Me().mark((function e(r){var n,o,a,i,c,u,l;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],o=Ae(r),e.prev=2,o.s();case 4:if((a=o.n()).done){e.next=22;break}if(i=a.value,!t.isDepartment(i)){e.next=19;break}if(!i.depthUsers&&!i.users){e.next=11;break}n=n.concat(i.depthUsers||i.users),e.next=17;break;case 11:return c=i.id,u=i.organization_id,e.next=14,y.a.departmentUser.getAllSubDepartmentUsers({department_id:c,organization_id:u});case 14:l=e.sent,t.setUid(l),n=n.concat(l);case 17:e.next=20;break;case 19:n.push(i);case 20:e.next=4;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),o.e(e.t0);case 27:return e.prev=27,o.f(),e.finish(27);case 30:return e.abrupt("return",m()(n,"uid"));case 31:case"end":return e.stop()}}),e,null,[[2,24,27,30]])})));return function(t){return e.apply(this,arguments)}}()),t.cacheDeps={},t.cacheParent={},t.cacheFetch={},t.cacheDepthRes={},t.enable=!1,t.disableDepSelect=e.disableDepSelect,t}return t=a,n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],(r=[{key:"check",value:function(){v.a.enableContacts()&&(this.enable=!0)}}])&&Ue(t.prototype,r),n&&Ue(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g.a);qe($e,"id","yuque_contacts"),qe($e,"title",__("组织架构")),qe($e,"iconName","architecture");var He=$e,Ye=r(190),Ze=r(2694);function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(r),!0).forEach((function(t){et(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function et(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Xe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Xe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var nt=ue.memberSelectorType.ORGANIZATION,ot=ue.memberSelectorType.GROUP,at=ue.memberSelectorType.BOOK,it=ue.memberSelectorType.DOC,ct=ue.memberSelectorType.SIMPLE_WITH_ROLE,ut=ue.memberSelectorType.LIST,lt=ue.memberSelectorType.SIMPLE;var st=a.a.forwardRef((function(e,t){var r=a.a.useRef(null),i=function(e,t){var r,i={type:e.type};e.organization&&(i.organization=e.organization),e.group&&(i.group=e.group),e.book&&(i.book=e.book),e.doc&&(i.doc=e.doc),e.list&&(i.list=e.list),e.role&&(i.supportRoles=[e.role]),e.members&&(i.members=e.members),e.disableDepSelect&&(i.disableDepSelect=e.disableDepSelect);var c,u=tt(Object(o.useState)(null),2),l=u[0],d=u[1],p=tt(Object(o.useState)(null),2),h=p[0],m=p[1],y=e.group&&"User"===e.group.type,v=Object(o.useMemo)((function(){return e.type===nt?null:A.create(i)}),[i]),g=Object(o.useMemo)((function(){return e.type===nt?null:He.create(i)}),[i]),b=Object(o.useMemo)((function(){var t=Je(Je({},i),{},{dataSourceServices:[]});return v&&v.enable&&t.dataSourceServices.push(v),g&&g.enable&&t.dataSourceServices.push(g),e.type===ct&&(t.me=e.me),s.a.create(t)}),[i]),_=Object(o.useMemo)((function(){return f.a.create(i)}),[i]),w=Object(o.useMemo)((function(){return e.type===nt?null:K.create(i)}),[i]),j=Object(o.useMemo)((function(){return e.type===nt?null:ae.create(i)}),[i]),E=Object(o.useMemo)((function(){return e.type===ot||e.type===nt?null:je.create(i)}),[i]),O=Object(o.useMemo)((function(){return e.type!==nt?null:Pe.create(i)}),[i]),S=[],x=[];if(v&&v.enable&&(!e.disableSelectors||!e.disableSelectors.includes("addrbook"))){var k=null!=e.enableDepSelect?e.enableDepSelect:v.enableDepSelect();v.componentType="ListSelector",v.componentProps={id:A.id,title:A.title,iconName:A.iconName,getData:v.getData,getInitData:v.getInitData,getIconUrl:v.getIconUrl,getIconName:v.getIconName,enableDepthAll:v.enableDepthAll(),enableSelectNav:k,checkValid:b.checkValid,enableMemberTypeSwitch:!window.appData.isYuque},x.push(v)}if(!g||!g.enable||e.disableSelectors&&e.disableSelectors.includes("yuque_contacts_selector")||(g.componentType="ListSelector",g.componentProps={id:He.id,title:He.title,iconName:He.iconName,getData:g.getData,getInitData:g.getInitData,getIconUrl:g.getIconUrl,getIconName:g.getIconName,enableDepthAll:g.enableDepthAll(),checkValid:b.checkValid,disableNavTop:!0},x.push(g)),j&&j.enable&&(j.componentType="ListSelector",j.componentProps={id:ae.id,title:ae.title,getData:j.getData,getInitData:j.getInitData,getIconUrl:j.getIconUrl,getIconName:j.getIconName,checkValid:b.checkValid},x.push(j)),w&&w.enable&&(w.componentType="ListSelector",w.componentProps={id:K.id,title:K.title,iconName:K.iconName,getData:w.getData,getInitData:w.getInitData,getIconUrl:w.getIconUrl,getIconName:w.getIconName,checkValid:b.checkValid},x.push(w)),E&&E.enable&&!y&&(E.componentType="ListSelector",E.componentProps={id:je.id,title:je.title,iconName:je.iconName,getData:E.getData,getInitData:E.getInitData,getIconUrl:E.getIconUrl,getIconName:E.getIconName,getFilterRoles:E.getFilterRoles,checkValid:b.checkValid},x.push(E)),_&&_.enable&&(_.componentType="InviteSelector",_.componentProps={id:f.a.id,title:f.a.title,inviteSelectorType:e.type,inviteTarget:e[e.type],group:e.group,organization:e.organization,roleSelectorType:"radio",getJoinUrl:_.getUrl,getToken:_.getToken,updateToken:_.updateToken,deleteTokens:_.deleteTokens,roles:_.validRoles,inviteRoles:h,getCopyText:_.getCopyText,tipContent:l,actionTipText:"book"===e.type?__("访问链接即可获得权限："):null,moreSettingOptions:_.getMoreSettingOptions(),toggleTitle:function(e){t&&t.current&&t.current.toggleTitle(e)}},S.push(_)),b&&b.enable){var T;window.appData.organization&&(T=a.a.createElement(Ze.a,null));var C=e.roleSelector;b.componentType="SearchSelector",b.componentProps={id:s.a.id,title:s.a.title,searchUser:b.searchUser,getUserCount:b.getUserCount,checkValid:b.checkValid,onSubmit:b.submit,roles:b.validRoles,inviteRoles:h,quickSelectors:x,notFoundContent:T,actionTipText:"book"===e.type?__("权限："):null,roleSelector:C,getDefaultUsers:e.getDefaultUsers||b.searchUsersByIds,afterSubmit:e.afterSubmit},e.type===lt&&(b.componentProps.disableMeta=v.enableDepSelect(),b.componentProps.onSubmit=e.onSubmit),window.appData.isYuque||(b.componentProps.disableMeta=v.enableDepSelect()),e.type===ct&&(b.componentProps.title=e.title,b.componentProps.roles=e.roles,b.componentProps.onSubmit=e.onSubmit,e.initialValues&&(b.componentProps.initialValues=e.initialValues)),S.push(b)}return O&&O.enable&&(O.componentType="ImportSelector",O.componentProps={id:Pe.id,title:Pe.title,role:O.role,getUploadProps:O.getUploadProps,getBtnText:O.getBtnText},S.push(O)),Object(o.useEffect)((function(){_&&_.enable&&(window.appData.organization&&[ot,at,it].includes(e.type)&&_.orgDataReady().then((function(){d(a.a.createElement("div",null,a.a.createElement("span",null,_.getOrgTipText()),a.a.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/csb5nu",target:"_blank"},_.canPublic?__("关闭邀请空间外人员?"):__("邀请空间外成员?"))))})),_.getInviteAddRoles().then((function(e){m(e)})).catch((function(e){n.a.error(e.message)})))}),[]),null!==(r=e.organization)&&void 0!==r&&r.id||!Object(Ye.a)()||[lt,ct,ot].includes(e.type)?c=s.a.id:[at,it,nt,ut].includes(e.type)&&(c=f.a.id),{selectors:S,quickSelectors:x,defaultTabKey:c,wideTabKey:s.a.id,addrbookSelectorBiz:v,searchSelectorBiz:b,inviteSelectorBiz:_,outsourcerSelectorBiz:w,orgMemberSelectorBiz:j,groupUserSelectorBiz:E,importSelectorBiz:O,yuqueContactsSelectorBiz:g}}(e,r),c=i.selectors,u=i.quickSelectors,d=i.defaultTabKey,p=i.wideTabKey,h=i.searchSelectorBiz;if(a.a.useImperativeHandle(t,(function(){return{searchSelectorBiz:h}}),[]),!c.length)return null;var m=c.map((function(e){var t=l.a[e.componentType];return t?(e.componentProps.quickSelectors&&(e.componentProps.quickSelectors=e.componentProps.quickSelectors.map((function(e){var t=l.a[e.componentType];return t?a.a.createElement(t,e.componentProps):null})).filter((function(e){return!!e}))),a.a.createElement(t,e.componentProps)):null})).filter((function(e){return!!e}));return a.a.createElement(l.a,{titleRef:r,selectors:m,getWidth:function(e){return e===p&&u&&u.length>0?720:420},defaultTabKey:d,onCancel:e.onCancel,onClose:e.onClose,visible:e.visible})}));st.defaultProps={disableSelectors:[]},st.propTypes={type:c.a.string,organization:c.a.object,role:c.a.oneOf([0,1,2]),onCancel:c.a.func,onClose:c.a.func,visible:c.a.bool,disableSelectors:c.a.array,disableDepSelect:c.a.bool};t.a=Object(u.d)((function(e){return{organization:e.organization,group:e.group,book:e.book,doc:e.doc,me:e.me}}),null,null,{forwardRef:!0})(st)},2694:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(42),i={container:"OrgSearchNotFound-module_container_MlZtJ",icon:"OrgSearchNotFound-module_icon_oJoZx",content:"OrgSearchNotFound-module_content_CgmVs",goToContacts:"OrgSearchNotFound-module_goToContacts_mFsnK"};t.a=function(e){var t,r=window.appData.organization;return o.a.createElement("div",{className:i.container},o.a.createElement("div",{className:i.icon},o.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*lzOXRp21hVEAAAAAAAAAAAAAARQnAQ",width:80})),o.a.createElement("p",{className:i.content},__("空间内无相关搜索结果")),(null==r||null===(t=r.abilities)||void 0===t?void 0:t.destroy)&&o.a.createElement("a",{className:i.goToContacts,target:"_blank",href:"/r/organizations/dashboard/contacts"},__("管理空间通讯录"),o.a.createElement(a.b,{name:"arrow-right",size:16})))}},2696:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function c(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(u){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.useInifiniteScroll=void 0;var a=r(0),i=r(2860),c=(0,r(107).default)("useInifiniteScroll");t.useInifiniteScroll=function(e,t){var r=(0,i.useGetState)(!1),u=r[0],l=r[1],s=r[2],f=(0,a.useRef)(null);f.current=e;var d=(0,a.useCallback)((function(e){var t=e[0];return n(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:if(s())return[2];if(!(null==t?void 0:t.isIntersecting))return[3,4];c("entry?.isIntersecting",null==t?void 0:t.isIntersecting),e.label=1;case 1:return e.trys.push([1,,3,4]),l(!0),[4,f.current()];case 2:return e.sent(),[3,4];case 3:return l(!1),[7];case 4:return[2]}}))}))}),[f]),p=(0,a.useCallback)((function(e){var r;c("ref",e);var n=null;if(e&&!n&&window.IntersectionObserver)return c("enter"),n=new IntersectionObserver(d,{threshold:(null==t?void 0:t.threshold)||.1,root:(null===(r=t.root)||void 0===r?void 0:r.current)||null}),c("observe",e),n.observe(e),function(){return n.unobserve(e)}}),[t.threshold]);return{loading:u,refCallback:p}}},270:function(e,t){e.exports={memberSelectorType:{GROUP:"group",BOOK:"book",DOC:"doc",SIMPLE_WITH_ROLE:"simpleWithRole",SIMPLE:"simple",LIST:"list"}}},2715:function(e,t,r){"use strict";r(227);var n=r(112),o=(r(64),r(21)),a=(r(94),r(27)),i=(r(2015),r(1731)),c=(r(61),r(23)),u=r(0),l=r.n(u),s=r(8),f=r.n(s),d=r(13),p=r.n(d),h=r(42),m=r(167),y=r.n(m),v=r(2095),g=r.n(v),b=r(174),_=r(190),w=r(154),j=r(2474),E=(r(113),r(35)),O=(r(529),r(306)),S=(r(240),r(52)),x=r(38),k=r(615),T=r(259),C=r(209);function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var I=function(e){var t=e.organization,r=e.panelType,n=e.panelTitle,o=e.state,a=e.moreSettingOptions,i=e.handleRoleTypeChange,c=e.handleMemberTypeChange,l=e.handleAllowOutsiderChange,s=e.handleCheckChange,f=e.onBack,d=P(u.useState(!1),2),m=d[0],y=d[1];u.useEffect((function(){!(!t||null==t||!t.id)&&x.a.organizations.getPermissions({id:t.id}).then((function(e){y(e.indirect_add_org_member)}))}),[t]);var v;return u.createElement("div",{className:C.a.shareDetailSettingPanel},u.createElement("div",{className:C.a.title,onClick:f},u.createElement(h.b,{className:C.a.backIcon,name:"arrow-down",width:20}),(v=n,"needCheckSet"===r?__("审批确认"):v)),function(e){switch(e){case"groupMemberSet":return r=k.b.action,n=k.b.desc,u.createElement(u.Fragment,null,u.createElement("p",{className:C.a.titleDesc},n),r.map((function(e){return u.createElement("div",{className:p()(C.a.contentArea,C.a.selectorItem),key:e.key,onClick:function(){i(e.value)}},u.createElement("span",null,e.label),o.roleType===e.value&&u.createElement(h.b,{className:C.a.selectorIcon,name:"check",width:16}))})));case"collaborationSet":return function(){var e=k.e.action,t=k.e[o.targetType.toUpperCase()];return u.createElement(u.Fragment,null,u.createElement("p",{className:C.a.titleDesc},t),e.map((function(e){return u.createElement("div",{className:p()(C.a.contentArea,C.a.selectorItem),key:e.key,onClick:function(){i(e.value)}},u.createElement("span",null,e.label),o.roleType===e.value&&u.createElement(h.b,{className:C.a.selectorIcon,name:"check",width:16}))})))}();case"allowOutsiderSet":return function(){var e,t=["Book","Doc"].includes(o.targetType)?k.i.descBookDoc:k.i.descGroup,r=S.a.Option;1===(null==a?void 0:a.length)?e=u.createElement("span",null,a[0].label):(null==a?void 0:a.length)>1&&(e=u.createElement(S.a,{defaultValue:o.memberType,bordered:!1,onChange:c},null==a?void 0:a.map((function(e){return u.createElement(r,{value:e.value},e.label)}))));var n=u.createElement("div",{className:C.a.contentArea},u.createElement("span",{className:C.a.switchTitle},k.i.action),u.createElement(O.a,{disabled:!m,onChange:l,checked:o.allowOutsider===T.ALLOW_OUTSIDER.ALLOW}));return u.createElement(u.Fragment,null,u.createElement("p",{className:C.a.titleDesc},t),u.createElement(E.a,{title:m?"":k.i.tip,placement:"bottomRight",autoAdjustOverflow:!0},n),(null==a?void 0:a.length)&&o.allowOutsider===T.ALLOW_OUTSIDER.ALLOW&&u.createElement("div",{className:C.a.selectOption},__("空间外人员将自动成为"),e))}();case"needCheckSet":return t=["Book","Doc"].includes(o.targetType)?k.k.descBookDoc:k.k.descGroup,u.createElement(u.Fragment,null,u.createElement("p",{className:C.a.titleDesc},t),u.createElement("div",{className:C.a.contentArea},u.createElement("span",{className:C.a.switchTitle},k.k.action),u.createElement(O.a,{onChange:s,checked:o.approve===T.APPROVE.need})));default:return null}var t,r,n}(r))},A=r(617),N=r(138),D=r(229),R=r.n(D),M=r(253),F=r(137),G=r(105),U=r(270);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function z(){z=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==B(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function W(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function K(e,t,r,n,o){if("get"===e)try{return JSON.parse(b.a.get("joinToken"))["".concat(t,"-").concat(r,"-").concat(n)]}catch(e){return null}if("save"===e){var a=JSON.parse(b.a.get("joinToken"))||{},i=Object.keys(a);20!==i.length||"".concat(t,"-").concat(r,"-").concat(n)in a||delete a[i[0]],a["".concat(t,"-").concat(r,"-").concat(n)]=y()(o,["role","approve","allow_outsider","organization_user_role"]),b.a.set("joinToken",JSON.stringify(a))}}function $(e){var t,r,n=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.isEditing;if(t)return e.getJoinUrl(t,r)},o=g()(e.inviteSelectorType),a=null===(t=e.inviteTarget)||void 0===t?void 0:t.id,i=K("get",o,a,e.inviteModalContent);r=e.inviteSelectorType===U.memberSelectorType.GROUP?F.ROLE.member:e.isEditing||"inviteModal"===e.inviteModalContent?M.ROLE.edit:M.ROLE.readonly;var u=V(l.a.useState(i?i.role:r),2),s=u[0],f=u[1],d=V(l.a.useState(i?i.allow_outsider:T.ALLOW_OUTSIDER.NORMAL),2),p=d[0],h=d[1],m=T.APPROVE.noneed,y=V(l.a.useState(i?i.approve:m),2),v=y[0],b=y[1],_=V(l.a.useState(),2),w=_[0],j=_[1],E=V(l.a.useState(!1),2),O=E[0],S=E[1],x=V(l.a.useState(i?i.organization_user_role:G.ROLE.member),2),k=x[0],C=x[1],P=l.a.useRef(!1),L=function(t){return S(!0),e.getToken({approve:v,force:t,role:s,allow_outsider:p,organization_user_role:k}).then((function(t){return b(t.approve),f(t.role),h(t.allow_outsider),C(t.organization_user_role),j(n(t)),K("save",o,a,e.inviteModalContent,t),S(!1),t})).catch((function(e){S(!1),c.a.error(e.message)}))};l.a.useEffect((function(){L()}),[]);var I=function(){var t,r=(t=z().mark((function t(){return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return S(!0),t.next=3,e.deleteTokens();case 3:return t.abrupt("return",L(!0).then((function(){setTimeout((function(){S(!1),c.a.success(__("重置邀请链接成功"))}),500)})).catch((function(){S(!1)})));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){W(a,n,o,i,c,"next",e)}function c(e){W(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return{state:{joinUrl:w,loading:O,targetType:o,roleType:s,allowOutsider:p,approve:v,memberType:k},onCopyUrl:function(t){var r=e.getCopyText(w,s);t.currentTarget&&t.currentTarget.setAttribute("data-url",r),R()(r,{format:"text/plain"}),c.a.success(__("链接已复制"))},onRefreshLink:I,onCheckChange:function(t){var r=t?T.APPROVE.need:T.APPROVE.noneed;e.updateToken({approve:r,role:s,allow_outsider:p,organization_user_role:k}).then((function(){b(r),K("save",o,a,e.inviteModalContent,{allow_outsider:p,approve:r,organization_user_role:k,role:s}),P.current=!0})).catch((function(e){c.a.error(e.message)}))},onAllowOutsiderChange:function(t){var r=t?T.ALLOW_OUTSIDER.ALLOW:T.ALLOW_OUTSIDER.NORMAL;e.getToken({approve:v,role:s,allow_outsider:r,organization_user_role:k}).then((function(t){h(t.allow_outsider),j(n(t)),K("save",o,a,e.inviteModalContent,t),P.current=!0})).catch((function(e){c.a.error(e.message)}))},onMemberTypeChange:function(t){e.getToken({approve:v,role:s,allow_outsider:p,organization_user_role:t}).then((function(t){C(t.organization_user_role),j(n(t)),K("save",o,a,e.inviteModalContent,t),P.current=!0})).catch((function(e){c.a.error(e.message)}))},onRoleTypeChange:function(t){e.getToken({approve:v,role:t,allow_outsider:p,organization_user_role:k}).then((function(t){f(t.role),j(n(t)),K("save",o,a,e.inviteModalContent,t),P.current=!0})).catch((function(e){c.a.error(e.message)}))},triggerFakeLoading:function(){P.current&&(S(!0),setTimeout((function(){S(!1)}),500),P.current=!1)}}}function H(e){var t,r,c,u,s=e.moreSettingOptions,f=e.inviteModalContent,d=e.onBackShare,m=e.toggleTitle,y=e.toggleCollaboratorList,v=e.organization,g=e.group,b=e.inviteSelectorType,E=$(e),O=E.state,S=E.onCopyUrl,x=E.onRefreshLink,k=E.onCheckChange,P=E.onAllowOutsiderChange,L=E.onMemberTypeChange,D=E.onRoleTypeChange,R=E.triggerFakeLoading,G=V(l.a.useState(!1),2),B=G[0],z=G[1],W=V(l.a.useState(""),2),q=W[0],K=W[1],H=V(l.a.useState(""),2),Y=H[0],Z=H[1],X=V(l.a.useState(!1),2),Q=X[0],J=X[1],ee=l.a.useMemo((function(){var e=null!=v&&v.id?N.a.ORG:N.a.PERSON;return Object(_.a)()?e:N.a.INTERNAL}),[v]),te=[{type:"collaborationSet",title:__("协作权限"),defaultValue:O.roleType===M.ROLE.edit?__("可编辑"):__("可阅读"),icon:"icon-limits"},{type:"allowOutsiderSet",title:__("邀请空间外人员"),hidden:!(ee===N.a.ORG&&b===U.memberSelectorType.BOOK),defaultValue:O.allowOutsider===T.ALLOW_OUTSIDER.NORMAL?__("关闭"):__("已开启"),icon:"icon-range"},{type:"needCheckSet",title:__("需要审批确认加入"),defaultValue:O.approve===T.APPROVE.need?__("已开启"):__("关闭"),icon:"icon-verify"},{type:"resetLinkSet",title:__("重置邀请链接"),noDetail:!0,icon:"antd-sync"}],re=[{type:"groupMemberSet",title:__("人员角色"),defaultValue:O.roleType===F.ROLE.member?__("成员"):__("只读成员"),icon:"icon-limits"},{type:"allowOutsiderSet",title:__("邀请空间外人员"),hidden:Object(w.f)(g,v)||ee===N.a.INTERNAL,defaultValue:O.allowOutsider===T.ALLOW_OUTSIDER.NORMAL?__("关闭"):__("已开启"),icon:"icon-range"},{type:"needCheckSet",title:__("需要审批确认加入"),defaultValue:O.approve===T.APPROVE.need?__("已开启"):__("关闭"),icon:"icon-approval"},{type:"resetLinkSet",title:__("重置邀请链接"),noDetail:!0,icon:"antd-sync"}],ne=function(e,t){"inviteModal"===f&&m(!1),"collaboratorPanel"===f&&y(!1),z(!0),K(e),Z(t)};return l.a.createElement("div",{className:A.a.sharePanel},B?l.a.createElement(I,{organization:v,panelType:q,panelTitle:Y,state:O,moreSettingOptions:s,handleRoleTypeChange:D,handleMemberTypeChange:L,handleAllowOutsiderChange:P,handleCheckChange:k,onBack:function(){"inviteModal"===f&&m(!0),"collaboratorPanel"===f&&y(!0),z(!1),R()}}):l.a.createElement(l.a.Fragment,null,"inviteModal"===f&&(r=b===U.memberSelectorType.GROUP,c=r?__("通过链接邀请添加成员"):__("通过链接邀请参与协作"),u=r?__("拿到链接的人可成为团队成员、只读成员"):__("拿到链接的人可获得编辑、阅读等权限"),l.a.createElement("div",{className:A.a.main},l.a.createElement("div",{className:A.a.mainIntro},l.a.createElement(i.a.Item,{className:A.a.inviteItem},l.a.createElement(i.a.Item.Meta,{avatar:l.a.createElement(h.b,{className:p()(A.a.itemIcon,A.a.appointIcon),name:"nav-invite",width:40}),title:c,description:u}))),l.a.createElement("div",{className:A.a.moreConfigs},l.a.createElement(n.a,{spinning:O.loading,delay:150},l.a.createElement("div",{className:A.a.shareLinkSet},l.a.createElement(a.a,{className:A.a.shareLinkShow,disabled:!0,placeholder:O.joinUrl}),l.a.createElement(o.a,{className:A.a.shareButton,onClick:function(e){O.loading||S(e)}},__("复制链接")))),l.a.createElement(j.a,{settings:r?re:te,onClick:function(e,t){"resetLinkSet"===e?x():ne(e,t)}})))),"inviteSharePanel"===f&&(t=__("拿到链接的人可获得{linkAbility}权限",{linkAbility:O.roleType===M.ROLE.edit?__("编辑"):__("阅读")}),l.a.createElement("div",{className:C.a.shareDetailSettingPanel},l.a.createElement("div",{className:C.a.title,onClick:function(){return d()}},l.a.createElement(h.b,{className:C.a.backIcon,name:"arrow-down",width:20}),__("链接添加协作者")),l.a.createElement("p",{className:C.a.linkTitleDesc},t),l.a.createElement(n.a,{spinning:O.loading,delay:150},l.a.createElement("div",{className:C.a.linkContentArea},l.a.createElement(a.a,{className:C.a.copyLink,disabled:!0,placeholder:O.joinUrl}),l.a.createElement(o.a,{className:C.a.inviteCopyBtn,size:"large",type:"primary",onClick:function(e){O.loading||S(e)}},__("复制链接")))),l.a.createElement("div",{className:C.a.moreConfigSettings},l.a.createElement(j.a,{settings:te,onClick:function(e,t){"resetLinkSet"===e?x():ne(e,t)}})))),"collaboratorPanel"===f&&function(){var e=__("拿到链接的人可获得{linkAbility}权限",{linkAbility:O.roleType===M.ROLE.edit?__("编辑"):__("阅读")});return l.a.createElement("div",{className:p()(C.a.shareDetailSettingPanel,A.a.inviteSelector)},l.a.createElement("p",{className:C.a.linkTitleDesc,style:{marginTop:0}},e),l.a.createElement(n.a,{spinning:O.loading,delay:150},l.a.createElement("div",{className:C.a.linkContentArea},l.a.createElement(a.a,{className:C.a.copyLink,disabled:!0,placeholder:O.joinUrl}),l.a.createElement(o.a,{className:C.a.inviteCopyBtn,size:"large",type:"primary",onClick:function(e){O.loading||S(e)}},__("复制链接")))),l.a.createElement("div",{className:C.a.moreConfigToggler},l.a.createElement("span",{className:C.a.moreConfigsTip,onClick:function(){return J((function(e){return!e}))}},__("高级设置"),l.a.createElement(h.b,{name:"arrow-down",className:C.a.expandIcon,"data-activated":Q,size:16}))),Q&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:C.a.moreConfigSettings},l.a.createElement(j.a,{settings:te,onClick:function(e,t){"resetLinkSet"===e?x():ne(e,t)}}))))}()))}H.propTypes={getJoinUrl:f.a.func,getToken:f.a.func,updateToken:f.a.func,deleteTokens:f.a.func,getCopyText:f.a.func,inviteSelectorType:f.a.string,inviteModalContent:f.a.oneOf(["inviteModal","inviteSharePanel","collaboratorPanel"]),onBackShare:f.a.func,toggleCollaboratorList:f.a.func,toggleTitle:f.a.func,moreSettingOptions:f.a.array,organization:f.a.object,group:f.a.object,isEditing:f.a.bool,inviteTarget:f.a.object},H.defaultProps={inviteModalContent:"inviteModal"};t.a=H},2722:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(555),i=r(2054),c=r(213),u=r(2730);t.a=Object(c.b)(Object(a.d)((function(e){return{guide:e.guide}}))((function(e){var t=e.guide,r=e.tip_id;return Object(n.useEffect)((function(){var e=i.a.findFeatureGuide({tip_id:r,type:"lite"});e&&i.a.readLiteFeatureGuide(e)}),[]),o.a.createElement("div",{className:e.className||"",style:e.style,"data-testid":"guide_".concat(r),onClick:function(){var t=i.a.findFeatureGuide({tip_id:r,type:"mini"});i.a.readMiniFeatureGuide(t,e.dispatch)}},e.children,("#guide"===window.location.hash||!t.readTip[r])&&o.a.createElement(u.a.Mini,null))})),!1)},2723:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){return e?(e=e.toLowerCase(),{organization:__("空间"),group:__("团队"),book:__("知识库"),doc:__("文档"),thread:__("话题"),sheet:__("表格"),resource:__("资源知识库"),design:__("图集"),column:__("专栏")}[e]||__("文档")):""}},2730:function(e,t,r){"use strict";r(113);var n=r(35),o=r(0),a=r.n(o),i=r(8),c=r.n(i),u=r(31),l=r.n(u),s=r(458);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){return a.a.createElement("span",{className:"larkui-feature-guide-sign",style:t,onClick:e,"data-testid":"feature-guide-sign"},a.a.createElement("span",{className:"larkui-feature-guide-sign-spirit-outer"}),a.a.createElement("span",{className:"larkui-feature-guide-sign-spirit-inner"}))}function g(e){var t=e.type,r=void 0===t?"lite":t,i=e.tip,c=e.enableMultiLines,u=e.guideSignContainerStyle,f=m(Object(o.useState)(!0),2),d=f[0],h=f[1];if(!d)return null;var y=document.querySelector(e.containerSelector);if(!y)return null;var g=function(){h(!1),e.onRead()},b=function(){var t=y.querySelector(".larkui-feature-guide");if(t)return t;(t=document.createElement("div")).classList.add("larkui-feature-guide");if(t.classList.add({lite:"larkui-feature-guide-lite",mini:"larkui-feature-guide-mini",custom:"larkui-feature-guide-custom"}[r]),t.setAttribute("data-testid","feature-guide"),["lite","custom"].includes(r)){y.style.position="relative";var n=y.getBoundingClientRect();switch(e.placement){case"right":t.style.left="".concat(n.width+2,"px");break;case"left":t.style.left="-14px";break;case"top":t.style.bottom="".concat((e.offsetY?parseInt(e.offsetY,10):0)+n.height,"px"),t.style.left="".concat(n.width/2-6,"px");break;default:t.style.left="".concat((n.width-12)/2,"px"),t.style.bottom=e.offsetY||"0"}e.styleFix&&e.styleFix(t)}var o=e.readTrigger||[],a=function t(r){r.target.closest(".larkui-feature-guide")&&(r.preventDefault(),r.stopPropagation()),h(!1),e.onRead(),o.forEach((function(r){y.removeEventListener(r,e.closeGuide||t)}))};return o.forEach((function(t){y.addEventListener(t,e.closeGuide||a)})),y.appendChild(t),t}(),_=v(g,u),w=c?"larkui-feature-guide-lite-close-multi-line":"larkui-feature-guide-lite-close";if("mini"===r)return l.a.createPortal(_,b);var j="center"!==e.placement&&"top"!==e.placement;return"custom"===r?l.a.createPortal(a.a.createElement(e.customRender,p(p({},e),{},{sign:_,visible:d,arrowPointAtCenter:j,portalDom:b,onReadGuide:g,setVisible:h})),b):"lite"===r?l.a.createPortal(a.a.createElement(n.a,{overlayClassName:"larkui-feature-guide-lite-tip",arrowPointAtCenter:j,autoAdjustOverflow:!1,defaultVisible:!0,title:a.a.createElement(a.a.Fragment,null,c?a.a.createElement("div",{className:"larkui-feature-guide-content",onClick:g},i):a.a.createElement("span",{className:"larkui-feature-guide-lite-content"},a.a.createElement("strong",null,i)),a.a.createElement("span",{onClick:g,className:w},a.a.createElement(s.default,{width:16,height:16}))),placement:e.placement,visible:d,align:{targetOffset:[0,4]}},_),b):void 0}g.Mini=function(){return a.a.createElement("span",{className:"larkui-feature-guide-mini","data-testid":"standalone-mini-guide"},v((function(){})))},g.defaultProps={enableMultiLines:!1},g.propTypes={type:c.a.oneOf(["lite","mini","custom"]),tip:c.a.oneOfType([c.a.string,c.a.node]),containerSelector:c.a.string.isRequired,readTrigger:c.a.array,placement:c.a.oneOf(["bottomRight","bottomLeft","bottom","right","left","top"]),offsetY:c.a.string,onRead:c.a.func.isRequired,guideSignContainerStyle:c.a.object,enableMultiLines:c.a.bool,customRender:c.a.element,styleFix:c.a.func,closeGuide:c.a.func};t.a=g},2780:function(e,t,r){"use strict";var n=r(401),o=r(1744),a=r(373),i=r(109),c=r(312),u=r(126),l=r(70);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(){f=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p={};function h(){}function m(){}function y(){}var v={};u(v,a,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(T([])));b&&b!==t&&r.call(b,a)&&(v=b);var _=y.prototype=h.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function o(n,a,i,c){var u=d(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==s(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=d(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=y,n(_,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:m,configurable:!0}),m.displayName=u(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(j.prototype),u(j.prototype,i,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(_),u(_,c,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){m(a,n,o,i,c,"next",e)}function c(e){m(a,n,o,i,c,"throw",e)}i(void 0)}))}}function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b={limitExceeded:function(e){return e&&e.length>=a.MAX_NODES_COUNT},shouldShowToc:function(e){return!!e&&"Book"===e.layout},shouldShowColumnToc:function(e){return!!e&&"Column"===e.layout},parseCatalogVersions:function(e){if(!e)return[];var t,r=[],o=v(e);try{for(o.s();!(t=o.n()).done;){var a=t.value,i=a.item.toc_yml;if(i)try{var c=Object(n.ymlToToc)(i),u=c[0];u&&u.published&&(a.meta=c[0],a.toc=c.slice(1),a.catalog_tree=Object(n.generateTreeFromYml)(i),r.push(a))}catch(e){}}}catch(e){o.e(e)}finally{o.f()}return r},parseVersion:function(e){if(e){try{var t,r=e.item.toc_yml,o=Object(n.ymlToToc)(r),a=v(o);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.key=i.uuid}}catch(e){a.e(e)}finally{a.f()}var c=o[0];c?(e.meta=c,e.toc=o.slice(1)):e.toc=o,e.catalog_tree=Object(n.generateTreeByTocItems)(e.toc)}catch(e){console.error(e)}return e}},updateNode:function(e){var t=arguments,r=this;return y(f().mark((function o(){var i,c,l;return f().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=t.length>1&&void 0!==t[1]?t[1]:{},c=t.length>2&&void 0!==t[2]?t[2]:{catalog_tree:!0},e){o.next=4;break}return o.abrupt("return");case 4:if(!e.should_manually_create_uid){o.next=8;break}return o.next=7,u.webProxy.catalogNodes.ensureUpdateTocYml({book_id:e.id,toc_yml:Object(n.tocToYml)(e.toc)});case 7:e.should_manually_create_uid=!1;case 8:return o.prev=8,o.next=11,u.webProxy.catalogNodes.update(p({book_id:e.id,format:"list"},i),{ignoreGlobalMessage:!0,useOriginResp:!0});case 11:l=o.sent,o.next=18;break;case 14:throw o.prev=14,o.t0=o.catch(8),"limit_exceeded"===o.t0.code&&(o.t0.message=__("目录节点数超过最大限制 {MAX_NODES_COUNT}，无法新增",{MAX_NODES_COUNT:a.MAX_NODES_COUNT})),o.t0;case 18:return o.abrupt("return",r._returnWithCatalogTree(p(p({},l.meta),{},{toc:l.data}),c));case 19:case"end":return o.stop()}}),o,null,[[8,14]])})))()},_returnWithCatalogTree:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).catalog_tree&&e.toc&&(e.catalog_tree=Object(n.generateTreeByTocItems)(e.toc)),e},getCatalogNodes:function(e){var t=arguments;return y(f().mark((function r(){var o,a,i,c,l;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.length>1&&void 0!==t[1]?t[1]:{},e){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,u.webProxy.catalogNodes.find(p({book_id:e},o),{useOriginResp:!0});case 5:a=r.sent,i=v(a.data);try{for(i.s();!(c=i.n()).done;)(l=c.value).key=l.uuid}catch(e){i.e(e)}finally{i.f()}return r.abrupt("return",p({catalog_tree:Object(n.generateTreeByTocItems)(a.data),toc:a.data},a.meta));case 9:case"end":return r.stop()}}),r)})))()},actionsInReaderPage:function(e,t){var r=[];return e.type!==a.TYPES.link?r.push(l.a.CATALOG.rename):r.push(l.a.CATALOG.edit_link),t.create_doc&&e.type===a.TYPES.doc&&r.push(l.a.DOC.edit),e.type!==a.TYPES.title&&e.type!==a.TYPES.uncreated_doc&&r.push(l.a.DOC.copyLink),t.create_doc&&(r.push(l.a.DOC.divide),r.push(l.a.CATALOG.remove),r.push(l.a.DOC.divide),r.push(l.a.CATALOG.copy),r.push(l.a.CATALOG.move)),t.export&&e.type===a.TYPES.doc&&r.push(l.a.CATALOG.export),t.create_doc&&(r.push(l.a.DOC.divide),r.push(l.a.CATALOG.destroy)),r},actionsForEdit:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[];return"desktop"===t?(n.push(l.a.CATALOG.move),n):(e.type===a.TYPES.link?n.push(l.a.CATALOG.edit_link):n.push(l.a.CATALOG.rename),"lite"===t?this.actionsInReaderPage(e,r):("full"===t&&(e.type===a.TYPES.doc&&(n.push(l.a.CATALOG.view_doc),n.push(l.a.CATALOG.remove),n.push(l.a.DOC.edit)),n.push(l.a.CATALOG.copy),n.push(l.a.CATALOG.move),r.export&&e.type===a.TYPES.doc&&n.push(l.a.CATALOG.export),e.share&&e.share.status===c.STATUS.active&&(n.push(l.a.DOC.divide),n.push(l.a.DOC.unshare)),n.push(l.a.DOC.divide),n.push(l.a.CATALOG.destroy)),n))},formatNode:function(e){return{type:e.type||i.TOC_TYPES.DOC,title:e.title,uuid:e.uuid||Object(o.nanoid)(16),url:e.url||null,prev_uuid:e.prev_uuid||null,sibling_uuid:e.sibling_uuid||null,child_uuid:e.child_uuid||null,parent_uuid:e.parent_uuid||null,doc_id:e.doc_id||null,level:e.level||0,id:e.doc_id||null,open_window:0===e.open_window?0:1,visible:0===e.visible?0:1}},insertNodeToCatalog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{catalog_tree:!0},n=b.formatNode(t),o=t.target_uuid,a=t.action,i=e.findIndex((function(e){return e.uuid===o}));if(i>=0){var c=e[i];n.level="insertSibling"===a?c.level:c.level+1,e.splice(i+1,0,n)}else e.unshift(n);return this._returnWithCatalogTree({toc:e,node_uuid:n.uuid},r)},getRedirectURL:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.group,o=r.book,a=r.currentItem,i=e.filter((function(e){return"DOC"===e.type&&e.id}));if(!a)return i&&i[0]?"/".concat(n.login,"/").concat(o.slug,"/").concat(i[0].url):"";var c,u=i.findIndex((function(e){return e.url&&e.url===a.url}));return i=t.filter((function(e){return"DOC"===e.type&&e.id})),u<0?c=i[0]:(c=i[u]||null)||(c=i[u-1]||null),c?"/".concat(n.login,"/").concat(o.slug,"/").concat(c.url):""}};t.a=b},2804:function(e,t,r){"use strict";r(64);var n=r(21),o=(r(1733),r(356)),a=(r(2779),r(2597)),i=(r(61),r(23)),c=r(0),u=r.n(c),l=r(8),s=r.n(l),f=r(572),d=r(243),p=r(13),h=r.n(p),m=r(42),y="index-module_coverUploaderWrapper_JM8NQ",v="index-module_miniCoverUploaderWrapper_VBkGu",g="index-module_cropper_FJZMe",b="index-module_miniCropperWrapper_kKArf",_="index-module_miniCropper_x-fcL",w="index-module_placeholderWrapper_I8JnT",j="index-module_miniPlaceholderWrapper_CXNui",E="index-module_placeholder_fRP2-",O="index-module_placeholderImg_RI3Xy",S="index-module_preview_0S38r",x="index-module_uploadWrapper_Lddj1",k="index-module_miniUploadWrapper_kA5F2",T="index-module_uploadAction_IvY3J",C="index-module_miniUploadAction_zkhyc",P="index-module_uploadBtn_3NoLt",L="index-module_clearBtn_Jvd1P",I="index-module_btnRemove_ewCeL",A="index-module_btnRemoveIcon_Kaa0G";function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D.apply(this,arguments)}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,z(n.key),n)}}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=U(e);if(t){var o=U(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}(this,r)}}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}function B(e,t,r){return(t=z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e){var t=function(e,t){if("object"!==N(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===N(t)?t:String(t)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(p,e);var t,r,l,s=F(p);function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),B(G(t=s.call(this,e)),"onSubmit",(function(){return new Promise((function(e,r){t.cropper?t.handleUpload().then((function(t){return e(t&&t.url)}),(function(e){try{var t;if(null!==(t=e.xhr)&&void 0!==t&&t.response){var n,o=JSON.parse(e.xhr.response),a=window.__member_message_ref&&(null===(n=window.__member_message_ref.current)||void 0===n?void 0:n.getMessage(o.code,{isOwner:!0},o))||{},c=a.msg,u=a.alwaysOpen,l=a.level,s=a.callback;c?s(i.a[l||"info"](c,u?0:void 0)):i.a.error(__("封面上传失败，请重试"))}}catch(e){}finally{r(e)}})):e(t.state.cover)}))})),B(G(t),"getUploadProps",(function(){return{beforeUpload:function(e){var r=t.props.fileSizeLimit;if(e.size/1024/1024>r)return i.a.error(__("图片大小不能超过 {size}M",{size:r})),!1;var n=new FileReader;return n.addEventListener("load",(function(){t.setState({cover:n.result}),t.coverRef.current.focus(),"function"==typeof t.props.beforeUpload&&t.props.beforeUpload(n.result)}),!1),e&&n.readAsDataURL(e),!1},showUploadList:!1,accept:"image/*"}})),B(G(t),"handleUpload",(function(){if(t.cropper&&void 0!==t.cropper.getCroppedCanvas())return new Promise((function(e,r){t.cropper.getCroppedCanvas({imageSmoothingQuality:"high"}).toBlob((function(n){var o=new FormData;t.props.attachable_type&&o.append("attachable_type",t.props.attachable_type),t.props.attachable_id&&o.append("attachable_id",t.props.attachable_id),o.append("file",n,"image.png"),o.append("ocr","off"),Object(d.ajax)({url:"/api/upload/attach",method:"POST",data:o,dataType:"json",processData:!1,success:function(t){e(t.data)},error:function(e){r(e)}})}),"image/png",1)}))})),B(G(t),"handleRemoveImg",(function(){t.setState({cover:""});var e=t.props.onRemove;e&&"function"==typeof e&&e()})),B(G(t),"renderCropper",(function(){var e=t.props,r=e.miniMode,n=e.cropperStyle,i=e.aspectRatio,c=e.previewKey,l=e.placeholder,s=e.cropperClassName,f=e.getCropper,d=e.cropperCheckCrossOrigin,m=e.cropperCrossOrigin,y=t.state.cover,v=n.containerWidth,w=n.containerHeight,j=n.cropWidth;return r?u.a.createElement("div",{className:b},u.a.createElement("div",{className:h()(_,s)},u.a.createElement(o.a.Dragger,D({},t.getUploadProps(),{openFileDialogOnClick:!y}),y?u.a.createElement(a.a,{ref:function(e){t.cropper=e,f(t.cropper)},checkCrossOrigin:d,crossOrigin:m,src:y,containerWidth:263,containerHeight:w,aspectRatio:i,preview:c?".".concat(c):".image-preview",cropWidth:j}):u.a.createElement(p.MiniPlaceholder,{placeholder:l})))):u.a.createElement("div",{className:h()(g,s),"data-testid":"cover-uploader-cropper"},u.a.createElement(o.a.Dragger,D({},t.getUploadProps(),{openFileDialogOnClick:!y}),y?u.a.createElement(a.a,{ref:function(e){t.cropper=e,f(t.cropper)},checkCrossOrigin:d,crossOrigin:m,src:y,containerWidth:v,containerHeight:w,aspectRatio:i,preview:c?".".concat(c):".image-preview",cropWidth:j}):u.a.createElement(p.Placeholder,{placeholder:l})))})),B(G(t),"renderUploader",(function(){var e=t.props,r=e.miniMode,a=e.previewClassName,i=e.previewKey,c=t.state.cover;return r?u.a.createElement("div",{className:k},u.a.createElement("div",{className:C},u.a.createElement(o.a,t.getUploadProps(),c?u.a.createElement(n.a,{className:P},__("重新上传")):u.a.createElement(n.a,null,u.a.createElement(f.default,null),u.a.createElement("span",{className:"text"},__("上传图片")))),c&&u.a.createElement(n.a,{className:L,onClick:t.handleRemoveImg},__("清除")))):u.a.createElement("div",{className:x},c&&u.a.createElement("div",{className:h()("image-preview",S,a,i),"data-testid":"cover-uploader-previewKey"}),u.a.createElement("div",{className:T},u.a.createElement(o.a,t.getUploadProps(),c?u.a.createElement(n.a,null,__("重新上传")):u.a.createElement(n.a,null,u.a.createElement(f.default,null),u.a.createElement("span",{className:"text"},__("上传图片")))),c&&u.a.createElement("span",{className:I,onClick:t.handleRemoveImg},u.a.createElement("span",{className:A},u.a.createElement(m.b,{name:"icon-delete",width:16})),u.a.createElement("span",null,__("清除")))))}));var r=e.defaultPreviewImage,l=e.cover;return t.state={cover:l||r},t.coverRef=Object(c.createRef)(),t.cropper=null,t}return t=p,(r=[{key:"componentDidUpdate",value:function(e){e.cover!==this.props.cover&&this.setState({cover:this.props.cover})}},{key:"componentWillUnmount",value:function(){this.coverRef=null,this.cropper=null}},{key:"render",value:function(){var e=this.props.miniMode;return u.a.createElement("div",{className:h()(e?v:y,this.props.className),ref:this.coverRef,tabIndex:"-1"},this.renderCropper(),this.renderUploader())}}])&&R(t.prototype,r),l&&R(t,l),Object.defineProperty(t,"prototype",{writable:!1}),p}(c.Component);W.Placeholder=function(e){var t=e.placeholder;return u.a.createElement("div",{className:w},u.a.createElement("div",{className:E},u.a.createElement("div",{className:O}),u.a.createElement("p",null,t||__("添加封面有助于吸引读者"))))},W.MiniPlaceholder=function(e){var t=e.placeholder;return u.a.createElement("div",{className:j},u.a.createElement("div",{className:E},u.a.createElement("div",{className:O}),u.a.createElement("p",null,t||__("添加封面有助于吸引读者"))))},W.Placeholder.propTypes={placeholder:s.a.string},W.propTypes={cover:s.a.string,beforeUpload:s.a.func,aspectRatio:s.a.number,cropperStyle:s.a.shape({containerWidth:s.a.number,containerHeight:s.a.number,cropWidth:s.a.number}),defaultPreviewImage:s.a.string,fileSizeLimit:s.a.number,cropperClassName:s.a.string,previewClassName:s.a.string,previewKey:s.a.string,onRemove:s.a.func,placeholder:s.a.string,attachable_type:s.a.string,attachable_id:s.a.number,miniMode:s.a.bool,getCropper:s.a.func,cropperCheckCrossOrigin:s.a.bool,cropperCrossOrigin:s.a.oneOf(["anonymous","use-credentials"])},W.defaultProps={cropperStyle:{containerWidth:240,containerHeight:150,cropWidth:400},aspectRatio:1.6,fileSizeLimit:20,getCropper:function(){},cropperCheckCrossOrigin:!0};t.a=W},2819:function(e,t,r){"use strict";r.r(t),r.d(t,"auditLogs",(function(){return h})),r.d(t,"block",(function(){return m})),r.d(t,"blockForSecurityOps",(function(){return y})),r.d(t,"hardDestroy",(function(){return v})),r.d(t,"find",(function(){return g})),r.d(t,"setPublic",(function(){return b})),r.d(t,"findOne",(function(){return _})),r.d(t,"unblock",(function(){return w})),r.d(t,"unblockForSecurityOps",(function(){return j})),r.d(t,"update",(function(){return E}));var n=r(11),o=["id"],a=["id"],i=["id"],c=["id"],u=["id"],l=["id"],s=["id"],f=["id"],d=["id"];function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,a=p(e,o),i="/api/adminpro/docs/".concat(r,"/audit_logs");return Object(n.c)(i,a,t).then((function(e){return t.useOriginResp?e:e.data}))}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,o=p(e,a),i="/api/adminpro/docs/".concat(r,"/block");return Object(n.e)(i,o,t).then((function(e){return t.useOriginResp?e:e.data}))}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,o=p(e,i),a="/api/adminpro/securityops/blockDoc/".concat(r);return Object(n.e)(a,o,t).then((function(e){return t.useOriginResp?e:e.data}))}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,o=p(e,c),a="/api/adminpro/docs/".concat(r,"/hard_destroy");return Object(n.e)(a,o,t).then((function(e){return t.useOriginResp?e:e.data}))}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.c)("/api/adminpro/docs",e,t).then((function(e){return t.useOriginResp?e:e.data}))}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,o=p(e,u),a="/api/adminpro/docs/".concat(r,"/set_public");return Object(n.e)(a,o,t).then((function(e){return t.useOriginResp?e:e.data}))}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,o=p(e,l),a="/api/adminpro/docs/".concat(r);return Object(n.c)(a,o,t).then((function(e){return t.useOriginResp?e:e.data}))}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,o=p(e,s),a="/api/adminpro/docs/".concat(r,"/unblock");return Object(n.e)(a,o,t).then((function(e){return t.useOriginResp?e:e.data}))}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,o=p(e,f),a="/api/adminpro/securityops/unblockDoc/".concat(r);return Object(n.e)(a,o,t).then((function(e){return t.useOriginResp?e:e.data}))}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.id,o=p(e,d),a="/api/adminpro/docs/".concat(r);return Object(n.f)(a,o,t).then((function(e){return t.useOriginResp?e:e.data}))}},2820:function(e,t,r){"use strict";r.r(t),r.d(t,"block",(function(){return o})),r.d(t,"blockForSecurityOps",(function(){return a})),r.d(t,"find",(function(){return i})),r.d(t,"unblock",(function(){return c})),r.d(t,"unblockForSecurityOps",(function(){return u}));var n=r(11);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.e)("/api/adminpro/notes/block",e,t).then((function(e){return t.useOriginResp?e:e.data}))}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.e)("/api/adminpro/securityops/blockNote",e,t).then((function(e){return t.useOriginResp?e:e.data}))}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.c)("/api/adminpro/notes",e,t).then((function(e){return t.useOriginResp?e:e.data}))}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.e)("/api/adminpro/notes/unblock",e,t).then((function(e){return t.useOriginResp?e:e.data}))}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.e)("/api/adminpro/securityops/unblockNote",e,t).then((function(e){return t.useOriginResp?e:e.data}))}},2822:function(e,t,r){"use strict";r(2492);var n=r(620),o=r(0),a=r.n(o),i=r(8),c=r.n(i),u=r(13),l=r.n(u),s=r(90),f=r.n(s);r(2821);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var p=["className","showSizeChanger"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(this,arguments)}function g(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var b=a.a.forwardRef((function(e,t){var r=e.className,o=e.showSizeChanger,i=void 0!==o&&o,c=g(e,p);return a.a.createElement(n.a,v({},c,{className:l()("larkui-pagination",r),showSizeChanger:i,ref:t}))}));b.propTypes=m(m({},n.a.PaginationProps),{},{className:c.a.string,showSizeChanger:c.a.bool}),f()(b,n.a),t.a=b},2860:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useGetState=void 0;var n=r(0);t.useGetState=function(e){var t=(0,n.useState)(e),r=t[0],o=t[1],a=(0,n.useRef)(r);return a.current=r,[r,o,(0,n.useCallback)((function(){return a.current}),[])]}},306:function(e,t,r){"use strict";r(2594);var n=r(262);r(529);t.a=n.a},3150:function(e,t,r){var n=r(202),o=r(2681),a=r(3151),i=r(178);e.exports=function(e,t){return t=n(t,e),null==(e=a(e,t))||delete e[i(o(t))]}},3151:function(e,t,r){var n=r(237),o=r(1742);e.exports=function(e,t){return t.length<2?e:n(e,o(t,0,-1))}},3451:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!("string"==typeof e||e instanceof String)){var t;throw t=null===e?"null":"object"===(t=n(e))&&e.constructor&&e.constructor.hasOwnProperty("name")?e.constructor.name:"a ".concat(t),new TypeError("Expected string but received ".concat(t,"."))}},e.exports=t.default,e.exports.default=t.default},3456:function(e,t,r){"use strict";var n=r(612);r.d(t,"a",(function(){return n.a}))},3457:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e},e.exports=t.default,e.exports.default=t.default},3466:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,o.default)(t),!(r=String(r)))return e(t,4)||e(t,6);if("4"===r)return!!a.test(t)&&t.split(".").sort((function(e,t){return e-t}))[3]<=255;if("6"===r){var n=t.split(":"),c=!1,u=e(n[n.length-1],4),l=u?7:8;if(n.length>l)return!1;if("::"===t)return!0;"::"===t.substr(0,2)?(n.shift(),n.shift(),c=!0):"::"===t.substr(t.length-2)&&(n.pop(),n.pop(),c=!0);for(var s=0;s<n.length;++s)if(""===n[s]&&s>0&&s<n.length-1){if(c)return!1;c=!0}else if(u&&s===n.length-1);else if(!i.test(n[s]))return!1;return c?n.length>=1:n.length===l}return!1};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,i=/^[0-9A-F]{1,4}$/i;e.exports=t.default,e.exports.default=t.default},3467:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commaDecimal=t.dotDecimal=t.arabicLocales=t.englishLocales=t.decimal=t.alphanumeric=t.alpha=void 0;var n={"en-US":/^[A-Z]+$/i,"bg-BG":/^[А-Я]+$/i,"cs-CZ":/^[A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]+$/i,"da-DK":/^[A-ZÆØÅ]+$/i,"de-DE":/^[A-ZÄÖÜß]+$/i,"el-GR":/^[Α-ω]+$/i,"es-ES":/^[A-ZÁÉÍÑÓÚÜ]+$/i,"fr-FR":/^[A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"it-IT":/^[A-ZÀÉÈÌÎÓÒÙ]+$/i,"nb-NO":/^[A-ZÆØÅ]+$/i,"nl-NL":/^[A-ZÁÉËÏÓÖÜÚ]+$/i,"nn-NO":/^[A-ZÆØÅ]+$/i,"hu-HU":/^[A-ZÁÉÍÓÖŐÚÜŰ]+$/i,"pl-PL":/^[A-ZĄĆĘŚŁŃÓŻŹ]+$/i,"pt-PT":/^[A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ]+$/i,"ru-RU":/^[А-ЯЁ]+$/i,"sl-SI":/^[A-ZČĆĐŠŽ]+$/i,"sk-SK":/^[A-ZÁČĎÉÍŇÓŠŤÚÝŽĹŔĽÄÔ]+$/i,"sr-RS@latin":/^[A-ZČĆŽŠĐ]+$/i,"sr-RS":/^[А-ЯЂЈЉЊЋЏ]+$/i,"sv-SE":/^[A-ZÅÄÖ]+$/i,"tr-TR":/^[A-ZÇĞİıÖŞÜ]+$/i,"uk-UA":/^[А-ЩЬЮЯЄIЇҐі]+$/i,"ku-IQ":/^[ئابپتجچحخدرڕزژسشعغفڤقکگلڵمنوۆھەیێيطؤثآإأكضصةظذ]+$/i,ar:/^[ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]+$/};t.alpha=n;var o={"en-US":/^[0-9A-Z]+$/i,"bg-BG":/^[0-9А-Я]+$/i,"cs-CZ":/^[0-9A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]+$/i,"da-DK":/^[0-9A-ZÆØÅ]+$/i,"de-DE":/^[0-9A-ZÄÖÜß]+$/i,"el-GR":/^[0-9Α-ω]+$/i,"es-ES":/^[0-9A-ZÁÉÍÑÓÚÜ]+$/i,"fr-FR":/^[0-9A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"it-IT":/^[0-9A-ZÀÉÈÌÎÓÒÙ]+$/i,"hu-HU":/^[0-9A-ZÁÉÍÓÖŐÚÜŰ]+$/i,"nb-NO":/^[0-9A-ZÆØÅ]+$/i,"nl-NL":/^[0-9A-ZÁÉËÏÓÖÜÚ]+$/i,"nn-NO":/^[0-9A-ZÆØÅ]+$/i,"pl-PL":/^[0-9A-ZĄĆĘŚŁŃÓŻŹ]+$/i,"pt-PT":/^[0-9A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ]+$/i,"ru-RU":/^[0-9А-ЯЁ]+$/i,"sl-SI":/^[0-9A-ZČĆĐŠŽ]+$/i,"sk-SK":/^[0-9A-ZÁČĎÉÍŇÓŠŤÚÝŽĹŔĽÄÔ]+$/i,"sr-RS@latin":/^[0-9A-ZČĆŽŠĐ]+$/i,"sr-RS":/^[0-9А-ЯЂЈЉЊЋЏ]+$/i,"sv-SE":/^[0-9A-ZÅÄÖ]+$/i,"tr-TR":/^[0-9A-ZÇĞİıÖŞÜ]+$/i,"uk-UA":/^[0-9А-ЩЬЮЯЄIЇҐі]+$/i,"ku-IQ":/^[٠١٢٣٤٥٦٧٨٩0-9ئابپتجچحخدرڕزژسشعغفڤقکگلڵمنوۆھەیێيطؤثآإأكضصةظذ]+$/i,ar:/^[٠١٢٣٤٥٦٧٨٩0-9ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]+$/};t.alphanumeric=o;var a={"en-US":".",ar:"٫"};t.decimal=a;var i=["AU","GB","HK","IN","NZ","ZA","ZM"];t.englishLocales=i;for(var c,u=0;u<i.length;u++)n[c="en-".concat(i[u])]=n["en-US"],o[c]=o["en-US"],a[c]=a["en-US"];var l=["AE","BH","DZ","EG","IQ","JO","KW","LB","LY","MA","QM","QA","SA","SD","SY","TN","YE"];t.arabicLocales=l;for(var s,f=0;f<l.length;f++)n[s="ar-".concat(l[f])]=n.ar,o[s]=o.ar,a[s]=a.ar;var d=[];t.dotDecimal=d;var p=["bg-BG","cs-CZ","da-DK","de-DE","el-GR","es-ES","fr-FR","it-IT","ku-IQ","hu-HU","nb-NO","nn-NO","nl-NL","pl-PL","pt-PT","ru-RU","sl-SI","sr-RS@latin","sr-RS","sv-SE","tr-TR","uk-UA"];t.commaDecimal=p;for(var h=0;h<d.length;h++)a[d[h]]=a["en-US"];for(var m=0;m<p.length;m++)a[p[m]]=",";n["pt-BR"]=n["pt-PT"],o["pt-BR"]=o["pt-PT"],a["pt-BR"]=a["pt-PT"],n["pl-Pl"]=n["pl-PL"],o["pl-Pl"]=o["pl-PL"],a["pl-Pl"]=a["pl-PL"]},3469:function(e,t,r){"use strict";var n=r(2679);r.d(t,"a",(function(){return n.a}))},3474:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),e=Date.parse(e),isNaN(e)?null:new Date(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3475:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){"object"===n(e)&&null!==e?e="function"==typeof e.toString?e.toString():"[object Object]":(null==e||isNaN(e)&&!e.length)&&(e="");return String(e)},e.exports=t.default,e.exports.default=t.default},3476:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,n.default)(e),(t=(0,o.default)(t,i)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));for(var r=e.split("."),a=0;a<r.length;a++)if(r[a].length>63)return!1;if(t.require_tld){var c=r.pop();if(!r.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(c))return!1;if(/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20]/.test(c))return!1}for(var u,l=0;l<r.length;l++){if(u=r[l],t.allow_underscores&&(u=u.replace(/_/g,"")),!/^[a-z\u00a1-\uffff0-9-]+$/i.test(u))return!1;if(/[\uff01-\uff5e]/.test(u))return!1;if("-"===u[0]||"-"===u[u.length-1])return!1}return!0};var n=a(r(3451)),o=a(r(3457));function a(e){return e&&e.__esModule?e:{default:e}}var i={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};e.exports=t.default,e.exports.default=t.default},3477:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){return e.some((function(e){return t===e}))};t.default=n,e.exports=t.default,e.exports.default=t.default},3490:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(a=o.key,i=void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===n(i)?i:String(i)),o)}var a,i}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__=t}var t,r,n;return t=e,(r=[{key:"_stringify",value:function(e){return null==e||"number"==typeof e&&isNaN(e)?e="":"string"!=typeof e&&(e=String(e)),e}}])&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.BaseValidatorClass=a},3492:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),parseFloat(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3493:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r,n;(0,o.default)(e),"object"===a(t)?(r=t.min||0,n=t.max):(r=arguments[1],n=arguments[2]);var i=encodeURI(e).split(/%..|./).length-1;return i>=r&&(void 0===n||i<=n)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}e.exports=t.default,e.exports.default=t.default},3494:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,o.default)(e);var r=(t=t||{}).hasOwnProperty("allow_leading_zeroes")&&!t.allow_leading_zeroes?a:i,n=!t.hasOwnProperty("min")||e>=t.min,c=!t.hasOwnProperty("max")||e<=t.max,u=!t.hasOwnProperty("lt")||e<t.lt,l=!t.hasOwnProperty("gt")||e>t.gt;return r.test(e)&&n&&c&&u&&l};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,i=/^[-+]?[0-9]+$/;e.exports=t.default,e.exports.default=t.default},3495:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)},t.fullWidth=void 0;var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;t.fullWidth=a},3496:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)},t.halfWidth=void 0;var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;t.halfWidth=a},3497:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^[0-9A-F]+$/i;e.exports=t.default,e.exports.default=t.default},3498:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,o.default)(e);var r=t?new RegExp("^[".concat(t,"]+"),"g"):/^\s+/g;return e.replace(r,"")};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3499:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,o.default)(e);for(var r=t?new RegExp("[".concat(t,"]")):/\s/,n=e.length-1;n>=0&&r.test(e[n]);n--);return n<e.length?e.substr(0,n+1):e};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3500:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,o.default)(e),e.replace(new RegExp("[".concat(t,"]+"),"g"),"")};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3505:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(a=o.key,i=void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===n(i)?i:String(i)),o)}var a,i}var a=r(3547),i=r(292),c=r(2096),u=r(3490).BaseValidatorClass,l=r(3545).MobileValidatorClass,s=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/,f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"httpURL",value:function(e){e=this._stringify(e);try{var t=new URL(e);if("https:"!==t.protocol&&"http:"!==t.protocol)throw new Error("protocol error")}catch(e){return this.__("请输入正确的 HTTP(s) URL 地址")}}},{key:"alphanumeric",value:function(e){if(!(e=this._stringify(e))||!a.isAlphanumeric(e))return this.__("必须都是字符和数字")}},{key:"numeric",value:function(e){if(!(e=this._stringify(e))||!a.isNumeric(e))return this.__("必须都是数字字符")}},{key:"decimal",value:function(e){if(!(e=this._stringify(e))||!a.isDecimal(e))return this.__("必须是小数或者整数")}},{key:"mobileCode",value:function(e,t){if("string"!=typeof e)return this.__("必须是字符串");if(!a.isNumeric(e))return this.__("必须都是数字字符");var r=t&&t.min||4;return e.length<r?this.__("至少 {s} 个数字",{s:r}):void 0}},{key:"IP",value:function(e){if(!(e=this._stringify(e))||!a.isIP(e))return this.__("必须是 IP v4 或者 v6 格式")}},{key:"IPv4",value:function(e){if(!(e=this._stringify(e))||!a.isIP(e,4))return this.__("必须是 IP v4 格式")}},{key:"IPv6",value:function(e){if(!(e=this._stringify(e))||!a.isIP(e,6))return this.__("必须是 IP v6 格式")}},{key:"bookPublic",value:function(e){if("number"!=typeof e){if(!(e=this._stringify(e))||!a.isNumeric(e))return this.__("public 参数只允许是 0、1 或者 2");e=parseInt(e)}var t=i.book.PUBLIC;if(e!==t.public&&e!==t.private&&e!==t.intranet)return this.__("public 参数只允许是 0、1 或者 2")}},{key:"starType",value:function(e){if(e){var t=["Book","Design"];return t.includes(e)?void 0:this.__("type 参数只允许为 {s}",{s:t.join(", ")})}}},{key:"searchPage250",value:function(e){if("number"!=typeof e){if(!(e=this._stringify(e))||!a.isNumeric(e))return this.__("只允许是正整数并且要小于等于 250");e=parseInt(e)}if(e<1||e>250||isNaN(e))return this.__("只允许是正整数并且要小于等于 250")}},{key:"isEmail",value:function(e){return e=this._stringify(e),a.isEmail(e)}},{key:"isUser",value:function(e){return e=this._stringify(e),/^[A-Za-z0-9][A-Za-z0-9\-_\.]{1,64}$/.test(e)}},{key:"isoDate",value:function(e){if(!e||!s.test(e))return this.__("必须是符合 ISO Date 格式的字符串")}},{key:"looseUrl",value:function(e){e=this._stringify(e);var t=this.__("请输入正确的 URL 地址");if(!e)return t;if(!/^\//.test(e)){if(/^\s*javascript:\/\//i.test(e))return t;try{new URL(e)}catch(e){return t}}}},{key:"stringArr",value:function(e,t){if(e&&t.values&&(e=e.split(",").map((function(e){return e.trim()})),e.some((function(e){return!t.values.includes(e)}))))return this.__("必须是 {type} 其中的值",{type:t.values.join("、")})}}])&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d=c.apply(void 0,[u].concat([l,f]));t.Validator=d,"undefined"!=typeof window&&"function"==typeof window.__&&(t.validator=new d(window.__))},3507:function(e,t,r){"use strict";t.a={contentArea:"index-module_contentArea_wf4Pe",switchTitle:"index-module_switchTitle_7k-8X",switchButton:"index-module_switchButton_zitq8",tip:"index-module_tip_9Yp4f"}},3514:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));r(529);var n=r(306),o=r(0),a=r.n(o),i=r(615),c=r(138),u=r(18),l=r(190),s=r(3507);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(){d=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p={};function h(){}function m(){}function y(){}var v={};u(v,a,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(T([])));b&&b!==t&&r.call(b,a)&&(v=b);var _=y.prototype=h.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==f(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=y,n(_,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:m,configurable:!0}),m.displayName=u(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(j.prototype),u(j.prototype,i,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(_),u(_,c,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function p(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var h=function(e){e.type;var t=e.checked,r=e.organization,o=e.onChangePermission,f=a.a.useMemo((function(){var e=null!=r&&r.id?c.a.ORG:c.a.PERSON;return Object(l.a)()?e:c.a.INTERNAL}),[r]),h=function(){var e,t=(e=d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t?f===c.a.PERSON?u.PRIVACY.public:u.PRIVACY.intranet:u.PRIVACY.private,o(r);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){p(a,n,o,i,c,"next",e)}function c(e){p(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:s.a.contentArea},a.a.createElement("span",{className:s.a.switchTitle},i.o[f]),a.a.createElement("div",{className:s.a.switchButton},a.a.createElement(n.a,{size:"small",onChange:h,checked:t}))))}},3532:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(8),i=r.n(a),c=r(13),u=r.n(c),l=r(3469),s=r(154),f=r(2684),d="index-module_groupName_DppYx",p="index-module_groupNameText_XYhrt",h="index-module_groupNameScope_qP0XF",m=function(e){var t=e.group,r=e.size,n=e.nameStyleCls,a=e.linkStyleCls,i=e.showName,c=void 0===i||i,m=e.isLink,y=void 0===m||m,v=e.iconSize,g=e.radius,b=Object(s.d)(t)||Object(s.f)(t),_=c?o.a.createElement("a",{"data-testid":"group-name-link",href:"/".concat(t.login),title:t.name,className:u()(d,n)},o.a.createElement("span",{"data-testid":"group-name-text",className:u()(p,"group-name-text")},t.name),b&&o.a.createElement("span",{className:h},o.a.createElement(f.a,{group:t,size:16}))):null;return!y&&_&&(_=o.a.createElement("span",{title:t.name,className:u()(d,n)},o.a.createElement("span",{"data-testid":"group-name-text",className:u()(p,"group-name-text")},t.name),b&&o.a.createElement("span",{className:h},o.a.createElement(f.a,{group:t,size:16})))),o.a.createElement(o.a.Fragment,null,y?o.a.createElement("a",{"data-testid":"group-avatar-link",href:"/".concat(t.login),title:t.name,className:a},o.a.createElement(l.a,{group:t,size:r,iconSize:v,radius:g})):o.a.createElement(l.a,{group:t,size:r,iconSize:v,radius:g}),_)};m.propTypes={organization:i.a.object,group:i.a.object.isRequired,size:i.a.number,showName:i.a.bool,isLink:i.a.bool,nameStyleCls:i.a.string,iconSize:i.a.number,radius:i.a.number};t.a=m},3533:function(e,t,r){var n=r(403),o=r(675),a=r(676),i=r(271),c=r(231),u=r(404),l=200;e.exports=function(e,t,r,s){var f=-1,d=o,p=!0,h=e.length,m=[],y=t.length;if(!h)return m;r&&(t=i(t,c(r))),s?(d=a,p=!1):t.length>=l&&(d=u,p=!1,t=new n(t));e:for(;++f<h;){var v=e[f],g=null==r?v:r(v);if(v=s||0!==v?v:0,p&&g==g){for(var b=y;b--;)if(t[b]===g)continue e;m.push(v)}else d(t,g,s)||m.push(v)}return m}},3541:function(e,t,r){"use strict";r(640);var n=r(327),o=(r(64),r(21)),a=r(555),i=r(0),c=r(3469),u=r(184),l=(r(254),r(56)),s=r(13),f=r.n(s),d=r(3456),p=(r(227),r(112)),h=(r(1733),r(356)),m=(r(2779),r(2597)),y=(r(61),r(23)),v=r(572),g=r(42),b=r(612);function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j=function(){var e=_(Object(i.useState)(),2),t=e[0],r=e[1],n=_(Object(i.useState)(),2),o=n[0],a=n[1],c=new FileReader;return c.addEventListener("load",(function(){r(c.result)}),!1),Object(i.useEffect)((function(){o&&c.readAsDataURL(o)}),[o]),{url:t,uploadFile:a}},E=r(243),O="index-module_iconListContainer_2kTPj",S="index-module_iconListHeader_zgb1B",x="index-module_iconListHeaderTab_Rb7UW",k="index-module_iconListHeaderTabActive_l9CpK",T="index-module_iconListContent_5acPP",C="index-module_iconListIconContainer_W2jPd",P="index-module_iconListIconContainerActive_m+9aX",L="index-module_groupIconBtn_1pBes",I="index-module_uploader_uEToK",A="index-module_dragger_yzTL7",N="index-module_imageContainer_lklS2",D="index-module_uploaderContainer_Y0VkK",R="index-module_reupload_3agQP",M="index-module_uploaderFooter_F5A9k",F="index-module_previewContainer_s7urA",G="index-module_preview_8GFmF";function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B.apply(this,arguments)}function z(){z=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==U(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function W(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function V(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){W(a,n,o,i,c,"next",e)}function c(e){W(a,n,o,i,c,"throw",e)}i(void 0)}))}}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $=function(e){var t=e.value,r=e.onChange,n=e.uploadUrl,a=e.hideDropdown,c=function(e){var t=e.uploadUrl,r=e.onChange,n=e.hideDropdown,o=Object(i.useRef)(),a=j(),c=a.url,u=a.uploadFile,l=Object(i.useRef)(),s=q(Object(i.useState)(!1),2),f=s[0],d=s[1],p=function(){var e=V(z().mark((function e(){return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.current){e.next=2;break}return e.abrupt("return");case 2:if(void 0!==o.current.getCroppedCanvas()){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",new Promise((function(e,r){o.current.getCroppedCanvas().toBlob((function(n){var o=new FormData;o.append("file",n,"image.png"),Object(E.ajax)({url:t,method:"POST",data:o,dataType:"json",processData:!1,success:function(t){e(t.data.url)},error:function(e){r(e),y.a.error(__("上传失败"))}})}))})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=V(z().mark((function e(){var t;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,p();case 4:t=e.sent,null==r||r(t),n();case 7:return e.prev=7,d(!1),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[1,,7,10]])})));return function(){return e.apply(this,arguments)}}();return{loading:f,localUrl:c,cropper:o,getUploadProps:function(){return{name:"file",showUploadList:!1,dataType:"json",accept:"image/*",beforeUpload:function(e){return e.size/1024/1024>20?(y.a.error(__("图片大小不能超过 {size}M",{size:20})),!1):(u(e),!1)}}},upload:p,preview:l,onOk:h}}({uploadUrl:n,onChange:r,hideDropdown:a}),u=c.loading,l=c.cropper,s=c.getUploadProps,f=c.localUrl,d=c.preview,_=c.onOk;return React.createElement("div",{className:I,"data-testid":"mocked-avatar-uploader"},f||t?React.createElement(p.a,{spinning:!1},React.createElement("div",{className:N},React.createElement("div",{className:D},React.createElement(m.a,{ref:l,src:f||t,containerWidth:window.h5?200:320,cropWidth:window.h5?200:320,aspectRatio:1,preview:d}),React.createElement(b.a,{ml:40,className:F},React.createElement("div",{className:G,ref:d}),React.createElement(b.a,{mt:16},__("预览")))),React.createElement(h.a,s(),React.createElement(o.a,{icon:React.createElement(v.default,null),className:R},__("重新上传"))),React.createElement("div",{className:M},React.createElement(o.a,{onClick:function(){return a()}},__("取消")),React.createElement(o.a,{type:"primary",onClick:_,loading:u},__("确定"))))):React.createElement(h.a.Dragger,B({},s(),{className:A}),React.createElement(o.a,{icon:React.createElement(g.b,{name:"avatar-upload",size:16})},__("上传头像")),React.createElement(b.a,{variant:"caption",fontSize:14,mt:12},__("在此上传或拖入头像"))))};$.defaultProps={uploadUrl:"/api/upload/avatar"};var H=$;function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function Z(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Y(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var X=function(e){var t=e.value,r=e.onChange,n=e.hideDropdown,o=e.avatar,a=e.setFieldsValue;return React.createElement("div",{className:T},u.d.map((function(e){return React.createElement(d.a,{className:f()(C,Z({},P,t===e&&!o)),type:"iconButton",onClick:function(){a({avatar:null}),null==r||r(e),n()}},React.createElement(g.b,{name:e,size:24}))})))};function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function J(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Q(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Q(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var re=function(e){var t=ee(Object(i.useState)(0),2),r=t[0],n=t[1],o=[__("图标"),__("自定义")];return React.createElement("div",{className:f()(O,e.prefixCls)},React.createElement("div",{className:S},o.map((function(e,t){return React.createElement(d.a,{mr:8,className:f()(x,J({},k,r===t)),onClick:function(){return n(t)},"data-testid":"GroupAvatarSelector-Tabs-".concat(t)},e)}))),React.createElement(l.a.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.avatar!==t.avatar}},(function(t){var n=t.setFieldsValue,o=t.getFieldValue;return React.createElement(l.a.Item,{name:"scene",noStyle:!0,hidden:0!==r,initialValue:u.d[0]},React.createElement(X,{setFieldsValue:n,hideDropdown:e.hideDropdown,avatar:o("avatar")}))})),React.createElement(l.a.Item,{name:"avatar",noStyle:!0,hidden:1!==r},React.createElement(H,{hideDropdown:e.hideDropdown})))};function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ne(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ne(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.a=function(e){var t=e.getFieldValue,r=e.style,l=Object(a.f)((function(e){return e.group})),s=t("scene")||u.d[0],f=t("avatar"),d=ce(Object(i.useState)(!1),2),p=d[0],h=d[1];return React.createElement(n.a,{overlay:React.createElement(re,{avatar:f,hideDropdown:function(){return h(!1)}}),trigger:["click"],visible:p,onVisibleChange:h},React.createElement(o.a,{"data-testid":"GroupAvatarSelector",className:L,style:r,icon:React.createElement(c.a,{group:ae(ae({},l),{},{avatar:f,scene:s,avatar_url:f}),iconSize:27,size:38,radius:6})}))}},3544:function(e,t,r){"use strict";r(240);var n=r(52),o=r(0),a=r.n(o),i=r(8),c=r.n(i),u=r(151),l=r.n(u),s=r(593),f=r(154),d=r(3532),p=r(3546),h={name:"index-module_name_2g47z"};function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=n.a.Option;function g(e){var t=e.current,r=e.disabled,i=e.groups,c=e.placeholder,u=e.size,y=Object(f.f)()?__("知识小组"):__("团队"),g=m(Object(o.useState)(!1),2),b=g[0],_=g[1];function w(){_(!0)}return a.a.createElement("div",{className:"group-selector ".concat(e.className||""),"data-testid":"group-selector"},a.a.createElement(n.a,{size:u,showSearch:!0,disabled:r,getPopupContainer:function(e){return e.parentNode},placeholder:c,dropdownMatchSelectWidth:!1,notFoundContent:a.a.createElement("div",{className:"blankslate"},a.a.createElement("span",null,Object(f.f)()?__("没有{groupTitle}信息",{create:a.a.createElement("a",{onClick:w},__("新建")),groupTitle:y}):__("没有{groupTitle}信息，快去{create}一个吧",{create:a.a.createElement("a",{onClick:w},__("新建")),groupTitle:y}))),value:null==t?void 0:t.login,onChange:function(t){if(i&&i.length){var r=i.find((function(e){return e.login===t}));e.onChange&&e.onChange(r)}},filterOption:function(e,t){if(!t.group)return!1;var r=t.group,n=r.login,o=r.name,a=e.toLowerCase();return n.toLowerCase().indexOf(a)>=0||o.toLowerCase().indexOf(a)>=0},placement:"bottomLeft"},i&&i.length?l()(i,"id").map((function(e){return a.a.createElement(v,{"data-testid":"group-selector-".concat(e.login),key:e.login,value:e.login,group:e,title:e.name},a.a.createElement("div",{className:"group-selector-item"},a.a.createElement(d.a,{organization:e.organization,group:e,size:24,showCard:!1,nameStyleCls:h.name,isLink:!1})),(null==t?void 0:t.login)===e.login&&a.a.createElement(s.default,null))})):null),a.a.createElement(p.default,{isModalVisible:b,handleCancel:function(){_(!1)}}))}g.defaultProps={size:"middle",placeholder:__("请选择{groupTitle}",{groupTitle:Object(f.f)()?__("知识小组"):__("团队")}),groups:[],current:{},onChange:function(){}},g.propTypes={groups:c.a.arrayOf(c.a.object),current:c.a.shape({login:c.a.string,name:c.a.string}),onChange:c.a.func,className:c.a.string,placeholder:c.a.string,disabled:c.a.bool,size:c.a.string};t.a=g},3545:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(a=o.key,i=void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===n(i)?i:String(i)),o)}var a,i}var a=r(2096),i=r(3490).BaseValidatorClass,c=/^(13\d|14\d|15[012356789]|16[567]|17[01235678]|18\d|19\d)\d{8}(\+\d+)?$/,u=/^\+[1-9]\d{0,2}? \d{1,20}$/,l=/^\+86 /,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"chinaMobilePhone",value:function(e){if(!(e=this._stringify(e))||!c.test(e))return this.__("输入正确手机号")}},{key:"globalMobilePhone",value:function(e){return(e=this._stringify(e))&&u.test(e)?l.test(e)?this.__("中国手机号码不需要添加 +86"):void 0:this.__("必须是合法的手机号码")}},{key:"mobilePhone",value:function(e){if(this.globalMobilePhone(e))return l.test(e)?this.__("中国手机号码不需要添加 +86"):this.chinaMobilePhone(e)}},{key:"mobilePhoneForNonChinese",value:function(e){if(this.globalMobilePhone(e))return l.test(e)?this.__("中国手机号码不需要添加 +86"):this.chinaMobilePhone(e)?this.__("必须是合法的手机号码"):void 0}}])&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.MobileValidatorClass=s,t.chinaMobilePhoneRE=c,t.globalMobilePhoneRE=u,t.MobileValidator=a.apply(void 0,[i].concat([s]))},3546:function(e,t,r){"use strict";r.r(t);r(61);var n=r(23),o=(r(95),r(49)),a=(r(94),r(27)),i=(r(64),r(21)),c=(r(254),r(56)),u=r(0),l=r.n(u),s=r(8),f=r.n(s),d=r(530),p=r.n(d),h=r(2446),m=r.n(h),y=r(571),v=r(2688),g=r(555),b=r(2469),_=r(1976),w=r(2694),j=b.a.LiteSearchSelector,E=function(e){var t,r,n={type:e.type,me:e.me},o=Object(u.useMemo)((function(){return _.a.create(n)}),[n]);return null!==(t=e.organization)&&void 0!==t&&t.id&&(r=l.a.createElement(w.a,null)),l.a.createElement(j,{type:e.type,userClassType:"normal",isLiteSearchSelector:!0,searchUser:o.searchUser,getDefaultUsers:e.getDefaultUsers||o.searchUsersByIds,checkValid:o.checkValid,onChange:e.onChange,initialValues:e.initialValues,notFoundContent:r})};E.propTypes={type:f.a.string,onChange:f.a.func,initialValues:f.a.array,getDefaultUsers:f.a.func};var O=Object(g.d)((function(e){return{organization:e.organization,me:e.me}}))(E),S=r(38),x=r(3514),k=r(18),T=r(528),C=r(1845),P=r(184),L=r(2724),I=r(3541),A=r(612),N={newGroupModal:"index-module_newGroupModal_An+Qw",title:"index-module_title_gTevv",titleDesc:"index-module_titleDesc_EmDkC",newGroupModalContent:"index-module_newGroupModalContent_LFB42",nameWrapper:"index-module_nameWrapper_OFOD6",avatarGroup:"index-module_avatarGroup_olnac",addMember:"index-module_addMember_i0kI8",addMemberBtn:"index-module_addMemberBtn_nvC2a",btnText:"index-module_btnText_6V0fp",submitBtn:"index-module_submitBtn_ZJkHv"};function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return t=function(e){var t=function(e,t){if("object"!==D(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===D(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(){U=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==D(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function B(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function z(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){B(a,n,o,i,c,"next",e)}function c(e){B(a,n,o,i,c,"throw",e)}i(void 0)}))}}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var K=c.a.Item,$=function(e){var t=e.isModalVisible,r=e.handleCancel,s=e.organization,f=W(Object(u.useState)(),2),d=f[0],h=f[1],g=W(Object(u.useState)(!0),2),b=g[0],_=g[1],w=W(Object(u.useState)(!1),2),j=w[0],E=w[1],D=W(Object(u.useState)(!1),2),R=D[0],M=D[1],F=W(Object(u.useState)([]),2),B=F[0],V=F[1],q=W(Object(u.useState)(k.PRIVACY.private),2),$=q[0],H=q[1],Y=Object(u.useRef)(),Z=Object(u.useRef)(null),X=Object(u.useMemo)((function(){return B.map((function(e){return e.user_id||e.id}))}),[B]);Object(u.useEffect)((function(){var e;null===(e=Y.current)||void 0===e||e.focus()}),[]);var Q=W(c.a.useForm(),1)[0],J=function(e){e&&e.preventDefault(),M((function(e){return!e}))};function ee(){return(ee=z(U().mark((function t(r){var o,a,i,c,u,l,f,h;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),E(!0),o=Q.getFieldsValue(),B&&(o.members=B),a={name:d,description:o.description,avatar:o.avatar,public:$,scene:o.scene||P.d[0]},null!=s&&s.id&&(a.organization_id=s.id),t.prev=6,t.next=9,S.a.groups.createGroup(a);case 9:if(i=t.sent){if(o.members)try{l=null===(u=o.members.find(T.a.isDepartment))||void 0===u?void 0:u.id,f=o.members.filter((function(e){return!T.a.isDepartment(e)})),h=p()({group_id:i.id,role:1,users:T.a.serializeUserPostBody(f),department_id:l}),S.a.groupUsers.create(h)}catch(e){n.a.error(e.message)}n.a.success(__("新建成功"),1e3),C.a?(Object(L.b)(),e.handleCancel()):window.location.href="/".concat(i.login),null===(c=e.handleSuccess)||void 0===c||c.call(e)}return E(!1),t.abrupt("return",i);case 15:t.prev=15,t.t0=t.catch(6),E(!1);case 18:case"end":return t.stop()}}),t,null,[[6,15]])})))).apply(this,arguments)}var te=Object(u.useCallback)(z(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B);case 1:case"end":return e.stop()}}),e)}))),[B]),re=function(){var t=z(U().mark((function t(r){var n,o,a,i;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=Z&&Z.current){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Z.current.searchSelectorBiz.getRealUsers(r);case 4:n=t.sent,o=e.me,a=o.user_id||o.id,i=n.filter((function(e){return(e.user_id||e.id)!==a})),V((function(e){var t=e.findIndex(T.a.isDepartment);return[t,i.findIndex(T.a.isDepartment)].every((function(e){return e>-1}))&&e.splice(t,1),m()([].concat(G(e),G(i)),(function(e){return e.user_id||e.id}))})),J();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{className:N.newGroupModal,title:l.a.createElement("div",{className:N.title},l.a.createElement("p",null,__("新建团队")),l.a.createElement("p",{className:N.titleDesc},__("和成员一起进行项目协作和知识管理"))),width:432,visible:t,onCancel:r,footer:[l.a.createElement(i.a,{className:N.submitBtn,key:"submit",type:"primary",disabled:b,loading:j,onClick:function(e){return ee.apply(this,arguments)}},__("新建"))]},l.a.createElement("div",{className:N.newGroupModalContent},l.a.createElement(c.a,{form:Q,layout:"vertical",onValuesChange:function(e){Q.setFieldsValue(e)}},l.a.createElement(K,{name:"name",colon:!1,label:__("基本信息")},l.a.createElement("div",{className:N.nameWrapper},l.a.createElement(K,{noStyle:!0,shouldUpdate:function(e,t){return e.scene!==t.scene||e.avatar!==t.avatar}},(function(e){var t=e.getFieldValue;return l.a.createElement(A.a,{mr:8,component:I.a,componentProps:{getFieldValue:t}})})),l.a.createElement(a.a,{type:"text",autoComplete:"off",maxLength:36,placeholder:__("团队名称"),onChange:function(e){h(e.target.value),e.target.value.trim()?_(!1):_(!0)},ref:Y}))),l.a.createElement(K,{colon:!1,name:"description"},l.a.createElement(a.a.TextArea,{className:"group-form-desc",autoComplete:"off",autoSize:{minRows:4},maxLength:100,placeholder:__("团队")+__("简介")})),l.a.createElement(K,{colon:!1,label:l.a.createElement("div",{className:N.addMember},l.a.createElement("div",{className:N.addMemberText},__("添加成员")),l.a.createElement("div",{onClick:J},l.a.createElement("div",{className:N.addMemberBtn},l.a.createElement(y.default,null),l.a.createElement("span",{className:N.btnText},__("批量添加"))))),name:"users"},!R&&l.a.createElement(O,{getDefaultUsers:window.appData.isYuque?null:te,type:"simple",initialValues:X,onChange:function(e){V(e)}})),l.a.createElement(K,{colon:!1,label:__("公开性")},l.a.createElement(x.a,{type:"group",checked:$!==k.PRIVACY.private,onChangePermission:function(e){H(e)},organization:s}))))),R&&l.a.createElement(v.a,{ref:Z,type:"simpleWithRole",visible:R,title:__("批量添加"),roles:[{key:"member",label:__("成员"),value:2}],onCancel:J,onSubmit:re,initialValues:X,getDefaultUsers:window.appData.isYuque?null:te}))};$.propTypes={isModalVisible:f.a.bool,handleCancel:f.a.func,handleSuccess:f.a.func,group:f.a.object,organization:f.a.object};t.default=function(e){var t=window.appData,r=t.me,n=t.organization,o=M(M({},e),{},{me:r,organization:n});return l.a.createElement($,o)}},3547:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=Ee(r(3474)),o=Ee(r(3492)),a=Ee(r(3552)),i=Ee(r(3553)),c=Ee(r(3554)),u=Ee(r(3555)),l=Ee(r(3556)),s=Ee(r(3557)),f=Ee(r(3558)),d=Ee(r(3559)),p=Ee(r(3466)),h=Ee(r(3560)),m=Ee(r(3476)),y=Ee(r(3561)),v=je(r(3562)),g=je(r(3563)),b=Ee(r(3564)),_=Ee(r(3565)),w=Ee(r(3566)),j=Ee(r(3567)),E=Ee(r(3568)),O=Ee(r(3495)),S=Ee(r(3496)),x=Ee(r(3569)),k=Ee(r(3570)),T=Ee(r(3571)),C=Ee(r(3494)),P=je(r(3572)),L=Ee(r(3573)),I=Ee(r(3497)),A=Ee(r(3574)),N=Ee(r(3575)),D=Ee(r(3576)),R=Ee(r(3577)),M=Ee(r(3578)),F=Ee(r(3579)),G=Ee(r(3580)),U=Ee(r(3581)),B=Ee(r(3582)),z=Ee(r(3493)),W=Ee(r(3583)),V=Ee(r(3584)),q=Ee(r(3585)),K=Ee(r(3586)),$=Ee(r(3587)),H=Ee(r(3588)),Y=Ee(r(3589)),Z=Ee(r(3590)),X=Ee(r(3591)),Q=Ee(r(3592)),J=je(r(3593)),ee=Ee(r(3594)),te=Ee(r(3595)),re=Ee(r(3596)),ne=Ee(r(3597)),oe=Ee(r(3598)),ae=Ee(r(3599)),ie=Ee(r(3600)),ce=Ee(r(3601)),ue=Ee(r(3602)),le=Ee(r(3603)),se=je(r(3604)),fe=Ee(r(3498)),de=Ee(r(3499)),pe=Ee(r(3605)),he=Ee(r(3606)),me=Ee(r(3607)),ye=Ee(r(3608)),ve=Ee(r(3609)),ge=Ee(r(3500)),be=Ee(r(3610)),_e=Ee(r(3611)),we=Ee(r(3475));function je(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function Ee(e){return e&&e.__esModule?e:{default:e}}var Oe={version:"10.11.0",toDate:n.default,toFloat:o.default,toInt:a.default,toBoolean:i.default,equals:c.default,contains:u.default,matches:l.default,isEmail:s.default,isURL:f.default,isMACAddress:d.default,isIP:p.default,isIPRange:h.default,isFQDN:m.default,isBoolean:y.default,isAlpha:v.default,isAlphaLocales:v.locales,isAlphanumeric:g.default,isAlphanumericLocales:g.locales,isNumeric:b.default,isPort:_.default,isLowercase:w.default,isUppercase:j.default,isAscii:E.default,isFullWidth:O.default,isHalfWidth:S.default,isVariableWidth:x.default,isMultibyte:k.default,isSurrogatePair:T.default,isInt:C.default,isFloat:P.default,isFloatLocales:P.locales,isDecimal:L.default,isHexadecimal:I.default,isDivisibleBy:A.default,isHexColor:N.default,isISRC:D.default,isMD5:R.default,isHash:M.default,isJWT:F.default,isJSON:G.default,isEmpty:U.default,isLength:B.default,isByteLength:z.default,isUUID:W.default,isMongoId:V.default,isAfter:q.default,isBefore:K.default,isIn:$.default,isCreditCard:H.default,isIdentityCard:Y.default,isISIN:Z.default,isISBN:X.default,isISSN:Q.default,isMobilePhone:J.default,isMobilePhoneLocales:J.locales,isPostalCode:se.default,isPostalCodeLocales:se.locales,isCurrency:ee.default,isISO8601:te.default,isRFC3339:re.default,isISO31661Alpha2:ne.default,isISO31661Alpha3:oe.default,isBase64:ae.default,isDataURI:ie.default,isMagnetURI:ce.default,isMimeType:ue.default,isLatLong:le.default,ltrim:fe.default,rtrim:de.default,trim:pe.default,escape:he.default,unescape:me.default,stripLow:ye.default,whitelist:ve.default,blacklist:ge.default,isWhitelisted:be.default,normalizeEmail:_e.default,toString:we.default};t.default=Oe,e.exports=t.default,e.exports.default=t.default},355:function(e,t,r){var n=r(370),o=r(186),a=r(221),i=r(79),c=r(155),u=r(220),l=r(230),s=r(276),f="[object Map]",d="[object Set]",p=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(c(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||s(e)||a(e)))return!e.length;var t=o(e);if(t==f||t==d)return!e.size;if(l(e))return!n(e).length;for(var r in e)if(p.call(e,r))return!1;return!0}},3552:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,o.default)(e),parseInt(e,t||10)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3553:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,o.default)(e),t)return"1"===e||"true"===e;return"0"!==e&&"false"!==e&&""!==e};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3554:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,o.default)(e),e===t};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3555:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,n.default)(e),e.indexOf((0,o.default)(t))>=0};var n=a(r(3451)),o=a(r(3475));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},3556:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){(0,o.default)(e),"[object RegExp]"!==Object.prototype.toString.call(t)&&(t=new RegExp(t,r));return t.test(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3557:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,n.default)(e),(t=(0,o.default)(t,l)).require_display_name||t.allow_display_name){var r=e.match(s);if(r)e=r[1];else if(t.require_display_name)return!1}var u=e.split("@"),y=u.pop(),v=u.join("@"),g=y.toLowerCase();if(t.domain_specific_validation&&("gmail.com"===g||"googlemail.com"===g)){var b=(v=v.toLowerCase()).split("+")[0];if(!(0,a.default)(b.replace(".",""),{min:6,max:30}))return!1;for(var _=b.split("."),w=0;w<_.length;w++)if(!d.test(_[w]))return!1}if(!(0,a.default)(v,{max:64})||!(0,a.default)(y,{max:254}))return!1;if(!(0,i.default)(y,{require_tld:t.require_tld})){if(!t.allow_ip_domain)return!1;if(!(0,c.default)(y)){if(!y.startsWith("[")||!y.endsWith("]"))return!1;var j=y.substr(1,y.length-2);if(0===j.length||!(0,c.default)(j))return!1}}if('"'===v[0])return v=v.slice(1,v.length-1),t.allow_utf8_local_part?m.test(v):p.test(v);for(var E=t.allow_utf8_local_part?h:f,O=v.split("."),S=0;S<O.length;S++)if(!E.test(O[S]))return!1;return!0};var n=u(r(3451)),o=u(r(3457)),a=u(r(3493)),i=u(r(3476)),c=u(r(3466));function u(e){return e&&e.__esModule?e:{default:e}}var l={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0},s=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\,\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,f=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,d=/^[a-z\d]+$/,p=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,h=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,m=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;e.exports=t.default,e.exports.default=t.default},3558:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,n.default)(e),!e||e.length>=2083||/[\s<>]/.test(e))return!1;if(0===e.indexOf("mailto:"))return!1;var r,c,f,d,p,h,m,y;if(t=(0,i.default)(t,u),m=e.split("#"),e=m.shift(),m=e.split("?"),e=m.shift(),(m=e.split("://")).length>1){if(r=m.shift().toLowerCase(),t.require_valid_protocol&&-1===t.protocols.indexOf(r))return!1}else{if(t.require_protocol)return!1;if("//"===e.substr(0,2)){if(!t.allow_protocol_relative_urls)return!1;m[0]=e.substr(2)}}if(""===(e=m.join("://")))return!1;if(m=e.split("/"),""===(e=m.shift())&&!t.require_host)return!0;if((m=e.split("@")).length>1){if(t.disallow_auth)return!1;if((c=m.shift()).indexOf(":")>=0&&c.split(":").length>2)return!1}d=m.join("@"),h=null,y=null;var v=d.match(l);v?(f="",y=v[1],h=v[2]||null):(f=(m=d.split(":")).shift(),m.length&&(h=m.join(":")));if(null!==h&&(p=parseInt(h,10),!/^[0-9]+$/.test(h)||p<=0||p>65535))return!1;if(!((0,a.default)(f)||(0,o.default)(f,t)||y&&(0,a.default)(y,6)))return!1;if(f=f||y,t.host_whitelist&&!s(f,t.host_whitelist))return!1;if(t.host_blacklist&&s(f,t.host_blacklist))return!1;return!0};var n=c(r(3451)),o=c(r(3476)),a=c(r(3466)),i=c(r(3457));function c(e){return e&&e.__esModule?e:{default:e}}var u={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1},l=/^\[([^\]]+)\](?::([0-9]+))?$/;function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(e===n||(o=n,"[object RegExp]"===Object.prototype.toString.call(o)&&n.test(e)))return!0}var o;return!1}e.exports=t.default,e.exports.default=t.default},3559:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,o.default)(e),t&&t.no_colons)return i.test(e);return a.test(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/,i=/^([0-9a-fA-F]){12}$/;e.exports=t.default,e.exports.default=t.default},3560:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,n.default)(e);var t=e.split("/");if(2!==t.length)return!1;if(!i.test(t[1]))return!1;if(t[1].length>1&&t[1].startsWith("0"))return!1;return(0,o.default)(t[0],4)&&t[1]<=32&&t[1]>=0};var n=a(r(3451)),o=a(r(3466));function a(e){return e&&e.__esModule?e:{default:e}}var i=/^\d{1,2}$/;e.exports=t.default,e.exports.default=t.default},3561:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),["true","false","1","0"].indexOf(e)>=0};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3562:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if((0,o.default)(e),t in a.alpha)return a.alpha[t].test(e);throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var n,o=(n=r(3451))&&n.__esModule?n:{default:n},a=r(3467);var i=Object.keys(a.alpha);t.locales=i},3563:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if((0,o.default)(e),t in a.alphanumeric)return a.alphanumeric[t].test(e);throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var n,o=(n=r(3451))&&n.__esModule?n:{default:n},a=r(3467);var i=Object.keys(a.alphanumeric);t.locales=i},3564:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,o.default)(e),t&&t.no_symbols)return i.test(e);return a.test(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^[+-]?([0-9]*[.])?[0-9]+$/,i=/^[0-9]+$/;e.exports=t.default,e.exports.default=t.default},3565:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e,{min:0,max:65535})};var n,o=(n=r(3494))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3566:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),e===e.toLowerCase()};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3567:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),e===e.toUpperCase()};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3568:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^[\x00-\x7F]+$/;e.exports=t.default,e.exports.default=t.default},3569:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.fullWidth.test(e)&&i.halfWidth.test(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n},a=r(3495),i=r(3496);e.exports=t.default,e.exports.default=t.default},3570:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/[^\x00-\x7F]/;e.exports=t.default,e.exports.default=t.default},3571:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;e.exports=t.default,e.exports.default=t.default},3572:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,o.default)(e),t=t||{};var r=new RegExp("^(?:[-+])?(?:[0-9]+)?(?:\\".concat(t.locale?a.decimal[t.locale]:".","[0-9]*)?(?:[eE][\\+\\-]?(?:[0-9]+))?$"));if(""===e||"."===e||"-"===e||"+"===e)return!1;var n=parseFloat(e.replace(",","."));return r.test(e)&&(!t.hasOwnProperty("min")||n>=t.min)&&(!t.hasOwnProperty("max")||n<=t.max)&&(!t.hasOwnProperty("lt")||n<t.lt)&&(!t.hasOwnProperty("gt")||n>t.gt)},t.locales=void 0;var n,o=(n=r(3451))&&n.__esModule?n:{default:n},a=r(3467);var i=Object.keys(a.decimal);t.locales=i},3573:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,o.default)(e),(t=(0,n.default)(t,u)).locale in i.decimal)return!(0,a.default)(l,e.replace(/ /g,""))&&function(e){var t=new RegExp("^[-+]?([0-9]+)?(\\".concat(i.decimal[e.locale],"[0-9]{").concat(e.decimal_digits,"})").concat(e.force_decimal?"":"?","$"));return t}(t).test(e);throw new Error("Invalid locale '".concat(t.locale,"'"))};var n=c(r(3457)),o=c(r(3451)),a=c(r(3477)),i=r(3467);function c(e){return e&&e.__esModule?e:{default:e}}var u={force_decimal:!1,decimal_digits:"1,",locale:"en-US"},l=["","-","+"];e.exports=t.default,e.exports.default=t.default},3574:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,n.default)(e),(0,o.default)(e)%parseInt(t,10)==0};var n=a(r(3451)),o=a(r(3492));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},3575:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i;e.exports=t.default,e.exports.default=t.default},3576:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^[A-Z]{2}[0-9A-Z]{3}\d{2}\d{5}$/;e.exports=t.default,e.exports.default=t.default},3577:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^[a-f0-9]{32}$/;e.exports=t.default,e.exports.default=t.default},3578:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,o.default)(e),new RegExp("^[a-f0-9]{".concat(a[t],"}$")).test(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a={md5:32,md4:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8};e.exports=t.default,e.exports.default=t.default},3579:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^([A-Za-z0-9\-_~+\/]+[=]{0,2})\.([A-Za-z0-9\-_~+\/]+[=]{0,2})(?:\.([A-Za-z0-9\-_~+\/]+[=]{0,2}))?$/;e.exports=t.default,e.exports.default=t.default},3580:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,o.default)(e);try{var t=JSON.parse(e);return!!t&&"object"===a(t)}catch(e){}return!1};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}e.exports=t.default,e.exports.default=t.default},3581:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,n.default)(e),0===((t=(0,o.default)(t,i)).ignore_whitespace?e.trim().length:e.length)};var n=a(r(3451)),o=a(r(3457));function a(e){return e&&e.__esModule?e:{default:e}}var i={ignore_whitespace:!1};e.exports=t.default,e.exports.default=t.default},3582:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r,n;(0,o.default)(e),"object"===a(t)?(r=t.min||0,n=t.max):(r=arguments[1],n=arguments[2]);var i=e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],c=e.length-i.length;return c>=r&&(void 0===n||c<=n)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}e.exports=t.default,e.exports.default=t.default},3583:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";(0,o.default)(e);var r=a[t];return r&&r.test(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};e.exports=t.default,e.exports.default=t.default},3584:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.default)(e),(0,o.default)(e)&&24===e.length};var n=a(r(3451)),o=a(r(3497));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},3585:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String(new Date);(0,n.default)(e);var r=(0,o.default)(t),a=(0,o.default)(e);return!!(a&&r&&a>r)};var n=a(r(3451)),o=a(r(3474));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},3586:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String(new Date);(0,n.default)(e);var r=(0,o.default)(t),a=(0,o.default)(e);return!!(a&&r&&a<r)};var n=a(r(3451)),o=a(r(3474));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},3587:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r;if((0,n.default)(e),"[object Array]"===Object.prototype.toString.call(t)){var a=[];for(r in t)({}).hasOwnProperty.call(t,r)&&(a[r]=(0,o.default)(t[r]));return a.indexOf(e)>=0}if("object"===i(t))return t.hasOwnProperty(e);if(t&&"function"==typeof t.indexOf)return t.indexOf(e)>=0;return!1};var n=a(r(3451)),o=a(r(3475));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}e.exports=t.default,e.exports.default=t.default},3588:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,o.default)(e);var t=e.replace(/[- ]+/g,"");if(!a.test(t))return!1;for(var r,n,i,c=0,u=t.length-1;u>=0;u--)r=t.substring(u,u+1),n=parseInt(r,10),c+=i&&(n*=2)>=10?n%10+1:n,i=!i;return!(c%10!=0||!t)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11}|6[27][0-9]{14})$/;e.exports=t.default,e.exports.default=t.default},3589:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";if((0,o.default)(e),t in a)return a[t](e);if("any"===t){for(var r in a){if(a.hasOwnProperty(r))if((0,a[r])(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a={ES:function(e){(0,o.default)(e);var t={X:0,Y:1,Z:2},r=e.trim().toUpperCase();if(!/^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/.test(r))return!1;var n=r.slice(0,-1).replace(/[X,Y,Z]/g,(function(e){return t[e]}));return r.endsWith(["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"][n%23])}};e.exports=t.default,e.exports.default=t.default},3590:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,o.default)(e),!a.test(e))return!1;for(var t,r,n=e.replace(/[A-Z]/g,(function(e){return parseInt(e,36)})),i=0,c=!0,u=n.length-2;u>=0;u--)t=n.substring(u,u+1),r=parseInt(t,10),i+=c&&(r*=2)>=10?r+1:r,c=!c;return parseInt(e.substr(e.length-1),10)===(1e4-i)%10};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;e.exports=t.default,e.exports.default=t.default},3591:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,o.default)(t),!(r=String(r)))return e(t,10)||e(t,13);var n,u=t.replace(/[\s-]+/g,""),l=0;if("10"===r){if(!a.test(u))return!1;for(n=0;n<9;n++)l+=(n+1)*u.charAt(n);if("X"===u.charAt(9)?l+=100:l+=10*u.charAt(9),l%11==0)return!!u}else if("13"===r){if(!i.test(u))return!1;for(n=0;n<12;n++)l+=c[n%2]*u.charAt(n);if(u.charAt(12)-(10-l%10)%10==0)return!!u}return!1};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^(?:[0-9]{9}X|[0-9]{10})$/,i=/^(?:[0-9]{13})$/,c=[1,3];e.exports=t.default,e.exports.default=t.default},3592:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(e);var r=a;if(r=t.require_hyphen?r.replace("?",""):r,!(r=t.case_sensitive?new RegExp(r):new RegExp(r,"i")).test(e))return!1;for(var n=e.replace("-","").toUpperCase(),i=0,c=0;c<n.length;c++){var u=n[c];i+=("X"===u?10:+u)*(8-c)}return i%11==0};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a="^\\d{4}-?\\d{3}[\\dX]$";e.exports=t.default,e.exports.default=t.default},3593:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if((0,o.default)(e),r&&r.strictMode&&!e.startsWith("+"))return!1;if(Array.isArray(t))return t.some((function(t){if(a.hasOwnProperty(t)&&a[t].test(e))return!0;return!1}));if(t in a)return a[t].test(e);if(!t||"any"===t){for(var n in a){if(a.hasOwnProperty(n))if(a[n].test(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a={"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-EG":/^((\+?20)|0)?1[012]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)[569]\d{7}$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/\+?(88)?0?1[356789][0-9]{8}\b/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^(\+49)?0?1(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7}$/,"el-GR":/^(\+?30|0)?(69\d{8})$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28)\d{7}$/,"en-HK":/^(\+?852\-?)?[456789]\d{3}\-?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-KE":/^(\+?254|0)?[7]\d{8}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PK":/^((\+92)|(0092))-{0,1}\d{3}-{0,1}\d{7}$|^\d{11}$|^\d{4}-\d{7}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[89]\d{7}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"es-ES":/^(\+?34)?(6\d{1}|7[1234])\d{7}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4(0|1|2|4|5|6)?|50)\s?(\d\s?){4,8}\d$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36)(20|30|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"ja-JP":/^(\+?81|0)[789]0[ \-]?[1-9]\d{2}[ \-]?\d{5}$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"ms-MY":/^(\+?6?01){1}(([0145]{1}(\-|\s)?\d{7,8})|([236789]{1}(\s|\-)?\d{7}))$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"nl-BE":/^(\+?32|0)4?\d{8}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?[5-8]\d ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/(?=^(\+?5{2}\-?|0)[1-9]{2}\-?\d{4}\-?\d{4}$)(^(\+?5{2}\-?|0)[1-9]{2}\-?[6-9]{1}\d{3}\-?\d{4}$)|(^(\+?5{2}\-?|0)[1-9]{2}\-?9[6-9]{1}\d{3}\-?\d{4}$)/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"ro-RO":/^(\+?4?0)\s?7\d{2}(\/|\s|\.|\-)?\d{3}(\s|\.|\-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"vi-VN":/^(\+?84|0)((3([2-9]))|(5([689]))|(7([0|6-9]))|(8([1-5]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/};a["en-CA"]=a["en-US"],a["fr-BE"]=a["nl-BE"],a["zh-HK"]=a["en-HK"];var i=Object.keys(a);t.locales=i},3594:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,o.default)(e),function(e){var t="\\d{".concat(e.digits_after_decimal[0],"}");e.digits_after_decimal.forEach((function(e,r){0!==r&&(t="".concat(t,"|\\d{").concat(e,"}"))}));var r="(\\".concat(e.symbol.replace(/\./g,"\\."),")").concat(e.require_symbol?"":"?"),n="-?",o="[1-9]\\d{0,2}(\\".concat(e.thousands_separator,"\\d{3})*"),a="(".concat(["0","[1-9]\\d*",o].join("|"),")?"),i="(\\".concat(e.decimal_separator,"(").concat(t,"))").concat(e.require_decimal?"":"?"),c=a+(e.allow_decimal||e.require_decimal?i:"");e.allow_negatives&&!e.parens_for_negatives&&(e.negative_sign_after_digits?c+=n:e.negative_sign_before_digits&&(c=n+c));e.allow_negative_sign_placeholder?c="( (?!\\-))?".concat(c):e.allow_space_after_symbol?c=" ?".concat(c):e.allow_space_after_digits&&(c+="( (?!$))?");e.symbol_after_digits?c+=r:c=r+c;e.allow_negatives&&(e.parens_for_negatives?c="(\\(".concat(c,"\\)|").concat(c,")"):e.negative_sign_before_digits||e.negative_sign_after_digits||(c=n+c));return new RegExp("^(?!-? )(?=.*\\d)".concat(c,"$"))}(t=(0,n.default)(t,i)).test(e)};var n=a(r(3457)),o=a(r(3451));function a(e){return e&&e.__esModule?e:{default:e}}var i={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_decimal:!0,require_decimal:!1,digits_after_decimal:[2],allow_space_after_digits:!1};e.exports=t.default,e.exports.default=t.default},3595:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,o.default)(e);var r=a.test(e);return t&&r&&t.strict?i(e):r};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,i=function(e){var t=e.match(/^(\d{4})-?(\d{3})([ T]{1}\.*|$)/);if(t){var r=Number(t[1]),n=Number(t[2]);return r%4==0&&r%100!=0?n<=366:n<=365}var o=e.match(/(\d{4})-?(\d{0,2})-?(\d*)/).map(Number),a=o[1],i=o[2],c=o[3],u=i?"0".concat(i).slice(-2):i,l=c?"0".concat(c).slice(-2):c,s=new Date("".concat(a,"-").concat(u||"01","-").concat(l||"01"));return!isNaN(s.getUTCFullYear())&&(!i||!c||s.getUTCFullYear()===a&&s.getUTCMonth()+1===i&&s.getUTCDate()===c)};e.exports=t.default,e.exports.default=t.default},3596:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),d.test(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/([01][0-9]|2[0-3])/,i=/[0-5][0-9]/,c=new RegExp("[-+]".concat(a.source,":").concat(i.source)),u=new RegExp("([zZ]|".concat(c.source,")")),l=new RegExp("".concat(a.source,":").concat(i.source,":").concat(/([0-5][0-9]|60)/.source).concat(/(\.[0-9]+)?/.source)),s=new RegExp("".concat(/[0-9]{4}/.source,"-").concat(/(0[1-9]|1[0-2])/.source,"-").concat(/([12]\d|0[1-9]|3[01])/.source)),f=new RegExp("".concat(l.source).concat(u.source)),d=new RegExp("".concat(s.source,"[ tT]").concat(f.source));e.exports=t.default,e.exports.default=t.default},3597:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.default)(e),(0,o.default)(i,e.toUpperCase())};var n=a(r(3451)),o=a(r(3477));function a(e){return e&&e.__esModule?e:{default:e}}var i=["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"];e.exports=t.default,e.exports.default=t.default},3598:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.default)(e),(0,o.default)(i,e.toUpperCase())};var n=a(r(3451)),o=a(r(3477));function a(e){return e&&e.__esModule?e:{default:e}}var i=["AFG","ALA","ALB","DZA","ASM","AND","AGO","AIA","ATA","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BES","BIH","BWA","BVT","BRA","IOT","BRN","BGR","BFA","BDI","KHM","CMR","CAN","CPV","CYM","CAF","TCD","CHL","CHN","CXR","CCK","COL","COM","COG","COD","COK","CRI","CIV","HRV","CUB","CUW","CYP","CZE","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","ETH","FLK","FRO","FJI","FIN","FRA","GUF","PYF","ATF","GAB","GMB","GEO","DEU","GHA","GIB","GRC","GRL","GRD","GLP","GUM","GTM","GGY","GIN","GNB","GUY","HTI","HMD","VAT","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JEY","JOR","KAZ","KEN","KIR","PRK","KOR","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MKD","MDG","MWI","MYS","MDV","MLI","MLT","MHL","MTQ","MRT","MUS","MYT","MEX","FSM","MDA","MCO","MNG","MNE","MSR","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","NCL","NZL","NIC","NER","NGA","NIU","NFK","MNP","NOR","OMN","PAK","PLW","PSE","PAN","PNG","PRY","PER","PHL","PCN","POL","PRT","PRI","QAT","REU","ROU","RUS","RWA","BLM","SHN","KNA","LCA","MAF","SPM","VCT","WSM","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SXM","SVK","SVN","SLB","SOM","ZAF","SGS","SSD","ESP","LKA","SDN","SUR","SJM","SWZ","SWE","CHE","SYR","TWN","TJK","TZA","THA","TLS","TGO","TKL","TON","TTO","TUN","TUR","TKM","TCA","TUV","UGA","UKR","ARE","GBR","USA","UMI","URY","UZB","VUT","VEN","VNM","VGB","VIR","WLF","ESH","YEM","ZMB","ZWE"];e.exports=t.default,e.exports.default=t.default},3599:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,o.default)(e);var t=e.length;if(!t||t%4!=0||a.test(e))return!1;var r=e.indexOf("=");return-1===r||r===t-1||r===t-2&&"="===e[t-1]};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/[^A-Z0-9+\/=]/i;e.exports=t.default,e.exports.default=t.default},3600:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,o.default)(e);var t=e.split(",");if(t.length<2)return!1;var r=t.shift().trim().split(";"),n=r.shift();if("data:"!==n.substr(0,5))return!1;var u=n.substr(5);if(""!==u&&!a.test(u))return!1;for(var l=0;l<r.length;l++)if(l===r.length-1&&"base64"===r[l].toLowerCase());else if(!i.test(r[l]))return!1;for(var s=0;s<t.length;s++)if(!c.test(t[s]))return!1;return!0};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^[a-z]+\/[a-z0-9\-\+]+$/i,i=/^[a-z\-]+=[a-z0-9\-]+$/i,c=/^[a-z0-9!\$&'\(\)\*\+,;=\-\._~:@\/\?%\s]*$/i;e.exports=t.default,e.exports.default=t.default},3601:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e.trim())};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^magnet:\?xt=urn:[a-z0-9]+:[a-z0-9]{32,40}&dn=.+&tr=.+$/i;e.exports=t.default,e.exports.default=t.default},3602:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),a.test(e)||i.test(e)||c.test(e)};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^(application|audio|font|image|message|model|multipart|text|video)\/[a-zA-Z0-9\.\-\+]{1,100}$/i,i=/^text\/[a-zA-Z0-9\.\-\+]{1,100};\s?charset=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?$/i,c=/^multipart\/[a-zA-Z0-9\.\-\+]{1,100}(;\s?(boundary|charset)=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?){0,2}$/i;e.exports=t.default,e.exports.default=t.default},3603:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,o.default)(e),!e.includes(","))return!1;var t=e.split(",");return a.test(t[0])&&i.test(t[1])};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,i=/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/;e.exports=t.default,e.exports.default=t.default},3604:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,o.default)(e),t in u)return u[t].test(e);if("any"===t){for(var r in u){if(u.hasOwnProperty(r))if(u[r].test(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var n,o=(n=r(3451))&&n.__esModule?n:{default:n};var a=/^\d{4}$/,i=/^\d{5}$/,c=/^\d{6}$/,u={AD:/^AD\d{3}$/,AT:a,AU:a,BE:a,BG:a,CA:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][\s\-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i,CH:a,CZ:/^\d{3}\s?\d{2}$/,DE:i,DK:a,DZ:i,EE:i,ES:i,FI:i,FR:/^\d{2}\s?\d{3}$/,GB:/^(gir\s?0aa|[a-z]{1,2}\d[\da-z]?\s?(\d[a-z]{2})?)$/i,GR:/^\d{3}\s?\d{2}$/,HR:/^([1-5]\d{4}$)/,HU:a,IL:i,IN:c,IS:/^\d{3}$/,IT:i,JP:/^\d{3}\-\d{4}$/,KE:i,LI:/^(948[5-9]|949[0-7])$/,LT:/^LT\-\d{5}$/,LU:a,LV:/^LV\-\d{4}$/,MX:i,NL:/^\d{4}\s?[a-z]{2}$/i,NO:a,PL:/^\d{2}\-\d{3}$/,PT:/^\d{4}\-\d{3}?$/,RO:c,RU:c,SA:i,SE:/^\d{3}\s?\d{2}$/,SI:a,SK:/^\d{3}\s?\d{2}$/,TN:a,TW:/^\d{3}(\d{2})?$/,UA:i,US:/^\d{5}(-\d{4})?$/,ZA:a,ZM:i},l=Object.keys(u);t.locales=l},3605:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,n.default)((0,o.default)(e,t),t)};var n=a(r(3499)),o=a(r(3498));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},3606:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3607:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e),e.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\").replace(/&#96;/g,"`")};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3608:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,n.default)(e);var r=t?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return(0,o.default)(e,r)};var n=a(r(3451)),o=a(r(3500));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},3609:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,o.default)(e),e.replace(new RegExp("[^".concat(t,"]+"),"g"),"")};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3610:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,o.default)(e);for(var r=e.length-1;r>=0;r--)if(-1===t.indexOf(e[r]))return!1;return!0};var n,o=(n=r(3451))&&n.__esModule?n:{default:n};e.exports=t.default,e.exports.default=t.default},3611:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t=(0,o.default)(t,a);var r=e.split("@"),n=r.pop(),f=[r.join("@"),n];if(f[1]=f[1].toLowerCase(),"gmail.com"===f[1]||"googlemail.com"===f[1]){if(t.gmail_remove_subaddress&&(f[0]=f[0].split("+")[0]),t.gmail_remove_dots&&(f[0]=f[0].replace(/\.+/g,s)),!f[0].length)return!1;(t.all_lowercase||t.gmail_lowercase)&&(f[0]=f[0].toLowerCase()),f[1]=t.gmail_convert_googlemaildotcom?"gmail.com":f[1]}else if(i.indexOf(f[1])>=0){if(t.icloud_remove_subaddress&&(f[0]=f[0].split("+")[0]),!f[0].length)return!1;(t.all_lowercase||t.icloud_lowercase)&&(f[0]=f[0].toLowerCase())}else if(c.indexOf(f[1])>=0){if(t.outlookdotcom_remove_subaddress&&(f[0]=f[0].split("+")[0]),!f[0].length)return!1;(t.all_lowercase||t.outlookdotcom_lowercase)&&(f[0]=f[0].toLowerCase())}else if(u.indexOf(f[1])>=0){if(t.yahoo_remove_subaddress){var d=f[0].split("-");f[0]=d.length>1?d.slice(0,-1).join("-"):d[0]}if(!f[0].length)return!1;(t.all_lowercase||t.yahoo_lowercase)&&(f[0]=f[0].toLowerCase())}else l.indexOf(f[1])>=0?((t.all_lowercase||t.yandex_lowercase)&&(f[0]=f[0].toLowerCase()),f[1]="yandex.ru"):t.all_lowercase&&(f[0]=f[0].toLowerCase());return f.join("@")};var n,o=(n=r(3457))&&n.__esModule?n:{default:n};var a={all_lowercase:!0,gmail_lowercase:!0,gmail_remove_dots:!0,gmail_remove_subaddress:!0,gmail_convert_googlemaildotcom:!0,outlookdotcom_lowercase:!0,outlookdotcom_remove_subaddress:!0,yahoo_lowercase:!0,yahoo_remove_subaddress:!0,yandex_lowercase:!0,icloud_lowercase:!0,icloud_remove_subaddress:!0},i=["icloud.com","me.com"],c=["hotmail.at","hotmail.be","hotmail.ca","hotmail.cl","hotmail.co.il","hotmail.co.nz","hotmail.co.th","hotmail.co.uk","hotmail.com","hotmail.com.ar","hotmail.com.au","hotmail.com.br","hotmail.com.gr","hotmail.com.mx","hotmail.com.pe","hotmail.com.tr","hotmail.com.vn","hotmail.cz","hotmail.de","hotmail.dk","hotmail.es","hotmail.fr","hotmail.hu","hotmail.id","hotmail.ie","hotmail.in","hotmail.it","hotmail.jp","hotmail.kr","hotmail.lv","hotmail.my","hotmail.ph","hotmail.pt","hotmail.sa","hotmail.sg","hotmail.sk","live.be","live.co.uk","live.com","live.com.ar","live.com.mx","live.de","live.es","live.eu","live.fr","live.it","live.nl","msn.com","outlook.at","outlook.be","outlook.cl","outlook.co.il","outlook.co.nz","outlook.co.th","outlook.com","outlook.com.ar","outlook.com.au","outlook.com.br","outlook.com.gr","outlook.com.pe","outlook.com.tr","outlook.com.vn","outlook.cz","outlook.de","outlook.dk","outlook.es","outlook.fr","outlook.hu","outlook.id","outlook.ie","outlook.in","outlook.it","outlook.jp","outlook.kr","outlook.lv","outlook.my","outlook.ph","outlook.pt","outlook.sa","outlook.sg","outlook.sk","passport.com"],u=["rocketmail.com","yahoo.ca","yahoo.co.uk","yahoo.com","yahoo.de","yahoo.fr","yahoo.in","yahoo.it","ymail.com"],l=["yandex.ru","yandex.ua","yandex.kz","yandex.com","yandex.by","ya.ru"];function s(e){return e.length>1?e:""}e.exports=t.default,e.exports.default=t.default},3617:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i}));var n=r(18),o=r(198),a=function(e,t,r){var a=window.appData.note;return a?1===a.public:(e=e||window.appData.group,t=t||window.appData.book,r=r||window.appData.doc,!(!e||!t)&&(r?Object(o.c)({type:"doc",target:r,group:e,book:t}):Object(o.c)({type:"book",target:t,group:e}))===n.PRIVACY.public)},i=function(e,t,r){var n=window.appData.note;return n?n.is_public:(e=e||window.appData.share,t=t||window.appData.book,r=r||window.appData.doc,!!(e&&t&&r&&r.book_id===t.id)&&(0===e.status&&0===e.scope&&(e.target_id===r.book_id||e.target_id===r.id)))}},3621:function(e,t,r){"use strict";r(95);var n=r(49),o=(r(64),r(21)),a=(r(227),r(112)),i=r(0),c=r.n(i),u=r(8),l=r.n(u),s=r(745),f=r(1766),d=r(2744),p=r(190),h=r(582),m=r(2580),y=r.n(m),v=r(252),g=r(447),b=r(2745),_=r(1981),w="DocExport-module_docExport_zwx9b",j="DocExport-module_title_eGdGG",E="DocExport-module_entry_qjwYu",O="DocExport-module_hide_+Vz7A",S="DocExport-module_setting_yai1Y",x="DocExport-module_settingTitle_IjcSw",k="DocExport-module_settingUpload_3ymtX";function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===T(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(){I=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==T(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function A(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function N(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){A(a,n,o,i,c,"next",e)}function c(e){A(a,n,o,i,c,"throw",e)}i(void 0)}))}}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=Object(g.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(7),r.e(83)]).then(r.bind(null,3838))}),{suspense:!0}),F=_.a.STATUS,G=function(e){var t=e.bookId,r=e.exportParams,u=e.onCancel,l=function(e){var t=e.doc,r=e.bookId,n=e.exportParams,o=D(Object(i.useState)(t||null),2),a=o[0],c=o[1],u=D(Object(i.useState)(!1),2),l=u[0],s=u[1],f=D(Object(i.useState)(t?y.a.SUPPORTED_EXPORT_FORMATS[t.type]:[]),2),d=f[0],p=f[1];return Object(i.useEffect)((function(){var e=function(){var e=N(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.doc_id){e.next=11;break}return s(!0),e.next=5,h.a.docs.findOne({id:n.toc_node_url,book_id:r});case 5:t=e.sent,c(t),s(!1),p(y.a.SUPPORTED_EXPORT_FORMATS[t.type]),e.next=12;break;case 11:p([y.a.THIRD_PARTY_FORMAT.LAKE]);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a||e()}),[]),{state:{currentDoc:a,loading:l,formats:d}}}(e),m=l.state,v=m.currentDoc,g=m.loading,T=m.formats,C=D(Object(i.useState)(),2),L=C[0],A=C[1],R=D(Object(i.useState)(),2),G=R[0],U=R[1],B=D(Object(i.useState)(),2),z=B[0],W=B[1],V=D(Object(i.useState)(F.INIT),2),q=V[0],K=V[1],$=D(Object(i.useState)(""),2),H=$[0],Y=$[1],Z=Object(i.useRef)(),X=Object(i.useRef)(),Q={markdown:[[{label:__("导出 LaTeX 公式图片"),name:"latexType",default:!0,value:1},{label:__("导出 LaTeX 公式为 Markdown 语法"),name:"latexType",value:2}],{label:__("导出保持语雀的锚点"),name:"enableAnchor",value:1},{label:__("导出保持语雀的换行"),name:"enableBreak",value:1}],pdf:[{label:__("导出文档大纲"),default:!0,name:"enableToc",value:1}]},J=function(){var e=N(I().mark((function e(n){var o,a,i,c,u,l;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={type:n,force:0},Z.current&&(a=Z.current.getValue())&&(o.options=JSON.stringify(a)),c=66e4/(i=5e3),u=0;case 5:if(!(u<c)){e.next=33;break}if(e.prev=6,"lakebook"!==n){e.next=13;break}return e.next=10,h.a.books.exports(P(P({},o),{},{id:t,title:r.toc_node_title,toc_node_uuid:r.toc_node_uuid,toc_node_url:r.toc_node_url,with_children:!0}));case 10:l=e.sent,e.next=17;break;case 13:if(!v){e.next=17;break}return e.next=16,h.a.docs.exports(P(P({},o),{},{id:v.id}));case 16:l=e.sent;case 17:if("success"!==l.state){e.next=19;break}return e.abrupt("return",l);case 19:if("error"!==l.state){e.next=23;break}if(!l.error){e.next=22;break}return e.abrupt("return",l.error);case 22:return e.abrupt("return",{error:l.message});case 23:return e.next=25,Object(f.a)(i);case 25:u++,e.next=31;break;case 28:return e.prev=28,e.t0=e.catch(6),e.abrupt("return",{error:e.t0.message});case 31:e.next=5;break;case 33:throw new Error("处理超时，请重试...");case 34:case"end":return e.stop()}}),e,null,[[6,28]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=N(I().mark((function e(t){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v||y.a.SUPPORTED_EXPORT_FORMATS[v.type]){e.next=2;break}return e.abrupt("return");case 2:return A(t),K(F.PROCESSING),W(null),e.prev=5,e.next=8,J(t);case 8:if(!(r=e.sent).error){e.next=13;break}return K(F.ERROR),Y(r.error),e.abrupt("return");case 13:A(t),K(F.SUCCESS),W(r.url),p.b.download(r.url),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),K(F.ERROR),Y(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(t){return e.apply(this,arguments)}}(),te=v&&("Mind"===v.type||"Board"===v.type),re=function(){var e=N(I().mark((function e(t,r){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X.current&&(null===(n=X.current)||void 0===n||n.export(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ne=function(e){U(y.a.THIRD_PARTY_FORMAT[e.toUpperCase()]),!te||e!==y.a.THIRD_PARTY_FORMAT.JPG.key&&e!==y.a.THIRD_PARTY_FORMAT.PNG.key?("Show"!==(null==v?void 0:v.type)||"pdf"!==e)&&Q[e]?(A(e),K(F.SETTING)):ee(e):re(e,{filename:v.title})},oe=null;return q===F.PROCESSING?oe=G?c.a.createElement("div",{className:S},c.a.createElement("h1",{className:x},__("导出 {type}",{type:G.name})),c.a.createElement(_.a.Processing,{tip:__("正在导出中...")})):null:q===F.SUCCESS?oe=G?c.a.createElement("div",{className:S},c.a.createElement("h1",{className:x},__("导出 {type}",{type:G.name})),c.a.createElement(_.a.Success,{tip:__("文件生成成功"),action:c.a.createElement(d.a,{href:z,target:"_blank"},__("点击下载"))})):null:q===F.ERROR?oe=c.a.createElement(_.a.Error,{tip:__("文件生成失败"),error:H,action:c.a.createElement(o.a,{icon:c.a.createElement(s.default,null),size:"small",onClick:function(){ee(L)}},__("重新生成"))}):q===F.INIT&&(oe=c.a.createElement("div",{className:E},c.a.createElement("div",{className:j},__("导出文档")),g?c.a.createElement(a.a,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{mode:"export",types:T,onSelect:ne})))),c.a.createElement("div",null,c.a.createElement(n.a,{title:null,onCancel:u,visible:!0,footer:null,width:640,maskClosable:!1},c.a.createElement("div",{className:w},oe,function(){if(!G||!v)return null;var e=Q[G.key];return e?c.a.createElement("div",{className:S,style:{display:q===F.SETTING?"block":"none"}},c.a.createElement("h1",{className:x},__("{type} 导出配置",{type:G.name})),c.a.createElement(_.a.AdvanceSetting,{wrappedComponentRef:Z,target:v,type:G,settings:e,actions:c.a.createElement(o.a,{type:"primary",className:k,onClick:function(){return ee(L)}},__("导出"))})):null}())),te&&c.a.createElement(M,{className:O,onLoad:function(e){X.current=e},content:v.content}))};G.defaultProps={exportParams:{}},G.propTypes={doc:l.a.object,exportParams:l.a.object,bookId:l.a.number.isRequired,onCancel:l.a.func.isRequired};t.a=Object(v.b)(G,!0)},3627:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));r(64);var n=r(21),o=(r(95),r(49)),a=(r(94),r(27)),i=(r(254),r(56)),c=r(0),u=r.n(c),l=r(8),s=r.n(l),f=r(213),d={nameVersion:"SaveAsVersion-module_nameVersion_VphI2"};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(){h=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function m(){}function y(){}var v={};u(v,a,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(T([])));b&&b!==t&&r.call(b,a)&&(v=b);var _=y.prototype=d.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==p(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=y,n(_,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:m,configurable:!0}),m.displayName=u(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(j.prototype),u(j.prototype,i,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(_),u(_,c,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function m(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e){var t=e.version,r=y(i.a.useForm(),1)[0],n=function(){var n,o=(n=h().mark((function n(){var o,a;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.validateFields();case 3:return o=n.sent,n.next=6,e.docVersionProxy.name({id:t.id,name:o.name});case 6:a=n.sent,e.onCreated(a),e.onCancel(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})),function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){m(a,r,o,i,c,"next",e)}function c(e){m(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return o.apply(this,arguments)}}();return u.a.createElement(o.a,{"data-testid":"history-name-model",closable:!1,maskClosable:!1,onClose:e.onCancel,onCancel:e.onCancel,onOk:n,title:__("保存为版本"),getContainer:function(){var t;return(null===(t=e.getContainer)||void 0===t?void 0:t.call(e))||document.body},visible:!0},u.a.createElement(i.a,{"data-testid":"history-name-form",className:d.nameVersion,form:r,layout:"vertical"},u.a.createElement(i.a.Item,{label:__("版本名称"),name:"name",rules:[{required:!0,message:__("请输入版本名称")},{max:40,message:__("最多 40 个字符")}]},u.a.createElement(a.a,{placeholder:__("最多 40 个字符"),"data-testid":"version-name-input"}))))}function b(e){var t=y(Object(c.useState)(!1),2),r=t[0],o=t[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement(n.a,{"data-testid":"save-as-version",onClick:function(){o(!0)}},__("保存为版本")),r&&u.a.createElement(g,{getContainer:e.getContainer,version:e.version,onCreated:e.onCreated,docVersionProxy:e.docVersionProxy,onCancel:function(){o(!1)}}))}g.propTypes={version:s.a.object.isRequired,onCreated:s.a.func.isRequired,onCancel:s.a.func.isRequired,docVersionProxy:s.a.object.isRequired},b.propTypes={version:s.a.object.isRequired,onCreated:s.a.func.isRequired,docVersionProxy:s.a.object.isRequired};t.b=Object(f.b)(g,!1)},3635:function(e,t,r){"use strict";var n=r(0),o=r.n(n);t.a=function(){return o.a.createElement("div",null)}},3637:function(e,t,r){"use strict";r(64);var n=r(21),o=(r(227),r(112)),a=r(0),i=r.n(a),c=r(8),u=r.n(c),l=r(401),s=r(2780),f=r(3662),d=(r(445),r(166)),p=(r(114),r(65)),h=(r(228),r(66)),m=(r(113),r(35)),y=r(13),v=r.n(y),g=r(3660),b=r(42),_=(r(240),r(52)),w={actionItem:"SearchCatalogTrigger-module_actionItem_rk-NO",searchContainer:"SearchCatalogTrigger-module_searchContainer_Zv6BH",searchInput:"SearchCatalogTrigger-module_searchInput_4Tgor",prefixIconWrapper:"SearchCatalogTrigger-module_prefixIconWrapper_Ub-Vo",searchIcon:"SearchCatalogTrigger-module_searchIcon_RK482"};function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(e){var t=function(e){var t=e.listData,r=e.onSelectOption,n=e.isLoading,o=j(Object(a.useState)(!1),2),i=o[0],c=o[1];return{state:{inputVisible:i,searchOptions:Object(a.useMemo)((function(){return t.map((function(e){return{label:e.title,value:e.uuid}}))}),[t]),isLoading:n},handleTriggerClick:function(){c(!0)},handleBlur:function(){c(!1)},handleOptionSelect:function(e){e&&("function"==typeof r&&r({tocItemUuid:e}),c(!1))}}}(e),r=t.state,n=r.inputVisible,c=r.searchOptions,u=r.isLoading,l=t.handleTriggerClick,s=t.handleBlur,f=t.handleOptionSelect;return i.a.createElement(i.a.Fragment,null,n?i.a.createElement("div",{className:w.searchContainer},i.a.createElement(_.a,{getPopupContainer:function(e){return e.parentElement},className:w.searchInput,notFoundContent:u?i.a.createElement(o.a,{size:"small",delay:100}):null,showArrow:!1,autoFocus:!0,allowClear:!0,showSearch:!0,optionFilterProp:"label",options:c,placeholder:__("目录搜索"),onBlur:s,onChange:f}),i.a.createElement("span",{className:w.prefixIconWrapper},i.a.createElement(b.b,{name:"help-search",width:16,height:16,className:w.searchIcon}))):i.a.createElement(m.a,{title:__("目录搜索"),getPopupContainer:function(e){return e}},i.a.createElement("span",{className:w.actionItem,onClick:l},i.a.createElement(b.b,{name:"help-search",width:16,height:16,className:w.searchIcon}))))}var S=O;O.defaultProps={listData:[],isLoading:!1},O.propTypes={listData:u.a.arrayOf(u.a.object),isLoading:u.a.object,onSelectOption:u.a.func};var x=r(1718),k=r.n(x),T=r(107);function C(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||L(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=r.n(T)()("CatalogSelecter:viewModel"),N=["child","sibling"];var D={useViewModel:function(e,t){var r,n,o=e.catalog,i=e.disableItems,c=void 0===i?[]:i,u=e.submitType,l=e.currentSelectedUId,s=e.currentSelectedAction,f=c.map((function(e){return e.uuid})),d=P(Object(a.useState)(null),2),p=d[0],h=d[1],m=P(Object(a.useState)("child"),2),y=m[0],v=m[1],g=P(Object(a.useState)("top"),2),b=g[0],_=g[1],w=P(Object(a.useState)("auto"),2),j=w[0],E=w[1],O=P(Object(a.useState)("copy"!==u),2),S=O[0],x=O[1],T=Object(a.useRef)(),L="all"===(r=e.catalogLevel)||r===1/0?1/0:parseInt(r,10)+1,I=P(Object(a.useState)((n=L)===1/0?o.map((function(e){return e.uuid})):o.filter((function(e){return e.level<n-1})).map((function(e){return e.uuid}))),2),D=I[0],R=I[1],M=function(){var e=C(D),t=[];if(p){!function e(r){if(r){var n=function(e){return o.find((function(t){return t.uuid===e.parent_uuid}))}(r);n&&(t.push(n.uuid),n.level>0&&e(n))}}(o.find((function(e){return e.uuid===p})))}return t.length&&e.push.apply(e,t),e};Object(a.useEffect)((function(){R(M())}),[p]);var F=function(e,t){var r=C(D),n=r.findIndex((function(t){return t===e.uuid}));"sibling"===t?(n>=0&&r.splice(n,1),R(r)):n<0&&R([e.uuid].concat(C(r)))},G=function(e,t,r,n){k()(n)||N.includes(n)?e&&f.includes(e.uuid)||(e?(h(e.uuid),_(null),v(n||"child"),F(e,n||"child")):(h(null),_(r),E("auto"))):A("invalid insert action type",n)},U=function(){if(!e.disable&&!f.includes(p)){var t={action:"prependChild",target_uuid:p,insert_to_catalog:!0,with_children:S};return"top"===b?(t.action="prependChild",t.target_uuid=null):"bottom"===b?(t.action="appendChild",t.target_uuid=null):t.action="sibling"===y?"moveAfter":"prependChild",t}};return Object(a.useEffect)((function(){var e=o.find((function(e){return e.uuid===l}));e&&G(e,0,null,s)}),[l,s]),Object(a.useImperativeHandle)(t,(function(){return{getSubmitParams:U}})),{state:{selectItemUId:p,action:y,position:b,expandedKeys:D,placeholderTop:j,level:L,withChildren:S,catalogTreeRef:T},onSelectItem:G,onChangeAction:function(e,t){if(!f.includes(t.uuid)){e.stopPropagation(),e.preventDefault();var r=e.target.value;v(r),F(t,r),"child"===r&&E("auto")}},onExpand:function(e,t){var r=t.expanded,n=t.node;if(R(e),"sibling"===y&&n.props.uuid===p)if(r){var o=document.querySelector(".ant-tree-treenode-selected");o&&setTimeout((function(){E(o.getBoundingClientRect().height)}),200)}else D.includes(n.props.uuid)||E("auto")},handleChangeWithChildren:function(e,t){x(e.target.checked)},getSubmitParams:U,handleCatalogSearchSelect:function(e){var t=e.tocItemUuid,r=o.find((function(e){return e.uuid===t}));G(r,0,null,"sibling");var n=setTimeout((function(){var e;null===(e=T.current)||void 0===e||e.scrollTo({key:r.uuid,align:"top",offset:100}),clearTimeout(n)}),300)},handleInsertToTop:function(e){return G(null,0,"top")},handleInsertToBottom:function(e){return G(null,0,"bottom")}}}},R={card:"CatalogSelector-module_card_EnAh7",disabled:"CatalogSelector-module_disabled_DdXXq",titleWrapper:"CatalogSelector-module_titleWrapper_mcDOG",title:"CatalogSelector-module_title_ixnVK",docCatalogItem:"CatalogSelector-module_docCatalogItem_yI0aV",emptyViewInner:"CatalogSelector-module_emptyViewInner_FIALf",placeholder:"CatalogSelector-module_placeholder_topjs",caret:"CatalogSelector-module_caret_jxv72",placeholderSibling:"CatalogSelector-module_placeholderSibling_-rdTP",placeholderChild:"CatalogSelector-module_placeholderChild_uP7D6",actions:"CatalogSelector-module_actions_HKHke",topSimulator:"CatalogSelector-module_topSimulator_t0qhG",bottomSimulator:"CatalogSelector-module_bottomSimulator_HSsiS",textTip:"CatalogSelector-module_textTip_LK8n1",selected:"CatalogSelector-module_selected_JDZUv",wrapper:"CatalogSelector-module_wrapper_tsHiF",submitOptions:"CatalogSelector-module_submitOptions_Om8RW",submitOptionItem:"CatalogSelector-module_submitOptionItem_oqA8J",shortcutArea:"CatalogSelector-module_shortcutArea_AgvQv",shortcutTip:"CatalogSelector-module_shortcutTip_BR+Yo",shortcutActionCont:"CatalogSelector-module_shortcutActionCont_l0Ug2",shortcutAction:"CatalogSelector-module_shortcutAction_u+U2K",shortcutActionDisabled:"CatalogSelector-module_shortcutActionDisabled_+nyVB"};function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F.apply(this,arguments)}function G(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==M(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===M(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var U=i.a.forwardRef((function(e,t){var r=e.catalog,n=e.disableItems,o=e.submitType,c=e.currentSelectedUId,u=e.showChildrenOptions,s=e.extraOptions,f=e.maxHeight,y=e.hideCopyWithChildren,_=void 0!==y&&y,w=D.useViewModel(e,t),j=Object(l.generateTreeByTocItems)(r),E=w.state,O=E.selectItemUId,x=E.action,k=E.position,T=E.expandedKeys,C=E.placeholderTop,P=E.level,L=E.withChildren,I=E.catalogTreeRef,A=__("插入");switch(o){case"move":A=__("移动");break;case"copy":A=__("复制");break;default:A=__("插入")}var N=[{label:__("同级"),value:"sibling"},{label:__("子级"),value:"child"}],M=function(){var e;return i.a.createElement("div",{"data-testid":"catalog-selector-tree-placeholder",className:v()([R.placeholder],(e={},G(e,R.placeholderChild,O&&"child"===x),G(e,R.placeholderSibling,O&&"sibling"===x),e)),style:{top:C}},i.a.createElement(b.b,{name:"catalog-caret",width:13,height:6,className:R.caret}))};Object(a.useEffect)((function(){if(c&&I.current){var e=I.current;setTimeout((function(){e.scrolled||e.scrollTo({key:c,align:"top",offset:100})}),300)}}),[c]);var U={data:j,listData:r,editable:!1,catalogLevel:P,disabledKeys:n.map((function(e){return e.uuid})),selectedKeys:O&&[O],expandedKeys:T,onSelect:w.onSelectItem,onExpand:w.onExpand,size:"normal"};r.length>10&&(U.height=f);var B=!r.length;return i.a.createElement("div",{className:R.wrapper},i.a.createElement("div",{className:R.shortcutArea},i.a.createElement("div",{className:R.shortcutTip},__("请选择要放置的目录位置")),i.a.createElement("div",{className:R.shortcutActionCont},i.a.createElement(S,{listData:r,onSelectOption:w.handleCatalogSearchSelect}),i.a.createElement(m.a,{title:__("置顶")},i.a.createElement("span",{className:v()([R.shortcutAction,G({},R.shortcutActionDisabled,B)]),onClick:function(e){B||w.handleInsertToTop(e)}},i.a.createElement(b.b,{name:"move-top",width:9,height:13,style:{fill:"red"}}))),i.a.createElement(m.a,{title:__("置底")},i.a.createElement("span",{className:v()([R.shortcutAction,G({},R.shortcutActionDisabled,B)]),onClick:function(e){B||w.handleInsertToBottom(e)}},i.a.createElement(b.b,{name:"move-bottom",width:9,height:13}))))),i.a.createElement(p.a,{className:v()([R.card])},i.a.createElement("div",{"data-testid":"catalog-selector-tree-top-simulator",className:R.topSimulator},"top"===k&&M()),r.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a,F({},U,{ref:I,renderTitle:function(e){return i.a.createElement("div",{className:R.titleWrapper,"data-testid":"catalog-selector-tree-title-".concat(e.uuid)},i.a.createElement("div",{className:R.title},e.title),O===e.uuid&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:R.actions,"data-testid":"catalog-selector-insert-actions-".concat(e.uuid),onClick:function(e){e.stopPropagation()}},i.a.createElement("span",null,__("{actionType}为",{actionType:A})),i.a.createElement(h.a.Group,{value:w.state.action,onChange:function(t){w.onChangeAction(t,e)},options:N})),M()))}})),i.a.createElement("div",{"data-testid":"catalog-selector-tree-bottom-simulator",className:R.bottomSimulator},"bottom"===k&&M())):i.a.createElement("div",{className:R.emptyView},i.a.createElement("div",{className:R.emptyViewInner},i.a.createElement("p",null,__("插入第一个目录节点"))))),i.a.createElement("div",{className:v()(e.optionClassnames,R.submitOptions)},u&&!_&&i.a.createElement("div",{className:R.submitOptionItem},i.a.createElement(d.a,{checked:L,onChange:w.handleChangeWithChildren},__("包含子文档"))),s))}));U.defaultProps={catalog:[],catalogLevel:1/0,disableItems:[],maxHeight:326,hideCopyWithChildren:!1},U.propTypes={catalog:u.a.array,catalogLevel:u.a.oneOfType([u.a.number,u.a.string]),submitType:u.a.oneOf(["create","move","copy"]),disableItems:u.a.array,showChildrenOptions:u.a.bool,optionClassnames:u.a.string,extraOptions:u.a.node,currentSelectedUId:u.a.string,maxHeight:u.a.number,hideCopyWithChildren:u.a.bool},U.displayName="CatalogSelector";var B=U,z="CatalogTransfer-module_wrapper_PCdb1",W="CatalogTransfer-module_repoSelector_xEuzZ",V="CatalogTransfer-module_selectBookTip_Ju7F8",q="CatalogTransfer-module_emptyIcon_tkaXF",K="CatalogTransfer-module_loading_MvRPo",$="CatalogTransfer-module_footer_XgWWv",H="CatalogTransfer-module_actions_3DruK",Y="CatalogTransfer-module_selectorOptions_evk3C";function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Z(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(){ee=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Z(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function te(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function re(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){te(a,n,o,i,c,"next",e)}function c(e){te(a,n,o,i,c,"throw",e)}i(void 0)}))}}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||ae(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){if(e){if("string"==typeof e)return ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ie(e,t):void 0}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ce(e,t){var r,n=[],o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ae(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(t);try{for(o.s();!(r=o.n()).done;){var a=r.value,i=Object(l.findAllChildrenByParentNode)(e,a,!0)||[];n.push.apply(n,oe(i))}}catch(e){o.e(e)}finally{o.f()}return n}var ue=i.a.forwardRef((function(e,t){var r=e.currentGroup,c=e.currentBook,u=e.disableSelectorBooks,l=e.showRepoSelector,d=e.submitType,p=e.hideCopyWithChildren,h=void 0!==p&&p,m=function(e){var t,r=e.currentGroup,n=e.currentBook,o=e.items,i=e.showRepoSelector,c=e.submitType,u=ne(Object(a.useState)(r),2),l=u[0],f=u[1],d=ne(Object(a.useState)(n),2),p=d[0],h=d[1],m=ne(Object(a.useState)([]),2),y=m[0],v=m[1],g=ne(Object(a.useState)([]),2),b=g[0],_=g[1],w=ne(Object(a.useState)(!0),2),j=w[0],E=w[1],O=ne(Object(a.useState)(!1),2),S=O[0],x=O[1],k=o&&Array.isArray(o)&&1===o.length,T="child";if(p.id===n.id&&k){var C=o[0].uuid,P=o[0].doc_id,L=(I=y.find((function(e){return e.uuid===C||e.doc_id===P})),A=t,N=T,I&&(A=I.prev_uuid,I.prev_uuid&&I.parent_uuid!==I.prev_uuid?(A=I.prev_uuid,N="sibling"):A=I.parent_uuid),{uuid:A,actionType:N});t=L.uuid,T=L.actionType}var I,A,N;var D,R=Object(a.useMemo)((function(){return o.reduce((function(e,t){var r=b.find((function(e){return e.uuid===t.uuid||e.doc_id===t.doc_id}));return r&&e.push(r),e}),[])}),[o,b]),M=Object(a.useMemo)((function(){return Array.isArray(R)&&R.length&&"move"===c&&p.id===n.id?[].concat(R,ce(y,R)):[]}),[y,n.id,p.id,R]),F=function(){var e=re(ee().mark((function e(t){var r,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,s.a.getCatalogNodes(t.id);case 3:r=e.sent,o=r?r.toc:[],v(o),t.id===n.id&&_(o),E(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return i||F(n),x(!1)}),[i,n]),{state:{targetGroup:l,targetBook:p,toc:y,items:R,disableItemsInToc:M,loading:j,submitting:S,defaultSelectedCatalogNodeUid:t,defaultSelectedNodeActionType:T},handleSelect:(D=re(ee().mark((function e(t){var r,n=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:{},t&&f(t),r&&h(r),!t||!r){e.next=6;break}return e.next=6,F(r);case 6:case"end":return e.stop()}}),e)}))),function(e){return D.apply(this,arguments)}),setSubmitting:x}}(e),y=m.state,v=y.targetGroup,g=y.targetBook,b=y.toc,_=y.disableItemsInToc,w=y.loading,j=y.submitting,E=y.defaultSelectedCatalogNodeUid,O=y.defaultSelectedNodeActionType,S=y.items,x=m.setSubmitting,k=i.a.useRef(),T=Array.isArray(S)&&S.some((function(e){return!!e.child_uuid})),C=function(){var t=re(ee().mark((function t(){var r,n,o,a;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!j){t.next=2;break}return t.abrupt("return");case 2:return x(!0),r={targetGroup:v,targetBook:g},Array.isArray(S)&&S.length&&(n=S.map((function(e){return e.uuid})),r.node_uuid=n[0]),o={},k&&k.current&&(o=k.current.getSubmitParams()),t.prev=7,t.next=10,e.onSubmit(Q(Q({},o),r));case 10:return a=t.sent,x(!1),t.abrupt("return",a);case 15:t.prev=15,t.t0=t.catch(7),x(!1);case 18:case"end":return t.stop()}}),t,null,[[7,15]])})));return function(){return t.apply(this,arguments)}}(),P=(g.toc||[]).length,L=48+(P>10?326:32*P);return i.a.createElement("div",{className:z},l&&i.a.createElement("div",{className:W},i.a.createElement(f.a,{defaultGroup:r,defaultBook:c,disableBooks:u,onSelected:m.handleSelect})),w?i.a.createElement(o.a,{className:K,size:"large",style:{height:L}}):i.a.createElement(i.a.Fragment,null,v&&g&&g.id?i.a.createElement(B,{currentSelectedUId:E,currentSelectedAction:O,submitType:d,targetBook:g,catalog:b,catalogLevel:g.catalog_display_level,disableItems:_,ref:k,optionClassnames:Y,showChildrenOptions:T,hideCopyWithChildren:h}):i.a.createElement("div",{className:V},i.a.createElement("img",{className:q,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*9iSQTaU_i9kAAAAAAAAAAAAAARQnAQ"}),i.a.createElement("span",null,__("暂无目录，选择知识库后可查看")))),i.a.createElement("div",{className:$},i.a.createElement("div",{className:H},i.a.createElement(n.a,{onClick:e.onCancel},__("取消")),i.a.createElement(n.a,{type:"primary",onClick:C,loading:j,disabled:!v||!g||!g.id||j,"data-testid":"catalog-transfer-btn-submit"},__("确认")))))}));ue.defaultProps={showRepoSelector:!0,items:[]},ue.propTypes={currentGroup:u.a.object,currentBook:u.a.object.isRequired,disableSelectorBooks:u.a.array,items:u.a.array,onSubmit:u.a.func.isRequired,onCancel:u.a.func.isRequired,submitType:u.a.oneOf(["create","move","copy"]).isRequired,showRepoSelector:u.a.bool,hideCopyWithChildren:u.a.bool},ue.displayName="CatalogTransfer";t.a=ue},3642:function(e,t,r){var n=r(3533),o=r(391),a=r(448),i=r(1972),c=a((function(e,t){return i(e)?n(e,o(t,1,i,!0)):[]}));e.exports=c},3650:function(e,t,r){var n=r(3533),o=r(391),a=r(206),i=r(448),c=r(1972),u=r(2681),l=i((function(e,t){var r=u(t);return c(r)&&(r=void 0),c(e)?n(e,o(t,1,c,!0),a(r,2)):[]}));e.exports=l},3651:function(e,t,r){var n=r(552),o=r(206),a=r(641),i=Math.max;e.exports=function(e,t,r){var c=null==e?0:e.length;if(!c)return-1;var u=null==r?0:a(r);return u<0&&(u=i(c+u,0)),n(e,o(t,3),u)}},3660:function(e,t,r){"use strict";r(2802);var n=r(2598),o=r(0),a=r.n(o),i=r(266),c=r(107),u=r.n(c),l=r(13),s=r.n(l),f=r(8),d=r.n(f),p=r(143),h=r.n(p),m=r(3642),y=r.n(m),v=r(373),g=r(401),b={loading:"index-module_loading_6Xjs9",titleWrapper:"index-module_titleWrapper_NRfy4",wrapper:"index-module_wrapper_G8dbv",scrolled:"index-module_scrolled_ZXFD1",topScrolled:"index-module_topScrolled_8VE-9",bottomScrolled:"index-module_bottomScrolled_G+APF",dragging:"index-module_dragging_fFNee",normalWrapper:"index-module_normalWrapper_9CiWJ",largeWrapper:"index-module_largeWrapper_SUwil",ListTocWrapper:"index-module_ListTocWrapper_4wy2S"};function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(this,arguments)}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=x(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function S(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(){T=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new x(o||[]);return n(i,"_invoke",{value:j(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(k([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==_(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function j(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function C(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=N(e);if(t){var o=N(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}(this,r)}}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}function D(e,t,r){return(t=R(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){var t=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_(t)?t:String(t)}var M="catalog-tree",F="".concat(M,"-drag-container"),G=u()(M),U=n.a.DirectoryTree,B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(c,e);var t,r,n,o=I(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),D(A(t=o.call(this,e)),"initScrollValue",(function(){t.scrolled=!0})),D(A(t),"initScrollMask",(function(){if(t.props.showScrollMask){var e=t.getCurrentScrollElement();if(e){var r=t.containerElem.getBoundingClientRect().height;t.virtualListEnabled()&&(r=t.props.height);var n=e.childNodes[0].offsetHeight,o=!1,a=!1;n>r&&(o=!0,a=!0,e.scrollTop<=0?o=!1:e.scrollTop>=n-r&&(a=!1));var i={};o!==t.state.showTopScrollMask&&(i.showTopScrollMask=o),a!==t.state.showBottomScrollMask&&(i.showBottomScrollMask=a),t.setState(i)}}})),D(A(t),"onExpand",(function(e,r){var n=r.expanded,o=r.node;t.expandLocked||t.setState({expandedKeys:e,currentNodeExpanded:n,autoExpandParent:!1},(function(){t.props.onExpand&&t.props.onExpand(e,{expanded:n,node:o}),t.timer&&clearTimeout(t.timer),t.timer=setTimeout(t.initScrollMask,200)}))})),D(A(t),"onSelect",(function(e,r){var n=e[0],o=r.node.props,a=o.type,i=t.props.toggleTitleOnSelect,c=t.state.expandedKeys.slice(),u=c.findIndex((function(e){return e===n}));u<0?c.push(n):a===v.TYPES.title&&i&&c.splice(u,1),t.setState({expandedKeys:c,selectedKeys:[n]});var l=t.props.onSelect;l&&([v.TYPES.doc,v.TYPES.link,v.TYPES.uncreated_doc,v.TYPES.title].includes(a)&&l(o,r.nativeEvent))})),D(A(t),"onCheck",(function(e,r){t.props.onCheck&&t.props.onCheck(e,r)})),D(A(t),"getAction",(function(e){var t=e.node.pos.split("-");return-1===e.dropPosition-Number(t[t.length-1])?v.ACTIONS.moveBefore:e.dropToGap?v.ACTIONS.moveAfter:v.ACTIONS.prependChild})),D(A(t),"onDrop",function(){var e,r=(e=T().mark((function e(r){var n,o,a,i,c,u;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.node.key,o=r.dragNode.key,t._showLoading(),a=t.getAction(r),G("发出 Action",i={action:a,target_uuid:n,node_uuid:o}),e.next=8,t.props.onAction(i);case 8:[v.ACTIONS.prependChild].includes(a)&&(c=t.state.expandedKeys,(u=c.slice()).includes(n)||(u.push(n),t.setState({expandedKeys:u}))),t.props.onDragEnd&&t.props.onDragEnd(r.dragNode),t.setState({draggingNode:null}),t._hideLoading();case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){C(a,n,o,i,c,"next",e)}function c(e){C(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}()),D(A(t),"onDragEnd",(function(e){if(t.props.onDragEnd&&t.props.onDragEnd(e.dragNode),t._hideLoading(),t.cacheExpandedKey){var r=S(t.state.expandedKeys);if(!r.includes(t.cacheExpandedKey)){var n=S(new Set([].concat(S(r),[t.cacheExpandedKey])));t.setState({draggingNode:null,expandedKeys:n}),t.props.onExpand(n)}t.collapseTimer&&clearTimeout(t.collapseTimer),t.cacheExpandedKey=null}else t.setState({draggingNode:null})})),D(A(t),"onDragStart",(function(e){var r=e.event,n=e.node;if(n.expanded?(t.collapseTimer&&clearTimeout(t.collapseTimer),t.collapseTimer=setTimeout((function(){var e=S(t.state.expandedKeys);if(e.includes(n.uuid)){t.cacheExpandedKey=n.uuid;var r=y()(e,[n.uuid]);t.setState({draggingNode:n,expandedKeys:r}),t.props.onExpand(S(new Set(r)))}}),10)):t.setState({draggingNode:n}),r.dataTransfer){var o=document.getElementById(F);o&&document.body.removeChild(o);var a=document.createElement("div");a.style.position="fixed";var i=t.props.offscreenRendering;a.style.top=i?"-100px":"0px",a.style.left="0px",a.style.cursor="grabbing",a.id=F,a.innerText=r.target.innerText,document.body.appendChild(a),r.dataTransfer.setDragImage(a,16,10),r.dataTransfer.dropEffect="none"}t.props.onDragStart&&t.props.onDragStart(n)})),D(A(t),"_showLoading",(function(){if(t.loadingElem){var e=t.containerElem.getBoundingClientRect(),r=e.x,n=e.width;t.loadingElem.style.left="".concat(r,"px"),t.loadingElem.style.width="".concat(n,"px"),t.loadingElem.style.display="block"}})),D(A(t),"_hideLoading",(function(){t.loadingElem&&(t.loadingElem.style.display="none")})),D(A(t),"scrollTo",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.virtualListEnabled()){if(!t.treeRef)return;t.treeRef.scrollTo(e)}else{var r=t.containerElem.querySelector('[data-uuid="catalog-'.concat(e.key,'"]'));if(!r)return;var n=r.closest(".ant-tree-treenode");t.containerElem.scrollTop=n.offsetTop-e.offset}})),D(A(t),"_getChildNodeUIds",(function(e){return e&&e.child_uuid?Object(g.findAllChildrenByParentNode)(t.props.listData,e,!0).map((function(e){return e.uuid})):[]})),D(A(t),"getTreeData",(function(){var e=t.props,r=e.data,n=e.disabledKeys,o=e.disabledCheckedKeys,i=e.highlightKeys,c=e.renderTitle,u=e.visibleFilter,l=0,f=S(n);if(t.state.draggingNode){var d=t._getChildNodeUIds(t.state.draggingNode);d&&d.length&&f.push.apply(f,S(d))}return function e(t){var r,n=[],d=O(t=t.filter(u));try{for(d.s();!(r=d.n()).done;){var p=r.value,h=f.includes(p.uuid),m=i.includes(p.uuid),y=o&&o.includes(p.uuid);p.index=l,l++;var v=E(E({},p),{},{disableCheckbox:y,"data-tree-index":p.index,"data-uuid":"catalog-".concat(p.uuid),key:p.uuid,className:s()(["catalog-treenode-level-".concat(p.level+1)],{"catalog-item-highlight":m,"catalog-item-disabled":h}),title:a.a.createElement("div",{className:s()(b.titleWrapper,D({},b.titleDisabled,h))},c(p,p.index))});p.children&&p.children.length&&(v.children=e(p.children)),n.push(v)}}catch(e){d.e(e)}finally{d.f()}return n}(r)})),t.maxNodeLengthForLoading=100,t.scrolled=!1;var r=e.expandedKeys||t.getExpandKeysByLevel(e);return t.state={draggingNode:null,expandedKeys:r,selectedKeys:e.selectedKeys||[],currentNodeExpanded:!0,autoExpandParent:!0,showTopScrollMask:!1,showBottomScrollMask:!1},t}return t=c,r=[{key:"componentDidMount",value:function(){var e=this.getCurrentScrollElement();e&&e.addEventListener("scroll",this.initScrollValue,!1),this.props.showScrollMask&&(this.initScrollMask(),e&&e.addEventListener("scroll",this.initScrollMask,!1));var t=this.containerElem;t&&this.props.enableScrollHelper&&t.addEventListener("dragover",this.dragoverEdgeToScroll)}},{key:"componentWillUnmount",value:function(){var e=this.getCurrentScrollElement();e&&(e.removeEventListener("scroll",this.initScrollValue,!1),e.removeEventListener("scroll",this.initScrollMask,!1));var t=this.containerElem;t&&t.removeEventListener("dragover",this.dragoverEdgeToScroll)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,r=this.props,n=r.catalogLevel,o=r.expandedKeys,a=e.catalogLevel,i=e.expandedKeys,c=e.selectedKeys;if(!h()(i,o)){var u=i||this.lastExpandedKeys;return this.lastExpandedKeys=this.state.expandedKeys,void this.setState({expandedKeys:u})}if(i&&!h()(i,this.state.expandedKeys))return this.lastExpandedKeys=this.state.expandedKeys,void this.setState({expandedKeys:i});a!==n&&this.setState((function(r){return{expandedKeys:t.getExpandKeysByLevel(e,r.currentNodeExpanded)}})),c&&!h()(c,this.state.selectedKeys)&&this.setState({selectedKeys:c})}},{key:"shouldComponentUpdate",value:function(e,t){return!this.props.editable||!(e.catalogLevel===this.props.catalogLevel&&e.rerenderString===this.props.rerenderString&&e.height===this.props.height&&h()(e.highlightKeys,this.props.highlightKeys)&&h()(e.listData,this.props.listData)&&h()(e.checkedKeys,this.props.checkedKeys)&&h()(e.disabledCheckedKeys,this.props.disabledCheckedKeys)&&h()(t,this.state))}},{key:"dragoverEdgeToScroll",value:function(e){var t=e.clientY,r=document.documentElement,n=r.scrollTop;n>199&&t<150&&r.scrollTop>0?r.scrollTop=n-10:t>window.innerHeight-150&&r.scrollTop<r.scrollHeight-r.offsetHeight&&(r.scrollTop=n+10)}},{key:"getCurrentScrollElement",value:function(){var e=this.containerElem;return this.virtualListEnabled()&&(e=document.querySelector(".ant-tree-list-holder")),e}},{key:"virtualListEnabled",value:function(){var e=this.props,t=e.listData,r=void 0===t?[]:t,n=e.height;return r.length>this.maxNodeLengthForLoading&&n}},{key:"lockExpand",value:function(){var e=this;this.expandLocked=!0,setTimeout((function(){e.expandLocked=!1}),100)}},{key:"foldAll",value:function(){this.setState({expandedKeys:[],autoExpandParent:!1}),this.props.onExpand&&this.props.onExpand([])}},{key:"unfoldAll",value:function(){var e=this.getExpandKeysByLevel(E(E({},this.props),{},{catalogLevel:1/0}));this.setState({expandedKeys:e}),this.props.onExpand&&this.props.onExpand(e)}},{key:"getExpandKeysByLevel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.catalogLevel,n=e.listData,o=e.selectedKeys;if(r===1/0)return n.map((function(e){return e.uuid}));var a,i=[],c=O(n);try{for(c.s();!(a=c.n()).done;){var u=a.value;u.level<r-1&&i.push(u.uuid)}}catch(e){c.e(e)}finally{c.f()}return o&&o.length&&t&&i.push.apply(i,S(o)),i}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.listData,o=r.editable,c=void 0!==o&&o,u=r.wrapperClassName,l=void 0===u?"":u,f=r.size,d=r.height,p=r.onRightClick,h=r.checkable,m=r.checkStrictly,y=r.checkedKeys,v={},g={};this.virtualListEnabled()?(v.virtual=!0,v.height="large"===f?d-32:d):(v.virtual=!1,d&&(g.height=d,g.overflow="hidden auto")),p&&(v.onRightClick=function(e){return p(e.node.props)});var _=this.state,j=_.expandedKeys,E=void 0===j?[]:j,O=_.selectedKeys,x=_.autoExpandParent,k=_.showTopScrollMask,T=_.showBottomScrollMask,C=_.draggingNode,P=this.getTreeData();return a.a.createElement("div",{"data-testid":M,className:s()(l,b.wrapper,(e={},D(e,b.largeWrapper,"large"===f),D(e,b.normalWrapper,"normal"===f),D(e,b.editable,c),D(e,b.dragging,!!C),D(e,b.scrolled,k||T),D(e,b.topScrolled,k),D(e,b.bottomScrolled,T),e))},a.a.createElement("div",{style:g,ref:function(e){t.containerElem=e}},a.a.createElement(U,w({switcherIcon:a.a.createElement("span",{className:"lake-icon lake-icon-catalog-switcher",style:{fontSize:"16px",fontWeight:"500"}}),showIcon:!1,showLine:!1,draggable:c,expandedKeys:S(new Set(E)),selectedKeys:S(new Set(O)),blockNode:!0,expandAction:"click",autoExpandParent:x,onExpand:this.onExpand,onSelect:this.onSelect,onDrop:this.onDrop,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onCheck:this.onCheck,treeData:P,checkable:h,checkStrictly:m,checkedKeys:y,ref:function(e){t.treeRef=e}},v)),n.length>this.maxNodeLengthForLoading&&a.a.createElement("div",{className:b.loading,ref:function(e){t.loadingElem=e}},a.a.createElement(i.default,null))))}}],r&&P(t.prototype,r),n&&P(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.Component);B.defaultProps={listData:[],highlightKeys:[],selectedKeys:[],disabledKeys:[],size:"normal",toggleTitleOnSelect:!1,visibleFilter:function(){return!0},enableScrollHelper:!1,onExpand:function(){}},B.propTypes={autoExpandParent:d.a.bool,size:d.a.oneOf(["normal","large"]),toggleTitleOnSelect:d.a.bool,data:d.a.array.isRequired,listData:d.a.array,editable:d.a.bool.isRequired,offscreenRendering:d.a.bool,onRightClick:d.a.func,onAction:d.a.func,renderTitle:d.a.func.isRequired,catalogLevel:d.a.number,wrapperClassName:d.a.string,onSelect:d.a.func,onDragStart:d.a.func,onDragEnd:d.a.func,onExpand:d.a.func,visibleFilter:d.a.func,highlightKeys:d.a.array,expandedKeys:d.a.array,selectedKeys:d.a.array,disabledKeys:d.a.array,checkedKeys:d.a.object,height:d.a.number,showScrollMask:d.a.bool,rerenderString:d.a.string,enableScrollHelper:d.a.bool,checkable:d.a.bool,checkStrictly:d.a.bool,onCheck:d.a.func,disabledCheckedKeys:d.a.array};t.a=B},3662:function(e,t,r){"use strict";r(204);var n=r(76),o=(r(240),r(52)),a=r(0),i=r.n(a),c=r(8),u=r.n(c),l=r(3650),s=r.n(l),f=r(109),d=r(38),p=r(2476),h=r(3544),m={repoSelector:"index-module_repoSelector_2Z0BO",repoSelectorGroup:"index-module_repoSelectorGroup_0chHn",repoSelectorRepo:"index-module_repoSelectorRepo_nq0Ar",repoSelectorItem:"index-module_repoSelectorItem_-+1uF"};function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(){v=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(T([])));b&&b!==t&&r.call(b,a)&&(m=b);var _=h.prototype=d.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==y(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(_,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(j.prototype),u(j.prototype,i,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(_),u(_,c,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function g(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){g(a,n,o,i,c,"next",e)}function c(e){g(a,n,o,i,c,"throw",e)}i(void 0)}))}}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e){var t=window.appData,r=t.me,n=t.organization,o=e.defaultBook,i=e.defaultGroup,c=e.bookLayout,u=e.disableBooks,l=void 0===u?[]:u,p=E(Object(a.useState)([w(w({},o),{},{user:i})]),2),h=p[0],m=p[1],y=E(Object(a.useState)([i]),2),g=y[0],_=y[1],j=E(Object(a.useState)(i||{}),2),O=j[0],S=j[1],x=o&&!l.includes(o)?o:{},k=E(Object(a.useState)(x),2),T=k[0],C=k[1],P=E(Object(a.useState)(!1),2),L=P[0],I=P[1],A=499;function N(e){return D.apply(this,arguments)}function D(){return(D=b(v().mark((function e(t){var r,a,i,u;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==(null===(r=t.abilities)||void 0===r?void 0:r.read)){e.next=2;break}return e.abrupt("return",o.user_id===t.id?[o]:[]);case 2:return a=f.MIXING_BOOK_TYPES.join(","),i={organization_id:n?n.id:0,type:a,filterByAbility:"create_doc",offset:0,limit:A,group_id:t.id,sence:"collaborate",enable_group_filter:!0},e.next=6,d.a.mine.books(i);case 6:return u=e.sent,u=c?u.filter((function(e){return c.includes(e.layout)})):f.MIXING_BOOK_TYPES.includes(o.type)?u.filter((function(e){return f.MIXING_BOOK_TYPES.includes(e.type)})):u.filter((function(e){return e.type===o.type})),u=s()(u,l,"id"),e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=b(v().mark((function t(r){var n,o;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r||!O||r.id!==O.id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,N(r);case 4:n=t.sent,o=n?n[0]:{},m(n),S(r),C(o),e.onSelected(r,o);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(){return(M=b(v().mark((function t(){var n,a,c,u,s;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(L){t.next=10;break}return a=f.MIXING_BOOK_TYPES.join(","),t.next=4,d.a.mine.groupsAll({offset:0,limit:A,filterByAbility:"create_doc",type:a});case 4:(c=t.sent)&&Array.isArray(c)&&c.unshift(r),_(c),I(!0),n=i||c[0],i||S(n);case 10:return t.next=12,N(n);case 12:u=t.sent,m(u),o&&!l.includes(o)?s=o:(s=u?u[0]:{},C(s)),e.onSelected(n,s);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){M.apply(this,arguments)}()}),[]),{state:{currentGroup:O,currentBook:T,groups:g,books:h},onRepoSelect:function(t){var r=h.find((function(e){return e.id===t}))||{};C(r),e.onSelected(O,r)},onGroupSelect:function(e){return R.apply(this,arguments)}}}function x(e){var t=e.disabled,r=S(e),a=r.state,c=a.currentGroup,u=a.currentBook,l=a.groups,s=a.books;return i.a.createElement(n.a,{className:m.repoSelector,type:"flex","data-testid":"repo-selector"},i.a.createElement("div",{className:m.repoSelectorGroup},i.a.createElement(h.a,{current:c,disabled:t,groups:l,onChange:r.onGroupSelect})),i.a.createElement("span",{style:{margin:"0 12px",lineHeight:"32px"}},"/"),i.a.createElement(o.a,{showSearch:!0,style:{width:"240px"},className:m.repoSelectorRepo,disabled:t,value:u&&u.id,placeholder:__("请选择知识库"),onSelect:r.onRepoSelect,filterOption:function(e,t){if(e&&t.book)return t.book.name.toLowerCase().includes(e.toLowerCase())}},s.map((function(e){return i.a.createElement(o.a.Option,{key:e.id,value:e.id,book:e},i.a.createElement("div",{className:m.repoSelectorItem},i.a.createElement(p.h,{group:e.user,book:e,iconSize:20})))}))))}x.defaultProps={onSelected:function(){},disableBooks:[]},x.propTypes={defaultGroup:u.a.object,defaultBook:u.a.object,bookLayout:u.a.array,disabled:u.a.bool,onSelected:u.a.func,disableBooks:u.a.array};t.a=x},3664:function(e,t,r){"use strict";r(64);var n=r(21),o=(r(227),r(112)),a=(r(267),r(127)),i=(r(61),r(23)),c=(r(204),r(76)),u=(r(218),r(55)),l=(r(95),r(49)),s=r(0),f=r.n(s),d=r(8),p=r.n(d),h=r(1188),m=r(1658),y=r(266),v=r(51),g=r.n(v),b=r(343),_=r.n(b),w=r(3698),j=r(2580),E=r.n(j),O=r(354);var S=function(e,t){var r=Object(s.useRef)();Object(s.useEffect)((function(){r.current=e}),[e]),Object(s.useEffect)((function(){if(null!==t){var e=setInterval((function(){r.current()}),t);return function(){return clearInterval(e)}}}),[t])},x=r(3680),k=r(252),T=r(2440),C=(r(2662),r(2744)),P=r(190),L=r(582),I=r(2745),A=r(1981),N="DocImport-module_docImport_uDZWD",D="DocImport-module_title_vylxD",R="DocImport-module_tips_gx2+N",M="DocImport-module_help_YDms4",F="DocImport-module_processingModal_5vLO+",G="DocImport-module_setting_6ttU6",U="DocImport-module_settingTitle_EsA43",B="DocImport-module_settingUpload_WXf0g",z="DocImport-module_processing_K3nVL",W="DocImport-module_processingTitle_UzLg1",V="DocImport-module_processingFooter_xOxG5",q="DocImport-module_fileList_jRvlw",K="DocImport-module_fileItem_gtT95",$="DocImport-module_fileItemIcon_SdTY-",H="DocImport-module_fileItemTitle_qprAi",Y="DocImport-module_spin_aEZeg",Z="DocImport-module_uploadingStatus_UWCen",X="DocImport-module_hr_nD0TF",Q="DocImport-module_footerTitle_2O1eI";function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function ee(){ee=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==J(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function te(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function re(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){te(a,n,o,i,c,"next",e)}function c(e){te(a,n,o,i,c,"throw",e)}i(void 0)}))}}function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==J(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===J(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||ue(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){if(e){if("string"==typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?le(e,t):void 0}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var se=l.a.confirm,fe=A.a.STATUS,de=window.appData.settings&&window.appData.settings.max_import_task_count||2,pe=function(e){var t=e.visible,r=e.book,d=e.group,p=e.formats,v=e.importType,b=e.importParams,j=ce(Object(s.useState)(fe.INIT),2),E=j[0],k=j[1],J=ce(Object(s.useState)([]),2),te=J[0],ne=J[1],ae=ce(Object(s.useState)(0),2),le=ae[0],pe=ae[1],he=ce(Object(s.useState)(0),2),me=he[0],ye=he[1],ve=ce(Object(s.useState)(0),2),ge=ve[0],be=ve[1],_e=ce(Object(s.useState)(),2),we=_e[0],je=_e[1],Ee=ce(Object(s.useState)(!1),2),Oe=Ee[0],Se=Ee[1],xe=ce(Object(s.useState)(!0),2),ke=xe[0],Te=xe[1],Ce=ce(Object(s.useState)(!1),2),Pe=Ce[0],Le=Ce[1],Ie=ce(Object(s.useState)([]),2),Ae=Ie[0],Ne=Ie[1],De=Object(s.useRef)();Object(x.a)(!Pe&&E===fe.PROCESSING,__("还没导入完成，确认关闭窗口吗？"));var Re=function(e){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])){if(Ae.length>0)return Ae.push(e),void Ne(ie(Ae));Ae.push(e)}var t=e.data,r=e.file,n=e.filename,o=e.onError,a=e.onSuccess;e.__uploaded=!0;var i=oe(oe(oe({},b),t),{},{filename:n,path:r.path});r.uploading=!0,P.b.upload({requestData:i,params:e,onError:o,onSuccess:function(e){a(e,r)}})},Me={gitbook:[{default:_.a.windows,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],markdown:[{default:!0,name:"enableLatex",label:__("识别 Markdown 文件中 LaTeX 公式语法"),value:1},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],confluence:[{type:"text",label:f.a.createElement(c.a,{type:"flex",justify:"space-between"},f.a.createElement(u.a,null,__("批量替换链接")),f.a.createElement(u.a,null,f.a.createElement(C.a,{href:"https://www.yuque.com/yuque/eaghk3/bu0hnd",target:"_blank"},__("如何从 Confluence 导出？")))),colon:!1,placeholder:__("请输入 Confluence 地址"),name:"host",autoFocus:!0,validateOnBlur:!0,validator:function(e,t,r){var n=w.validator.httpURL(t);Te(!n),r(n)}},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],zip:[[{default:"html",name:"fileFormat",label:__("html 文件，即 .html, .htm 文件"),value:"html"},{name:"fileFormat",label:__("markdown 文件，即 .md, .markdown, .mark 文件"),value:"markdown"}],{default:!0,name:"overrideExistsNode",label:__("是否覆盖相同节点的已有内容，否则自动重命名"),value:!0},{default:!0,name:"useFilenameAsTitle",label:__("是否使用文件名作为目录节点名称，否则会取内容中的标题作为名称"),value:!0},{default:!0,name:"enableLatex",label:__("识别 Markdown 文件中 LaTeX 公式语法"),value:1},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}]};Object(s.useEffect)((function(){E!==fe.PROCESSING||Oe||k(fe.SUCCESS)}),[E,Oe]);var Fe=function(e){return e.response&&e.response.data&&e.response.data.status},Ge=function(e){var t={};if(e){var n,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ue(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;t[a.id]=a}}catch(e){o.e(e)}finally{o.f()}}var c=te.map((function(e){if(!e.response||!e.response.data)return e;var r=t[e.response.data.id];if(!r)return e;var n=g()(r,"error.limitError");if(n&&400===n.status&&n.code){if(window.appData.isDesktopApp)return i.a.error(__("桌面端不支持此操作，请去 web 端完成"));var o=T.a.getMessage(n.code,{isImport:!0},n)||{},a=o.msg,c=o.alwaysOpen,u=o.level,l=o.callback;if(a)return l(i.a[u||"error"](a,c?0:void 0)),Le(!0),e}return e.response.data=oe(oe({},e.response.data),r),r.status===fe.SUCCESS?(e.status=fe.SUCCESS,e.url=r.url):(r.status===fe.ERROR||r.error)&&(e.status=fe.ERROR),e})),u=0,l=0;c.forEach((function(e){var t=Fe(e);e.status!==fe.ERROR&&t!==fe.ERROR&&t!==fe.SUCCESS||u++,e.status!==fe.ERROR&&t!==fe.ERROR||l++})),c.filter((function(e){var t=Fe(e);return t===fe.PENDING||!(null!=t||!e.uploading&&"done"!==e.status&&100!==e.percent)})).length<de&&function(){for(var e=Ae.shift();e&&e.__uploaded;)e=Ae.shift();e&&Re(e,!0),Ne(ie(Ae))}(),u>me&&ye(u),be(l),ne(c),le===u?(Se(!1),function(){if(r.toc){var e="highlightBookImport_".concat(r.slug,"_").concat(r.id),t=r.toc[0];O.a.set(e,t?t.uuid:"_")}}()):k(fe.PROCESSING)};S(re(ee().mark((function e(){var r,n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=te.filter((function(e){return e.response&&e.response.data}))).length){e.next=3;break}return e.abrupt("return",Ge());case 3:if(t){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,L.a.import.getImportResult({files:JSON.stringify(r.map((function(e){return{convertTaskId:e.response.data.convertTaskId,id:e.response.data.id,type:e.response.data.type,name:e.name}}))),toc_node_uuid:b&&b.toc_node_uuid});case 7:n=e.sent,Ge(n);case 9:case"end":return e.stop()}}),e)}))),Oe?5e3:null);var Ue,Be,ze,We=function(e){je(p.find((function(t){return t.key===e}))),Me[e]&&k(fe.SETTING),"confluence"===e&&Te(!1)},Ve=function(){return De.current.getValue()},qe=function(e){return!!Me[e.key]},Ke=function(e){var t=ie(e.fileList),r=t.length;r!==t.filter((function(e){var t=Fe(e);return t===fe.ERROR||t===fe.SUCCESS})).length&&k(fe.PROCESSING),Se(!0),ne(t),pe(r)},$e=function(){Se(!1),k((function(t){if(t!==fe.PROCESSING)return e.onCancel(),t;ne((function(t){return e.onCancel(),t}))}))},He=function(){var t,n;if(b&&"doc_toc"===b.create_from)return $e(),te.forEach((function(e){if(!t){var o=e.response&&e.response.data||{};o.import_toc&&o.import_toc[0]&&o.import_toc[0].url?(t="/".concat(d.login,"/").concat(r.slug,"/").concat(o.import_toc[0].url),n=o.import_toc[0]):"doc"!==o.type&&"Doc"!==o.type||"success"!==o.status||!o.slug||(t="/".concat(d.login,"/").concat(r.slug,"/").concat(o.slug),n=o)}})),void(t&&(e.onRead?e.onRead(n):P.b.changeHref(t)));P.b.changeHref("/".concat(d.login,"/").concat(r.slug))};return f.a.createElement(f.a.Fragment,null,f.a.createElement(l.a,{title:null,onCancel:function(e){E!==fe.INIT&&E!==fe.DONE?(e.preventDefault(),e.stopPropagation(),E===fe.PROCESSING?se({title:__("导入尚未完成，确认要停止导入?"),content:f.a.createElement("div",null,__("处理中的文件无法取消，请稍后从知识库中删除。")),okText:__("确认"),okType:"danger",cancelText:__("取消"),centered:!0,onOk:$e,onCancel:function(){}}):$e()):$e()},visible:t,footer:null,centered:!0,width:E===fe.INIT?160*Math.min(p.length,5):406,maskClosable:!1,className:E!==fe.INIT&&F},f.a.createElement("div",{className:N},(Ue=window.appData.isYuque?"https://www.yuque.com/yuque/eaghk3":"https://yuque.antfin.com/lark/non1k6",Be=p.filter((function(e){return e.key.startsWith("lake")})),ze=p.filter((function(e){return!e.key.startsWith("lake")})),f.a.createElement("div",{className:"entry",style:{display:E===fe.INIT?"block":"none"}},f.a.createElement("div",{className:D},__("导入")),f.a.createElement("div",{className:R},__("点击下方格式进行导入，可一次导入多个文件，导入非语雀格式的文件可能存在样式不兼容、耗时较长的情况，请耐心等待。"),f.a.createElement("a",{href:Ue,target:"_blank",className:M},__("帮助文档"))),f.a.createElement("div",null,f.a.createElement("h4",null,__("三方格式")),f.a.createElement(I.a,{mode:"import",book:r,types:ze,importType:v,disableUpload:qe,onSelect:We,onUploadChange:Ke,customRequest:Re,maxCount:0})),f.a.createElement("div",null,f.a.createElement("h4",null,__("语雀格式")),f.a.createElement(I.a,{mode:"import",book:r,types:Be,importType:v,disableUpload:qe,onSelect:We,onUploadChange:Ke,customRequest:Re,maxCount:0})))),function(){if(!we)return null;var e=Me[we.key];return e?f.a.createElement("div",{className:G,style:{display:E===fe.SETTING?"block":"none"}},f.a.createElement("h1",{className:U},__("{type} 导入配置",{type:we.name})),f.a.createElement(A.a.AdvanceSetting,{wrappedComponentRef:De,type:we,settings:e,actions:f.a.createElement(I.a.FileUpload,{mode:"import",book:r,getParamsOption:Ve,fileOption:we,importType:v,customRequest:Re,onUploadChange:Ke,maxCount:0},f.a.createElement(n.a,{type:"primary",disabled:!ke,className:B},__("选择本地文件")))})):null}(),E!==fe.INIT&&E!==fe.SETTING?f.a.createElement("div",{className:z},f.a.createElement("h1",{className:W},E===fe.DONE?__("导入完成"):__("导入中")),f.a.createElement("div",{className:q},te.map((function(e){return f.a.createElement(c.a,{type:"flex",justify:"space-between",align:"middle",className:K,key:e.uid},f.a.createElement(u.a,null,f.a.createElement(c.a,{type:"flex",align:"middle"},f.a.createElement(u.a,null,f.a.createElement("img",{src:we.icon,className:$}),function(e){var t,r=e.name,n=Fe(e);return t=e.url?f.a.createElement("a",{className:H,href:e.url,target:"_blank"},r):f.a.createElement("h2",{className:H},r),e.status!==fe.ERROR&&n!==fe.ERROR||(t=f.a.createElement(a.a,{placement:"right",content:__("文件处理失败，请重新上传。")},t)),t}(e)))),f.a.createElement(u.a,null,function(e){var t=Fe(e);if(e.status===fe.ERROR||t===fe.ERROR){var r=e.error&&e.error.response&&e.error.response.data&&e.error.response.data.message;r||(r=e.response&&e.response.data&&e.response.data.error&&e.response.data.error.message);var n=e.response&&e.response.data&&e.response.data.id;return n&&(r="".concat(r," [id: ").concat(n,"]")),r?r+=__("（请重新上传，如果持续失败，请反馈到语雀）"):r=__("文件处理失败，请重新上传，如果持续失败，请反馈到语雀。"),f.a.createElement("span",null,f.a.createElement(a.a,{placement:"right",content:r},f.a.createElement(h.default,null)))}return e.status===fe.SUCCESS||t===fe.SUCCESS?f.a.createElement("span",null,f.a.createElement(m.default,null)):f.a.createElement("span",null,f.a.createElement("span",{className:Z},0===e.percent&&__("等待中"),100===e.percent&&__("处理中"),0!==e.percent&&100!==e.percent&&f.a.createElement("span",null,parseInt(e.percent,10),"%")),f.a.createElement(o.a,{indicator:f.a.createElement(y.default,{style:{fontSize:16},spin:!0}),className:Y}))}(e)))}))),f.a.createElement("div",{className:X}),function(){var e;if(0!==me&&le===me){var t;te.forEach((function(e){if(!t){e.status===fe.ERROR&&((t=e.error&&e.error.response&&e.error.response.data&&e.error.response.data.message)||(t=e.response&&e.response.data&&e.response.data.error&&e.response.data.error.message));var r=e.response&&e.response.data&&e.response.data.id;t&&r&&(t="".concat(t," [id: ").concat(r,"]"))}}));var r=ge?__("导入结束，有文件导入失败"):__("导入完成");t&&(r="".concat(r," (").concat(t,")")),e=f.a.createElement(c.a,{type:"flex",justify:"space-between",align:"middle"},f.a.createElement(u.a,null,ge?f.a.createElement(h.default,null):f.a.createElement(m.default,null),f.a.createElement("span",{className:Q},r)),f.a.createElement(u.a,null,f.a.createElement(n.a,{type:"primary",onClick:He},__("查看"))))}else E!==fe.PROCESSING&&E!==fe.UPLOADING&&E!==fe.PENDING||(e=f.a.createElement("div",null,f.a.createElement(o.a,{indicator:f.a.createElement(y.default,{style:{fontSize:16},spin:!0})}),f.a.createElement("span",{className:Q},__("文件导入中")),"(".concat(me,"/").concat(le,")")));return f.a.createElement("div",{className:V},e)}()):null)))};pe.defaultProps={visible:!0,importType:E.a.IMPORT_TYPE.PARSE},pe.propTypes={visible:p.a.bool,book:p.a.object.isRequired,formats:p.a.array.isRequired,importType:p.a.oneOf([E.a.IMPORT_TYPE.CREATE,E.a.IMPORT_TYPE.PARSE]),onCancel:p.a.func.isRequired,onRead:p.a.func,importParams:p.a.object,group:p.a.object.isRequired};t.a=Object(k.b)(pe,!0)},3668:function(e,t,r){"use strict";r(95);var n=r(49),o=(r(64),r(21)),a=(r(61),r(23)),i=r(0),c=r.n(i),u=r(8),l=r.n(u),s=r(252),f=r(191),d=r(1767),p=r(2501);r(2600);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(){m=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function y(){}var v={};u(v,a,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(T([])));b&&b!==t&&r.call(b,a)&&(v=b);var _=y.prototype=d.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==h(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=y,n(_,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:p,configurable:!0}),p.displayName=u(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(j.prototype),u(j.prototype,i,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(_),u(_,c,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function y(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e){var t=v(Object(i.useState)(e.doc.title),2),r=t[0],u=t[1],l=v(Object(i.useState)(-1),2),s=l[0],h=l[1],g=function(){var t,n=(t=m().mark((function t(){var n,o,i,u,l,p,h;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.book,o=e.doc,i=e.docletType,u=e.onOpenTemplateSelector,l=e.inEdit,s===f.TYPE.BOOK?(p=n.id,h=f.TARGET_TYPE.BOOK):s===f.TYPE.PERSONAL?(p=window.appData.me.id,h=f.TARGET_TYPE.USER):(p=n.user_id,h=f.TARGET_TYPE.USER),Object(d.e)(p,h,s,i,r,o.id,l).then((function(){var t=c.a.createElement("span",null,__("模板已创建")," ",c.a.createElement("a",{onClick:u},__("查看全部模板")));a.a.success(t),e.onCancel()})).catch((function(e){console.error(e)}));case 3:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){y(a,n,o,i,c,"next",e)}function c(e){y(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),b=e.group,_=e.organization,w=e.isDesktop;return c.a.createElement(n.a,{className:"modal-without-padding",visible:e.visible,style:{top:78},width:"368px",onCancel:e.onCancel,title:e.modalTitle,footer:c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,{onClick:e.onCancel},__("取消")),c.a.createElement(o.a,{type:"primary",onClick:g},__("确定")))},c.a.createElement(p.a,{newTemplateName:r,onSetNewTemplateName:u,onSetSelectedScope:h,group:b,organization:_,isDesktop:w}))}b.propTypes={visible:l.a.bool,onCancel:l.a.func,modalTitle:l.a.string,docletType:l.a.string,doc:l.a.object,book:l.a.object,group:l.a.object,organization:l.a.object,isDesktop:l.a.bool,onOpenTemplateSelector:l.a.func,templateProxy:l.a.object,docProxy:l.a.object,inEdit:l.a.bool},t.a=Object(s.b)(b,!0)},3671:function(e,t,r){"use strict";r(61);var n=r(23),o=r(0),a=r.n(o),i=r(8),c=r.n(i),u=r(3627);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(){s=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function f(e,t,r,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function m(){}function y(){}var v={};u(v,a,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(T([])));b&&b!==t&&r.call(b,a)&&(v=b);var _=y.prototype=h.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function o(n,a,i,c){var u=d(e[n],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==l(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=d(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=y,n(_,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:m,configurable:!0}),m.displayName=u(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(j.prototype),u(j.prototype,i,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(f(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(_),u(_,c,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function f(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e){var t=e.doc,r=e.docDomain,i=e.type,c=d(Object(o.useState)(null),2),l=c[0],p=c[1],h=d(Object(o.useState)(!1),2),m=h[0],y=h[1],v=function(){var o,a=(o=s().mark((function o(){var a,c;return s().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.docVersionProxy.find({doc_id:t.id,doc_type:r,draft:"published"===i?0:1,limit:1});case 2:1===(a=o.sent).length?p(a[0]):(c="published"===i?__("文档尚未发布"):__("暂无历史记录，请先保存文档"),n.a.warning(c)),y(!1);case 5:case"end":return o.stop()}}),o)})),function(){var e=this,t=arguments;return new Promise((function(r,n){var a=o.apply(e,t);function i(e){f(a,r,n,i,c,"next",e)}function c(e){f(a,r,n,i,c,"throw",e)}i(void 0)}))});return function(){return a.apply(this,arguments)}}();return Object(o.useEffect)((function(){v()}),[]),m||!l?null:a.a.createElement(u.b,{version:l,docVersionProxy:e.docVersionProxy,onCancel:e.onCancel,onCreated:e.onCreated||function(e){n.a.success(__("保存版本成功，点击查看 {link}",{link:a.a.createElement("a",{href:"/r/doc_versions/".concat(e.id),target:"_blank","data-testid":"version-link"},e.name)}))}})}h.propTypes={doc:c.a.object.isRequired,docDomain:c.a.string.isRequired,type:c.a.oneOf(["draft","published"]),onCancel:c.a.func.isRequired,onCreated:c.a.func,docVersionProxy:c.a.object.isRequired},t.a=h},3680:function(e,t,r){"use strict";var n=r(0);t.a=function(e,t){Object(n.useEffect)((function(){if(e){var r=function(e){return e.preventDefault(),t&&(e.returnValue=t),t};return window.addEventListener("beforeunload",r),function(){return window.removeEventListener("beforeunload",r)}}}),[t,e])}},3691:function(e,t,r){"use strict";r(227);var n=r(112),o=(r(64),r(21)),a=(r(94),r(27)),i=(r(61),r(23)),c=r(0),u=r.n(c),l=r(8),s=r.n(l),f=r(167),d=r.n(f),p=r(38),h=(r(240),r(52)),m=r(46),y=r.n(m),v=r(658),g=r.n(v),b=r(3505),_=r(213),w=r(342);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=function(e){var t=j(Object(c.useState)([]),2),r=t[0],n=t[1];return Object(c.useEffect)((function(){p.a.users.mailHistories({}).then((function(e){n(e)}))}),[e]),{mailHistory:r}},S={recipient:"RecipientSelector-module_recipient_Ds5UW",mention:"RecipientSelector-module_mention_5r6oN",userForCheck:"RecipientSelector-module_userForCheck_a4ZZP",mailHistory:"RecipientSelector-module_mailHistory_-ft0g",title:"RecipientSelector-module_title_-yKJG",users:"RecipientSelector-module_users_ZwnLM",info:"RecipientSelector-module_info_eM40g",avatar:"RecipientSelector-module_avatar_lGHzI",name:"RecipientSelector-module_name_HeaN7",dep:"RecipientSelector-module_dep_B2T89"};function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T=["alibaba-inc.com","antfin.com","list.alibaba-inc.com","cainiao.com"];function C(e){var t=x(Object(c.useState)(!1),2),r=t[0],n=t[1],o=x(Object(c.useState)(e.defaultValue||[]),2),a=o[0],l=o[1],s=O(window.appData.me).mailHistory,f=x(Object(c.useState)([]),2),d=f[0],m=f[1],v=Object(c.useRef)(),_=null,j=__("最多只能选择100个邮箱地址，建议请使用邮件组"),E=__("收件人有重复，已自动去重"),k=function(t){var r=t.length,o=(t=g()(t,(function(e,t){return e.email&&t.email?e.email===t.email:!(!e.login||!t.login)&&e.login===t.login}))).length;o>100?(i.a.warning(j),t.splice(100)):o!==r&&i.a.warning(E),l(t),e.onChange(t),n(!1),m([]),setTimeout((function(){v&&v.current&&v.current.focus()}),100)};Object(c.useEffect)((function(){return function(){_&&(clearTimeout(_),_=null)}}));var C=y()((function(e){(function(e){e=e.split(";");var t=[];if(e.forEach((function(e){if(b.validator.isEmail(e))t.push({name:e,email:e});else{var r=e.match(/([^<]+)<([^>]+)>/);r&&b.validator.isEmail(r[2])&&t.push({name:r[1],email:r[2]})}})),t.length>0){var r=a.concat(t);return k(r),v.current.blur(),!0}return!1})(e)||function(e){if(-1!==e.indexOf("@")){var t=e.split("@"),r=t[1],n=T.filter((function(e){return e.startsWith(r)})).map((function(e){return{name:"".concat(t[0],"@").concat(e),email:"".concat(t[0],"@").concat(e)}}));return m(n),!0}return!1}(e)||(n(!1),p.a.users.complete({q:e.trim(),include_unconfirmed_corp_account:!0}).then((function(e){m(e),v.current.focus()})))}),300),P=a.map((function(e){return e.name}));return u.a.createElement("div",{className:S.recipient},u.a.createElement("span",{className:S.mention,onClick:function(){if(window.__engine&&window.__engine.extractMention){var e=window.__engine.extractMention();if(0===(e=e.filter((function(e){return e.name&&e.name.trim()&&e.login&&e.login.trim()}))).length)return void i.a.warn(__("文档中没有 @ 人"));var t=a.concat(e);k(t)}}},__("添加文档中 @ 的人")),u.a.createElement(h.a,{mode:"multiple",style:{width:"100%"},placeholder:__("请输入花名或邮箱地址"),onChange:function(e){var t=a.filter((function(t){return e.includes(t.name)}));k(t)},onFocus:function(){0===a.length&&n(!0)},onSearch:C,onBlur:function(){_&&clearTimeout(_),_=setTimeout((function(){n(!1),m([])}),500)},allowClear:!0,value:P,notFoundContent:null,ref:v}),d.length>0&&u.a.createElement("div",{className:S.userForCheck},d.map((function(e){return u.a.createElement("p",{key:e.email,onClick:function(){!function(e){if(100!==a.length)if(0===a.filter((function(t){return t.email===e.email})).length){var t=a.concat(e);k(t)}else i.a.warning(E);else i.a.warning(j)}(e)}},e.avatar_url&&u.a.createElement(w.a,{className:S.avatar,src:e.avatar_url,size:32}),u.a.createElement("span",{className:S.name},e.name),e.dep&&u.a.createElement("span",{className:S.dep},e.dep))}))),r&&s&&s.length>0&&u.a.createElement("div",{className:S.mailHistory,"data-testid":"mail-history"},u.a.createElement("div",{className:S.title},__("历史记录")),u.a.createElement("ul",null,s.map((function(e){return u.a.createElement("li",{onClick:function(){!function(e){k(e.mail_list)}(e)},key:e.id},u.a.createElement("p",{className:S.users},e.mail_list.map((function(e){return e.name})).join(",")),u.a.createElement("p",null,u.a.createElement("span",{className:S.info},__("标题："),e.title)))})))))}C.propTypes={onChange:s.a.func.isRequired,defaultValue:s.a.array};var P=Object(_.b)(C,!1),L="DocSendMail-module_sendMail_QBA+O",I="DocSendMail-module_recipient_zqM9E",A="DocSendMail-module_title_Af2FA",N="DocSendMail-module_submitButton_HEsW-",D="DocSendMail-module_mailResult_AhaV4";function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W(n.key),n)}}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=B(e);if(t){var o=B(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}(this,r)}}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}function z(e,t,r){return(t=W(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e){var t=function(e,t){if("object"!==R(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===R(t)?t:String(t)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(s,e);var t,r,c,l=G(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),z(U(t=l.call(this,e)),"ready",(function(){0!==t.state.receiver.length?"sending"!==t.state.mailStatus&&(t.setState({mailStatus:"sending"},(function(){t.props.onMailSending(),t.startClock(5)})),t.timer=setTimeout(t.sendMail,5e3)):i.a.error(__("请选择收件人"))})),z(U(t),"startClock",(function(e){t.setState({seconds:e}),0!==e&&"sending"===t.state.mailStatus&&(t.clocker=setTimeout((function(){t.startClock(e-1)}),1e3))})),z(U(t),"sendMail",(function(){var e=t.state,r=e.receiver,n=e.title,o={id:t.props.doc.id,title:n||t.props.doc.title,content:window.__engine?window.__engine.getDocument("text/html",{mode:"inline"}):""};try{o.mail_list=t.normalizeMail(r)}catch(e){return void i.a.error(e.message)}p.a.docs.sendMail(o,{ignoreGlobalMessage:!0}).then((function(e){t.setState({mailStatus:"success",receiver:[]}),t.props.onMailSended()})).catch((function(e){e.status&&e.status>=400&&e.status<500?t.setState({mailStatus:"block",mailBlockMessage:e.message}):t.setState({mailStatus:"failed"})}))})),z(U(t),"retry",(function(){t.setState({mailStatus:"normal",mailBlockMessage:""})})),z(U(t),"normalizeMail",(function(e){return e.map((function(e){return d()(e,["email","login","user_id","name"])}))})),z(U(t),"onChangeReceiver",(function(e){t.setState({receiver:e})})),z(U(t),"onChangeTitle",(function(e){t.setState({title:e.target.value})})),z(U(t),"renderMailSelector",(function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:A},u.a.createElement("h5",null,__("标题")),u.a.createElement(a.a,{onChange:t.onChangeTitle,defaultValue:t.props.doc.title})),u.a.createElement("div",{className:I},u.a.createElement("h5",null,__("收件人")),u.a.createElement(P,{onChange:t.onChangeReceiver,defaultValue:t.state.receiver})),u.a.createElement("div",{className:N},u.a.createElement(o.a,{onClick:t.ready,type:"primary"},__("发送"))))})),z(U(t),"cancel",(function(){t.timer&&(clearTimeout(t.timer),t.timer=null),t.clocker&&(clearTimeout(t.clocker),t.clocker=null),t.setState({mailStatus:"normal",mailBlockMessage:""}),i.a.warning(__("已取消发送")),t.props.onMailSended()})),z(U(t),"renderSending",(function(){return u.a.createElement("div",{className:D},u.a.createElement(n.a,{justify:"block"}),u.a.createElement("p",null,__("邮件即将在 {seconds} 秒后发送，{cancel}",{cancel:u.a.createElement("a",{href:"#",onClick:t.cancel},__("撤销")),seconds:t.state.seconds||0})))})),z(U(t),"renderSuccess",(function(){return u.a.createElement("div",{className:D},u.a.createElement("span",{className:"larkicon larkicon-check-o"}),u.a.createElement("p",null,__("发送成功")))})),z(U(t),"renderFailed",(function(){return u.a.createElement("div",{className:D},u.a.createElement("span",{className:"larkicon larkicon-error"}),u.a.createElement("p",null,__("发送失败, 请{retry}",{retry:u.a.createElement("a",{href:"#",onClick:t.retry},__("重新发送"))})))})),z(U(t),"renderBlock",(function(){return u.a.createElement("div",{className:D},u.a.createElement("span",{className:"larkicon larkicon-error"}),u.a.createElement("p",null,t.state.mailBlockMessage))})),z(U(t),"renderCanceled",(function(){return u.a.createElement("div",{className:D},u.a.createElement("p",null,__("已取消发送")))})),t.state={receiver:[]},t}return t=s,(r=[{key:"componentDidMount",value:function(){this.setState({mailStatus:"normal",mailBlockMessage:""})}},{key:"render",value:function(){var e;switch(this.state.mailStatus){case"sending":e=this.renderSending();break;case"success":e=this.renderSuccess();break;case"failed":e=this.renderFailed();break;case"block":e=this.renderBlock();break;case"canceled":e=this.renderCanceled();break;default:e=this.renderMailSelector()}return u.a.createElement("div",{className:L,"data-testid":"send-mail-modal"},u.a.createElement("h4",null,__("发送到邮箱")),u.a.createElement("p",null,__("将文档内容发送到指定邮箱")),e)}}])&&M(t.prototype,r),c&&M(t,c),Object.defineProperty(t,"prototype",{writable:!1}),s}(c.PureComponent);V.defaultProps={},V.propTypes={onMailSended:s.a.func,onMailSending:s.a.func,doc:s.a.object};t.a=V},3698:function(e,t,r){e.exports=r(3505)},3728:function(e,t,r){var n,o,a;o=[],n=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},r=!t.document&&!!t.postMessage,n=t.IS_PAPA_WORKER||!1,o={},a=0,i={parse:function(r,n){var c=(n=n||{}).dynamicTyping||!1;if(w(c)&&(n.dynamicTypingFunction=c,c={}),n.dynamicTyping=c,n.transform=!!w(n.transform)&&n.transform,n.worker&&i.WORKERS_SUPPORTED){var u=function(){if(!i.WORKERS_SUPPORTED)return!1;var r,n,c=(r=t.URL||t.webkitURL||null,n=e.toString(),i.BLOB_URL||(i.BLOB_URL=r.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",n,")();"],{type:"text/javascript"})))),u=new t.Worker(c);return u.onmessage=y,u.id=a++,o[u.id]=u}();return u.userStep=n.step,u.userChunk=n.chunk,u.userComplete=n.complete,u.userError=n.error,n.step=w(n.step),n.chunk=w(n.chunk),n.complete=w(n.complete),n.error=w(n.error),delete n.worker,void u.postMessage({input:r,config:n,workerId:u.id})}var p=null;return i.NODE_STREAM_INPUT,"string"==typeof r?(r=function(e){return 65279===e.charCodeAt(0)?e.slice(1):e}(r),p=n.download?new l(n):new f(n)):!0===r.readable&&w(r.read)&&w(r.on)?p=new d(n):(t.File&&r instanceof File||r instanceof Object)&&(p=new s(n)),p.stream(r)},unparse:function(e,t){var r=!1,n=!0,o=",",a="\r\n",c='"',u=c+c,l=!1,s=null,f=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||i.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(o=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(r=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(l=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(c=t.quoteChar),"boolean"==typeof t.header&&(n=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");s=t.columns}void 0!==t.escapeChar&&(u=t.escapeChar+c),("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(f=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var d=new RegExp(h(c),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return p(null,e,l);if("object"==typeof e[0])return p(s||Object.keys(e[0]),e,l)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||s),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),p(e.fields||[],e.data||[],l);throw new Error("Unable to serialize unrecognized input");function p(e,t,r){var i="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var c=Array.isArray(e)&&0<e.length,u=!Array.isArray(t[0]);if(c&&n){for(var l=0;l<e.length;l++)0<l&&(i+=o),i+=m(e[l],l);0<t.length&&(i+=a)}for(var s=0;s<t.length;s++){var f=c?e.length:t[s].length,d=!1,p=c?0===Object.keys(t[s]).length:0===t[s].length;if(r&&!c&&(d="greedy"===r?""===t[s].join("").trim():1===t[s].length&&0===t[s][0].length),"greedy"===r&&c){for(var h=[],y=0;y<f;y++){var v=u?e[y]:y;h.push(t[s][v])}d=""===h.join("").trim()}if(!d){for(var g=0;g<f;g++){0<g&&!p&&(i+=o);var b=c&&u?e[g]:g;i+=m(t[s][b],g)}s<t.length-1&&(!r||0<f&&!p)&&(i+=a)}}return i}function m(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var n=!1;f&&"string"==typeof e&&f.test(e)&&(e="'"+e,n=!0);var a=e.toString().replace(d,u);return(n=n||!0===r||"function"==typeof r&&r(e,t)||Array.isArray(r)&&r[t]||function(e,t){for(var r=0;r<t.length;r++)if(-1<e.indexOf(t[r]))return!0;return!1}(a,i.BAD_DELIMITERS)||-1<a.indexOf(o)||" "===a.charAt(0)||" "===a.charAt(a.length-1))?c+a+c:a}}};if(i.RECORD_SEP=String.fromCharCode(30),i.UNIT_SEP=String.fromCharCode(31),i.BYTE_ORDER_MARK="\ufeff",i.BAD_DELIMITERS=["\r","\n",'"',i.BYTE_ORDER_MARK],i.WORKERS_SUPPORTED=!r&&!!t.Worker,i.NODE_STREAM_INPUT=1,i.LocalChunkSize=10485760,i.RemoteChunkSize=5242880,i.DefaultDelimiter=",",i.Parser=m,i.ParserHandle=p,i.NetworkStreamer=l,i.FileStreamer=s,i.StringStreamer=f,i.ReadableStreamStreamer=d,t.jQuery){var c=t.jQuery;c.fn.parse=function(e){var r=e.config||{},n=[];return this.each((function(e){if("INPUT"!==c(this).prop("tagName").toUpperCase()||"file"!==c(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var o=0;o<this.files.length;o++)n.push({file:this.files[o],inputElem:this,instanceConfig:c.extend({},r)})})),o(),this;function o(){if(0!==n.length){var t,r,o,u,l=n[0];if(w(e.before)){var s=e.before(l.file,l.inputElem);if("object"==typeof s){if("abort"===s.action)return t="AbortError",r=l.file,o=l.inputElem,u=s.reason,void(w(e.error)&&e.error({name:t},r,o,u));if("skip"===s.action)return void a();"object"==typeof s.config&&(l.instanceConfig=c.extend(l.instanceConfig,s.config))}else if("skip"===s)return void a()}var f=l.instanceConfig.complete;l.instanceConfig.complete=function(e){w(f)&&f(e,l.file,l.inputElem),a()},i.parse(l.file,l.instanceConfig)}else w(e.complete)&&e.complete()}function a(){n.splice(0,1),o()}}}function u(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=b(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new p(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,r){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var o=this._config.beforeFirstChunk(e);void 0!==o&&(e=o)}this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+e;this._partialLine="";var c=this._handle.parse(a,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var u=c.meta.cursor;this._finished||(this._partialLine=a.substring(u-this._baseIndex),this._baseIndex=u),c&&c.data&&(this._rowCount+=c.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)t.postMessage({results:c,workerId:i.WORKER_ID,finished:l});else if(w(this._config.chunk)&&!r){if(this._config.chunk(c,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);c=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(c.data),this._completeResults.errors=this._completeResults.errors.concat(c.errors),this._completeResults.meta=c.meta),this._completed||!l||!w(this._config.complete)||c&&c.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),l||c&&c.meta.paused||this._nextChunk(),c}this._halted=!0},this._sendError=function(e){w(this._config.error)?this._config.error(e):n&&this._config.error&&t.postMessage({workerId:i.WORKER_ID,error:e,finished:!1})}}function l(e){var t;(e=e||{}).chunkSize||(e.chunkSize=i.RemoteChunkSize),u.call(this,e),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),r||(t.onload=_(this._chunkLoaded,this),t.onerror=_(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var n in e)t.setRequestHeader(n,e[n])}if(this._config.chunkSize){var o=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+o)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}r&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var r=t.statusText||e;this._sendError(new Error(r))}}function s(e){var t,r;(e=e||{}).chunkSize||(e.chunkSize=i.LocalChunkSize),u.call(this,e);var n="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,n?((t=new FileReader).onload=_(this._chunkLoaded,this),t.onerror=_(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var o=Math.min(this._start+this._config.chunkSize,this._input.size);e=r.call(e,this._start,o)}var a=t.readAsText(e,this._config.encoding);n||this._chunkLoaded({target:{result:a}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function f(e){var t;u.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,r=this._config.chunkSize;return r?(e=t.substring(0,r),t=t.substring(r)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function d(e){u.call(this,e=e||{});var t=[],r=!0,n=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=_((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=_((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=_((function(){this._streamCleanUp(),n=!0,this._streamData("")}),this),this._streamCleanUp=_((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function p(e){var t,r,n,o=Math.pow(2,53),a=-o,c=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,u=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,l=this,s=0,f=0,d=!1,p=!1,y=[],v={data:[],errors:[],meta:{}};if(w(e.step)){var g=e.step;e.step=function(t){if(v=t,E())j();else{if(j(),0===v.data.length)return;s+=t.data.length,e.preview&&s>e.preview?r.abort():(v.data=v.data[0],g(v,l))}}}function _(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function j(){return v&&n&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+i.DefaultDelimiter+"'"),n=!1),e.skipEmptyLines&&(v.data=v.data.filter((function(e){return!_(e)}))),E()&&function(){if(v)if(Array.isArray(v.data[0])){for(var t=0;E()&&t<v.data.length;t++)v.data[t].forEach(r);v.data.splice(0,1)}else v.data.forEach(r);function r(t,r){w(e.transformHeader)&&(t=e.transformHeader(t,r)),y.push(t)}}(),function(){if(!v||!e.header&&!e.dynamicTyping&&!e.transform)return v;function t(t,r){var n,o=e.header?{}:[];for(n=0;n<t.length;n++){var a=n,i=t[n];e.header&&(a=n>=y.length?"__parsed_extra":y[n]),e.transform&&(i=e.transform(i,a)),i=O(a,i),"__parsed_extra"===a?(o[a]=o[a]||[],o[a].push(i)):o[a]=i}return e.header&&(n>y.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+n,f+r):n<y.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+n,f+r)),o}var r=1;return!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(t),r=v.data.length):v.data=t(v.data,0),e.header&&v.meta&&(v.meta.fields=y),f+=r,v}()}function E(){return e.header&&0===y.length}function O(t,r){return n=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[n]&&(e.dynamicTyping[n]=e.dynamicTypingFunction(n)),!0===(e.dynamicTyping[n]||e.dynamicTyping)?"true"===r||"TRUE"===r||"false"!==r&&"FALSE"!==r&&(function(e){if(c.test(e)){var t=parseFloat(e);if(a<t&&t<o)return!0}return!1}(r)?parseFloat(r):u.test(r)?new Date(r):""===r?null:r):r;var n}function S(e,t,r,n){var o={type:e,code:t,message:r};void 0!==n&&(o.row=n),v.errors.push(o)}this.parse=function(o,a,c){var u=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var r=new RegExp(h(t)+"([^]*?)"+h(t),"gm"),n=(e=e.replace(r,"")).split("\r"),o=e.split("\n"),a=1<o.length&&o[0].length<n[0].length;if(1===n.length||a)return"\n";for(var i=0,c=0;c<n.length;c++)"\n"===n[c][0]&&i++;return i>=n.length/2?"\r\n":"\r"}(o,u)),n=!1,e.delimiter)w(e.delimiter)&&(e.delimiter=e.delimiter(o),v.meta.delimiter=e.delimiter);else{var l=function(t,r,n,o,a){var c,u,l,s;a=a||[",","\t","|",";",i.RECORD_SEP,i.UNIT_SEP];for(var f=0;f<a.length;f++){var d=a[f],p=0,h=0,y=0;l=void 0;for(var v=new m({comments:o,delimiter:d,newline:r,preview:10}).parse(t),g=0;g<v.data.length;g++)if(n&&_(v.data[g]))y++;else{var b=v.data[g].length;h+=b,void 0!==l?0<b&&(p+=Math.abs(b-l),l=b):l=b}0<v.data.length&&(h/=v.data.length-y),(void 0===u||p<=u)&&(void 0===s||s<h)&&1.99<h&&(u=p,c=d,s=h)}return{successful:!!(e.delimiter=c),bestDelimiter:c}}(o,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);l.successful?e.delimiter=l.bestDelimiter:(n=!0,e.delimiter=i.DefaultDelimiter),v.meta.delimiter=e.delimiter}var s=b(e);return e.preview&&e.header&&s.preview++,t=o,r=new m(s),v=r.parse(t,a,c),j(),d?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,r.abort(),t=w(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){l.streamer._halted?(d=!1,l.streamer.parseChunk(t,!0)):setTimeout(l.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,r.abort(),v.meta.aborted=!0,w(e.complete)&&e.complete(v),t=""}}function h(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){var t,r=(e=e||{}).delimiter,n=e.newline,o=e.comments,a=e.step,c=e.preview,u=e.fastMode,l=t=void 0===e.quoteChar||null===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(l=e.escapeChar),("string"!=typeof r||-1<i.BAD_DELIMITERS.indexOf(r))&&(r=","),o===r)throw new Error("Comment character same as delimiter");!0===o?o="#":("string"!=typeof o||-1<i.BAD_DELIMITERS.indexOf(o))&&(o=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var s=0,f=!1;this.parse=function(i,d,p){if("string"!=typeof i)throw new Error("Input must be a string");var m=i.length,y=r.length,v=n.length,g=o.length,b=w(a),_=[],j=[],E=[],O=s=0;if(!i)return K();if(e.header){var S=i.split(n)[0].split(r),x=[],k={},T=!1;for(var C in S){var P=S[C];w(e.transformHeader)&&(P=e.transformHeader(P,C));var L=P,I=k[P]||0;0<I&&(T=!0,L=P+"_"+I),k[P]=I+1,x.push(L)}if(T){var A=i.split(n);A[0]=x.join(r),i=A.join(n)}}if(u||!1!==u&&-1===i.indexOf(t)){for(var N=i.split(n),D=0;D<N.length;D++){if(E=N[D],s+=E.length,D!==N.length-1)s+=n.length;else if(p)return K();if(!o||E.substring(0,g)!==o){if(b){if(_=[],z(E.split(r)),$(),f)return K()}else z(E.split(r));if(c&&c<=D)return _=_.slice(0,c),K(!0)}}return K()}for(var R=i.indexOf(r,s),M=i.indexOf(n,s),F=new RegExp(h(l)+h(t),"g"),G=i.indexOf(t,s);;)if(i[s]!==t)if(o&&0===E.length&&i.substring(s,s+g)===o){if(-1===M)return K();s=M+v,M=i.indexOf(n,s),R=i.indexOf(r,s)}else if(-1!==R&&(R<M||-1===M))E.push(i.substring(s,R)),s=R+y,R=i.indexOf(r,s);else{if(-1===M)break;if(E.push(i.substring(s,M)),q(M+v),b&&($(),f))return K();if(c&&_.length>=c)return K(!0)}else for(G=s,s++;;){if(-1===(G=i.indexOf(t,G+1)))return p||j.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_.length,index:s}),V();if(G===m-1)return V(i.substring(s,G).replace(F,t));if(t!==l||i[G+1]!==l){if(t===l||0===G||i[G-1]!==l){-1!==R&&R<G+1&&(R=i.indexOf(r,G+1)),-1!==M&&M<G+1&&(M=i.indexOf(n,G+1));var U=W(-1===M?R:Math.min(R,M));if(i.substr(G+1+U,y)===r){E.push(i.substring(s,G).replace(F,t)),i[s=G+1+U+y]!==t&&(G=i.indexOf(t,s)),R=i.indexOf(r,s),M=i.indexOf(n,s);break}var B=W(M);if(i.substring(G+1+B,G+1+B+v)===n){if(E.push(i.substring(s,G).replace(F,t)),q(G+1+B+v),R=i.indexOf(r,s),G=i.indexOf(t,s),b&&($(),f))return K();if(c&&_.length>=c)return K(!0);break}j.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:_.length,index:s}),G++}}else G++}return V();function z(e){_.push(e),O=s}function W(e){var t=0;if(-1!==e){var r=i.substring(G+1,e);r&&""===r.trim()&&(t=r.length)}return t}function V(e){return p||(void 0===e&&(e=i.substring(s)),E.push(e),s=m,z(E),b&&$()),K()}function q(e){s=e,z(E),E=[],M=i.indexOf(n,s)}function K(e){return{data:_,errors:j,meta:{delimiter:r,linebreak:n,aborted:f,truncated:!!e,cursor:O+(d||0)}}}function $(){a(K()),_=[],j=[]}},this.abort=function(){f=!0},this.getCharIndex=function(){return s}}function y(e){var t=e.data,r=o[t.workerId],n=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var a={abort:function(){n=!0,v(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:g,resume:g};if(w(r.userStep)){for(var i=0;i<t.results.data.length&&(r.userStep({data:t.results.data[i],errors:t.results.errors,meta:t.results.meta},a),!n);i++);delete t.results}else w(r.userChunk)&&(r.userChunk(t.results,a,t.file),delete t.results)}t.finished&&!n&&v(t.workerId,t.results)}function v(e,t){var r=o[e];w(r.userComplete)&&r.userComplete(t),r.terminate(),delete o[e]}function g(){throw new Error("Not implemented.")}function b(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var r in e)t[r]=b(e[r]);return t}function _(e,t){return function(){e.apply(t,arguments)}}function w(e){return"function"==typeof e}return n&&(t.onmessage=function(e){var r=e.data;if(void 0===i.WORKER_ID&&r&&(i.WORKER_ID=r.workerId),"string"==typeof r.input)t.postMessage({workerId:i.WORKER_ID,results:i.parse(r.input,r.config),finished:!0});else if(t.File&&r.input instanceof File||r.input instanceof Object){var n=i.parse(r.input,r.config);n&&t.postMessage({workerId:i.WORKER_ID,results:n,finished:!0})}}),(l.prototype=Object.create(u.prototype)).constructor=l,(s.prototype=Object.create(u.prototype)).constructor=s,(f.prototype=Object.create(f.prototype)).constructor=f,(d.prototype=Object.create(u.prototype)).constructor=d,i},void 0===(a="function"==typeof n?n.apply(t,o):n)||(e.exports=a)},3736:function(e,t,r){var n=r(2057)(r(3651));e.exports=n},3796:function(e,t,r){"use strict";var n=r(3806),o=r.n(n),a=r(3807),i=r.n(a),c=r(2055),u=r.n(c),l=r(3736),s=r.n(l),f=r(2721),d=r.n(f),p=r(168),h=r.n(p),m=r(1859);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(){b=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==t&&r.call(g,a)&&(m=g);var _=h.prototype=d.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==y(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(_,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(j.prototype),u(j.prototype,i,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(_),u(_,c,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function _(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function E(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){j(a,n,o,i,c,"next",e)}function c(e){j(a,n,o,i,c,"throw",e)}i(void 0)}))}}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k(n.key),n)}}function S(e,t,r){return t&&O(e.prototype,t),r&&O(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function x(e,t,r){return(t=k(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y(t)?t:String(t)}var T=S((function e(t){var r=this,n=t.tagProxy;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),x(this,"isLongTag",(function(e){return e&&e.length>m.MAX_SHOW_TEXT_LENGTH})),x(this,"getShowText",(function(e){return"".concat(e.slice(0,m.MAX_SHOW_TEXT_LENGTH),"...")})),x(this,"createTag",h()(function(){var e=E(b().mark((function e(t){var n,o,a,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTags,o=t.docId,a=d()(t.title)){e.next=4;break}return e.abrupt("return");case 4:if(m.TAG_RULES_REG.test(a)){e.next=6;break}return e.abrupt("return",{error:__("标签只能输入中文、数字、字母、-_@#/ 等符号")});case 6:if(!(a.length>m.MAX_LENGTH)){e.next=8;break}return e.abrupt("return",{error:__("标签最多{length}字",{length:m.MAX_LENGTH})});case 8:if(!s()(n,(function(e){return e.title===a}))){e.next=10;break}return e.abrupt("return",{error:__("不允许添加重复的标签")});case 10:return e.next=12,r.tagProxy.create({docId:o,title:a});case 12:if(!(i=e.sent)||!i.id){e.next=15;break}return e.abrupt("return",{data:[].concat(_(n),[i])});case 15:return e.abrupt("return",{error:__("标签新增失败")});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),200)),x(this,"getSuggest",function(){var e=E(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tagProxy.suggest(t);case 2:return n=e.sent,e.abrupt("return",u()(n,(function(e){return{value:e.title}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x(this,"destroy",function(){var e=E(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tagProxy.destroy(t);case 2:return e.sent&&i()(n,(function(e){return e.id===t.id})),e.abrupt("return",_(n));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),x(this,"arrangeResultTags",(function(e,t,r){var n=r.reduce((function(e,t){return g(g({},e),{},x({},t.title,t.count))}),{});return u()(e,(function(e){var r=e.tags.split(",").filter((function(e){return o()(t,e)<0})),a=function(e,t){return n[t]-n[e]},i=[].concat(_(t.sort(a)),_(r.sort(a)));return g(g({},e),{},{tags:i.map((function(e){return{title:e}}))})}))})),x(this,"tagsToString",(function(e){var t=e.tags,r=void 0===t?[]:t;return g(g({},e),{},{tags:r.join(",")})})),x(this,"findDocs",function(){var e=E(b().mark((function e(t,n){var o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tagProxy.findDocs(r.tagsToString(t));case 2:return o=e.sent,e.abrupt("return",r.arrangeResultTags(o,t.tags,n.tagGroup));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),x(this,"countDocs",function(){var e=E(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tagProxy.countDocs(r.tagsToString(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.tagProxy=n}));t.a=T},3806:function(e,t,r){var n=r(587),o=r(641),a=Math.max;e.exports=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var c=null==r?0:o(r);return c<0&&(c=a(i+c,0)),n(e,t,c)}},3807:function(e,t,r){var n=r(206),o=r(3808);e.exports=function(e,t){var r=[];if(!e||!e.length)return r;var a=-1,i=[],c=e.length;for(t=n(t,3);++a<c;){var u=e[a];t(u,a,e)&&(r.push(u),i.push(a))}return o(e,i),r}},3808:function(e,t,r){var n=r(3150),o=r(224),a=Array.prototype.splice;e.exports=function(e,t){for(var r=e?t.length:0,i=r-1;r--;){var c=t[r];if(r==i||c!==u){var u=c;o(c)?a.call(e,c,1):n(e,c)}}return e}},3814:function(e,t,r){"use strict";r(3383),r(3389);var n=r(2816).a,o=(r(581),r(208)),a=(r(207),r(91)),i=(r(61),r(23)),c=r(0),u=r.n(c),l=r(8),s=r.n(l),f=r(1859),d=r(426),p=r(571),h=r(46),m="Tag-module_wrapper_hMv3z",y="Tag-module_add_2EgPb";function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(){g=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(T([])));b&&b!==t&&r.call(b,a)&&(m=b);var _=h.prototype=d.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==v(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(_,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(j.prototype),u(j.prototype,i,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(_),u(_,c,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function b(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){b(a,n,o,i,c,"next",e)}function c(e){b(a,n,o,i,c,"throw",e)}i(void 0)}))}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=r.n(h)()((function(e,t){t(e)}),400),O=function(e){var t=e.docId,r=e.group,n=e.tagBiz,o=e.onChange,a=w(Object(c.useState)([]),2),u=a[0],l=a[1],s=w(Object(c.useState)([]),2),f=s[0],d=s[1],p=w(Object(c.useState)(""),2),h=p[0],m=p[1],y=w(Object(c.useState)(!1),2),v=y[0],b=y[1];function j(e,t){return E.apply(this,arguments)}function E(){return(E=_(g().mark((function e(r,a){var c,s,f;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.createTag({title:r,currentTags:u,docId:t});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(c=e.t0,s=c.error,f=c.data,!s){e.next=12;break}if(i.a.error(s),"blur"===a){e.next=12;break}return e.abrupt("return");case 12:b(!1),m(""),d([]),f&&(l(f),o(f));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=_(g().mark((function e(r){var a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.destroy({docId:t,id:r},u);case 2:a=e.sent,l(a),o(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=_(g().mark((function e(o){var a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getSuggest({target:r.login,query:o,docId:t});case 2:a=e.sent,d(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=_(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!==(t.keyCode||t.which)){e.next=6;break}return t.preventDefault(),t.stopPropagation(),e.next=6,j(t.target.value);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{state:{tagsArray:u,suggestOptions:f,showInput:v,inputValue:h},setTagsArray:l,deleteTag:function(e){return O.apply(this,arguments)},createTag:j,getSuggest:function(e){return S.apply(this,arguments)},setInputShowStatus:b,handleKeydown:function(e){return x.apply(this,arguments)},setInputValue:m}},S=function(e){var t=e.tagsArray,r=e.group,n=e.editable,i=e.deleteTag;return t.map((function(e){var t=e.title,c=e.id;return u.a.createElement(o.a,{className:"doc-tag",key:c},u.a.createElement("span",{className:"tag-title",onClick:function(){window.location.href="/r/".concat(r.login,"/tags?tag=").concat(encodeURIComponent(t))}},t),n&&u.a.createElement(a.a,{title:__("确认删除标签"),onConfirm:function(){i(c)},okText:__("确认"),cancelText:__("取消"),placement:"bottom"},u.a.createElement(d.default,{style:{marginLeft:4},width:8})))}))},x=function(e){var t=e.tags,r=e.editable,o=e.docId,a=e.group,i=e.tagBiz,l=e.onChange,s=O({docId:o,group:a,tagBiz:i,onChange:l}),d=s.state,h=d.tagsArray,v=d.showInput,g=d.suggestOptions,b=d.inputValue,_=s.getSuggest,w=s.deleteTag,j=s.setInputShowStatus,x=s.handleKeydown,k=s.setTagsArray,T=s.setInputValue,C=s.createTag,P=(h?h.length:0)>=f.MAX_COUNT,L=r&&!v&&!P,I=r&&v;Object(c.useEffect)((function(){k(t),l(t)}),[k,t]);var A=u.a.createElement(S,{tagsArray:h,group:a,editable:r,deleteTag:w,tagBiz:i});return r?u.a.createElement("div",{className:m,"data-testid":"editable-tag"},A,L&&u.a.createElement("span",{className:y,onClick:function(){return j(!0)},"data-testid":"edit-btn"},u.a.createElement(p.default,null)),I&&u.a.createElement(n,{"data-testid":"tag-suggest",defaultActiveFirstOption:!1,className:"doc-tag-auto-complete",autoFocus:!0,options:g,onChange:function(e){T(e),E(e,_)},onSelect:C,style:{width:"200px"},backfill:!0,value:b,onBlur:function(e){C(e.target.value,"blur")},onInputKeyDown:x})):u.a.createElement("div",{className:m,"data-testid":"only-read-tag"},A)};x.useViewModel=O,x.propTypes={tags:s.a.array.isRequired,docId:s.a.number,editable:s.a.bool,group:s.a.object,tagBiz:s.a.object,onChange:s.a.func},x.defaultProps={onChange:function(){}};t.a=x},3828:function(e,t,r){"use strict";r(64);var n=r(21),o=(r(94),r(27)),a=(r(258),r(69)),i=r(0),c=r.n(i),u=r(8),l=r.n(u),s=r(100),f=r(3814),d=r(3796),p=r(457),h=r(2804),m=r(213),y=r(269),v=r(165),g=r(38),b=(r(204),r(76)),_=(r(218),r(55)),w=(r(240),r(52));function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t=function(e){var t=function(e,t){if("object"!==j(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===j(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T=function(e){var t=e.value,r=e.contributors,n=e.onChange,a=x(Object(i.useState)(t.showAuthorOption),2),u=a[0],l=a[1],f=x(Object(i.useState)(t.showAuthorId),2),d=f[0],p=f[1],h=x(Object(i.useState)(t.showAuthorCustomText),2),m=h[0],y=h[1],v=function(t){n&&"function"==typeof n&&n(O(O({},e.value),t))};return c.a.createElement(b.a,{gutter:16},c.a.createElement(_.a,{span:10},c.a.createElement(w.a,{"data-testid":"show-author-option-selector",value:u,onChange:function(e){l(Number(e));var t=Number(e);v({showAuthorOption:e,showAuthorId:t!==s.SHOW_AUTHOR_OPTION.specific_user?0:d,showAuthorCustomText:t!==s.SHOW_AUTHOR_OPTION.custom_text?"":m})},getPopupContainer:function(e){return e.parentNode}},c.a.createElement(w.a.Option,{value:s.SHOW_AUTHOR_OPTION.all},__("显示所有编辑者")),c.a.createElement(w.a.Option,{"data-testid":"show-author-option-selector-user",value:s.SHOW_AUTHOR_OPTION.specific_user,disabled:r.length<=1},__("显示指定编辑者")),c.a.createElement(w.a.Option,{"data-testid":"show-author-option-selector-hide",value:s.SHOW_AUTHOR_OPTION.hide},__("不显示编辑者")),c.a.createElement(w.a.Option,{"data-testid":"show-author-option-selector-text",value:s.SHOW_AUTHOR_OPTION.custom_text},__("自定义")))),u===s.SHOW_AUTHOR_OPTION.specific_user&&c.a.createElement(_.a,{span:14},c.a.createElement(w.a,{"data-testid":"show-author-option-user-selector",value:d,onChange:function(e){p(Number(e)),v({showAuthorId:e})},placeholder:__("选择编辑者")},r.map((function(e){return c.a.createElement(w.a.Option,{value:e.id,key:String(e.id)},e.name)})))),u===s.SHOW_AUTHOR_OPTION.custom_text&&c.a.createElement(_.a,{span:14},c.a.createElement(o.a,{"data-testid":"show-author-option-custom-input",value:m,type:"text",autoComplete:"off",maxLength:20,placeholder:__("请输入（最多 20 个字符）"),onChange:function(e){var t=e.target.value;y(t),v({showAuthorCustomText:t})}})))};T.propTypes={value:l.a.shape({showAuthorCustomText:l.a.string,showAuthorId:l.a.number,showAuthorOption:l.a.number}).isRequired,contributors:l.a.array,onChange:l.a.func.isRequired};var C=T,P={tagWrapper:"DocMetaEdit-module_tagWrapper_H2QK1",tagTip:"DocMetaEdit-module_tagTip_ThFbG",cover:"DocMetaEdit-module_cover_JaV7l",coverPlaceholder:"DocMetaEdit-module_coverPlaceholder_c80Dd",coverActions:"DocMetaEdit-module_coverActions_CZ+Ed",btnRemoveCover:"DocMetaEdit-module_btnRemoveCover_RF2fK",btnRemoveCoverIcon:"DocMetaEdit-module_btnRemoveCoverIcon_ec2SG",moreBtn:"DocMetaEdit-module_moreBtn_c8CgD"};function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function I(){I=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==L(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function A(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function N(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){A(a,n,o,i,c,"next",e)}function c(e){A(a,n,o,i,c,"throw",e)}i(void 0)}))}}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,B(n.key),n)}}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=G(e);if(t){var o=G(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return F(e)}(this,r)}}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function U(e,t,r){return(t=B(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e){var t=function(e,t){if("object"!==L(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===L(t)?t:String(t)}var z=a.a.Item,W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(l,e);var t,r,i,u=M(l);function l(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),U(F(t=u.call(this,e)),"onSubmit",(function(e){e.preventDefault(),(0,t.props.form.validateFields)((function(e,r){e||t.handleUploadCover((function(){var e=t.state,n=e.showAuthorOptionData,o=e.description,a=e.cover,i={title:r.title,slug:r.slug,show_author_id:n.showAuthorId,public:t.state.public,custom_description:o,cover:a,custom_cover:a,show_author_option:n.showAuthorOption,show_author_custom_text:n.showAuthorCustomText};t.setState({submitting:!0},N(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.save(i);case 2:t.setState({submitting:!1});case 3:case"end":return e.stop()}}),e)}))))}))}))})),U(F(t),"handleUploadCover",(function(e){t.coverUploader.current?t.coverUploader.current.onSubmit().then((function(r){t.setState({cover:r||""},e)})):e()})),U(F(t),"onChangePermission",(function(e){t.setState({public:e})})),U(F(t),"handleChangeDesc",(function(e){t.setState({description:e.target.value})})),U(F(t),"showMore",(function(){var e;t.setState({showMore:!0});var r=t.props,n=r.doc,o=r.group,a=o&&o.abilities&&o.abilities.read_tag,i=null==n||null===(e=n.abilities)||void 0===e?void 0:e.update;(a||i)&&g.a.tags.find({docId:n.id}).then((function(e){t.setState({tags:e})}))})),U(F(t),"onAuthorShowOptionChange",(function(e){t.setState({showAuthorOptionData:e})}));var r=e.doc,n=y.a.getDocShowAuthorId(r),o=y.a.getDocShowAuthorOption(r),a=y.a.getDocShowAuthorCustomText(r);return t.state={public:r.public,cover:r.cover||"",description:null!=r.custom_description?r.custom_description:r.description||"",submitting:!1,showAuthorOptionData:{showAuthorId:n||void 0,showAuthorOption:o,showAuthorCustomText:a},showMore:!1,tags:[]},t.coverUploader=c.a.createRef(),t.tagBiz=new d.a({tagProxy:g.a.tags}),t}return t=l,(r=[{key:"componentDidMount",value:function(){var e=this;"function"==typeof this.props.getSummary&&this.props.getSummary((function(t){var r=t.summary,n=t.cover;e.props.doc.custom_description||e.setState({description:r}),e.props.doc.cover||""===e.props.doc.cover||e.setState({cover:n})})),this.props.hideMoreInfo||this.showMore()}},{key:"componentWillUnmount",value:function(){this.coverUploader=null}},{key:"shouldSubmitDisabled",value:function(){var e=this.state,t=e.showAuthorOptionData,r=t.showAuthorId,n=t.showAuthorOption,o=t.showAuthorCustomText,a=e.submitting,i=n===s.SHOW_AUTHOR_OPTION.specific_user&&!r||n===s.SHOW_AUTHOR_OPTION.custom_text&&!o;return a||i}},{key:"canEditDoc",value:function(){if(window.appData.sharePage)return!1;var e=this.props.doc;return"Thread"!==e.type&&e.abilities&&e.abilities.update}},{key:"renderTags",value:function(){var e=this.props,t=e.doc,r=e.group,n=this.state.tags,o=this.canEditDoc()&&t&&t.abilities&&t.abilities.destroy,a=o||n&&n.length,i=r&&"User"===r.type,u=__("标签用于管理，仅{desc}可见",{desc:i?__("自己"):v.a.memberTitle(r)});if(a)return c.a.createElement(z,null,c.a.createElement("div",{className:P.tagWrapper},c.a.createElement("p",{className:P.title},__("标签"),c.a.createElement("span",{className:P.tagTip},u)),c.a.createElement(f.a,{tags:n||[],editable:o,group:r,docId:t.id,tagBiz:this.tagBiz})))}},{key:"render",value:function(){var e=this.props,t=e.doc,r=e.book,i=e.hideMoreInfo,u=e.hideTitle,l=this.props.form.getFieldDecorator,s="/".concat(r.namespace,"/"),f={xs:{span:24},sm:{span:14}},d=t.contributors||[],m=this.state.showMore,y=!i||m;return c.a.createElement("div",{className:"doc-meta-edit"},c.a.createElement(a.a,{layout:"vertical"},!u&&c.a.createElement(z,{label:__("标题"),colon:!1,wrapperCol:f},l("title",{initialValue:t.title,rules:[{type:"string",required:!0,message:__("请输入标题")}]})(c.a.createElement(o.a,{type:"text",autoComplete:"off"}))),c.a.createElement(z,{label:__("摘要"),colon:!1},c.a.createElement(o.a.TextArea,{value:this.state.description,onChange:this.handleChangeDesc,autoSize:{minRows:3,maxRows:6},maxLength:150})),c.a.createElement(z,{label:__("封面"),colon:!1},c.a.createElement("div",{className:P.cover},c.a.createElement(h.a,{attachable_type:"Doc",attachable_id:t.id,cover:this.state.cover,ref:this.coverUploader,cropperCheckCrossOrigin:!1,cropperCrossOrigin:"anonymous"}))),y?c.a.createElement(c.a.Fragment,null,c.a.createElement(z,{label:__("作者"),colon:!1},c.a.createElement(C,{value:this.state.showAuthorOptionData,onChange:this.onAuthorShowOptionChange,contributors:d})),c.a.createElement(z,{label:__("路径"),colon:!1,wrapperCol:f},l("slug",{initialValue:t.slug,rules:[{type:"string",required:!0,pattern:/^[a-z0-9\-_\.]{2,190}$/,message:__("访问路径为 2～190 个字符，只能输入小写字母、数字、横线、下划线和点")}]})(c.a.createElement(o.a,{type:"text",addonBefore:s,autoComplete:"off"}))),this.renderTags()):c.a.createElement("div",{className:P.moreBtn,onClick:this.showMore},__("高级选项")," ",c.a.createElement(p.default,null)),c.a.createElement(n.a,{className:"doc-meta-edit-submit",type:"primary",onClick:this.onSubmit,disabled:this.shouldSubmitDisabled()},__("确定"))))}}])&&D(t.prototype,r),i&&D(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.Component);W.propTypes={group:l.a.object.isRequired,book:l.a.object.isRequired,doc:l.a.object,save:l.a.func,getSummary:l.a.func,hideMoreInfo:l.a.bool,hideTitle:l.a.bool};t.a=Object(m.b)(a.a.create()(W),!0)},3856:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(3635),o=r(553),a=Object(o.a)({loader:function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(10),r.e(112)]).then(r.bind(null,3885)).then((function(e){return e.PresentationRender}))},loading:n.a}),i=Object(o.a)({loader:function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(10),r.e(112)]).then(r.bind(null,3885))},loading:n.a});t.b=i},3873:function(e,t,r){"use strict";t.a={modal:"CatalogViewModel-module_modal_rJNDk",modalTitle:"CatalogViewModel-module_modalTitle_AJ8tO",modalDescription:"CatalogViewModel-module_modalDescription_n0icU",btnCloseModal:"CatalogViewModel-module_btnCloseModal_j2eMP"}},3878:function(e,t,r){"use strict";r(95);var n=r(49),o=(r(445),r(166)),a=(r(529),r(306)),i=(r(197),r(36)),c=r(0),u=r.n(c),l=r(8),s=r.n(l),f=r(107),d=r.n(f),p=r(555),h=r(84),m=r.n(h),y=r(13),v=r.n(y),g=r(2722),b=r(3671),_=r(3668),w=r(3621),j=r(3664),E=r(2753),O=(r(1982),r(669)),S={slideTitle:"Slider-module_slideTitle_jDMWk",slideContainer:"Slider-module_slideContainer_5puOR"};function x(e){var t=e.title,r=e.onChange,n=e.value,o=e.min,a=e.max,i=e.marks,l=e.className,s=e.valueMap,f=e.labelMap,d=e.unit,p=Object(c.useCallback)((function(e){r(s?s[e]:e)}),[s,r]);return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:S.slideTitle},u.a.createElement("span",null,t)),u.a.createElement("div",{className:S.slideContainer},u.a.createElement(O.a,{className:l,onChange:p,min:o,max:a,value:f?f[n]:n,tooltipVisible:!1,marks:i})),u.a.createElement("div",null,n,d))}x.propTypes={title:l.PropTypes.string.required,onChange:l.PropTypes.func.required,value:l.PropTypes.number.required,min:l.PropTypes.number.required,max:l.PropTypes.number.required,marks:l.PropTypes.array.required,labelMap:l.PropTypes.object,valueMap:l.PropTypes.object,className:l.PropTypes.string,unit:l.PropTypes.string},x.defaultProps={unit:"px"};var k=r(42),T={selectTitle:"Select-module_selectTitle_o273v",selectOptions:"Select-module_selectOptions_iZn-b",optionAction:"Select-module_optionAction_KeaaB",iconSvg:"Select-module_iconSvg_3tsh1",optionActive:"Select-module_optionActive_HTKqR",optionTitle:"Select-module_optionTitle_ZbDCu"};function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function P(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==C(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===C(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e){var t=e.title,r=e.value,n=e.options,o=e.onChange;return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:T.selectTitle},t),u.a.createElement("div",{className:T.selectOptions},n.map((function(e){return u.a.createElement("div",{key:e.value,className:v()(T.optionAction,P({},T.optionActive,r===e.value)),"data-aspm-click":e.asp||null,onClick:function(){o(e.value)}},u.a.createElement(k.a,{className:T.iconSvg,width:38,height:28,name:r===e.value?e.selectedIcon:e.icon}),u.a.createElement("div",{className:T.optionTitle},e.title))}))))}L.propTypes={title:l.PropTypes.string.required,value:l.PropTypes.number.required,options:l.PropTypes.array.required,onChange:l.PropTypes.func.required},L.defaultProps={};var I={switchTitle:"Switch-module_switchTitle_WJKZB",switchContainer:"Switch-module_switchContainer_Ajcua"};function A(e){var t=e.title,r=e.onChange,n=e.defaultChecked;return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:I.switchTitle},t),u.a.createElement("div",{className:I.switchContainer},u.a.createElement(a.a,{size:"small",onChange:r,defaultChecked:n})))}A.propTypes={title:l.PropTypes.string.required,value:l.PropTypes.number.required,defaultChecked:l.PropTypes.bool.required,onChange:l.PropTypes.func.required},A.defaultProps={};var N=r(38),D=r(70),R=r(269),M=r(213),F=r(586),G=r(2497),U=r.n(G),B=r(3691),z="DocActionMore-module_wrap_le9aB",W="DocActionMore-module_sceneItem_sDxCm",V="DocActionMore-module_checkbox_kHMEj",q="DocActionMore-module_selectItem_Ga0F3",K="DocActionMore-module_submenuSwitchItem_AK8z3",$="DocActionMore-module_slideItem_zrnG8",H="DocActionMore-module_switchItem_vBijY",Y="DocActionMore-module_infoItem_pGDVA",Z="DocActionMore-module_submenuContainer_mgSTF",X="DocActionMore-module_submenuIcon_BidTJ",Q="DocActionMore-module_sceneAction_KTXPK",J="DocActionMore-module_sceneTitle_GJRbH",ee="DocActionMore-module_switchTitle_oFkGc",te="DocActionMore-module_switchDesc_pWX8R",re="DocActionMore-module_switchAction_Yfn-p",ne="DocActionMore-module_infoContent_PBXyF",oe="DocActionMore-module_menuItemContainer_sQ4rU",ae="DocActionMore-module_menuDescribe_g8JML",ie="DocActionMore-module_iconContainer_Jwqih",ce="DocActionMore-module_menu_+zp+S",ue="DocActionMore-module_iconBeta_hbg2z",le=r(2680);function se(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var de=d()("doc:actionMenu"),pe=function(e){var t=Object(le.a)(e),r=t.cmd,c=t.sendAlimail,l=t.mailSending,s=t.typography,f=t.defaultFontSize,d=t.recordDocSetting,p=t.paragraphSpacing,h=t.reset,y=t.doAction,O=t.getEditorLayout,S=t.getWordCount,T=t.setSendAlimail,C=t.setMailSending,P=t.contextHolder,I=function(t,r){e.onSelect({key:t}),y(t,r),Object(F.a)("c34619.d69461",{create_type:t})},M=function(){return null},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.map((function(e,r){return"scene"===e.type?e.actions.length>0?(n=se(e.actions),u.a.createElement(i.a.Item,{key:"scene",className:W},n.map((function(e){return u.a.createElement("div",{key:e.cmd,scene:e.cmd,className:Q,"data-aspm-click":e.asp||null,onClick:function(){I(e.cmd)}},u.a.createElement(k.b,{name:e.sceneIcon,width:36,height:36}),u.a.createElement("div",{className:J},e.title))})))):null:"select"===e.type?(l=se((c=e).options),h="",c.cmd===D.a.DOC.document_typography.cmd?h=s:c.cmd===D.a.DOC.document_layout_select.cmd&&(h=O()),u.a.createElement(i.a.Item,{key:c.cmd,className:q,onClick:function(e){e.domEvent.stopPropagation()}},u.a.createElement(L,{title:c.title,options:l,value:h,onChange:function(e){return I(c.cmd,e)}}))):"switch"===e.type?t?function(e){var t=v()("doc-action-menu-item-".concat(e.cmd),K),r="";return e.cmd===D.a.DOC.document_paragraph_spacing.cmd&&(r=p===m.a.PARAGRAPH_SPACING.relax),u.a.createElement(i.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-submenu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},u.a.createElement(A,{title:e.title,defaultChecked:r,onChange:function(t){I(e.cmd,t?m.a.PARAGRAPH_SPACING.relax:m.a.PARAGRAPH_SPACING.default)}}))}(e):function(e){var t=v()("doc-action-menu-item-".concat(e.cmd),H),r="";return e.cmd===D.a.DOC.document_layout.cmd&&(r=O()),u.a.createElement(i.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},u.a.createElement("div",{className:ee},u.a.createElement("span",null,e.title),u.a.createElement("div",{className:te},e.describe)),u.a.createElement(a.a,{onChange:function(t){I(e.cmd,t?m.a.VIEWPORT.adapt:m.a.VIEWPORT.fixed)},size:"small",defaultChecked:r===m.a.VIEWPORT.adapt,className:re}))}(e):"slider"===e.type?function(e){var t=v()("doc-action-menu-item-".concat(e.cmd),$),r="",n="";return e.cmd===D.a.DOC.document_fontsize.cmd&&(n=s,r=f),u.a.createElement(i.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},u.a.createElement(x,{className:n,title:e.title,min:e.min,max:e.max,value:r,marks:e.marks,labelMap:e.labelMap,valueMap:e.valueMap,onChange:function(t){return I(e.cmd,t)}}))}(e):"checkbox"===e.type?function(e){var t=v()("doc-action-menu-item-".concat(e.cmd),V),r=!1;return e.cmd===D.a.DOC.document_record_setting.cmd&&(r=d),u.a.createElement(i.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},u.a.createElement(o.a,{checked:r,onChange:function(t){return I(e.cmd,t.target.checked)}},e.title))}(e):"submenu"===e.type?M(e):"divide"===e.cmd?u.a.createElement(i.a.Divider,{key:r,className:t?"menu-sub":""}):function(e){return u.a.createElement(i.a.Item,{key:e.cmd,className:"doc-action-menu-item-".concat(e.cmd),"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(){I(e.cmd)}},u.a.createElement("div",{className:oe,"data-aspm-click":e.asp||null},u.a.createElement("div",{className:ie},e.icon&&u.a.createElement(k.b,{name:e.icon,width:16})),e.tip_id?u.a.createElement(g.a,{tip_id:e.tip_id},e.title):e.title,e.isBeta&&u.a.createElement("span",{className:ue},"Beta")))}(e);var n,c,l,h}));return r};M=function(e){var t=v()("doc-action-menu-item-".concat(e.cmd));return u.a.createElement(i.a.SubMenu,{key:e.cmd,popupClassName:z,className:t,title:u.a.createElement("div",{className:Z,onClick:function(e){return e.stopPropagation()}},u.a.createElement("div",{className:oe,"data-aspm-click":e.asp||null},u.a.createElement("div",{className:ie},e.icon&&u.a.createElement(k.b,{name:e.icon,width:16})),e.tip_id?u.a.createElement(g.a,{tip_id:e.tip_id},e.title):e.title,e.isBeta&&u.a.createElement("span",{className:ue},"Beta"),u.a.createElement(k.b,{className:X,name:"arrow-right",width:16})),u.a.createElement("div",{className:ae},e.describe)),onTitleClick:function(e){e.domEvent.stopPropagation()},"data-testid":"doc-action-menu-item-".concat(e.cmd)},G(e.subcmds,!0))};var fe=e.book,pe=e.className,he=e.doc,me=e.commandParams,ye=e.commands;return de("render, currect action",r,me),u.a.createElement("div",{className:"".concat(z," ").concat(pe)},u.a.createElement(i.a,{className:ce,selectable:!1,multiple:!0,mode:"vertical"},G(ye),u.a.createElement(i.a.Divider,null),function(){var t,r,n=e.doc;return u.a.createElement(i.a.Item,{key:"info",className:Y,onClick:function(e){e.domEvent.stopPropagation()}},u.a.createElement("div",{className:ne},"Doc"===n.type?u.a.createElement("div",null,__("字数统计：{count}",{count:S()||0})):u.a.createElement("div",null,__("阅读数：{count}",{count:n.hits||0})),u.a.createElement("div",null,__(n.user?"{user} 创建于 {timer}":"创建于 {timer}",{user:null===(t=n.user)||void 0===t?void 0:t.name,timer:U.a.format(n.created_at,{onlyDate:!0})})),u.a.createElement("div",null,__(n.last_editor?"{user} 更新于 {time}":"更新于 {time}",{user:null===(r=n.last_editor)||void 0===r?void 0:r.name,time:U.a.format(n.content_updated_at)})),u.a.createElement("div",null,__("编辑者："),n.contributors.map((function(e){return e.name})).join("、"))))}()),P,r===D.a.DOC.export_doc.cmd&&u.a.createElement(w.a,{doc:he,bookId:fe.id,onCancel:h,exportParams:me}),r===D.a.BOOK.export_book.cmd&&u.a.createElement(E.a,{visible:!0,book:fe,exportParams:me,onCancel:h}),r===D.a.DOC.import_to_doc.cmd&&u.a.createElement(j.a,{book:fe,formats:R.a.getImportFormats({multi:!1}),importType:m.a.IMPORT_TYPE.PARSE,onCancel:h,onSuccess:function(t){e.onCommandsExecuted({cmd:r,result:t})}}),r===D.a.DOC.import_to_book.cmd&&u.a.createElement(j.a,{book:fe,importParams:me,formats:R.a.getImportFormats({multi:!0}),importType:m.a.IMPORT_TYPE.CREATE,onCancel:h,onSuccess:function(t){e.onCommandsExecuted({cmd:r,result:t})},group:window.appData.group}),r===D.a.DOC.save_as_template.cmd&&u.a.createElement(_.a,{visible:r===D.a.DOC.save_as_template.cmd,onCancel:h,modalTitle:__("另存为模板"),book:fe,doc:e.doc,group:window.appData.group,organization:window.appData.organization,docletType:e.doc.type,onOpenTemplateSelector:function(){return y(D.a.DOC.create_from_template.cmd)},templateProxy:N.a.templates.v1,docProxy:N.a.docs,inEdit:e.inEdit}),r===D.a.DOC.save_published_as_version.cmd&&u.a.createElement(b.a,{doc:he,docDomain:"Doc",type:"published",onCancel:h,docVersionProxy:N.a.docVersions}),u.a.createElement(n.a,{width:500,visible:c,footer:null,closable:!l,maskClosable:!1,onCancel:function(){T(!1)}},c&&u.a.createElement(B.a,{onMailSended:function(){C(!1)},onMailSending:function(){C(!0)},doc:he})))};pe.defaultProps={className:"",onSelect:function(){},onCommandsExecuted:function(){},commandParams:{}},pe.propTypes={className:s.a.string,group:s.a.object.isRequired,book:s.a.object.isRequired,doc:s.a.object,commands:s.a.array.isRequired,commandParams:s.a.object,onSelect:s.a.func,onCommandsExecuted:s.a.func,dispatch:s.a.func,onSelectTemplate:s.a.func,inEdit:s.a.bool};t.a=Object(p.d)()(Object(M.b)(pe))},3883:function(e,t,r){"use strict";r(3142);var n=r(2577),o=r.n(n),a=(r(64),r(21)),i=(r(445),r(166)),c=(r(258),r(69)),u=(r(94),r(27)),l=r(0),s=r.n(l),f=r(8),d=r.n(f),p="CatalogLinkForm-module_formItem_NxeJR",h="CatalogLinkForm-module_actions_Y-0Ny";function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=function(e){var t=e.item,r=e.form.getFieldDecorator,n=function(e){var t=e.form,r=e.item,n=!r||0!==r.open_window,o=y(Object(l.useState)(n),2),a=o[0],i=o[1];return{state:{openWindow:a},onSubmit:function(){t.validateFields((function(t,r){t||e.onSubmit({title:r.title,url:r.url,open_window:!1===a?0:1})}))},handleChangeOpenWindow:function(e){i(e.target.checked)}}}(e),f={colon:!1,className:p};return s.a.createElement(o.a,{autoInsertSpaceInButton:!1,iconPrefixCls:"larkui-icon"},s.a.createElement(c.a,null,s.a.createElement(c.a.Item,m({label:__("标题")},f),r("title",{initialValue:t&&t.title,rules:[{required:!0,message:__("请输入标题")}]})(s.a.createElement(u.a,null))),s.a.createElement(c.a.Item,m({label:__("网页链接")},f),r("url",{initialValue:t&&t.url,rules:[{required:!0,message:__("请输入链接")}]})(s.a.createElement(u.a,null))),s.a.createElement(c.a.Item,null,s.a.createElement(i.a,{checked:n.state.openWindow,onChange:n.handleChangeOpenWindow},__("在新标签页打开"))),s.a.createElement("div",{className:h},s.a.createElement(c.a.Item,null,s.a.createElement(a.a,{onClick:e.onCancel},__("取消"))),s.a.createElement(c.a.Item,null,s.a.createElement(a.a,{type:"primary",htmlType:"submit",onClick:n.onSubmit},__("确认"))))))};g.propTypes={item:d.a.object,onCancel:d.a.func.isRequired,onSubmit:d.a.func.isRequired,form:d.a.object.isRequired};t.a=c.a.create()(g)},3923:function(e,t,r){"use strict";r(61);var n=r(23),o=(r(95),r(49)),a=r(0),i=r.n(a),c=r(8),u=r.n(c),l=r(229),s=r.n(l),f=r(373),d=r(13),p=r.n(d),h=r(38),m=r(2780),y=r(3637),v=r(3883),g=r(3873);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function _(){_=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(T([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==b(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},w(j.prototype),u(j.prototype,i,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===b(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function S(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){O(a,n,o,i,c,"next",e)}function c(e){O(a,n,o,i,c,"throw",e)}i(void 0)}))}}function x(e){u.a.checkPropTypes(x.propTypes,e,"prop","CatalogViewModel");var t=e.item,r=e.group,a=e.book,c=e.doc,l=e.catalog,d=e.disableSelectorBooks,b=e.showRepoSelector,w=void 0===b||b,E=e.onCopy,O=e.onMove,k=e.onAction,T=e.onDestroy,C=e.onUnshare,P=e.hideCopyWithChildren,L=void 0!==P&&P,I=function(e){t&&k({node_uuid:t.uuid,action:"edit",title:e.title,url:e.url,type:f.TYPES.link,open_window:e.open_window})};return{handleEditLinkNode:I,showCopyToModal:function(){var e=o.a.confirm(),u=function(){var r=S(_().mark((function r(){var o,u,s,f,d,p,m,y,v,g,b=arguments;return _().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=b.length>0&&void 0!==b[0]?b[0]:{},r.prev=1,r.next=4,h.a.catalogNodes.copy({book_id:a.id,node_uuid:t&&t.uuid,target_uuid:o.target_uuid,action:o.action,target_book_id:o.targetBook.id,with_children:o.with_children,insert_to_catalog:o.insert_to_catalog,doc_id:c&&c.id},{useOriginResp:!0});case 4:if(u=r.sent,s=u.data,f=u.meta,d=f.toc_updated_at,p=f.docIds,e.destroy(),m=o.targetBook,y=o.targetGroup,m.id!==a.id?(v=p[0],g=v?"/go/doc/".concat(p[0]):"/".concat(y.login,"/").concat(m.slug),n.a.success(__("已复制到：{target}",{target:i.a.createElement("a",{href:g,target:"_blank"},m.name)}),3)):n.a.success(__("复制成功")),!E){r.next=12;break}return r.next=12,E(l,s,j(j({},o),{},{currentItem:t,toc_updated_at:d,doc_ids:p}));case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(1),console.error(r.t0);case 17:return r.prev=17,e.destroy(),r.finish(17);case 20:case"end":return r.stop()}}),r,null,[[1,14,17,20]])})));return function(){return r.apply(this,arguments)}}();e.update({className:p()(g.a.modalCatalog,g.a.modal),icon:null,closable:!0,width:600,footer:null,centered:!0,title:i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",{className:g.a.modalTitle},__("复制到...")),w&&i.a.createElement("p",{className:g.a.modalDescription},__("可复制到有创建文档权限的知识库"))),content:i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{currentGroup:r,currentBook:a,disableSelectorBooks:d,showRepoSelector:w,items:t?[t]:[],submitType:"copy",onSubmit:u,onCancel:function(){e.destroy()},hideCopyWithChildren:L}))})},showMoveToModal:function(){var e=o.a.confirm(),u=function(){var r=S(_().mark((function r(){var o,u,s,f,d,p,m,y=arguments;return _().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(o=y.length>0&&void 0!==y[0]?y[0]:{}).targetGroup,s=o.targetBook,f="/".concat(u.login,"/").concat(s.slug),r.prev=3,r.next=6,h.a.catalogNodes.move({book_id:a.id,node_uuid:t&&t.uuid,target_uuid:o.target_uuid,action:o.action,target_book_id:o.targetBook.id,with_children:o.with_children,insert_to_catalog:o.insert_to_catalog,doc_id:c&&c.id},{useOriginResp:!0,ignoreGlobalMessage:!0});case 6:if(d=r.sent,p=d.data,m=d.meta.docIds,e.destroy(),s.id!==a.id?n.a.success(__("已移动到：{target}",{target:i.a.createElement("a",{href:f,target:"_blank"},s.name)}),3):n.a.success(__("移动成功")),!O){r.next=14;break}return r.next=14,O(l,p,j(j({},o),{},{currentItem:t,docIds:m}));case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(3),n.a.error(r.t0.message);case 19:case"end":return r.stop()}}),r,null,[[3,16]])})));return function(){return r.apply(this,arguments)}}();e.update({className:p()(g.a.modalCatalog,g.a.modal),icon:null,closable:!0,width:600,footer:null,centered:!0,title:i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",{className:g.a.modalTitle},__("移动到...")),w&&i.a.createElement("p",{className:g.a.modalDescription},__("可移动到有创建文档权限的知识库"))),content:i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{currentGroup:r,currentBook:a,disableSelectorBooks:d,showRepoSelector:w,items:t?[t]:[],submitType:"move",onSubmit:u,onCancel:function(){e.destroy()}}))})},showLinkNodeModal:function(){var e=o.a.confirm();e.update({className:g.a.modal,icon:null,closable:!0,width:520,centered:!0,title:i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",{className:g.a.modalTitle},__("添加链接")),i.a.createElement("p",{className:g.a.modalDescription},__("通过添加网页链接，可插入非本知识库的内容"))),content:i.a.createElement(v.a,{item:t,onSubmit:function(t){I(t),e.destroy()},onCancel:function(){return e.destroy()}})})},showRemoveConfirmModal:function(){if(t){var e=o.a.confirm(),c=t.child_uuid?"removeWithChildren":"remove";e.update({className:g.a.removeModal,width:437,centered:!0,title:__("确认要移出目录吗？",{name:t.title}),content:t.child_uuid?__("将同时移出 {name} 下的所有节点",{name:t.title}):null,onOk:function(){k({node_uuid:t.uuid,action:c}),n.a.success(i.a.createElement(i.a.Fragment,null,__("移出成功！"),i.a.createElement("a",{href:"/r/".concat(r.login,"/").concat(a.slug,"/docs?status=notInTOC")},__("查看"))))},okText:__("确认"),cancelText:__("取消")})}},showDestroyConfirmModal:function(){var e;t&&o.a.confirm().update({className:g.a.removeModal,width:437,centered:!0,title:__("确认删除 {name} 吗？",{name:t.title}),content:t.child_uuid?__("同时删除 {name} 下的所有文档",{name:t.title}):null,onOk:(e=S(_().mark((function e(){var r,n,o,i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.updateNode(a,{node_uuid:t.uuid,action:"destroyWithChildren",has_child:!!t.child_uuid});case 2:r=e.sent,n=r.toc,o=r.deletedDocIds,i=void 0===o?[]:o,T&&T(l,n,{currentItem:t,docIds:i});case 7:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),okText:__("确认"),cancelText:__("取消")})},showUnshareConfirmModal:function(){if(t){var e=__("你正在取消《{title}》的分享链接，取消后用户将无法通过原有链接浏览",{title:t.title});o.a.confirm({title:__("关闭分享"),content:e,onOk:function(){C(t)}})}},copyLink:function(){var e;if(t.type===f.TYPES.link)e=t.url;else{var o=window.location,i=o.protocol,c=o.host;e="".concat(i,"//").concat(c,"/").concat(r.login,"/").concat(a.slug,"/").concat(t.url)}s()(e),n.a.success(__("链接复制成功"))}}}x.propTypes={group:u.a.object.isRequired,book:u.a.object.isRequired,doc:u.a.object,catalog:u.a.array.isRequired,item:u.a.object,disableSelectorBooks:u.a.array,showRepoSelector:u.a.bool,onCopy:u.a.func,onMove:u.a.func,onAction:u.a.func,onDestroy:u.a.func,onUnshare:u.a.func},t.a={useViewModel:x}},3939:function(e,t,r){"use strict";var n=r(1766);t.a=n.a},4025:function(e,t,r){"use strict";var n=r(553),o=Object(n.a)({loader:function(){return r.e(363).then(r.bind(null,439))}});t.a=o},4036:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return c}));var n=r(0),o=r.n(n);var a=Object(n.createContext)({showHistory:function(){}});function i(e){return o.a.createElement(a.Provider,{value:e},e.children)}function c(){return Object(n.useContext)(a)}},4037:function(e,t,r){var n={"./AboutIcon1.js":[734],"./AboutIcon2.js":[735],"./AboutIcon3.js":[736],"./AboutIcon4.js":[737],"./AboutRight.js":[964],"./ActionCopy.js":[1395],"./ActionDelete.js":[570],"./ActionDocInfo.js":[1657],"./ActionExport.js":[1396],"./ActionMobile.js":[738],"./ActionMove.js":[1397],"./ActionPrint.js":[739],"./ActionSaveAs.js":[1360],"./ActionSubmenu.js":[965],"./ActionVersion.js":[740],"./Add.js":[571],"./AddHollow.js":[1521],"./AddList.js":[1398],"./AddToCatalog.js":[1522],"./Addlink.js":[741],"./Addnav.js":[1399],"./AddressBook.js":[1150],"./AdvancedSearch.js":[742],"./AliYuque.js":[1523],"./Alibaba.js":[1361],"./AnchorRect.js":[1362],"./AnnouncementEdit.js":[1400],"./AntdDown.js":[743],"./AntdSync.js":[744],"./AntdUndo.js":[745],"./AntdUp.js":[746],"./AntdWarning.js":[747],"./AppBubble.js":[748],"./Architecture.js":[1524],"./AreaComment.js":[1401],"./ArrowDown.js":[457],"./ArrowLeft.js":[695],"./ArrowLeft2.js":[966],"./ArrowLeft3.js":[967],"./ArrowOutlined.js":[932],"./ArrowRight.js":[968],"./ArrowUp.js":[969],"./Assignee.js":[749],"./Assistance.js":[1219],"./Avatar.js":[1151],"./AvatarDark.js":[1152],"./AvatarUpload.js":[572],"./Avatarvip.js":[1246],"./Backlog.js":[1197],"./Beta.js":[1247],"./Book.js":[1525],"./BookFill.js":[1328],"./BookIconAlibaba.js":[852],"./BookIconAlipay.js":[853],"./BookIconTaobao.js":[854],"./BookIconTopic.js":[904],"./BookIconTopicDark.js":[905],"./BookIconYuque.js":[906],"./BookIconYuqueDark.js":[907],"./BookNewCreate.js":[1329],"./BookTemporaryStorage.js":[1363],"./BookTypeBlog.js":[908],"./BookTypeBlogDark.js":[909],"./BookTypeDefault.js":[910],"./BookTypeDefault2.js":[1364],"./BookTypeDefaultDark.js":[911],"./BookTypeDesign.js":[912],"./BookTypeDesign2.js":[1365],"./BookTypeDesignDark.js":[913],"./BookTypeImport.js":[914],"./BookTypeImport2.js":[1366],"./BookTypeImportDark.js":[915],"./BookTypeManual.js":[916],"./BookTypeManualDark.js":[917],"./BookTypeNotes.js":[918],"./BookTypeNotesDark.js":[919],"./BookTypeProject.js":[920],"./BookTypeProjectDark.js":[921],"./BookTypeReports.js":[922],"./BookTypeReportsDark.js":[923],"./BookTypeResource.js":[924],"./BookTypeResource2.js":[726],"./BookTypeResourceDark.js":[925],"./BookTypeSheet.js":[926],"./BookTypeSheetDark.js":[927],"./BookTypeThread.js":[928],"./BookTypeThread2.js":[1367],"./BookTypeThreadDark.js":[929],"./BookTypeTravel.js":[930],"./BookTypeTravelDark.js":[931],"./BooksIconAixin.js":[855],"./BooksIconAlibaba.js":[856],"./BooksIconBaozhi.js":[857],"./BooksIconBianzu.js":[858],"./BooksIconBianzu15.js":[859],"./BooksIconBiaoge.js":[860],"./BooksIconBiaoqian.js":[861],"./BooksIconBikan.js":[862],"./BooksIconBoke.js":[863],"./BooksIconChanpinwendang.js":[864],"./BooksIconChucun.js":[865],"./BooksIconDabiaowenjian.js":[866],"./BooksIconDefault.js":[867],"./BooksIconDengpao.js":[868],"./BooksIconDuihua.js":[869],"./BooksIconGerendangan.js":[870],"./BooksIconHuabao.js":[871],"./BooksIconHuati.js":[872],"./BooksIconHuati2.js":[873],"./BooksIconHudun.js":[874],"./BooksIconHuojian.js":[875],"./BooksIconHuowu.js":[876],"./BooksIconJiami.js":[877],"./BooksIconJiangbei.js":[878],"./BooksIconJihua.js":[879],"./BooksIconLanqiu.js":[880],"./BooksIconLingdang.js":[881],"./BooksIconLiucheng.js":[882],"./BooksIconMubiao.js":[883],"./BooksIconPenzai.js":[884],"./BooksIconQiqiu.js":[885],"./BooksIconQunzu.js":[886],"./BooksIconRenwuliebiao.js":[887],"./BooksIconRili.js":[888],"./BooksIconSuozhu.js":[889],"./BooksIconTongxunlu.js":[890],"./BooksIconTuandui.js":[891],"./BooksIconWendang.js":[892],"./BooksIconWengao.js":[893],"./BooksIconWenjiandai.js":[894],"./BooksIconWenjiandai2.js":[895],"./BooksIconWenjianjia.js":[896],"./BooksIconXiezuo.js":[897],"./BooksIconXinfeng.js":[898],"./BooksIconXingquxiaozu.js":[899],"./BooksIconXuexibiji.js":[900],"./BooksIconYingyuxuexi.js":[901],"./BooksIconYuqueLogo.js":[902],"./BooksIconZhiding.js":[903],"./BulkOperations.js":[1402],"./Canceled.js":[1198],"./Card.js":[1020],"./CardStyle.js":[1526],"./CardView.js":[946],"./CardView2.js":[1187],"./Caretleftoutlined.js":[970],"./Catalog.js":[1527],"./CatalogCaret.js":[1368],"./CatalogCreateLink.js":[750],"./CatalogCreateTitle.js":[1528],"./CatalogExpand.js":[1529],"./CatalogFold.js":[1530],"./CatalogMore.js":[751],"./Change.js":[1403],"./Check.js":[1404],"./CheckFill.js":[1405],"./CheckOutlined.js":[593],"./Chinese.js":[752],"./Clear.js":[1406],"./Close.js":[458],"./CloseOpenInapp.js":[1407],"./CloseOutline.js":[1408],"./CloseOutlined.js":[426],"./Closecircleoutlined.js":[1409],"./Cloud.js":[753],"./CollabBook.js":[754],"./CollabOutlined.js":[755],"./Collapse.js":[1410],"./CommentArrow.js":[971],"./CommentBubble.js":[1411],"./CommentEdit.js":[1412],"./CommentEdit2.js":[1413],"./CommentHide.js":[1658],"./CommentMore.js":[756],"./CommentReaction.js":[1414],"./CommentReply.js":[757],"./CommentTimeline.js":[758],"./CommentTrash.js":[1415],"./Comments.js":[1416],"./CommentsPara.js":[1417],"./Compass.js":[1330],"./Concern.js":[759],"./Connect.js":[1674],"./CostDetail.js":[760],"./CreateBook.js":[1369],"./CreateStudyNote.js":[1370],"./CreateTodo.js":[1371],"./CreateWeeklyReport.js":[1372],"./CupColor.js":[761],"./Cut.js":[1418],"./Date.js":[947],"./Delete.js":[1419],"./DeleteSolid.js":[1188],"./Demonstration.js":[1086],"./DemonstrationDark.js":[1087],"./Department.js":[762],"./Dept.js":[763],"./DiamondGold.js":[1248],"./DiamondGray.js":[1249],"./Digitalgarden.js":[1275],"./DingdingFilled.js":[1550],"./DingdingLine.js":[1551],"./Dingtalk.js":[1552],"./Directory.js":[1531],"./DocAdapt.js":[933],"./DocData.js":[1220],"./DocDataDark.js":[1221],"./DocFixed.js":[934],"./DocHasContentRisk.js":[764],"./DocHasNewContent.js":[1659],"./DocManagement.js":[1532],"./DocOutline.js":[1021],"./DocQuickCreate.js":[1420],"./DocStyle.js":[765],"./DocTypeActiontag.js":[992],"./DocTypeActiontagDark.js":[993],"./DocTypeArtboard.js":[994],"./DocTypeArtboardDark.js":[995],"./DocTypeBoard.js":[996],"./DocTypeBoardDark.js":[997],"./DocTypeDefault.js":[998],"./DocTypeDefaultDark.js":[999],"./DocTypeGroup.js":[1e3],"./DocTypeGroupDark.js":[1001],"./DocTypeLink.js":[1002],"./DocTypeLinkDark.js":[1003],"./DocTypeMarkdown.js":[1004],"./DocTypeMarkdownDark.js":[1005],"./DocTypeMind.js":[1006],"./DocTypeMindDark.js":[1007],"./DocTypeNote.js":[1008],"./DocTypeNoteDark.js":[1009],"./DocTypeSheet.js":[1010],"./DocTypeSheetDark.js":[1011],"./DocTypeShow.js":[1012],"./DocTypeShowDark.js":[1013],"./DocTypeTable.js":[1014],"./DocTypeTableDark.js":[1015],"./DocTypeTask.js":[1016],"./DocTypeTaskDark.js":[1017],"./DocTypeThread.js":[1018],"./DocTypeThreadDark.js":[1019],"./Docs.js":[766],"./DoubleArrowDown.js":[767],"./DoubleClick.js":[768],"./Doubleright.js":[972],"./Down.js":[973],"./DownArrow.js":[974],"./DownMiniarrow.js":[975],"./Downcircle.js":[976],"./Download.js":[1421],"./Download2.js":[1422],"./Drag.js":[573],"./Dynamic.js":[1174],"./Dynamic2.js":[769],"./Edit.js":[1022],"./EditBorder.js":[1423],"./EditCard.js":[1023],"./EditDate.js":[948],"./EditDraw.js":[1024],"./EditEvent.js":[1025],"./EditMember.js":[949],"./EditNoBorder.js":[1424],"./EditOutline.js":[1026],"./EditPreview.js":[1425],"./EditReadme.js":[1027],"./EditSolid.js":[935],"./EditSudoku.js":[1331],"./EditTable.js":[1028],"./EditorAlignmentCenter.js":[1029],"./EditorAlignmentLeft.js":[1030],"./EditorAlignmentRight.js":[1031],"./EditorBgColor.js":[1032],"./EditorBold.js":[1033],"./EditorCard.js":[1034],"./EditorCellBgColor.js":[1035],"./EditorClearFormat.js":[1036],"./EditorCode.js":[1037],"./EditorCodeblock.js":[1038],"./EditorColor.js":[1039],"./EditorCommand.js":[1040],"./EditorFindandreplace.js":[1041],"./EditorFontsize.js":[1042],"./EditorFormatPainter.js":[1043],"./EditorH1.js":[1044],"./EditorH2.js":[1045],"./EditorH3.js":[1046],"./EditorH4.js":[1047],"./EditorH5.js":[1048],"./EditorH6.js":[1049],"./EditorHr.js":[1050],"./EditorImage.js":[1051],"./EditorImages.js":[557],"./EditorIndent.js":[1052],"./EditorInlinecode.js":[1053],"./EditorItalic.js":[1054],"./EditorLineHeight.js":[1055],"./EditorLink.js":[1056],"./EditorMainAite.js":[1567],"./EditorMainAiteDark.js":[1568],"./EditorMainAttachment.js":[1569],"./EditorMainAttachmentDark.js":[1570],"./EditorMainCalendar.js":[1571],"./EditorMainCalendarDark.js":[1572],"./EditorMainClockIn.js":[1573],"./EditorMainClockInDark.js":[1574],"./EditorMainCodeBlock.js":[1575],"./EditorMainCodeBlockDark.js":[1576],"./EditorMainColumnSplitting.js":[1577],"./EditorMainColumnSplittingDark.js":[1578],"./EditorMainDataTableCardView.js":[1579],"./EditorMainDataTableCardViewDark.js":[1580],"./EditorMainDataTableGridView.js":[1581],"./EditorMainDataTableGridViewDark.js":[1582],"./EditorMainDataTableKanbanView.js":[1583],"./EditorMainDataTableKanbanViewDark.js":[1584],"./EditorMainDrawingBoard.js":[1585],"./EditorMainDrawingBoardDark.js":[1586],"./EditorMainEncryptedText.js":[1587],"./EditorMainEncryptedTextDark.js":[1588],"./EditorMainExpression.js":[1589],"./EditorMainExpressionDark.js":[1590],"./EditorMainFiveColumns.js":[1591],"./EditorMainFiveColumnsDark.js":[1592],"./EditorMainFlowchart.js":[1593],"./EditorMainFlowchartDark.js":[1594],"./EditorMainFoldingBlock.js":[1595],"./EditorMainFoldingBlockDark.js":[1596],"./EditorMainFormula.js":[1597],"./EditorMainFormulaDark.js":[1598],"./EditorMainFourColumns.js":[1599],"./EditorMainFourColumnsDark.js":[1600],"./EditorMainHighlightBlock.js":[1601],"./EditorMainHighlightBlockDark.js":[1602],"./EditorMainImage.js":[1603],"./EditorMainImageDark.js":[1604],"./EditorMainImages.js":[1605],"./EditorMainImagesDark.js":[1606],"./EditorMainInlineCode.js":[1607],"./EditorMainInlineCodeDark.js":[1608],"./EditorMainLink.js":[1609],"./EditorMainLinkDark.js":[1610],"./EditorMainLocalAudio.js":[1611],"./EditorMainLocalAudioDark.js":[1612],"./EditorMainLocalFile.js":[1613],"./EditorMainLocalFileDark.js":[1614],"./EditorMainLocalVideo.js":[1615],"./EditorMainLocalVideoDark.js":[1616],"./EditorMainMindMap.js":[1617],"./EditorMainMindMapDark.js":[1618],"./EditorMainOrderedList.js":[1619],"./EditorMainOrderedListDark.js":[1620],"./EditorMainReference.js":[1621],"./EditorMainReferenceDark.js":[1622],"./EditorMainSixColumns.js":[1623],"./EditorMainSixColumnsDark.js":[1624],"./EditorMainSplitLine.js":[1625],"./EditorMainSplitLineDark.js":[1626],"./EditorMainStatus.js":[1627],"./EditorMainStatusDark.js":[1628],"./EditorMainTable.js":[1629],"./EditorMainTableDark.js":[1630],"./EditorMainTaskList.js":[1631],"./EditorMainTaskListDark.js":[1632],"./EditorMainTextDrawing.js":[1633],"./EditorMainTextDrawingDark.js":[1634],"./EditorMainThreeColumns.js":[1635],"./EditorMainThreeColumnsDark.js":[1636],"./EditorMainTitle1.js":[1637],"./EditorMainTitle1Dark.js":[1638],"./EditorMainTitle2.js":[1639],"./EditorMainTitle2Dark.js":[1640],"./EditorMainTitle3.js":[1641],"./EditorMainTitle3Dark.js":[1642],"./EditorMainTitle4.js":[1643],"./EditorMainTitle4Dark.js":[1644],"./EditorMainTitle5.js":[1645],"./EditorMainTitle5Dark.js":[1646],"./EditorMainTitle6.js":[1647],"./EditorMainTitle6Dark.js":[1648],"./EditorMainUml.js":[1649],"./EditorMainUmlDark.js":[1650],"./EditorMainUnorderedList.js":[1651],"./EditorMainUnorderedListDark.js":[1652],"./EditorMainVote.js":[1653],"./EditorMainVoteDark.js":[1654],"./EditorMainYuqueContent.js":[1655],"./EditorMainYuqueContentDark.js":[1656],"./EditorMath.js":[1057],"./EditorMention.js":[1426],"./EditorMergeCell.js":[1058],"./EditorOpenLibrary.js":[1059],"./EditorOpenSearchpanel.js":[1060],"./EditorOpenTranslatepanel.js":[1061],"./EditorOption.js":[1062],"./EditorOrderedList.js":[1063],"./EditorOutdent.js":[1064],"./EditorParagraph.js":[1065],"./EditorPaste.js":[1066],"./EditorPasteText.js":[1067],"./EditorPasteplaintext.js":[1068],"./EditorPick.js":[1250],"./EditorQuote.js":[1069],"./EditorRedo.js":[1070],"./EditorSave.js":[1071],"./EditorShortcut.js":[770],"./EditorStrikethrough.js":[1072],"./EditorSub.js":[1073],"./EditorSup.js":[1074],"./EditorTable.js":[1075],"./EditorTaskList.js":[1076],"./EditorToggleBorder.js":[1077],"./EditorUnderline.js":[1078],"./EditorUndo.js":[1079],"./EditorUnorderedList.js":[1080],"./EditorVerticalAlignBottom.js":[1081],"./EditorVerticalAlignMiddle.js":[1082],"./EditorVerticalAlignTop.js":[1083],"./EllipsisOutlined.js":[936],"./Email.js":[771],"./EnSpacepaymentBusiness.js":[1251],"./English.js":[772],"./Enter.js":[977],"./Exclamationcircle.js":[1660],"./Exclamationcirclefilled.js":[696],"./Expand.js":[1427],"./ExpandOutline.js":[1428],"./ExpireBook.js":[1332],"./ExpireDoc.js":[773],"./ExpireMember.js":[774],"./ExpireResource.js":[775],"./ExportX.js":[1429],"./ExternalContacts.js":[1675],"./Failed.js":[1276],"./Feather.js":[1175],"./FeatherColor.js":[1430],"./FeatherOutlined.js":[1333],"./FeatureGuideClose.js":[1431],"./FileAi.js":[1100],"./FileAiDark.js":[1101],"./FileAudio.js":[1102],"./FileAudioDark.js":[1103],"./FileAxure.js":[1104],"./FileAxureDark.js":[1105],"./FileDefault.js":[1106],"./FileDefaultDark.js":[1107],"./FileDoc.js":[1108],"./FileDocDark.js":[1109],"./FileExcel.js":[1110],"./FileExcelDark.js":[1111],"./FileFolder.js":[1112],"./FileFolderDark.js":[1113],"./FileGraffle.js":[1114],"./FileGraffleDark.js":[1115],"./FileImage.js":[1116],"./FileImageDark.js":[1117],"./FileKeynote.js":[1118],"./FileKeynoteDark.js":[1119],"./FileMindmap.js":[1120],"./FileMindmapDark.js":[1121],"./FileMindnode.js":[1122],"./FileMindnodeDark.js":[1123],"./FileNumbers.js":[1124],"./FileNumbersDark.js":[1125],"./FilePdf.js":[1126],"./FilePdfDark.js":[1127],"./FilePpt.js":[1128],"./FilePptDark.js":[1129],"./FilePsd.js":[1130],"./FilePsdDark.js":[1131],"./FileRar.js":[1132],"./FileRarDark.js":[1133],"./FileSheet.js":[1134],"./FileSheetDark.js":[1135],"./FileSketch.js":[1136],"./FileSketchDark.js":[1137],"./FileTxt.js":[1138],"./FileTxtDark.js":[1139],"./FileVideo.js":[1140],"./FileVideoDark.js":[1141],"./FileWord.js":[1142],"./FileWordDark.js":[1143],"./FileXmind.js":[1144],"./FileXmindDark.js":[1145],"./Filter.js":[776],"./Fold.js":[1533],"./FoldTwo.js":[978],"./FoldingOutline.js":[1432],"./Functionboard.js":[777],"./GiftBox.js":[1277],"./Grain.js":[1278],"./Grid.js":[1334],"./GroupCreatePublication.js":[1534],"./GroupEmpty.js":[1373],"./GroupType.js":[1222],"./GroupTypeCommerce.js":[1223],"./GroupTypeDark.js":[1224],"./GroupTypeDefault.js":[1225],"./GroupTypeDefaultDark.js":[1226],"./GroupTypeDepartment.js":[1227],"./GroupTypeDepartmentDark.js":[1228],"./GroupTypeInterest.js":[1229],"./GroupTypeInterestDark.js":[1230],"./GroupTypeOfficialDoc.js":[1231],"./GroupTypeProject.js":[1232],"./GroupTypeProjectDark.js":[1233],"./GroupTypePublication.js":[1374],"./H5Comment.js":[1433],"./H5DocEdit.js":[1434],"./H5DocPublish.js":[1435],"./H5NoteAdd.js":[1436],"./H5Outline.js":[1084],"./H5SocialShare.js":[1437],"./Help.js":[778],"./HelpSearch.js":[1438],"./Helpdoc.js":[1335],"./Hide.js":[1439],"./High.js":[1199],"./HistoryDelete.js":[1440],"./Home.js":[594],"./HomepageArrowRight.js":[979],"./Hot.js":[779],"./Hotkey.js":[780],"./IconActiveMembers.js":[1375],"./IconAddLight.js":[1441],"./IconAddTo.js":[1189],"./IconAnnexCard.js":[1279],"./IconApproval.js":[1442],"./IconAuthorize.js":[1336],"./IconBank.js":[1553],"./IconBankcard.js":[1153],"./IconBill.js":[1337],"./IconBold.js":[1308],"./IconBookGroup.js":[1376],"./IconCancelMini.js":[1309],"./IconCancellink.js":[1443],"./IconChain.js":[1377],"./IconCheck.js":[1154],"./IconCheckbox.js":[1310],"./IconChecked.js":[1444],"./IconCollaboratorlist.js":[1445],"./IconCollect.js":[1446],"./IconCollected.js":[1190],"./IconComputerlogin.js":[1661],"./IconCooperation.js":[1280],"./IconCustom.js":[1378],"./IconCustomerservice.js":[1447],"./IconDarkCard.js":[1281],"./IconData.js":[1282],"./IconDataflow.js":[1155],"./IconDelete.js":[1448],"./IconDeleteDesk.js":[1311],"./IconDeleteMini.js":[1312],"./IconDeletehistoryMini.js":[1313],"./IconDeleteovalMini.js":[1314],"./IconDesktop.js":[781],"./IconDing.js":[1554],"./IconDiscuss.js":[1200],"./IconDiscuz.js":[1379],"./IconDisorder.js":[1315],"./IconDocument1.js":[1156],"./IconDocumentCard.js":[1283],"./IconDocumentmanagement.js":[1338],"./IconDone.js":[1157],"./IconDown.js":[782],"./IconEmail.js":[1555],"./IconEmpty.js":[1201],"./IconExcelGray.js":[1146],"./IconExcelGrayDark.js":[1147],"./IconExcelGreen.js":[1148],"./IconExcelGreenDark.js":[1149],"./IconFold.js":[1316],"./IconFunction.js":[1284],"./IconGarden.js":[1191],"./IconGarden1.js":[1285],"./IconGuide.js":[1380],"./IconHide.js":[1449],"./IconHomepagelight.js":[1450],"./IconHomepagenormal.js":[1451],"./IconHotBook.js":[1381],"./IconHotDoc.js":[1382],"./IconHotThread.js":[1383],"./IconInternetpublic.js":[1286],"./IconIntroductionbook.js":[1202],"./IconIntroductioncheck.js":[1452],"./IconIntroductionpublicarea.js":[1203],"./IconIntroductionspace.js":[1204],"./IconIntroductionteam.js":[1205],"./IconKey.js":[1453],"./IconKey2.js":[783],"./IconKnowledgebaseCard.js":[1287],"./IconLable.js":[1317],"./IconLeft.js":[1454],"./IconLimits.js":[1455],"./IconLink.js":[784],"./IconListmoreMini.js":[1318],"./IconLoadingDesk.js":[266],"./IconLoadingGreen.js":[1158],"./IconLock.js":[785],"./IconManage.js":[1288],"./IconMember.js":[1159],"./IconMember2.js":[1160],"./IconMemberen.js":[1252],"./IconMemberinformation.js":[1339],"./IconMembernew.js":[1253],"./IconMobile.js":[786],"./IconMorenavMini.js":[1319],"./IconOcr.js":[1456],"./IconOfficialwebsite.js":[1457],"./IconOrganization.js":[1384],"./IconOtherchannels.js":[1206],"./IconPaddy.js":[1340],"./IconPaidspace.js":[1289],"./IconPaidspacelable.js":[1254],"./IconPersonalmember.js":[1290],"./IconPersonalmemberEn.js":[1255],"./IconPersonalmemberlable.js":[1256],"./IconPhone.js":[1458],"./IconPhonelogin.js":[1662],"./IconPic.js":[1320],"./IconPublic.js":[1663],"./IconPublicwelfare.js":[1207],"./IconQrcode.js":[1161],"./IconQrcode2.js":[1459],"./IconRange.js":[787],"./IconRecoverMini.js":[1321],"./IconReduceDisable.js":[1460],"./IconRefresh.js":[788],"./IconResourceCopy.js":[1461],"./IconResourceMove.js":[1462],"./IconResourceRemove.js":[1463],"./IconResourceUpload.js":[1464],"./IconResourceUploadFolder.js":[1465],"./IconRight.js":[1466],"./IconSafe.js":[1291],"./IconSafeCard.js":[1292],"./IconSafesetting.js":[1341],"./IconSearchDesk.js":[1322],"./IconSearchMini.js":[1323],"./IconSearchPrivate.js":[1467],"./IconSearchgreyMini.js":[1324],"./IconSecuritylog.js":[1342],"./IconSelect.js":[1468],"./IconSelected.js":[1192],"./IconSelectedDesk.js":[1325],"./IconSelectedMini.js":[1326],"./IconShow.js":[1469],"./IconSpacepaymentEn.js":[1257],"./IconSpeaker.js":[1385],"./IconTeam.js":[1162],"./IconTeambition.js":[1556],"./IconToken.js":[1343],"./IconTop.js":[1208],"./IconUnfold.js":[1470],"./IconUnfoldmini.js":[1327],"./IconUpdate.js":[1293],"./IconUpdatelog.js":[1471],"./IconVerify.js":[1472],"./IconVote.js":[1209],"./IconWechat.js":[1557],"./IconWeekly.js":[1210],"./IconZhi.js":[1558],"./IconZhifubao.js":[1559],"./IconZoomer.js":[1386],"./Idea.js":[1676],"./IllstratorDynamic.js":[1234],"./Import.js":[1535],"./ImportX.js":[1473],"./IndexBook.js":[789],"./IndexComment.js":[790],"./IndexDoc.js":[791],"./IndexMac.js":[1560],"./IndexMobile.js":[1163],"./IndexNote.js":[792],"./IndexPc.js":[1164],"./IndexPeople.js":[793],"./IndexTodoList.js":[794],"./IndexWindows.js":[1561],"./Info.js":[1664],"./Infocirclefilled.js":[697],"./Information.js":[1665],"./InsertDoc.js":[937],"./InstallDesktop.js":[795],"./KanbanView.js":[950],"./Knowledge.js":[1536],"./KnowledgeBase.js":[1537],"./KnowledgeBaseHome.js":[1538],"./KnowledgeList.js":[1387],"./KnowledgeNetwork.js":[1088],"./KnowledgeNetworkDark.js":[1089],"./LeftArrow.js":[980],"./Light.js":[796],"./LightOutlined.js":[797],"./Like.js":[1474],"./LikeBubble.js":[1475],"./LikeBubbleActive.js":[1294],"./LikeSmallAfter.js":[1295],"./LikeSmallBefore.js":[1296],"./LineChildTask.js":[1677],"./LineData.js":[798],"./LineDynamic.js":[1678],"./LineFramework.js":[799],"./LineHonor.js":[800],"./LineTag.js":[801],"./Link.js":[802],"./LinkcardBook.js":[558],"./LinkcardBookDark.js":[559],"./LinkcardDatabase.js":[420],"./LinkcardDatabaseDark.js":[421],"./LinkcardDoc.js":[422],"./LinkcardDocDark.js":[423],"./LinkcardGroup.js":[560],"./LinkcardGroupDark.js":[561],"./LinkcardMindDark.js":[424],"./LinkcardMindnote.js":[425],"./LinkcardResource.js":[562],"./LinkcardResourceDark.js":[563],"./LinkcardSheet.js":[564],"./LinkcardSheetDark.js":[565],"./LinkcardTopic.js":[566],"./LinkcardTopicDark.js":[567],"./LinkcardXiaoji.js":[568],"./LinkcardXiaojiDark.js":[569],"./List.js":[1476],"./ListStyle.js":[1539],"./LocalBook.js":[803],"./LogoBilibili.js":[1562],"./LogoWeibo.js":[1563],"./LogoWeixin.js":[1564],"./LogoZhihu.js":[1565],"./Logout.js":[1477],"./Low.js":[1211],"./LowDark.js":[1679],"./LowerLevel.js":[804],"./LowerRightCorner.js":[981],"./MNotificationArrow.js":[982],"./Medium.js":[1212],"./MediumDark.js":[1680],"./Meh.js":[805],"./Member.js":[806],"./MemberBigLevel1.js":[1259],"./MemberBigLevel1Alibaba.js":[1260],"./MemberBigLevel1AlibabaGray.js":[1261],"./MemberBigLevelBordered.js":[1258],"./MemberDesc1.js":[727],"./MemberDesc2.js":[728],"./MemberDesc3.js":[729],"./MemberDesc4.js":[730],"./MemberDesc5.js":[731],"./MemberExpiredLevel1.js":[1262],"./MemberLevel1.js":[1263],"./Membership.js":[1264],"./MembershipExpired.js":[1265],"./MiniDropdown.js":[1540],"./MiniEditorShortcut.js":[807],"./Minus.js":[1478],"./More.js":[808],"./MoreAction.js":[938],"./MoreCircle.js":[809],"./MoreHorizontal.js":[810],"./MoreSettings.js":[1541],"./MoreVertical.js":[811],"./Moresetting.js":[812],"./MoveBottom.js":[1479],"./MoveTop.js":[1480],"./NavBell.js":[1344],"./NavBook1.js":[1345],"./NavBook2.js":[1176],"./NavBuildarea.js":[1481],"./NavClock.js":[813],"./NavDay.js":[1482],"./NavEnglish.js":[1483],"./NavFold.js":[1484],"./NavGarden1.js":[1346],"./NavGarden2.js":[1178],"./NavGardenColor.js":[1177],"./NavInvite.js":[814],"./NavMenu.js":[1347],"./NavMessage1.js":[1348],"./NavMessage2.js":[1179],"./NavNight.js":[1485],"./NavOpen.js":[1486],"./NavPublic1.js":[1349],"./NavPublic2.js":[1180],"./NavSearch.js":[1487],"./NavSearch1.js":[1350],"./NavSearch2.js":[1181],"./NavStar1.js":[1351],"./NavStar2.js":[1182],"./NavStencil1.js":[1352],"./NavStencil2.js":[1183],"./NavTeam1.js":[1353],"./NavTeam2.js":[1184],"./NavWiki.js":[1185],"./NewEllipsis.js":[815],"./NewTabOutlined.js":[1488],"./NewbookDefault.js":[1297],"./NewbookDefaultDark.js":[1298],"./NewdocDefault.js":[1299],"./NewdocDefaultDark.js":[1300],"./Newtrash.js":[1193],"./NewtrashOutlined.js":[1489],"./NextPage.js":[983],"./NoDynamic.js":[1681],"./NoInCatalog.js":[1542],"./NoPriority.js":[1213],"./NoSidebar.js":[1682],"./NopinOutlined.js":[1490],"./Note.js":[816],"./NoteCollapse.js":[939],"./NoteExpand.js":[940],"./NoteMobile.js":[817],"./NoteSwap.js":[1491],"./NoteTag.js":[818],"./Order.js":[1492],"./OrgAddNew.js":[1493],"./OrgAddNew2.js":[1494],"./OrgBuyTips.js":[1388],"./OrgDashboardAdmin.js":[819],"./OrgDashboardCashier.js":[820],"./OrgDashboardEdit.js":[1495],"./OrgDashboardQuestion.js":[821],"./OrgDashboardStatistics.js":[1354],"./OrgDashboardTraffic.js":[1355],"./Original.js":[1266],"./Outline.js":[1543],"./Passed.js":[1301],"./Pay.js":[1085],"./PencilOutlined.js":[1496],"./PencilUnderscore.js":[941],"./Permission.js":[1544],"./PermissionIntranet.js":[1165],"./PermissionIntranetAll.js":[1166],"./PermissionPrivate.js":[698],"./PermissionPrivateBook.js":[1167],"./PermissionPublic.js":[1168],"./Phone.js":[822],"./Pin.js":[1194],"./PinOutlined.js":[1497],"./Pinned.js":[942],"./Play.js":[1498],"./Plus.js":[943],"./Pluscircle.js":[1499],"./Pluscirclefilled.js":[1195],"./Premium.js":[1389],"./Present.js":[823],"./Preview.js":[1500],"./PreviousPage.js":[984],"./Profile.js":[824],"./Progress.js":[1214],"./Promo.js":[825],"./PublishLoadingIcon.js":[1666],"./PublishSend.js":[1169],"./Question.js":[1667],"./Question2.js":[826],"./Questioncirclefilled.js":[596],"./RecentEdit.js":[827],"./RemoveDirectories.js":[1545],"./Removenav.js":[1501],"./Rename.js":[1546],"./Report.js":[1668],"./Rescinded.js":[1302],"./Review.js":[1090],"./ReviewAccept.js":[1502],"./ReviewArrowDown.js":[985],"./ReviewArrowRight.js":[986],"./ReviewArrowUp.js":[987],"./ReviewCancel.js":[1669],"./ReviewDark.js":[1091],"./ReviewFinish.js":[1670],"./ReviewHistory.js":[988],"./ReviewReject.js":[1503],"./ReviewStart.js":[1671],"./ReviewStartActive.js":[1672],"./ReviewStatus.js":[1170],"./RightArrow.js":[989],"./Rightboard.js":[828],"./Safe.js":[1267],"./SaveAsTemplate.js":[829],"./Saveastemplate2.js":[1504],"./SceneReview.js":[1303],"./SceneSendMail.js":[1304],"./SceneTranslate.js":[1305],"./SearchIcon.js":[1505],"./SecurityAlipay.js":[1390],"./SecurityDjcp.js":[1391],"./SecurityIso.js":[1392],"./SendMail.js":[830],"./Sendemail.js":[1092],"./SendemailDark.js":[1093],"./Setting.js":[1506],"./Setting1.js":[1507],"./Share.js":[831],"./ShareDingtalkIcon.js":[1566],"./ShareLink.js":[1171],"./Sidebar.js":[1683],"./SignOut.js":[1508],"./SiteTip.js":[832],"./SkylinkIcon.js":[1356],"./SpacepaymentBusiness.js":[1268],"./SpacepaymentPro.js":[1269],"./Star.js":[1196],"./StarOutlined.js":[1509],"./Statistics.js":[1094],"./StatisticsBook.js":[1235],"./StatisticsContribution.js":[1236],"./StatisticsDark.js":[1095],"./StatisticsGrain.js":[1237],"./StatisticsGroup.js":[1238],"./StatisticsLike.js":[1239],"./StatisticsMember.js":[1240],"./StatisticsWatch.js":[1241],"./Submit.js":[944],"./Success.js":[1215],"./SwipOutlined.js":[1510],"./Sync.js":[833],"./SyncError.js":[834],"./TabDigitalgarden.js":[732],"./TabDigitalgardenActive.js":[733],"./Table.js":[951],"./TableView.js":[952],"./Tag.js":[1172],"./TagPinned.js":[945],"./Task.js":[1684],"./TaskData.js":[1242],"./TaskDataDark.js":[1243],"./Taskgroup.js":[1685],"./Tasklist.js":[1686],"./Team.js":[631],"./TeamTaskgroup.js":[1687],"./TemplateCenter.js":[1306],"./TemplateCenterDark.js":[1307],"./Theme.js":[851],"./ThreadArchive.js":[1673],"./ThreadH5HomeMenu.js":[1511],"./ThreadHomeList.js":[835],"./ThreadHomeRecent.js":[836],"./ThreadMainPost.js":[1393],"./ThreadReaction.js":[1512],"./ThreadReply.js":[1513],"./ThreadSchedule.js":[1514],"./ThreadUserDockerClose.js":[1515],"./ThreadUserPosts.js":[837],"./Time.js":[1186],"./TimeOutlined.js":[1357],"./ToDashboard.js":[1358],"./ToipicBaiyanBug.js":[838],"./Topic.js":[1394],"./TopicData.js":[1244],"./TopicDataDark.js":[1245],"./Translation.js":[1096],"./TranslationDark.js":[1097],"./TrashGrid.js":[1516],"./Unlink.js":[1547],"./Unlock.js":[839],"./Unsafe.js":[1270],"./UpArrow.js":[990],"./Upcircle.js":[991],"./Update.js":[1173],"./Upload.js":[1517],"./Urgent.js":[1216],"./User.js":[595],"./UserBook.js":[840],"./UserBriefcase.js":[841],"./UserDepartment.js":[842],"./UserDepartmentOpa.js":[843],"./UserEmail.js":[844],"./UserFill.js":[845],"./UserJob.js":[846],"./UserLocation.js":[847],"./UserLocationLine.js":[848],"./UserMember.js":[1271],"./UserMemberActive.js":[1272],"./UserMobile.js":[849],"./Video.js":[850],"./Warning.js":[1217],"./WarningRed.js":[1218],"./WebappAdd.js":[953],"./WebappExplore.js":[954],"./WebappExploreActive.js":[955],"./WebappHome.js":[956],"./WebappHomeActive.js":[957],"./WebappNewbie.js":[1518],"./WebappNote.js":[958],"./WebappNoteActive.js":[959],"./WebappNotification.js":[960],"./WebappNotificationActive.js":[961],"./WebappPlus.js":[1519],"./WebappProfile.js":[962],"./WebappProfileActive.js":[963],"./WebappSearch.js":[1520],"./WelfareDisable.js":[1273],"./WelfareNormal.js":[1274],"./Width.js":[1098],"./WidthDark.js":[1099],"./Wiki.js":[1359],"./Workbench.js":[1548],"./Yuque.js":[1549],"./index.js":[4529,80]};function o(e){if(!r.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return Promise.all(t.slice(1).map(r.e)).then((function(){return r(o)}))}o.keys=function(){return Object.keys(n)},o.id=4037,e.exports=o},4043:function(e,t,r){"use strict";r.d(t,"a",(function(){return Y}));r(113);var n=r(35),o=r(0),a=r.n(o),i=r(8),c=r.n(i),u=r(34),l=r(62),s="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function f(e,t,r,n){e.addEventListener?e.addEventListener(t,r,n):e.attachEvent&&e.attachEvent("on".concat(t),(function(){r(window.event)}))}function d(e,t){for(var r=t.slice(0,t.length-1),n=0;n<r.length;n++)r[n]=e[r[n].toLowerCase()];return r}function p(e){"string"!=typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),r=t.lastIndexOf("");r>=0;)t[r-1]+=",",t.splice(r,1),r=t.lastIndexOf("");return t}for(var h={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":s?173:189,"=":s?61:187,";":s?59:186,"'":222,"[":219,"]":221,"\\":220},m={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},y={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},v={16:!1,18:!1,17:!1,91:!1},g={},b=1;b<20;b++)h["f".concat(b)]=111+b;var _=[],w=!1,j="all",E=[],O=function(e){return h[e.toLowerCase()]||m[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function S(e){j=e||"all"}function x(){return j||"all"}var k=function(e){var t=e.key,r=e.scope,n=e.method,o=e.splitKey,a=void 0===o?"+":o;p(t).forEach((function(e){var t=e.split(a),o=t.length,i=t[o-1],c="*"===i?"*":O(i);if(g[c]){r||(r=x());var u=o>1?d(m,t):[];g[c]=g[c].filter((function(e){return!((!n||e.method===n)&&e.scope===r&&function(e,t){for(var r=e.length>=t.length?e:t,n=e.length>=t.length?t:e,o=!0,a=0;a<r.length;a++)-1===n.indexOf(r[a])&&(o=!1);return o}(e.mods,u))}))}}))};function T(e,t,r,n){var o;if(t.element===n&&(t.scope===r||"all"===t.scope)){for(var a in o=t.mods.length>0,v)Object.prototype.hasOwnProperty.call(v,a)&&(!v[a]&&t.mods.indexOf(+a)>-1||v[a]&&-1===t.mods.indexOf(+a))&&(o=!1);(0!==t.mods.length||v[16]||v[18]||v[17]||v[91])&&!o&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function C(e,t){var r=g["*"],n=e.keyCode||e.which||e.charCode;if(P.filter.call(this,e)){if(93!==n&&224!==n||(n=91),-1===_.indexOf(n)&&229!==n&&_.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(t){var r=y[t];e[t]&&-1===_.indexOf(r)?_.push(r):!e[t]&&_.indexOf(r)>-1?_.splice(_.indexOf(r),1):"metaKey"===t&&e[t]&&3===_.length&&(e.ctrlKey||e.shiftKey||e.altKey||(_=_.slice(_.indexOf(r))))})),n in v){for(var o in v[n]=!0,m)m[o]===n&&(P[o]=!0);if(!r)return}for(var a in v)Object.prototype.hasOwnProperty.call(v,a)&&(v[a]=e[y[a]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===_.indexOf(17)&&_.push(17),-1===_.indexOf(18)&&_.push(18),v[17]=!0,v[18]=!0);var i=x();if(r)for(var c=0;c<r.length;c++)r[c].scope===i&&("keydown"===e.type&&r[c].keydown||"keyup"===e.type&&r[c].keyup)&&T(e,r[c],i,t);if(n in g)for(var u=0;u<g[n].length;u++)if(("keydown"===e.type&&g[n][u].keydown||"keyup"===e.type&&g[n][u].keyup)&&g[n][u].key){for(var l=g[n][u],s=l.splitKey,f=l.key.split(s),d=[],p=0;p<f.length;p++)d.push(O(f[p]));d.sort().join("")===_.sort().join("")&&T(e,l,i,t)}}}function P(e,t,r){_=[];var n=p(e),o=[],a="all",i=document,c=0,u=!1,l=!0,s="+",h=!1;for(void 0===r&&"function"==typeof t&&(r=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(a=t.scope),t.element&&(i=t.element),t.keyup&&(u=t.keyup),void 0!==t.keydown&&(l=t.keydown),void 0!==t.capture&&(h=t.capture),"string"==typeof t.splitKey&&(s=t.splitKey)),"string"==typeof t&&(a=t);c<n.length;c++)o=[],(e=n[c].split(s)).length>1&&(o=d(m,e)),(e="*"===(e=e[e.length-1])?"*":O(e))in g||(g[e]=[]),g[e].push({keyup:u,keydown:l,scope:a,mods:o,shortcut:n[c],method:r,key:n[c],splitKey:s,element:i});void 0!==i&&!function(e){return E.indexOf(e)>-1}(i)&&window&&(E.push(i),f(i,"keydown",(function(e){C(e,i)}),h),w||(w=!0,f(window,"focus",(function(){_=[]}),h)),f(i,"keyup",(function(e){C(e,i),function(e){var t=e.keyCode||e.which||e.charCode,r=_.indexOf(t);if(r>=0&&_.splice(r,1),e.key&&"meta"===e.key.toLowerCase()&&_.splice(0,_.length),93!==t&&224!==t||(t=91),t in v)for(var n in v[t]=!1,m)m[n]===t&&(P[n]=!1)}(e)}),h))}var L={setScope:S,getScope:x,deleteScope:function(e,t){var r,n;for(var o in e||(e=x()),g)if(Object.prototype.hasOwnProperty.call(g,o))for(r=g[o],n=0;n<r.length;)r[n].scope===e?r.splice(n,1):n++;x()===e&&S(t||"all")},getPressedKeyCodes:function(){return _.slice(0)},isPressed:function(e){return"string"==typeof e&&(e=O(e)),-1!==_.indexOf(e)},filter:function(e){var t=e.target||e.srcElement,r=t.tagName,n=!0;return!t.isContentEditable&&("INPUT"!==r&&"TEXTAREA"!==r&&"SELECT"!==r||t.readOnly)||(n=!1),n},trigger:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(g).forEach((function(r){var n=g[r].find((function(r){return r.scope===t&&r.shortcut===e}));n&&n.method&&n.method()}))},unbind:function(e){if(void 0===e)Object.keys(g).forEach((function(e){return delete g[e]}));else if(Array.isArray(e))e.forEach((function(e){e.key&&k(e)}));else if("object"==typeof e)e.key&&k(e);else if("string"==typeof e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=r[0],a=r[1];"function"==typeof o&&(a=o,o=""),k({key:e,scope:o,method:a,splitKey:"+"})}},keyMap:h,modifier:m,modifierMap:y};for(var I in L)Object.prototype.hasOwnProperty.call(L,I)&&(P[I]=L[I]);if("undefined"!=typeof window){var A=window.hotkeys;P.noConflict=function(e){return e&&window.hotkeys===P&&(window.hotkeys=A),P},window.hotkeys=P}P.filter=function(){return!0};var N=function(e,t){var r=e.target,n=r&&r.tagName;return Boolean(n&&t&&t.includes(n))},D=function(e){return N(e,["INPUT","TEXTAREA","SELECT"])};function R(e,t,r,n){r instanceof Array&&(n=r,r=void 0);var a=r||{},i=a.enableOnTags,c=a.filter,u=a.keyup,l=a.keydown,s=a.filterPreventDefault,f=void 0===s||s,d=a.enabled,p=void 0===d||d,h=a.enableOnContentEditable,m=void 0!==h&&h,y=Object(o.useRef)(null),v=Object(o.useCallback)((function(e,r){var n,o;return c&&!c(e)?!f:!!(D(e)&&!N(e,i)||null!=(n=e.target)&&n.isContentEditable&&!m)||!!(null===y.current||document.activeElement===y.current||null!=(o=y.current)&&o.contains(document.activeElement))&&(t(e,r),!0)}),n?[y,i,c].concat(n):[y,i,c]);return Object(o.useEffect)((function(){if(p)return u&&!0!==l&&(r.keydown=!1),P(e,r||{},v),function(){return P.unbind(e,v)};P.unbind(e,v)}),[v,e,p]),y}P.isPressed;function M(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[1],a=t.slice(2);return R.apply(void 0,[n,function(){var e;null!==(e=document.activeElement)&&void 0!==e&&e.closest('[contenteditable="true"]')||o.apply(void 0,arguments)}].concat(M(a)))}var U=r(213),B=r(3856),z=r(42),W={present:"index-module_present_RJR62",badge:"index-module_badge_oAZ5w",btn:"index-module_btn_nQfFi",badgeDot:"index-module_badgeDot_bduY4",dot_breathe:"index-module_dot_breathe_vfzeN",tooltip:"index-module_tooltip_-a6S+",scaleGuide:"index-module_scaleGuide_mHEzN",recentEditGuide:"index-module_recentEditGuide_VfSe+",guideClose:"index-module_guideClose_zdMKD",guideImg:"index-module_guideImg_o4XNr",guideText:"index-module_guideText_qYtoP"};function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var K={overlayClassName:W.tooltip,placement:"bottom",title:a.a.createElement(a.a.Fragment,null,__("演示")+__("：")+__("P")),trigger:["hover"]};function $(e){var t=e.doc,r=e.onPresent;function o(e){e.preventDefault(),"Doc"===t.type&&"function"==typeof r&&r()}return G(u.ua.macos?"⌘+shift+p,p":"ctrl+shift+p,p",o),a.a.createElement(n.a,K,a.a.createElement("button",{type:"button","data-aspm-click":"d129827",id:"present-btn","data-testid":"present-btn",className:W.btn,onClick:o},a.a.createElement(z.b,{name:"present",width:20,height:20})))}function H(e){var t=e.doc,r=e.onPresent;function o(e){e.preventDefault(),"Doc"===t.type&&"function"==typeof r&&r()}return G(u.ua.macos?"⌘+shift+p,p":"ctrl+shift+p,p",o),a.a.createElement(n.a,K,a.a.createElement("button",{type:"button","data-aspm-click":"d129827",id:"present-btn","data-testid":"present-btn",className:W.btn,onClick:o},a.a.createElement(z.b,{name:"present",width:20,height:20})))}$.propTypes={doc:c.a.object.isRequired,onPresent:c.a.func.isRequired},H.propTypes=$.propTypes;var Y=function(e){var t=e.doc,r=e.button,n=V(Object(o.useState)(!1),2),i=n[0],c=n[1],u=Object(o.useCallback)((function(){c(!1)}),[]),s=Object(o.useCallback)((function(){var e;c(!0),(e=document.body).requestFullScreen=e.requestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen,e.requestFullScreen&&e.requestFullScreen()}),[]),f=Object(l.useLocation)().hash,d=a.a.useMemo((function(){return f.slice(1)}),[f]);return a.a.createElement("div",{className:W.present},a.a.createElement(r,{doc:t,onPresent:s}),i&&a.a.createElement(B.b,{headingId:d,doc:t,onCancel:u}))};Y.propTypes={doc:c.a.object.isRequired,button:c.a.elementType.isRequired};var Z=function(e){var t=e.doc;return a.a.createElement(U.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.a.createElement(Y,{doc:t,button:$})}},a.a.createElement(Y,{doc:t,button:H}))};Z.propTypes={doc:c.a.object.isRequired},Z.displayName="ExposedPresentButton";t.b=Z},4101:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return se}));r(95);var n=r(49),o=(r(2821),r(2822)),a=(r(113),r(35)),i=r(0),c=r.n(i),u=r(13),l=r.n(u),s=r(300),f=r(2447),d=r(342),p=r(2018),h=r(4402),m={statisticHead:"style-module_statisticHead_M8b22",interactHead:"style-module_interactHead_aw+2s",statisticBody:"style-module_statisticBody_1ft2Y",interactBody:"style-module_interactBody_V1bDl",basicInfo:"style-module_basicInfo_wa0uq",row2Col2Item:"style-module_row2Col2Item_qtrTw",row2Col2Clickable:"style-module_row2Col2Clickable_ZlaMW",rightArrow:"style-module_rightArrow_6Rftv",name:"style-module_name_IyunN",value:"style-module_value_NDE+i",authorInfo:"style-module_authorInfo_UtZn1",row2Col1Item:"style-module_row2Col1Item_ECpAN",creatorName:"style-module_creatorName_-uWSQ",longValueItem:"style-module_longValueItem_Q6CK9",infoValueWrapper:"style-module_infoValueWrapper_+ZcEA",infoItemValue:"style-module_infoItemValue_DV6Qa",interactInfo:"style-module_interactInfo_UwF70",row1Col4Item:"style-module_row1Col4Item_ay5bD",row1Col4Clickable:"style-module_row1Col4Clickable_20wcl",active:"style-module_active_AN7V9",pv:"style-module_pv_VqoM8",uv:"style-module_uv_4GFCm",iconWrapper:"style-module_iconWrapper_vYWpL",downloadAreaIcon:"style-module_downloadAreaIcon_tXk4f",tipIcon:"style-module_tipIcon_aQ3h4",userListContainer:"style-module_userListContainer_BPEvb",userColumnListWrapper:"style-module_userColumnListWrapper_vogM8",empty:"style-module_empty_KEDVQ",userColumnList:"style-module_userColumnList_RFhhE",userItem:"style-module_userItem_g7TOe",userItemLeft:"style-module_userItemLeft_zhOUj",userItemName:"style-module_userItemName_8FJg8",userTagList:"style-module_userTagList_ES-d5",tag:"style-module_tag_Cxaqq",commentTag:"style-module_commentTag_3E6h-",likeTag:"style-module_likeTag_xe+8Z",frequentVisitTag:"style-module_frequentVisitTag_x1wae",paginationWrapper:"style-module_paginationWrapper_j7srn",downloadWrapper:"style-module_downloadWrapper_bD0zM",download:"style-module_download_U1-mK",downloadTxt:"style-module_downloadTxt_FH9kd",hidden:"style-module_hidden_1hAWE"},y=r(555),v=r(143),g=r.n(v),b=r(2756),_=r.n(b),w=r(151),j=r.n(w),E=r(2825),O=r(2826),S=r(2827),x=function(){return function(e,t,r){if(window.__engine&&window.__engine.execCommand)return window.__engine[e](t,r)}("queryCommandValue","wordCount")},k=r(4036),T=["creator","contributors","last_editor"],C=["creator","contributors","last_editor"];function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function L(){L=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==P(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function I(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function A(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){I(a,n,o,i,c,"next",e)}function c(e){I(a,n,o,i,c,"throw",e)}i(void 0)}))}}function N(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==P(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===P(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z=4;var W=r(4398),V=(r(61),r(23)),q=r(1778),K=r(3728),$=r.n(K);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function Y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==H(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===H(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function J(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Z(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(){}function te(e){var t=e.name,r=e.value,n=e.clickable,o=e.onClick,a=void 0===o?ee:o;return c.a.createElement("div",{className:l()(m.row2Col2Item,J({},m.row2Col2Clickable,n)),onClick:a},c.a.createElement("div",null,c.a.createElement("div",{className:m.value},r),c.a.createElement("div",{className:m.name},t)),n&&c.a.createElement(h.a,{name:"ArrowRight",className:m.rightArrow}))}function re(e){var t=e.wordCount,r=e.versionCount,n=e.contentUpdatedAt,o=e.createdAt,a=e.showHistory;e.hide;return c.a.createElement("div",{className:m.basicInfo},c.a.createElement(te,{name:__("字数"),value:t}),c.a.createElement(te,{name:__("历史版本#docStatistic"),value:r>99?"99+":r,clickable:!0,onClick:function(){a("named_version")}}),c.a.createElement(te,{name:__("更新时间#docStatistic"),value:n}),c.a.createElement(te,{name:__("创建时间#docStatistic"),value:o}))}function ne(e){var t=e.name,r=e.value,n=e.suffix,o=Object(W.a)(),i=o.hasEllipsis,u=o.ellipsisDomRef,l=c.a.createElement("div",{className:m.infoValueWrapper},c.a.createElement("div",{ref:u,className:m.infoItemValue},r),c.a.createElement("div",null,n));return c.a.createElement("div",{className:m.longValueItem},i?c.a.createElement(a.a,{title:r,placement:"bottomRight"},l):l,c.a.createElement("div",{className:m.name},t))}function oe(e){var t=e.name,r=e.value;return c.a.createElement("div",{className:m.row2Col1Item},c.a.createElement("div",{className:m.value},r),c.a.createElement("div",{className:m.name},t))}function ae(e){var t=e.creator,r=e.contributorsStr,n=e.contributorSuffix;return c.a.createElement("div",{className:m.authorInfo},c.a.createElement(oe,{name:c.a.createElement("div",{style:{marginTop:6}},__("创建者")),value:c.a.createElement("div",null,c.a.createElement(p.a,{user:t},c.a.createElement(d.a,{src:t.avatar_url,size:20,name:t.name})),c.a.createElement("span",{className:m.creatorName},t.name))}),c.a.createElement(ne,{name:__("编辑者"),value:r,suffix:n}))}function ie(e){var t,r=e.name,n=e.value,o=e.clickable,a=e.onClick,i=void 0===a?ee:a,u=e.active;return c.a.createElement("div",{className:l()(m.row1Col4Item,(t={},J(t,m.row1Col4Clickable,o),J(t,m.active,u),t)),onClick:i},c.a.createElement("div",{className:m.value},n),c.a.createElement("div",{className:m.name},r))}function ce(e){var t=e.pv,r=e.uv,n=e.commentCount,o=e.likeCount,i=e.setSelectedType,u=e.selectedType;return c.a.createElement("div",{className:m.interactInfo},c.a.createElement(ie,{name:c.a.createElement("div",{className:m.pv},__("总访问次数"),c.a.createElement(a.a,{title:__("去除了编辑者的访问次数")},c.a.createElement("div",{className:m.iconWrapper},c.a.createElement(h.a,{name:"ActionDocInfo",className:m.tipIcon})))),value:t,active:"pv"===u,clickable:!0,onClick:function(){i("pv")}}),c.a.createElement(ie,{name:c.a.createElement("div",{className:m.uv},__("总访问人数"),c.a.createElement(a.a,{title:__("只显示累积到昨日的数据")},c.a.createElement("div",{className:m.iconWrapper},c.a.createElement(h.a,{name:"ActionDocInfo",className:m.tipIcon})))),value:r,active:"uv"===u,clickable:!0,onClick:function(){i("uv")}}),c.a.createElement(ie,{name:__("评论数"),value:n,active:"comment"===u}),c.a.createElement(ie,{name:__("点赞数"),value:o,active:"like"===u}))}function ue(e){var t=e.type;return"comment"===t?c.a.createElement("span",{className:l()(m.tag,m.commentTag)},__("评过")):"like"===t?c.a.createElement("span",{className:l()(m.tag,m.likeTag)},__("赞过")):"frequentVisit"===t?c.a.createElement("span",{className:l()(m.tag,m.frequentVisitTag)},__("常来")):null}function le(e){var t=e.selectedType,r=e.dataSource,n=e.showTag,u=e.showDownload,l=e.tagMaps,f=l.frequentVisitMap,y=l.commentTagMap,v=l.likeTagMap,g=10,b=X(Object(i.useState)([]),2),_=b[0],w=b[1],j=X(Object(i.useState)(1),2),E=j[0],O=j[1],S=r.length;Object(i.useEffect)((function(){var e=r.slice((E-1)*g,E*g);w(e)}),[E,r]);var x=[_.slice(0,5),_.slice(5,g)],k=S>g,T=0===S;return c.a.createElement("div",{className:m.userListContainer},c.a.createElement("div",{className:m.userColumnListWrapper},T?c.a.createElement("p",{className:m.empty},__("暂无数据")):x.map((function(e,t){return c.a.createElement("div",{className:m.userColumnList,key:t},e.map((function(e,t){var r=e.id,o=[{type:"frequentVisit",did:f[r]},{type:"like",did:v[r]},{type:"comment",did:y[r]}];return c.a.createElement("div",{className:m.userItem,key:t},c.a.createElement("div",{className:m.userItemLeft},c.a.createElement(p.a,{user:e},c.a.createElement(d.a,{src:e.avatar_url,size:20,name:e.name})),c.a.createElement("span",{className:m.userItemName},e.name),n?c.a.createElement("span",{className:m.userTagList},o.map((function(e){return e.did?c.a.createElement(ue,{type:e.type}):null}))):null),c.a.createElement(s.a,{time:e.time}))})))}))),c.a.createElement("div",{className:m.paginationWrapper},c.a.createElement("div",{className:m.downloadWrapper},u?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:m.download,onClick:function(){!function(e){var t=e.filename,r=e.dataSource;if(0===r.length)return V.a.warning(__("暂无数据可导出"));var n=r.map((function(e){var t;return Y(t={},__("用户名"),e.name),Y(t,__("时间"),e.time),t})),o=$.a.unparse(n);Object(q.downloadCsvFile)(o,t)}({dataSource:r,filename:"pv"===t?__("访问次数信息"):__("访问人数信息")})}},c.a.createElement(h.a,{name:"Download",className:m.downloadAreaIcon}),c.a.createElement("span",{className:m.downloadTxt},__("下载明细"))),c.a.createElement(a.a,{title:__("仅支持最近1000条数据的查询（包含编辑者访问）")},c.a.createElement("div",{className:m.iconWrapper},c.a.createElement(h.a,{name:"ActionDocInfo",className:m.tipIcon})))):null),k&&c.a.createElement(o.a,{className:m.pagination,size:"small",current:E,total:S,pageSize:g,onChange:function(e){O(e)}})))}function se(e){var t=e.visible,r=e.hide,o=function(){var e=Object(k.b)().showHistory,t=Object(y.f)((function(e){var t=e.doc,r=t.id,n=t.user,o=t.contributors,a=t.last_editor,i=t.hits,c=t.created_at,u=t.content_updated_at,l=t.likes_count,s=t.word_count,f=e.litecomment.comments,d=e.me,p=f.sort((function(e,t){return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()})),h=j()(p,"user.id").map((function(e){var t=e.user,r=e.created_at;return U(U({},t),{},{time:r})}));return{statisticDoc:{id:r,creator:n,contributors:o,last_editor:a,pv:i,created_at:c,content_updated_at:u,likes_count:l,word_count:s,comments_count:f.length},commentUsers:h,me:d}}),(function(e,t){var r=e.statisticDoc,n=r.creator,o=r.contributors,a=r.last_editor,i=F(r,T),c={creatorId:null==n?void 0:n.id,contributorsCount:o.length,lastEditor:null==a?void 0:a.id},u=t.statisticDoc,l=u.creator,s=u.contributors,f=u.last_editor,d=F(u,C),p={creatorId:null==l?void 0:l.id,contributorsCount:s.length,lastEditor:null==f?void 0:f.id};return e.commentUsers.length===t.commentUsers.length&&g()(c,p)&&g()(i,d)})),r=t.statisticDoc,n=t.commentUsers,o=t.me,a=r.id,u=r.contributors,l=r.last_editor,s=r.creator,f=r.pv,d=r.comments_count,p=r.likes_count,h=r.word_count,m=r.content_updated_at,v=r.created_at,b=D(Object(i.useState)(0),2),w=b[0],P=b[1],I=D(Object(i.useState)(0),2),R=I[0],M=I[1],G=D(Object(i.useState)(0),2),B=G[0],W=G[1],V=D(Object(i.useState)([]),2),q=V[0],K=V[1],$=D(Object(i.useState)([]),2),H=$[0],Y=$[1],Z=D(Object(i.useState)([]),2),X=Z[0],Q=Z[1],J=D(Object(i.useState)({frequentVisitMap:{},commentTagMap:{},likeTagMap:{}}),2),ee=J[0],te=J[1],re=D(Object(i.useState)("pv"),2),ne=re[0],oe=re[1],ae=D(Object(i.useState)([]),2),ie=ae[0],ce=ae[1],ue=c.a.useMemo((function(){var e=u.findIndex((function(e){return e.name===l.name})),t=N(u);-1!==e&&t.splice(e,1);var r=t;return r.unshift(l),r.map((function(e){return e.name})).join("、")}),[u,l]),le=u.length>=2?" ".concat(__("{count}人",{count:u.length})):"";return Object(i.useEffect)((function(){function e(){return(e=A(L().mark((function e(){var t;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.find)({doc_id:a,doc_type:"Doc",named:!0,limit:100});case 2:t=e.sent,P(t.length);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return t=A(L().mark((function e(){var t,r,n,o;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,r=[],n=0;case 3:if(!(n<1e3&&t)){e.next=12;break}return e.next=6,Object(O.users)({action_type:"like",target_type:"Doc",target_id:a,limit:200,offset:n},{useOriginResp:!0});case 6:o=e.sent,t=o.meta.hasMore,r=[].concat(N(r),N(o.data.map((function(e){return U(U({},e),{},{time:e.action_created_at})}))));case 9:e.next=3;break;case 12:Q(r);case 13:case"end":return e.stop()}}),e)}))),t.apply(this,arguments)}function r(){return(r=A(L().mark((function e(){var t;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.pvList)({id:a});case 2:t=e.sent,K(t.recentVisitHistory.map((function(e){return U(U({},e.user),{},{time:e.updated_at})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=A(L().mark((function e(){var t;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.uvList)({id:a});case 2:t=e.sent,W(t.uv),Y(t.recentVisitors.map((function(e){return U(U({},e.user),{},{time:e.updated_at})})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){r.apply(this,arguments)}(),function(){n.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[]),Object(i.useEffect)((function(){M(x()||h||0)}),[]),Object(i.useEffect)((function(){"pv"===ne?ce(q):"uv"===ne?ce(H):"comment"===ne?ce(n):"like"===ne&&ce(X)}),[ne,q,H,n,X]),Object(i.useEffect)((function(){var e=_()(q,(function(e){return e.id})),t=Object.keys(e).reduce((function(t,r){return e[r].length>z&&(t[e[r][0].id]=!0),t}),{});delete t[o.id],te(U(U({},ee),{},{frequentVisitMap:t}))}),[q]),Object(i.useEffect)((function(){var e=X.reduce((function(e,t){return e[t.id]=!0,e}),{});te(U(U({},ee),{},{likeTagMap:e}))}),[X]),Object(i.useEffect)((function(){var e=n.reduce((function(e,t){return e[t.id]=!0,e}),{});te(U(U({},ee),{},{commentTagMap:e}))}),[n]),{wordCount:R,versionCount:w,contributorsStr:ue,contributorSuffix:le,contentUpdatedAt:m,createdAt:v,pv:f,uv:B,commentCount:d,likeCount:p,userListDataSource:ie,setUserListDataSource:ce,creator:s,selectedType:ne,setSelectedType:oe,tagMaps:ee,showHistory:e}}(),a=o.wordCount,u=o.versionCount,l=o.contributorsStr,s=o.contributorSuffix,d=o.createdAt,p=o.contentUpdatedAt,h=o.creator,v=o.pv,b=o.uv,w=o.commentCount,P=o.likeCount,I=o.userListDataSource,R=o.selectedType,M=o.tagMaps,G=o.setSelectedType,B=o.showHistory,W={wordCount:a,versionCount:u,contentUpdatedAt:f.default.format(p),createdAt:f.default.format(d),showHistory:B,hide:r},V={creator:h,contributorsStr:l,contributorSuffix:s},q={pv:v,uv:b,commentCount:w,likeCount:P,selectedType:R,setSelectedType:G};return c.a.createElement(n.a,{width:700,zIndex:999,footer:null,visible:t,onCancel:r},c.a.createElement("div",null,c.a.createElement("div",{className:m.statisticHead},__("统计详情")),c.a.createElement("div",{className:m.statisticBody},c.a.createElement(re,W),c.a.createElement(ae,V)),c.a.createElement("div",{className:m.interactHead},__("阅读数据")),c.a.createElement("div",{className:m.interactBody},c.a.createElement(ce,q),c.a.createElement(le,{key:R,selectedType:R,dataSource:I,showTag:"uv"===R,showDownload:"pv"===R||"uv"===R,tagMaps:M}))))}},4325:function(e,t,r){"use strict";var n=r(314);r.d(t,"a",(function(){return n.b}))},4326:function(e,t,r){"use strict";r.d(t,"b",(function(){return P}));r(95);var n=r(49),o=r(0),a=r.n(o),i=r(8),c=r.n(i),u=r(2747),l=r(3878),s=r(70),f=r(2780),d=r(2478),p=r(269),h=r(3923),m=r(3828),y=r(3939),v=r(126),g=r(3874);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}var _=["show_author_custom_text","show_author_id","show_author_option"];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===b(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function S(){S=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:j(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(T([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==b(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function j(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function x(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function k(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){x(a,n,o,i,c,"next",e)}function c(e){x(a,n,o,i,c,"throw",e)}i(void 0)}))}}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(e){var t=e.group,r=e.book,n=e.doc,a=e.actions,i=e.history,c=e.dispatch,u=T(Object(o.useState)(!1),2),l=u[0],m=u[1],g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(e)?e.find((function(e){return e.id===n.id||e.url===n.slug})):null},b=g(r.toc),w=!!b,E=f.a.shouldShowToc(r),x=function(){var e=k(S().mark((function e(t,o,a,i){var u,l,s,d;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=[],l=r.docs,u=l,s=a.targetBook,"move"!==i||s.id===r.id){e.next=8;break}return e.next=7,v.webProxy.docs.find({book_id:r.id});case 7:u=e.sent;case 8:if("copy"!==i||s.id!==r.id){e.next=12;break}return e.next=11,v.webProxy.docs.find({book_id:r.id});case 11:u=e.sent;case 12:return"destroy"===i&&(u=l.filter((function(e){return e.id!==n.id}))),e.next=15,c({type:"book/updateDocs",payload:u});case 15:if(o){e.next=23;break}if("destroy"!==i){e.next=19;break}return e.next=19,Object(y.a)(800);case 19:return e.next=21,f.a.getCatalogNodes(r.id);case 21:d=e.sent,o=d.toc;case 23:return c({type:"book/updateToc",payload:o}),e.abrupt("return",{newToc:o,newDocs:u});case 25:case"end":return e.stop()}}),e)})));return function(t,r,n,o){return e.apply(this,arguments)}}(),C=function(){var e=k(S().mark((function e(o,a){var c,u,l,s,p,h,m,y;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.a.isMixingType(r)){e.next=3;break}return window.location.href="/".concat(r.namespace),e.abrupt("return");case 3:E?(h=a.catalog,m=a.newCatalog,y=a.currentItem,c=f.a.getRedirectURL(h,m,{currentItem:y,group:t,book:r})):(u=a.docs,s=(l=void 0===u?[]:u).findIndex((function(e){return e.id===n.id})),(p=l[s+1])&&(c="/".concat(t.login,"/").concat(r.slug,"/").concat(p.slug))),c?i.push(c):window.location.href="/".concat(t.login,"/").concat(r.slug);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),P=function(){var e=k(S().mark((function e(o){var a,i,c;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=o,e.next=e.t0===s.a.DOC.delete.cmd?3:e.t0===s.a.DOC.move.cmd||e.t0===s.a.DOC.copy.cmd?9:e.t0===s.a.DOC.edit_meta.cmd?13:15;break;case 3:return e.next=5,x(null,null,{targetBook:r,currentItem:b},"destroy");case 5:return a=e.sent,i=a.newToc,C("delete",{docs:r.docs,catalog:r.toc,newCatalog:i,currentItem:g(r.toc)}),e.abrupt("break",16);case 9:return c=h.a.useViewModel({item:g(r.toc),group:t,book:r,doc:n,catalog:r.toc,onMove:function(e,t,n){x(e,t,n,"move"),n.targetBook.id!==r.id&&C("move",{docs:r.docs,catalog:e,newCatalog:t,currentItem:n.currentItem})},onCopy:function(e,t,r){x(e,t,r,"copy")},onDestroy:function(e,t,n){x(e,t,n,"destroy"),C("delete",{docs:r.docs,catalog:e,newCatalog:t,currentItem:n.currentItem})}}),o===s.a.DOC.copy.cmd&&c.showCopyToModal(),o===s.a.DOC.move.cmd&&c.showMoveToModal(),e.abrupt("break",16);case 13:return m(!0),e.abrupt("break",16);case 15:return e.abrupt("break",16);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=k(S().mark((function e(o){var a,u,l,s,f,d,h;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.show_author_custom_text,u=o.show_author_id,l=o.show_author_option,s=O(o,_),f=j(j({},s),{},{meta:{show_author_custom_text:a,show_author_id:u,show_author_option:l}}),e.next=4,p.a.updateDocMeta(f,n);case 4:if(d=e.sent){e.next=7;break}return e.abrupt("return");case 7:m(!1),c({type:"doc/update",payload:d}),h=r.docs.map((function(e){return e.id===d.id?d:e})),c({type:"book/updateDocs",payload:h}),i.push("/".concat(t.login,"/").concat(r.slug,"/").concat(d.slug));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{state:{currentCatalogNode:b,isCatalogNode:w,showDocMetaEditor:l},editActions:a,getCatalogNodeByToc:g,doDocAction:P,updateBookDocsAndToc:x,setShowDocMetaEditor:m,saveMeta:L}}function L(e){var t=e.group,r=e.book,o=e.doc,i=e.actions,c=e.history,f=e.dispatch,p=P({group:t,book:r,doc:o,actions:i,history:c,dispatch:f}),h=p.editActions,y=p.doDocAction,v=p.setShowDocMetaEditor,b=p.saveMeta,_=p.state,w=_.showDocMetaEditor,j=_.currentCatalogNode,E=_.isCatalogNode;return a.a.createElement("span",{className:"header-action-item header-action-item-more","data-aspm-click":"d223116"},a.a.createElement(u.a,{"data-testid":"doc-reader-more-actions",overlayClassName:g.a.popoverMore,direction:"circle",iconWidth:20,getPopupContainer:function(){return document.getElementById("header")},content:a.a.createElement(l.a,{commands:h,commandParams:E&&{toc_node_uuid:j.uuid,toc_node_url:j.url,toc_node_title:j.title},book:r,doc:o,onSelect:e.onSelect,onCommandsExecuted:function(t){var n=t.cmd;n!==s.a.DOC.create_review.cmd?d.a.isMixingType(r)&&y(n):e.dispatch({type:"review/update",payload:{showReviewDrawer:!0,showCreateReviewDrawer:!0}})}})}),w&&a.a.createElement(n.a,{width:514,visible:!0,title:__("文档设置"),footer:null,onCancel:function(){return v(!1)},bodyStyle:{maxHeight:"90vh",overflow:"auto",paddingTop:16}},a.a.createElement(m.a,{doc:o,book:r,group:t,save:b,hideMoreInfo:!0})))}L.propTypes={doc:c.a.object.isRequired,book:c.a.object.isRequired,group:c.a.object.isRequired,actions:c.a.array.isRequired,onSelect:c.a.func,dispatch:c.a.func.isRequired,history:c.a.object.isRequired},t.a=L},4398:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(){var e=o(Object(n.useState)(!1),2),t=e[0],r=e[1],a=Object(n.useRef)(null);return Object(n.useEffect)((function(){a.current&&a.current.clientWidth!==a.current.scrollWidth&&r(!0)}),[]),{ellipsisDomRef:a,hasEllipsis:t}}},4401:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p})),r.d(t,"DocStatisticModal",(function(){return h.default})),r.d(t,"DocStatisticProvider",(function(){return s})),r.d(t,"useDocStatisticStore",(function(){return f}));var n=r(0),o=r.n(n),a=r(447);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(){}var l=Object(n.createContext)({visible:!1,hide:u,show:u});function s(e){var t=i(Object(n.useState)(!1),2),r=t[0],a=t[1],c=Object(n.useMemo)((function(){return{visible:r,hide:function(){a(!1)},show:function(){a(!0)}}}),[r]);return o.a.createElement(l.Provider,{value:c},e.children)}function f(){return Object(n.useContext)(l)}var d=Object(a.c)((function(){return Promise.resolve().then(r.bind(null,4101))}),{suspense:!0});function p(){var e=f(),t=e.visible,r=e.hide;return Object(n.useEffect)((function(){t&&d.start()}),[t]),o.a.createElement(d,{visible:t,hide:r})}var h=r(4101)},4402:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(0),o=r.n(n),a=r(447),i=r(170);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={};function f(){return null}function d(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({display:"inline-block"},e.style);return o.a.createElement("span",{className:e.className,style:t})}function p(e){var t=e.name,n=e.style,c=e.className,u=Object(i.b)().isDarkMode,l="".concat(t,"Dark"),p=f,h=u?l:t;return s[h]?p=s[h]:u?(p=Object(a.b)((function(){return r(4037)("./".concat(l,".js")).catch((function(e){return{default:s[t]?s[t]:Object(a.b)((function(){return r(4037)("./".concat(t,".js"))}),{suspense:!0,fallback:o.a.createElement(d,{style:n,className:c})})}}))}),{suspense:!0,fallback:o.a.createElement(d,{style:n,className:c})}),s[l]=p):(p=Object(a.b)((function(){return r(4037)("./".concat(t,".js"))}),{suspense:!0,fallback:o.a.createElement(d,{style:n,className:c})}),s[h]=p),o.a.createElement(p,{style:n,className:c})}},5084:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return Ze})),r.d(t,"MoreFeaturesPanelExtraPropsProvider",(function(){return Be.a})),r.d(t,"useMoreFeaturesPanelExtraProps",(function(){return Be.b}));r(645);var n=r(214),o=(r(113),r(35)),a=r(0),i=r.n(a),c=r(555),u=r(13),l=r.n(u),s=r(42),f=r(70),d=r(447),p=r(3973),h=(r(529),r(306)),m=r(84),y=r.n(m),v={contentContainer:"docOperationTabContent-module_contentContainer_pj-fE",gridContainer:"docOperationTabContent-module_gridContainer_io1zz",adapterPresent:"docOperationTabContent-module_adapterPresent_+zGHc",adapterPresentButton:"docOperationTabContent-module_adapterPresentButton_xjI7S",gridItem:"docOperationTabContent-module_gridItem_auLUI",gridItemIconWrapper:"docOperationTabContent-module_gridItemIconWrapper_3DutZ",gridItemIcon:"docOperationTabContent-module_gridItemIcon_824Rd",gridItemText:"docOperationTabContent-module_gridItemText_BF9we",docWidthSetting:"docOperationTabContent-module_docWidthSetting_uGtPl",docIconWrapper:"docOperationTabContent-module_docIconWrapper_QVEbI",textWrapper:"docOperationTabContent-module_textWrapper_P6TYG",title:"docOperationTabContent-module_title_hZnNH",desc:"docOperationTabContent-module_desc_VxDc1",switchWrapper:"docOperationTabContent-module_switchWrapper_ZQczO",opertaionMenus:"docOperationTabContent-module_opertaionMenus_gctV0",menuHeader:"docOperationTabContent-module_menuHeader_dbQ0h",divide:"docOperationTabContent-module_divide_k2gBv",menuItem:"docOperationTabContent-module_menuItem_lC5io",menuIconWrapper:"docOperationTabContent-module_menuIconWrapper_XiRdx",menuIcon:"docOperationTabContent-module_menuIcon_s1LqR",menuText:"docOperationTabContent-module_menuText_kVtjJ",isDanger:"docOperationTabContent-module_isDanger_xfxaY"};function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e){var t=e.getEditorLayout,r=e.onClick,n=e.cmd,o=g(Object(a.useState)(t()),2),c=o[0];o[1];return i.a.createElement("div",{className:v.docWidthSetting},i.a.createElement("div",{className:v.docIconWrapper},i.a.createElement(s.b,{name:n.icon})),i.a.createElement("div",{className:v.textWrapper},i.a.createElement("div",{className:v.text},__(n.title)),i.a.createElement("div",{className:v.desc},__(n.describe))),i.a.createElement(h.a,{onChange:function(e){r(n.cmd,e?y.a.VIEWPORT.adapt:y.a.VIEWPORT.fixed)},size:"small",defaultChecked:c===y.a.VIEWPORT.adapt}))}var w=r(4043),j=["cmd","onClick"];function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E.apply(this,arguments)}function O(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function S(e){var t=e.cmds,r=e.onClick,n=e.doc,o=e.componentsPreload;return i.a.createElement("div",{className:v.gridContainer},t.map((function(e){return e.cmd===f.a.DOC.enter_presentation_mode.cmd?i.a.createElement("div",{key:e.cmd,className:l()(v.gridItem,v.adapterPresent)},i.a.createElement(w.a,{doc:n,button:function(t){var n=t.onPresent;return i.a.createElement("div",{className:v.adapterPresentButton,onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){r(e.cmd),n()}))},i.a.createElement("div",{className:v.gridItemIconWrapper},i.a.createElement(s.b,{name:e.sceneIcon,className:v.gridItemIcon})),i.a.createElement("div",{className:v.gridItemText},e.title))}})):e.cmd===f.a.DOC.show_knowledge_graph.cmd?i.a.createElement(x,{key:e.cmd,cmd:e,onClick:r,onMouseOver:function(){return o.SkylinkModal.preload()},"data-aspm-click":"d223107"}):i.a.createElement(x,{key:e.cmd,cmd:e,onClick:r})})))}function x(e){var t=e.cmd,r=e.onClick,n=O(e,j);return i.a.createElement("div",E({key:t.cmd,className:v.gridItem,onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return r(t.cmd)}))},n),i.a.createElement("div",{className:v.gridItemIconWrapper},i.a.createElement(s.b,{name:t.sceneIcon,className:v.gridItemIcon})),i.a.createElement("div",{className:v.gridItemText},t.title))}function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function T(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L(e){var t=e.cmds,r=e.onClick,n=e.componentsPreload;if(0===t.length)return null;var o=C(t),a=o[0],c=o.slice(1);return i.a.createElement("div",{className:v.opertaionMenus},i.a.createElement("div",{className:v.menuHeader},i.a.createElement("div",{className:v.menuItem,onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return r(a.cmd)})),onMouseOver:function(){return n.EditDocMetaPanel.preload()}},i.a.createElement("div",{className:v.menuIconWrapper},i.a.createElement(s.b,{name:a.icon,className:v.menuIcon})),i.a.createElement("div",{className:v.menuText},a.title))),i.a.createElement("div",{className:v.divide}),i.a.createElement("div",{className:v.menuBody},c.map((function(e){return i.a.createElement("div",{key:e.cmd,className:l()(v.menuItem,T({},v.isDanger,"delete"===e.cmd)),onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return r(e.cmd)}))},i.a.createElement("div",{className:v.menuIconWrapper},i.a.createElement(s.b,{name:e.icon,className:v.menuIcon})),i.a.createElement("div",{className:v.menuText},e.title))}))))}function I(e){var t=e.actionsMap,r=e.getEditorLayout,n=e.onItemClick,o=e.doc,a=e.componentsPreload,c=t.gridCmds,u=t.widthSettingCmd,l=t.menuCmds;return i.a.createElement("div",{className:v.contentContainer},(null==c?void 0:c.length)>0?i.a.createElement(S,{cmds:c,onClick:n,doc:o,componentsPreload:a}):null,u?i.a.createElement(_,{cmd:u,onClick:n,getEditorLayout:r}):null,i.a.createElement(L,{cmds:l,onClick:n,componentsPreload:a}))}var A=r(2497),N=r.n(A),D=r(2825),R=r(4402),M=r(575),F={contentContainer:"docInfoTabContent-module_contentContainer_gsZxS",divide:"docInfoTabContent-module_divide_njsRd",infoItem:"docInfoTabContent-module_infoItem_SOSOp",infoItemName:"docInfoTabContent-module_infoItemName_QyDuI",infoIcon:"docInfoTabContent-module_infoIcon_1fIbt",infoValueWrapper:"docInfoTabContent-module_infoValueWrapper_STlB+",boldValue:"docInfoTabContent-module_boldValue_EIaey",infoItemValue:"docInfoTabContent-module_infoItemValue_9QlLv",operation:"docInfoTabContent-module_operation_7Z9sK",docStatisticDetail:"docInfoTabContent-module_docStatisticDetail_nJKCP",detailLeft:"docInfoTabContent-module_detailLeft_f8zrS",statisticIcon:"docInfoTabContent-module_statisticIcon_qcX19",detailText:"docInfoTabContent-module_detailText_g+hds",rightTitle:"docInfoTabContent-module_rightTitle_R8UaG",rightDesc:"docInfoTabContent-module_rightDesc_TeznL",detailArrowIcon:"docInfoTabContent-module_detailArrowIcon_CVQ12",menuItem:"docInfoTabContent-module_menuItem_R3eoi",menuIconWrapper:"docInfoTabContent-module_menuIconWrapper_5HwgU",menuIcon:"docInfoTabContent-module_menuIcon_LqPGU",menuText:"docInfoTabContent-module_menuText_7I8uM"},G=r(4398),U=r(4401);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function z(){z=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==B(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function W(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function V(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||K(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||K(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){if(e){if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(e,t):void 0}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function H(e){var t=e.icon,r=e.name,n=e.value,a=e.suffix,c=Object(G.a)(),u=c.hasEllipsis,l=c.ellipsisDomRef,s=i.a.createElement("div",{className:F.infoValueWrapper},i.a.createElement("div",{ref:l,className:F.infoItemValue},n),i.a.createElement("div",null,a));return i.a.createElement("div",{className:F.infoItem},i.a.createElement("div",{className:F.infoItemName},t,r),u?i.a.createElement(o.a,{title:n,placement:"bottomRight"},s):s)}function Y(e){var t,r=e.getWordCount,n=e.doc,o=e.group,c=Object(M.b)().isYuque,u=!0===(null===(t=n.abilities)||void 0===t?void 0:t.update)&&(!c||c&&0!==o.organization_id),l=n.contributors,s=n.last_editor,f=n.word_count,d=q(Object(a.useState)(0),2),p=d[0],h=d[1],m=i.a.useMemo((function(){var e=l.findIndex((function(e){return e.name===s.name})),t=V(l);-1!==e&&t.splice(e,1);var r=t;return r.unshift(s),r.map((function(e){return e.name})).join("、")}),[l,s]),y=l.length>=2?" ".concat(__("{count}人",{count:l.length})):null,v=Object(U.useDocStatisticStore)().show;return Object(a.useEffect)((function(){function e(){var t;return t=z().mark((function e(){var t;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.find)({doc_id:n.id,doc_type:"Doc",named:!0,limit:100});case 2:t=e.sent,h(t.length);case 4:case"end":return e.stop()}}),e)})),e=function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){W(a,n,o,i,c,"next",e)}function c(e){W(a,n,o,i,c,"throw",e)}i(void 0)}))},e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),i.a.createElement("div",{className:F.contentContainer},i.a.createElement("div",{className:F.docInfo},"Doc"===n.type&&i.a.createElement(H,{icon:i.a.createElement(R.a,{name:"Saveastemplate2",className:F.infoIcon}),name:__("字数"),value:r()||f||0}),i.a.createElement(H,{icon:i.a.createElement(R.a,{name:"ActionVersion",className:F.infoIcon}),name:__("历史版本"),value:i.a.createElement("span",{className:F.boldValue},p>99?"99+":p)}),i.a.createElement(H,{icon:i.a.createElement(R.a,{name:"Date",className:F.infoIcon}),name:__("更新时间#readPage"),value:N.a.format(n.content_updated_at)}),i.a.createElement(H,{icon:i.a.createElement(R.a,{name:"Assignee",className:F.infoIcon}),name:__("作者#readPage"),value:m,suffix:y}),i.a.createElement("div",{className:F.divide}),i.a.createElement(H,{icon:i.a.createElement(R.a,{name:"NavBook1",className:F.infoIcon}),name:__("阅读数#readPage"),value:i.a.createElement("span",{className:F.boldValue},n.hits||0)}),i.a.createElement(H,{icon:i.a.createElement(R.a,{name:"CommentReply",className:F.infoIcon}),name:__("评论数"),value:i.a.createElement("span",{className:F.boldValue},n.comments_count||0)}),i.a.createElement(H,{icon:i.a.createElement(R.a,{name:"Like",className:F.infoIcon}),name:__("点赞数"),value:i.a.createElement("span",{className:F.boldValue},n.likes_count||0)})),i.a.createElement("div",{className:F.operation},u?i.a.createElement("div",{className:F.docStatisticDetail,onClick:v},i.a.createElement("div",{className:F.detailLeft},i.a.createElement(R.a,{name:"Statistics",className:F.statisticIcon})),i.a.createElement("div",{className:F.detailText},i.a.createElement("div",{className:F.rightTitle},__("统计详情")),i.a.createElement("div",{className:F.rightDesc},__("查看访问人员明细和更多分析"))),i.a.createElement(R.a,{name:"ArrowRight",className:F.detailArrowIcon})):null))}var Z={container:"moreFeaturesTab-module_container_OYy7d",toggleShow:"moreFeaturesTab-module_toggleShow_CvZMQ",featuresTab:"moreFeaturesTab-module_featuresTab_vfMt6",tabBar:"moreFeaturesTab-module_tabBar_IP4dl",tabNav:"moreFeaturesTab-module_tabNav_PI68Z",tabNavContent:"moreFeaturesTab-module_tabNavContent_gGfBc",icon:"moreFeaturesTab-module_icon_pSX83",bottomLine:"moreFeaturesTab-module_bottomLine_yGW3o",active:"moreFeaturesTab-module_active_byq6q"},X=r(269),Q=r(2588),J=r.n(Q),ee=r(62),te=r(4325),re=r(3617),ne=r(3685),oe=r(2680),ae=r(586),ie=r(2478),ce=(r(95),r(49)),ue=r(553);function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fe=Object(ue.a)({loader:function(){return r.e(115).then(r.bind(null,3704))}});function de(e){var t=e.contentReportVisible,r=e.contentTargetId,n=e.contentTargetType,o=e.toggleContentReport;return i.a.createElement(ce.a,{destroyOnClose:!0,title:null,footer:null,visible:t,onCancel:function(){return o(!1)}},i.a.createElement(fe,{targetId:r,targetType:n,onClose:function(){return o(!1)}}))}var pe=r(2819),he=r(2820),me=r(4025);function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function ve(){ve=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==ye(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,c,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function ge(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function be(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ge(a,n,o,i,c,"next",e)}function c(e){ge(a,n,o,i,c,"throw",e)}i(void 0)}))}}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function je(e){var t=e.blockingDoc,r=e.contentTargetType,n=e.onSubmitBlock,o=e.onCancelBlock;return i.a.createElement(me.a,{punishType:r,punishSelect:["blocked","banned"],doc:t,onSubmit:n,onCancel:o})}var Ee=r(4326);function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function Se(e){return function(e){if(Array.isArray(e))return Le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){Te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Te(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Oe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Oe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||Pe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){if(e){if("string"==typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Le(e,t):void 0}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ie(e){var t=e.doc,r=e.book,n=e.group,o=e.me,i=e.version,u=e.showHistory,l=e.onClickInMoreFeaturesTab,s=Object(c.e)(),d=Object(ee.useHistory)(),p=Object(ne.a)(t),h=Object(a.useRef)(null),m=Object(M.b)(),y=Ce(Object(a.useState)(E(t)),2),v=y[0],g=y[1],b=X.a.adjustCommands(v),_=function(e){var t=e.doc,r=e.note,n=t&&t.id?t.id:r&&r.id,o=t&&t.id?"Doc":"Note",i=le(Object(a.useState)(!1),2),c=i[0],u=i[1];return{contentTargetId:n,contentTargetType:o,contentReportVisible:c,toggleContentReport:function(e){u(e=void 0!==e?e:!c)}}}({doc:t}),w=function(e){var t=e.doc,r=void 0===t?{id:null}:t,n=e.note,o=window.appData.me,i=void 0===o?{}:o,u=Object(c.e)(),l=r&&r.id?"Doc":"Note",s=_e(Object(a.useState)(null),2),f=s[0],d=s[1],p=function(){var e=be(ve().mark((function e(t){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.id){e.next=3;break}return window.location.reload(),e.abrupt("return");case 3:return e.next=5,u({type:"doc/update",payload:t});case 5:d(null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{blockingDoc:f,contentTargetType:l,onBlock:function(){d(r&&r.id?r:n)},onUnBlock:function(){var e,t=i.isSecurityOperator;ce.a.confirm({content:"确认取消屏蔽文档？",okText:"确认",cancelText:"关闭",onOk:(e=be(ve().mark((function e(){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r||!r.id){e.next=10;break}if(!t){e.next=6;break}return e.next=4,Object(pe.unblockForSecurityOps)({id:null==r?void 0:r.id});case 4:e.next=7;break;case 6:Object(pe.unblock)({id:null==r?void 0:r.id});case 7:p({read_status:1}),e.next=17;break;case 10:if(!t){e.next=15;break}return e.next=13,Object(he.unblockForSecurityOps)({id:null==r?void 0:r.id});case 13:e.next=16;break;case 15:Object(he.unblock)({id:null==n?void 0:n.id});case 16:window.location.reload();case 17:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})},onSubmitBlock:p,onCancelBlock:function(){d(null)}}}({doc:t});function j(){var e=window.appData,a=e.isPublicCloud,i=e.share;return a&&t.user_id!==o.id&&(Object(re.a)(n,r,t)||Object(re.b)(i,r,t))}function E(t){var r,n=e.version,o=e.book,a=e.me,i=e.note,c={disableDocumentCopy:m.settings&&!0===m.settings.disableDocumentCopy,isDocCollaborator:m.isDocCollaborator,page:m.sharePage?"share":"read",isYuque:m.isYuque},u=n?X.a.additionalActionsInVersionReadPage(t):X.a.additionalActionsInReadPage(t,o,c),l=f.a.DOC,s=l.translate_zh,d=l.translate_en,p=l.view_original,y=l.ban_doc,v=l.unban_doc,g=l.content_report,b=l.divide,_=l.fullscreen,w=l.exit_fullscreen;if(t.content&&"Doc"===t.type&&!h.current){var E,O,S=new URLSearchParams(window.location.search),x=Object(te.a)(t.content.replace(/<[^>]+>/g,"")||t.description||t.title),k=S.get("translate")||("zh"===x?"en":"zh");if(h.current={srcLanguage:x,tgtLanguage:k},x!==k&&["en","zh"].includes(k)&&(E=S.has("translate")?p:"en"===k?d:s),null!=a&&a.id)null===(O=u[0].actions)||void 0===O||O.splice(1,0,E)}(j()&&(u.push(b),u.push(g)),a.isAdmin||a.isSecurityOperator)&&(u.push(b),u.push(y),((null==t?void 0:t.read_status)>=99||(null==i||null===(r=i.doclet)||void 0===r?void 0:r.status)>=99)&&u.push(v));if(J.a.isFullscreen){var T=u.findIndex((function(e){return e.cmd===_.cmd}));-1!==T&&u.splice(T,1,w)}return u}function O(){X.a.translateDoc(ke(ke({},h.current),{},{withComment:r.enable_comment}))}Object(a.useEffect)((function(){p!==t&&(h.current=null,g(E(t)))}),[p,t]),Object(a.useEffect)((function(){var e=new URLSearchParams(window.location.search);e.has("translate")&&(h.current=ke(ke({},h.current),{},{tgtLanguage:e.get("translate")}),O())}),[]);var S=Object(Ee.b)({group:n,book:r,doc:t,actions:b,history:d,dispatch:s}),x=S.doDocAction,k=S.saveMeta,T=S.state,C=T.currentCatalogNode,P=T.isCatalogNode&&{toc_node_uuid:C.uuid,toc_node_url:C.url,toc_node_title:C.title},L=Object(oe.a)({book:r,doc:t,commandParams:P,dispatch:s,onCommandsExecuted:function(e){var t=e.cmd;t!==f.a.DOC.create_review.cmd?ie.a.isMixingType(r)&&x(t):s({type:"review/update",payload:{showReviewDrawer:!0,showCreateReviewDrawer:!0,isFromTab:!0}})}});function I(e){var t=window.location,r=f.a.DOC,n=r.translate_en,o=r.translate_zh,a=r.view_original;e.set("translate",h.current.tgtLanguage),d.push("".concat(t.pathname,"?").concat(e.toString())),O(),setTimeout((function(){var e="zh"===h.current.tgtLanguage?o:n,t=v.find((function(e){return"scene"===e.type}));if(t){var r,i=null===(r=t.actions)||void 0===r?void 0:r.findIndex((function(t){return t.cmd===e.cmd}));-1!==i&&t.actions.splice(i,1,a)}g(Se(v))}))}function A(e){var t=Se(v);if(e){var r=t.findIndex((function(e){return e.cmd===f.a.DOC.fullscreen.cmd}));-1!==r&&t.splice(r,1,f.a.DOC.exit_fullscreen)}else{var n=t.findIndex((function(e){return e.cmd===f.a.DOC.exit_fullscreen.cmd}));-1!==n&&t.splice(n,1,f.a.DOC.fullscreen)}g(t)}Object(a.useEffect)((function(){function e(){J.a.isFullscreen?A(!0):A(!1)}return J.a.onchange(e),function(){J.a.off(e)}}),[]);return{actions:b,showSkylinkEntry:function(){return!i&&["Doc","Board","Sheet"].includes(t.type)},onClick:function(e,t){!function(e){var t=e.key,r=window.location,n=new URLSearchParams(r.search),o=f.a.DOC,a=o.translate_en,i=o.translate_zh,c=o.view_original,l=o.history,s=o.ban_doc,d=o.unban_doc,p=o.content_report,h=o.fullscreen,m=o.exit_fullscreen;switch(t){case a.cmd:case i.cmd:I(n);break;case h.cmd:A(!0);break;case m.cmd:A(!1);break;case c.cmd:n.delete("translate"),r.replace("".concat(r.pathname,"?").concat(n.toString()));break;case l.cmd:u();break;case s.cmd:w.onBlock();break;case d.cmd:w.onUnBlock();break;case p.cmd:_.toggleContentReport()}}({key:e}),l({key:e}),L.doAction(e,t),Object(ae.a)("c34619.d69461",{create_type:e})},docActionModel:L,contentReportViewModel:_,auditBlockViewModel:w,commandParams:P,saveMeta:k}}var Ae=r(3671),Ne=r(3668),De=r(3621),Re=r(3664),Me=r(2753),Fe=r(38),Ge=r(3691);function Ue(e){var t=e.doc,r=e.book,n=e.commandParams,o=e.docActionModel,a=e.contentReportViewModel,i=e.auditBlockViewModel,c=o.cmd,u=o.sendAlimail,l=o.mailSending,s=o.reset,d=o.doAction,p=o.setSendAlimail,h=o.setMailSending,m=o.contextHolder,v=a.contentReportVisible,g=a.contentTargetId,b=a.contentTargetType,_=a.toggleContentReport,w=i.blockingDoc,j=i.onSubmitBlock,E=i.onCancelBlock;return React.createElement(React.Fragment,null,m,c===f.a.DOC.export_doc.cmd&&React.createElement(De.a,{doc:t,bookId:r.id,onCancel:s,exportParams:n}),c===f.a.BOOK.export_book.cmd&&React.createElement(Me.a,{visible:!0,book:r,exportParams:n,onCancel:s}),c===f.a.DOC.import_to_doc.cmd&&React.createElement(Re.a,{book:r,formats:X.a.getImportFormats({multi:!1}),importType:y.a.IMPORT_TYPE.PARSE,onCancel:s,onSuccess:function(t){e.onCommandsExecuted({cmd:c,result:t})}}),c===f.a.DOC.import_to_book.cmd&&React.createElement(Re.a,{book:r,importParams:n,formats:X.a.getImportFormats({multi:!0}),importType:y.a.IMPORT_TYPE.CREATE,onCancel:s,onSuccess:function(t){e.onCommandsExecuted({cmd:c,result:t})},group:window.appData.group}),c===f.a.DOC.save_as_template.cmd&&React.createElement(Ne.a,{visible:c===f.a.DOC.save_as_template.cmd,onCancel:s,modalTitle:__("另存为模板"),book:r,doc:e.doc,group:window.appData.group,organization:window.appData.organization,docletType:e.doc.type,onOpenTemplateSelector:function(){return d(f.a.DOC.create_from_template.cmd)},templateProxy:Fe.a.templates.v1,docProxy:Fe.a.docs,inEdit:e.inEdit}),c===f.a.DOC.save_published_as_version.cmd&&React.createElement(Ae.a,{doc:t,docDomain:"Doc",type:"published",onCancel:s,docVersionProxy:Fe.a.docVersions}),React.createElement(ce.a,{width:500,visible:u,footer:null,closable:!l,maskClosable:!1,onCancel:function(){p(!1)}},u&&React.createElement(Ge.a,{onMailSended:function(){h(!1)},onMailSending:function(){h(!0)},doc:t})),v?React.createElement(de,{contentReportVisible:v,contentTargetId:g,contentTargetType:b,toggleContentReport:_}):null,w?React.createElement(je,{blockingDoc:w,contentTargetType:b,onSubmitBlock:j,onCancelBlock:E}):null)}var Be=r(4036);function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function We(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ze(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ze(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ke=Object(d.b)((function(){return r.e(132).then(r.bind(null,5090))}),{suspense:!0}),$e=Object(d.b)((function(){return r.e(100).then(r.bind(null,5108))}),{suspense:!0}),He={DocOpertaion:"DocOpertaion",DocInfo:"DocInfo"};var Ye=Object(c.d)((function(e){return{me:e.me,group:e.group,book:e.book,doc:e.doc,skylink:e.skylink}}))((function(e){var t,r=e.onLayout,u=e.me,d=e.group,h=e.book,m=e.doc,y=e.skylink,v=void 0===y?{}:y,g=Ve(Object(a.useState)(!1),2),b=g[0],_=g[1],w=Object(c.e)(),j=Object(a.useRef)(null),E=Object(p.a)().sidePanelManager,O=Object(Be.b)().showHistory,S=Ie({me:u,group:d,book:h,doc:m,showHistory:O,onClickInMoreFeaturesTab:function(e){var t=e.key;t===f.a.DOC.show_knowledge_graph.cmd&&w({type:"skylink/update",payload:{modalVisible:!0}}),t===f.a.DOC.edit_meta.cmd&&E.show("EditDocMeta",{panelProps:{doc:m,book:h,group:d,saveMeta:L,onGoBack:D,onClose:R}}),t===f.a.DOC.print.cmd||f.a.DOC.export_doc}}),x=S.actions,k=S.showSkylinkEntry,T=S.onClick,C=S.docActionModel,P=S.commandParams,L=S.saveMeta,A=S.contentReportViewModel,N=S.auditBlockViewModel,D=function(){E.show("MoreFeature")},R=function(){E.hide()},M={SkylinkModal:{preload:function(){return $e.preload()}},EditDocMetaPanel:{preload:function(){return Ke.preload()}}},F=Object(a.useMemo)((function(){var e,t,r=x.filter((function(e){return e.cmd!==f.a.DOC.divide.cmd})).map((function(e){return"scene"===e.type&&("Doc"===m.type&&e.actions.push(f.a.DOC.enter_presentation_mode),k()&&e.actions.push(f.a.DOC.show_knowledge_graph)),e})),n="scene"===(null===(e=r[0])||void 0===e?void 0:e.type),o=n?null===(t=r[0])||void 0===t?void 0:t.actions:[],a=n?r.slice(1):r;return{operationTabActionsMap:{gridCmds:[f.a.DOC.enter_presentation_mode,f.a.DOC.show_knowledge_graph,f.a.DOC.create_review,f.a.DOC.send_mail,f.a.DOC.translate_zh,f.a.DOC.translate_en,f.a.DOC.view_original].filter((function(e){return o.find((function(t){return t.cmd===e.cmd}))})),widthSettingCmd:"Doc"===m.type&&"markdown"!==m.format?f.a.DOC.document_layout:void 0,menuCmds:[f.a.DOC.edit_meta,f.a.DOC.fullscreen,f.a.DOC.exit_fullscreen,f.a.DOC.save_as_template,f.a.DOC.history,f.a.DOC.print,f.a.DOC.export_doc,f.a.DOC.copy,f.a.DOC.move,f.a.DOC.delete,f.a.DOC.content_report,f.a.DOC.ban_doc,f.a.DOC.unban_doc].filter((function(e){return a.find((function(t){return t.cmd===e.cmd}))}))},infoActionsMap:{versionCmds:[].filter((function(e){return a.find((function(t){return t.cmd===e.cmd}))}))}}}),[x]),G=F.operationTabActionsMap,U=F.infoActionsMap;return Object(a.useEffect)((function(){r({width:305})}),[]),Object(a.useEffect)((function(){setTimeout((function(){_(!0)})),E.registerContent("EditDocMeta",Ke)}),[]),i.a.createElement("div",{ref:j,className:l()(Z.container,We({},Z.toggleShow,b))},null!==(t=m.abilities)&&void 0!==t&&t.update?i.a.createElement(n.a,{className:Z.featuresTab,defaultActiveKey:He.DocOpertaion,renderTabBar:function(e){return i.a.createElement("div",{className:Z.tabBar},i.a.createElement("div",{className:Z.tabNav},i.a.createElement(o.a,{title:__("操作"),mouseEnterDelay:1,placement:"bottom"},i.a.createElement("div",{className:l()(Z.tabNavContent,We({},Z.active,e.activeKey===He.DocOpertaion)),onClick:function(){return e.onTabClick(He.DocOpertaion)}},i.a.createElement(s.b,{name:"functionboard",width:18,height:18,className:Z.icon}),i.a.createElement("div",{className:Z.bottomLine})))),i.a.createElement("div",{className:Z.tabNav},i.a.createElement(o.a,{title:__("信息"),mouseEnterDelay:1,placement:"bottom"},i.a.createElement("div",{className:l()(Z.tabNavContent,We({},Z.active,e.activeKey===He.DocInfo)),onClick:function(){return e.onTabClick(He.DocInfo)}},i.a.createElement(s.b,{name:"information",width:18,height:18,className:Z.icon}),i.a.createElement("div",{className:Z.bottomLine})))))}},i.a.createElement(n.a.TabPane,{key:He.DocOpertaion},i.a.createElement(I,{doc:m,actionsMap:G,onItemClick:T,getEditorLayout:C.getEditorLayout,componentsPreload:M})),i.a.createElement(n.a.TabPane,{key:He.DocInfo},i.a.createElement(Y,{cmds:U.versionCmds,getWordCount:C.getWordCount,doc:m,group:d,onClick:T})),i.a.createElement(Ue,{book:h,doc:m,commandParams:P,docActionModel:C,contentReportViewModel:A,auditBlockViewModel:N}),v.modalVisible&&i.a.createElement($e,null)):i.a.createElement(I,{doc:m,actionsMap:G,onItemClick:T,getEditorLayout:C.getEditorLayout,componentsPreload:M}))}));Ye.displayName="ConnectedMoreFeaturesTab";var Ze=Ye},528:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(167),i=r.n(a),c=r(2723),u=r(2019),l=r(165),s=r(75),f=r(259),d=r(2022),p=r(1850),h=r(270);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(){g=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var y={};u(y,a,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(T([])));b&&b!==t&&r.call(b,a)&&(y=b);var _=h.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function o(n,a,i,c){var u=s(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==m(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,c)}))}c(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,n(_,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(j.prototype),u(j.prototype,i,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(_),u(_,c,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function b(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){b(a,n,o,i,c,"next",e)}function c(e){b(a,n,o,i,c,"throw",e)}i(void 0)}))}}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function j(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}var O=h.memberSelectorType.GROUP,S=h.memberSelectorType.BOOK,x=h.memberSelectorType.SIMPLE_WITH_ROLE,k=h.memberSelectorType.SIMPLE,T=h.memberSelectorType.DOC,C=h.memberSelectorType.LIST,P=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,"serializeUserPostBody",(function(t){return e.serializeUserPostBody(t)})),j(this,"enableDepthAll",(function(){return!1})),j(this,"enableDepSelect",(function(){var e=window.appData.isYuque;return t.type===k||!e&&[O,S,x].includes(t.type)})),j(this,"adpatUIListData",function(){var e=_(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j(this,"adpatUINavData",function(){var e=_(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j(this,"getRoles",(function(e){return Object(d.c)(e)})),j(this,"isDepartment",(function(t){return e.isDepartment(t)})),j(this,"isUser",(function(t){return e.isUser(t)})),j(this,"getRealUsers",(function(e){return e})),j(this,"getAddRoles",(function(){var e=t.getRoles(t.type),r=t.getSupportRoles();return e.filter((function(e){return r.includes(e.value)}))})),j(this,"getInviteAddRoles",_(g().mark((function e(){var r,n,a,i,c,u;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.appData.isYuque,a=t.getRoles(t.type),i=t.getSupportRoles(),c=a.filter((function(e){return i.includes(e.value)})),!t.organization||!t.organization.id){e.next=8;break}return e.next=7,s.a.canIndirectAddOrgMember(t.organization);case 7:u=e.sent;case 8:return c=n&&null!==(r=t.organization)&&void 0!==r&&r.id?(c=c.map((function(e){return v(v({},e),{},{roleTip:t.type===S?__("仅空间内获得链接的人可获得权限"):__("仅空间内获得链接的人可成为"),allow_outsider:f.ALLOW_OUTSIDER.NORMAL,disabled:!1,unique:"".concat(e.key,"-NOT-ALLOW_OUTSIDER")})}))).concat(c.map((function(e){return v(v({},e),{},{roleTip:t.type===S?__("所有获得链接的人可获得权限"):__("所有获得链接的人可成为"),allow_outsider:f.ALLOW_OUTSIDER.ALLOW,disabled:!u,disabled_text:o.a.createElement(o.a.Fragment,null,__("管理员已关闭空间外人员添加权限，请联系管理员开启。"),o.a.createElement("a",{target:"_blank",href:"https://www.yuque.com/yuque/rvzzxz/csb5nu"},__("查看帮助"))),unique:"".concat(e.key,"-ALLOW_OUTSIDER")})}))):c.map((function(e){return v(v({},e),{},{roleTip:t.type===S?__("访问链接即可获得权限"):__("通过链接邀请成为"),allow_outsider:f.ALLOW_OUTSIDER.NORMAL,disabled:!1,unique:"".concat(e.key,"-NOT-ALLOW_OUTSIDER")})})),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))),j(this,"getUserCount",(function(e){var t=0;return e.forEach((function(e){e.user_count?t+=e.user_count:t+=1})),t})),this.options=r,this.type=r.type,this.list=r.list,this.doc=r.doc,this.book=r.book,this.group=r.group,this.organization=r.organization,this.target=r[this.type],this.typeName=Object(c.a)(this.target?this.target.type:this.type),this.type===O&&this.target&&l.a.isPublication(this.target)&&(this.typeName=__("知识小组")),r.members&&r.members.length&&this.setUid(r.members),this.members=r.members||[],[x,k].includes(this.type)&&(this.me=r.me),this.selected=[],this.enable=!0,this.validRoles=this.getAddRoles(),this.inviteValidRoles=this.getInviteAddRoles()}var t,r,n,a;return t=e,r=[{key:"check",value:(a=_(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.warn("not implement");case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"getIconUrl",value:function(){return null}},{key:"getIconName",value:function(){return null}},{key:"setUid",value:function(e){if(e)return Array.isArray(e)?Object(u.format)(e):Object(u.formatOne)(e)}},{key:"serialize",value:function(e){var t=v(v({},e),{},{users:this.adpatUIListData(this.setUid(e.users)),navs:this.adpatUINavData(this.setUid(e.parent||e.parents))});return this.enableDepthAll()&&(void 0!==e.user_count&&(t.user_count=e.user_count),e.depthUsers&&(t.depthUsers=this.adpatUIListData(this.setUid(e.depthUsers)))),t}},{key:"getSupportRoles",value:function(){var e=[],t=d.a[this.type];return this.type===O?e=[t.member,t.readonly]:this.type===S||this.type===T?e=[t.edit,t.readonly]:this.type===C&&(e=[t.member]),this.options.supportRoles||e}},{key:"getMembers",value:function(e){return e?this.members.filter((function(t){return t.role===e})):this.members}},{key:"getMemberByUser",value:function(e){return this.members?this.members.find((function(t){return Object(p.b)(t.user,e)})):null}},{key:"isOwner",value:function(){return!1}},{key:"isMember",value:function(){return!1}},{key:"isMemberOwner",value:function(){return!1}}],n=[{key:"serializeUserPostBody",value:function(e){var t=["id","user_id","role","login","workid","work_id","name","provider_type","provider_userid"];if(Array.isArray(e))return e.map((function(e){return i()(e,t)})).map((function(e){return e.workid=e.workid||e.work_id,e}));var r=i()(e,t);return r.workid=e.workid||e.work_id,r}}],r&&w(t.prototype,r),n&&w(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();j(P,"isDepartment",(function(e){return e.type&&"department"===e.type.toLowerCase()})),j(P,"isUser",(function(e){return!e.type||"user"===e.type.toLowerCase()})),t.a=P},530:function(e,t,r){var n=r(271),o=r(206),a=r(432),i=r(358);e.exports=function(e,t){if(null==e)return{};var r=n(i(e),(function(e){return[e]}));return t=o(t),a(e,r,(function(e,r){return t(e,r[0])}))}},617:function(e,t,r){"use strict";t.a={sharePanel:"styles-module_sharePanel_s5kBA",main:"styles-module_main_TU-q3",mainIntro:"styles-module_mainIntro_ZLSq3",firstItem:"styles-module_firstItem_PMwrF",inviteItem:"styles-module_inviteItem_bvtuN",shareDescText:"styles-module_shareDescText_djXr6",itemTitle:"styles-module_itemTitle_L8kbw",memberBadge:"styles-module_memberBadge_VNook",memberAbleIcon:"styles-module_memberAbleIcon_xgapq",itemIcon:"styles-module_itemIcon_QRd1N",appointIcon:"styles-module_appointIcon_FKaJv",publicIcon:"styles-module_publicIcon_93Lmu",inviteIconLi:"styles-module_inviteIconLi_Yti7e",dot:"styles-module_dot_mUU81",inviteIcon:"styles-module_inviteIcon_0m0Q-",shareLinkSet:"styles-module_shareLinkSet_gw+kY",description:"styles-module_description_mY+Fb",shareLinkShow:"styles-module_shareLinkShow_yHgY+",qrCode:"styles-module_qrCode_S96ih",shareButton:"styles-module_shareButton_9iiSX",sharePublic:"styles-module_sharePublic_NAGqa",shareQrCode:"styles-module_shareQrCode_klQhV",shareQrCodeIcon:"styles-module_shareQrCodeIcon_yeZKy",moreConfigs:"styles-module_moreConfigs_HY+LU",popover:"styles-module_popover_RNBo9"}},658:function(e,t,r){var n=r(357);e.exports=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?n(e,void 0,t):[]}},669:function(e,t,r){"use strict";r(2599);var n=r(1822);r(1982);t.a=n.a}}]);